;/*FB_PKG_DELIM*/

__d("PolarisAPILikePost",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/like/",{path:{media_id:e}})}l.likePost=e}),98);
__d("PolarisAPIPostNotifyGuardianCall",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r="/api/v1/users/notify_guardian_call/",a={guardian_igid:e,reported_category:n,reported_igid:t};return o("PolarisInstapi").apiPost(r,{body:a}).then(function(e){return e.data})}l.postNotifyGuardianCall=e}),98);
__d("PolarisAPISavePost",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/save/",{path:{media_id:e}})}l.savePost=e}),98);
__d("PolarisAPIUnlikePost",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/unlike/",{path:{media_id:e}})}l.unlikePost=e}),98);
__d("PolarisAPIUnsavePost",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/unsave/",{path:{media_id:e}})}l.unsavePost=e}),98);
__d("PolarisFRXBlockUserFollowupModal.react",["CometPlaceholder.react","CometRelay","IGDBlockUserDialogOffMsys.entrypoint","IGDSConfirmDialog.react","IGDSGlimmer.react","JSResourceForInteraction","PolarisBlockDialogContainer.react","PolarisFRXWebReportStrings","PolarisGenericStrings","PolarisLinkBuilder","PolarisNavigationUtils","PolarisReactRedux.react","PolarisReportConstants","isStringNullOrEmpty","lazyLoadComponent","polarisRelationshipSelectors.react","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback,c=r("lazyLoadComponent")(r("JSResourceForInteraction")("IGDBlockUserDialog.react").__setRef("PolarisFRXBlockUserFollowupModal.react"));function d(e,t){var n=e.userToBlock.id;return o("polarisRelationshipSelectors.react").getRelationship(t.relationships,n)}function m(e){e.onClose&&e.onClose()}function p(e){var t=o("react-compiler-runtime").c(24),n;t[0]!==e?(n=function(n){return d(e,n)},t[0]=e,t[1]=n):n=t[1];var a=o("PolarisReactRedux.react").useSelector(n),l=e.frxObjectType,u=e.isGroupThread,p=e.onClose,g=e.threadKey,h=e.userToBlock,y=e.useSimpleBlockModalWithoutRefresh,C=h.fbidV2,b=h.id,v=h.username,S=_(l),R=r("useCometRelayEntrypointContextualEnvironmentProvider")(),L=o("CometRelay").useEntryPointLoader(R,r("IGDBlockUserDialogOffMsys.entrypoint")),E=L[0],k=L[1],I;t[2]!==p?(I=function(){p()},t[2]=p,t[3]=I):I=t[3];var T=I;if(S&&v!=null){E==null&&C!=null&&k({userFbId:C});var D;t[4]!==E||t[5]!==u||t[6]!==T||t[7]!==g||t[8]!==b||t[9]!==v?(D=E?s.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:E,props:{blockUserIgId:b,isBlocked:!1,onClose:T}}):s.jsx(c,{clickPoint:"report",contactID:b,isAfterReport:!0,isBlocked:!1,isGroup:u!=null?u:!1,onClose:T,shouldReportAsInstamadillo:!1,threadKey:g,userName:v}),t[4]=E,t[5]=u,t[6]=T,t[7]=g,t[8]=b,t[9]=v,t[10]=D):D=t[10];var x=D,$;t[11]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(r("IGDSGlimmer.react"),{index:0}),t[11]=$):$=t[11];var P;return t[12]!==x?(P=s.jsx(r("CometPlaceholder.react"),{fallback:$,name:i.id,children:x}),t[12]=x,t[13]=P):P=t[13],P}if(!b)return null;if(y===!0){var N;return t[14]!==e?(N=s.jsx(f,babelHelpers.extends({},e)),t[14]=e,t[15]=N):N=t[15],N}var M;t[16]!==e?(M=function(){return m(e)},t[16]=e,t[17]=M):M=t[17];var w;return t[18]!==C||t[19]!==a||t[20]!==M||t[21]!==b||t[22]!==v?(w=s.jsx(r("PolarisBlockDialogContainer.react"),{fbidV2:C,onClose:M,relationship:a,userId:b,username:v}),t[18]=C,t[19]=a,t[20]=M,t[21]=b,t[22]=v,t[23]=w):w=t[23],w}function _(e){switch(e){case o("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE:case o("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE_THREAD:case o("PolarisReportConstants").FRXObjectType.ENCRYPTED_DIRECT_MESSAGE:return!0;default:return!1}}function f(e){var t=o("react-compiler-runtime").c(18),n=e.userToBlock,a=n.username,i,l,u,c;if(t[0]!==a?(c=r("isStringNullOrEmpty")(a)?null:o("PolarisLinkBuilder").buildUserLink(a),u=r("isStringNullOrEmpty")(c),t[0]=a,t[1]=i,t[2]=l,t[3]=u,t[4]=c):(i=t[1],l=t[2],u=t[3],c=t[4]),u){i=o("PolarisGenericStrings").CLOSE_TEXT;var p;t[8]===Symbol.for("react.memo_cache_sentinel")?(p={},t[8]=p):p=t[8],l=p}else{i=o("PolarisGenericStrings").CANCEL_TEXT;var d;t[5]!==e||t[6]!==c?(d={confirmLabel:o("PolarisFRXWebReportStrings").VIEW_PROFILE_BUTTON_TEXT,onConfirm:function(){o("PolarisNavigationUtils").openURLWithFullPageReload(c),m(e)}},t[5]=e,t[6]=c,t[7]=d):d=t[7],l=d}var _=l,f=i,g;t[9]!==e?(g=function(){return m(e)},t[9]=e,t[10]=g):g=t[10];var h;t[11]!==a?(h=o("PolarisFRXWebReportStrings").getBlockUserModalTitle(a),t[11]=a,t[12]=h):h=t[12];var y;return t[13]!==i||t[14]!==l||t[15]!==g||t[16]!==h?(y=s.jsx(r("IGDSConfirmDialog.react"),babelHelpers.extends({},_,{body:o("PolarisFRXWebReportStrings").BLOCK_USER_THROUGH_PROFILE_MODAL_CONTENT,cancelLabel:f,onClose:g,title:h})),t[13]=i,t[14]=l,t[15]=g,t[16]=h,t[17]=y):y=t[17],y}l.default=p}),98);
__d("PolarisFRXNotifyGuardianFollowupModal.react",["IGDSConfirmDialog.react","PolarisFRXWebReportStrings","react","react-compiler-runtime","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){e.onClose&&e.onClose()}function c(e,t,n){e.onNotify&&e.onNotify(t,n)}function d(e){var t=o("react-compiler-runtime").c(14),n=r("usePolarisViewer")(),a=n==null?void 0:n.guardianId,i;t[0]!==a||t[1]!==e?(i={confirmLabel:o("PolarisFRXWebReportStrings").SEND_BUTTON_TEXT,onConfirm:function(){c(e,!0,a)}},t[0]=a,t[1]=e,t[2]=i):i=t[2];var l=i,d;t[3]!==e.guardianUsername||t[4]!==e.reportedTagTitle||t[5]!==e.reportedUsername?(d=o("PolarisFRXWebReportStrings").getNotifyGuardianModalText(e.guardianUsername,e.reportedTagTitle,e.reportedUsername),t[3]=e.guardianUsername,t[4]=e.reportedTagTitle,t[5]=e.reportedUsername,t[6]=d):d=t[6];var m;t[7]!==a||t[8]!==e?(m=function(){c(e,!1,a),u(e)},t[7]=a,t[8]=e,t[9]=m):m=t[9];var p;return t[10]!==l||t[11]!==d||t[12]!==m?(p=s.jsx(r("IGDSConfirmDialog.react"),babelHelpers.extends({},l,{body:d,cancelLabel:o("PolarisFRXWebReportStrings").DONT_SEND_BUTTON_TEXT,onClose:m,title:o("PolarisFRXWebReportStrings").NOTIFY_GUARDIAN_MODAL_TITLE_NO_QUESTION})),t[10]=l,t[11]=d,t[12]=m,t[13]=p):p=t[13],p}l.default=d}),98);
__d("PolarisFRXReportBaseScreenModal.react",["cx","IGDSBox.react","IGDSDialogHeader.react","IGDSDialogLegacy.react","PolarisFRXWebReportConstants","PolarisFRXWebReportStrings","PolarisUA","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=4,d=4,m=4,p=!1;function _(e,t,n){var r,a=e||{},i=a.response,l=a.type;if(l===o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION)return{headerEnabled:!1};var s=i||{},u=s.title,c=(r=u==null?void 0:u.text)!=null?r:o("PolarisFRXWebReportStrings").DEFAULT_MODAL_HEADER_TEXT;return{headerEnabled:!0,onBackButton:n,titleText:c,withBackButton:t}}function f(e){e.onClose&&e.onClose()}function g(e){var t,n=o("react-compiler-runtime").c(8),a=o("PolarisUA").isMobile()?"large":"default",i=(t=e.headerParams.titleText)!=null?t:void 0,l;n[0]!==e?(l=function(){return f(e)},n[0]=e,n[1]=l):l=n[1];var s;n[2]!==e?(s=u.jsxs("div",{className:"_acgx"+(a==="large"?" _acqj":""),children:[u.jsx(h,babelHelpers.extends({},e)),u.jsx(y,babelHelpers.extends({},e))]}),n[2]=e,n[3]=s):s=n[3];var c;return n[4]!==i||n[5]!==l||n[6]!==s?(c=u.jsx(r("IGDSDialogLegacy.react"),{label:i,onClose:l,size:a,testid:void 0,children:s}),n[4]=i,n[5]=l,n[6]=s,n[7]=c):c=n[7],c}function h(e){var t=o("react-compiler-runtime").c(11),n=e.headerParams,a=n.headerEnabled,i=n.titleText,l=n.onBackButton,s=n.withBackButton,c=s===void 0?p:s;if(!a)return null;var d;t[0]!==l||t[1]!==c?(d=c&&l?{onBack:function(){return l()}}:void 0,t[0]=l,t[1]=c,t[2]=d):d=t[2];var m=d,_;t[3]!==e?(_=function(){return f(e)},t[3]=e,t[4]=_):_=t[4];var g;t[5]!==i?(g=u.jsx(u.Fragment,{children:i}),t[5]=i,t[6]=g):g=t[6];var h;return t[7]!==m||t[8]!==_||t[9]!==g?(h=u.jsx(r("IGDSDialogHeader.react"),babelHelpers.extends({onClose:_},m,{children:g})),t[7]=m,t[8]=_,t[9]=g,t[10]=h):h=t[10],h}function y(e){var t=o("react-compiler-runtime").c(7),n=e.children,a=e.disableDefaultBodyPaddingMargin,i=a===void 0?!1:a,l,s,p;i?l=p=s=0:(l=c,s=m,p=d);var _,f;t[0]===Symbol.for("react.memo_cache_sentinel")?(_={className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xkz0k9k xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak x6ikm8r x10wlt62 xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x11njtxf"},f={className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xmz0i5r x6ikm8r x1odjw0f xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x11njtxf xh8yej3"},t[0]=_,t[1]=f):(_=t[0],f=t[1]);var g;return t[2]!==p||t[3]!==s||t[4]!==l||t[5]!==n?(g=u.jsx("div",babelHelpers.extends({},_,{children:u.jsx("div",babelHelpers.extends({},f,{children:u.jsx(r("IGDSBox.react"),{marginBottom:p,marginTop:s,paddingX:l,position:"relative",children:n})}))})),t[2]=p,t[3]=s,t[4]=l,t[5]=n,t[6]=g):g=t[6],g}l.DEFAULT_BODY_PADDING_X=c,l.DEFAULT_BODY_MARGIN_BOTTOM=d,l.DEFAULT_BODY_MARGIN_TOP=m,l.getDefaultScreenModalHeaderParamsFromScreenPayload=_,l.FRXReportBaseScreenModal=g}),98);
__d("PolarisFRXReportModalLinkUtils",["URI","polarisIsInternalURIString"],(function(t,n,r,o,a,i,l){"use strict";var e,s="help.instagram.com";function u(t){return r("polarisIsInternalURIString")(t)&&new(e||(e=r("URI")))(t).getDomain()===s}function c(e){return u(e)||!r("polarisIsInternalURIString")(e)}l.shouldLinkUseBlankTarget=c}),98);
__d("PolarisFRXReportMainButton.react",["PolarisFRXReportModalLinkUtils","PolarisIGCoreButton.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(14),n=e["data-testid"],a=e.disabled,i=e.href,l=e.onClick,u=e.primaryButton,c=e.spinner,d=e.text,m=e.textAlign,p;if(!r("isStringNullOrEmpty")(i)&&a!==!0){var _=o("PolarisFRXReportModalLinkUtils").shouldLinkUseBlankTarget(i)?"_blank":void 0,f;t[0]!==i||t[1]!==_?(f={href:i,target:_},t[0]=i,t[1]=_,t[2]=f):f=t[2],p=f}var g=u==null||u?"ig-primary-button":"ig-secondary-button",h=!!a,y=!!c,C;t[3]!==l?(C=function(){return l&&l()},t[3]=l,t[4]=C):C=t[4];var b;return t[5]!==p||t[6]!==g||t[7]!==h||t[8]!==y||t[9]!==C||t[10]!==n||t[11]!==d||t[12]!==m?(b=s.jsx(r("PolarisIGCoreButton.react"),babelHelpers.extends({},p,{color:g,"data-testid":void 0,disabled:h,loading:y,onClick:C,textAlign:m,children:d})),t[5]=p,t[6]=g,t[7]=h,t[8]=y,t[9]=C,t[10]=n,t[11]=d,t[12]=m,t[13]=b):b=t[13],b}l.default=u}),98);
__d("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9617087628339557"}),null);
__d("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql",["PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"is_f3_supervised_user",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:e,action:"THROW"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation"),metadata:{},name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisFRXReportModalOptionList.react",["cx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(4),n=e.asRadio,r=e.children,a=n===void 0?!1:n,i="_ac7r";if(a){var l;return t[0]!==r?(l=u.jsx("fieldset",{className:i,children:r}),t[0]=r,t[1]=l):l=t[1],l}var s;return t[2]!==r?(s=u.jsx("div",{className:i,role:"list",children:r}),t[2]=r,t[3]=s):s=t[3],s}l.default=c}),98);
__d("PolarisFRXReportModalOptionListItem.react",["cx","fbt","IGDSBox.react","IGDSChevronIcon.react","IGDSRadioButton.react","IGDSSpinner.react","PolarisFRXReportModalLinkUtils","PolarisFastLink.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d={BUTTON:"button",LINK:"link",RADIO:"radio"},m={DEFAULT:"default",GREY:"grey",RED:"red"},p=4;function _(e){e.onSelect&&e.onSelect()}function f(e){var t=e.href;return r("isStringNullOrEmpty")(t)?d.BUTTON:d.LINK}function g(e){var t=o("react-compiler-runtime").c(38),n=e.children,a=e["data-testid"],i=e.href,l=e.variant,s=e.textColor,u=e.disabled,g=l===void 0?f(e):l,y=s===void 0?m.DEFAULT:s,C=g===d.RADIO,b=n;if(!C){var v;t[0]!==b?(v=c.jsx(r("IGDSBox.react"),{flex:"grow",position:"relative",children:b}),t[0]=b,t[1]=v):v=t[1];var S;t[2]!==u||t[3]!==e?(S=u!==!0&&c.jsx(h,babelHelpers.extends({},e)),t[2]=u,t[3]=e,t[4]=S):S=t[4];var R;t[5]!==v||t[6]!==S?(R=c.jsxs(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",direction:"row",padding:p,position:"relative",children:[v,S]}),t[5]=v,t[6]=S,t[7]=R):R=t[7],b=R}var L="_abn2"+(y===m.RED?" _abn3":"")+(y===m.GREY?" _abn4":"");if(C){var E=e.selected,k=e.value,I=k===void 0?"":k,T;t[8]!==b||t[9]!==L?(T=c.jsx("div",{className:L,children:b}),t[8]=b,t[9]=L,t[10]=T):T=t[10];var D;t[11]!==e?(D=function(){return _(e)},t[11]=e,t[12]=D):D=t[12];var x;t[13]!==E||t[14]!==T||t[15]!==D||t[16]!==I?(x=c.jsx(r("IGDSRadioButton.react"),{isChecked:E,label:T,onChange:D,value:I}),t[13]=E,t[14]=T,t[15]=D,t[16]=I,t[17]=x):x=t[17];var $;return t[18]!==x||t[19]!==a?($=c.jsx(r("IGDSBox.react"),{"data-testid":void 0,padding:p,children:x}),t[18]=x,t[19]=a,t[20]=$):$=t[20],$}else if(g===d.LINK&&i!=null&&i!==""){var P;t[21]!==e?(P=function(){return _(e)},t[21]=e,t[22]=P):P=t[22];var N=o("PolarisFRXReportModalLinkUtils").shouldLinkUseBlankTarget(i)?"_blank":void 0,M;return t[23]!==b||t[24]!==i||t[25]!==L||t[26]!==P||t[27]!==N||t[28]!==a?(M=c.jsx(r("PolarisFastLink.react"),{className:L,"data-testid":void 0,href:i,onClick:P,target:N,children:b}),t[23]=b,t[24]=i,t[25]=L,t[26]=P,t[27]=N,t[28]=a,t[29]=M):M=t[29],M}var w;t[30]!==e?(w=function(){return _(e)},t[30]=e,t[31]=w):w=t[31];var A;return t[32]!==b||t[33]!==u||t[34]!==L||t[35]!==w||t[36]!==a?(A=c.jsx("button",{className:L,"data-testid":void 0,disabled:u,onClick:w,children:b}),t[32]=b,t[33]=u,t[34]=L,t[35]=w,t[36]=a,t[37]=A):A=t[37],A}function h(e){var t=o("react-compiler-runtime").c(4),n=e.loading,a;if(n===!0){var i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx(r("IGDSSpinner.react"),{size:"small"}),t[0]=i):i=t[0],a=i}else{var l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(r("IGDSChevronIcon.react"),{alt:u._(/*BTDS*/"chevron"),color:"ig-tertiary-text",direction:"next",size:17}),t[1]=l):l=t[1],a=l}var s;return t[2]!==a?(s=c.jsx(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",direction:"row",marginStart:2,position:"relative",children:a}),t[2]=a,t[3]=s):s=t[3],s}l.OPTION_LIST_ITEM_VARIANTS=d,l.OPTION_LIST_ITEM_TEXT_COLORS=m,l.FRXReportModalOptionListItem=g}),226);
__d("polarisGetGuardianInfo",["normalizr"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("normalizr")).schema.Entity("userInfo",{},{idAttribute:function(t){return String(t.pk)},processStrategy:function(t){return{username:t.username}}});function s(t){return o("normalizr").normalize(t,e).entities.userInfo}l.default=s}),98);
__d("PolarisFRXWebReportActions",["IGNavChain","JSResourceForInteraction","PolarisAPIPostNotifyGuardianCall","PolarisDirectLogger","PolarisFRXWebReportConstants","PolarisInstapi","PolarisReportConstants","polarisGetGuardianInfo","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=1,s=r("JSResourceForInteraction")("PolarisFRXWebSendSecureReportAction").__setRef("PolarisFRXWebReportActions");function u(e){var t,n=(t=r("IGNavChain").getInstance())==null?void 0:t.getNavChainForSend(),a=n!=null?JSON.stringify({navigation_chain:n}):null,i=babelHelpers.extends({},e,{frx_prompt_request_type:o("PolarisFRXWebReportConstants").FRX_SCREEN_INPUT_REQUEST_TYPE_INTS.START,logging_extra:a});return m(i,!0)}function c(e){var t,n,o,a=e.frxPromptRequestType,i=e.metadata,l=d(e),s=(t=r("IGNavChain").getInstance())==null?void 0:t.getNavChainForSend(),u=s!=null?JSON.stringify({navigation_chain:s}):null,c=babelHelpers.extends({},i,l,{frx_prompt_request_type:a,logging_extra:u});return m(c,!1,(n=e.optionalParams)==null?void 0:n.thread_id,(o=e.optionalParams)==null?void 0:o.responsible_id)}function d(e){var t=e.context,n=e.optionalParams,r=n.attachments,o=n.evidenceText,a=n.reportSubtype,i=n.selectedPromptButtonActionType,l=n.selectedTagTypes,s=n.selectedVictimID,u=n.tipNumber,c={};return t!=null&&(c.context=t),l!=null&&(c.selected_tag_types=JSON.stringify(l)),i!=null&&(c.action_type=i),s!=null&&(c.victim_user_id=s),u!=null&&(c.tip_number=u),r!=null&&(c.attachments=r),o!=null&&(c.evidence_text=o),a!=null&&(c.report_subtype=a),babelHelpers.extends({},c)}function m(t,n,a,i){return function(l,u){var c=e++;l({frxScreenRequestID:c,isInitScreen:n,type:"FRX_WEB_REPORT_SCREEN_API_REQUESTED"});var d=o("PolarisInstapi").apiPost("/api/v1/web/reports/get_frx_prompt/",{body:t}).then(function(e){return e.data});d.then(function(e){var n=e.response,u=e.type;if(n==null||u==null)l({frxScreenRequestID:c,type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_FAILED"});else{var d=n.frx_context;[o("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_MESSAGE,o("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_THREAD].includes(t.location)&&t.frx_prompt_request_type===o("PolarisFRXWebReportConstants").FRX_SCREEN_INPUT_REQUEST_TYPE_INTS.POLICY_EDUCATION&&i!==void 0&&a!==void 0&&d!==void 0&&r("promiseDone")(s.load().then(function(e){l(e(d,i,a,t.victim_user_id,t.location===o("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_MESSAGE?t.object_id:void 0))})),l({frxScreenRequestID:c,screenPayload:{frxScreenRequestID:c,response:n,type:u},type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_SUCCESS"})}}).catch(function(){l({frxScreenRequestID:c,type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_FAILED"})})}}function p(e,t,n,r){return function(a,i){a({type:"FRX_WEB_NOTIFY_GUARDIAN_FOLLOWUP_MODAL_TO_CONFIMATION_MODAL"}),e&&o("PolarisAPIPostNotifyGuardianCall").postNotifyGuardianCall(t,n,r).catch(function(e){var t=new(o("PolarisDirectLogger")).DirectLogger("DirectActions");t.logError("Notify Guardian From Web",e)})}}function _(e){return babelHelpers.extends({type:"FRX_WEB_REPORT_REPORTING_MODAL_CLOSED"},e)}function f(){return{type:"FRX_WEB_REPORT_GO_BACK_ONE_SCREEN"}}function g(){return{type:"FRX_WEB_REPORT_START_UNFOLLOW_FOLLOWUP"}}function h(){return{type:"FRX_WEB_REPORT_START_BLOCK_FOLLOWUP"}}function y(){return{type:"FRX_WEB_REPORT_START_NOTIFY_GUARDIAN_FOLLOWUP"}}function C(){return{type:"FRX_WEB_REPORT_SUPPORT_HUB_FOLLOWUP"}}function b(){return function(e,t){e({type:"FRX_WEB_REPORT_DISABLE_NOTIFY_GUARDIAN_OPTION"})}}function v(e){return function(t,n){o("PolarisInstapi").apiGet("/api/v1/users/{user_id}/info/",{path:{user_id:e}}).then(function(n){var o=n.data.user;o&&t({guardian:r("polarisGetGuardianInfo")(o)[e],type:"FRX_WEB_REPORT_STORE_GUARDIAN_INFORMATION"})})}}function S(e){return function(t,n){t({reportedTagTitle:e,type:"FRX_WEB_REPORT_STORE_REPORTED_TAG_TITLE"})}}l.doRequestInitFRXScreenAction=u,l.doRequestNextFRXScreenAction=c,l.doOpenNotifyGuardianFollowupModalToPreviousScreenAction=p,l.doReportingModalClosedAction=_,l.doGoBackOneFRXScreenAction=f,l.doStartUnfollowFollowupAction=g,l.doStartBlockFollowupAction=h,l.doStartNotifyGuardianFollowupAction=y,l.doOpenSupportHubFollowupAction=C,l.doDisableNotifyGuardianOption=b,l.doStoreGuardianInformation=v,l.doStoreReportedTagTitle=S}),98);
__d("PolarisFRXWebReportStateSelectors",["PolarisFRXWebReportConstants","PolarisFRXWebReportUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.webFRXReport.pendingFRXScreenRequestID!==null}function s(e){return e.webFRXReport.screenHistoryStack}function u(e){return o("PolarisFRXWebReportUtils").getCurrentScreenFromHistoryStack(s(e))}function c(e){return s(e).length}function d(e){var t=s(e);return t.findIndex(function(e){return e.type===o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION})>=0}function m(e){return e.webFRXReport.currRenderStep}function p(e){return e.webFRXReport.disableNotifyGuardianOption}function _(e){return e.webFRXReport.guardianUsername}function f(e){return e.webFRXReport.reportedTagTitle}l.getIsFRXScreenRequestProcessing=e,l.getCurrScreenPayload=u,l.getScreenHistorySize=c,l.getIsConfirmationScreenInHistoryStack=d,l.getCurrRenderStep=m,l.getDisableNotifyGuardianOption=p,l.getGuardianUsername=_,l.getReportedTagTitle=f}),98);
__d("PolarisFRXReportModalFollowUpActionSection.react",["IGDSBox.react","PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql","PolarisFRXReportModalOptionList.react","PolarisFRXReportModalOptionListItem.react","PolarisFRXWebReportActions","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisReactRedux.react","PolarisReportConstants","gkx","isStringNullOrEmpty","polarisRelationshipSelectors.react","react","react-compiler-runtime","react-relay/relay-hooks/useLazyLoadQuery","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(e,t){var n=e.reportedOwner.id;return o("polarisRelationshipSelectors.react").getRelationship(t.relationships,n)}function d(e,t){var n=e.onSelectFollowupAction;n(t)}function m(t){var a,i=o("react-compiler-runtime").c(22),l,s;i[0]===Symbol.for("react.memo_cache_sentinel")?(l=e!==void 0?e:e=n("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql"),s={},i[0]=l,i[1]=s):(l=i[0],s=i[1]);var m=r("react-relay/relay-hooks/useLazyLoadQuery")(l,s),y=(a=m.xfb_youth_platform)==null||(a=a.viewer)==null?void 0:a.is_f3_supervised_user,C=t.followUpActions,b;i[2]!==t?(b=function(n){return o("polarisRelationshipSelectors.react").followedByViewer(c(t,n))},i[2]=t,i[3]=b):b=i[3];var v=o("PolarisReactRedux.react").useSelector(b),S;i[4]!==t?(S=function(n){return o("polarisRelationshipSelectors.react").isBlockedByViewer(c(t,n))},i[4]=t,i[5]=S):S=i[5];var R=o("PolarisReactRedux.react").useSelector(S),L=r("usePolarisViewer")(),E;if(i[6]!==C||i[7]!==y||i[8]!==t||i[9]!==R||i[10]!==v||i[11]!==(L==null?void 0:L.isSupervisedUser)){var k;i[13]!==y||i[14]!==t||i[15]!==R||i[16]!==v||i[17]!==(L==null?void 0:L.isSupervisedUser)?(k=function(n,a){var e=n.action_type,i=n.beta_redirect_uri,l=n.name;if(e==null)return null;var s=l==null?void 0:l.text,c=function(){return d(t,n)},m="followup-"+a;switch(e){case o("PolarisReportConstants").FRXActionType.LEARN_MORE_ADS:case o("PolarisReportConstants").FRXActionType.LEARN_MORE_EDUCATION:case o("PolarisReportConstants").FRXActionType.SELF_INJURY_EDUCATION_ACTION:case o("PolarisReportConstants").FRXActionType.EATING_DISORDER_EDUCATION_ACTION:return s==null||s===""||i==null||i===""?null:u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{href:i,onSelect:c,children:s},m);case o("PolarisReportConstants").FRXActionType.UNFOLLOW:return v?u.jsx(_,{labelText:s,onSelect:c},m):null;case o("PolarisReportConstants").FRXActionType.BLOCK_ACTOR:return R?null:u.jsx(f,{labelText:s,onSelect:c},m);case o("PolarisReportConstants").FRXActionType.SUPPORT_HUB:{var p=r("gkx")("5568");return p?u.jsx(g,{labelText:s,onSelect:c},m):null}case o("PolarisReportConstants").FRXActionType.NOTIFY_GUARDIAN:return(L==null?void 0:L.isSupervisedUser)!==!0&&y!==!0?null:u.jsx(h,{labelText:s,onSelect:c},m);default:return null}},i[13]=y,i[14]=t,i[15]=R,i[16]=v,i[17]=L==null?void 0:L.isSupervisedUser,i[18]=k):k=i[18],E=C.map(k).filter(p),i[6]=C,i[7]=y,i[8]=t,i[9]=R,i[10]=v,i[11]=L==null?void 0:L.isSupervisedUser,i[12]=E}else E=i[12];var I=E;if(I.length===0)return null;var T;i[19]===Symbol.for("react.memo_cache_sentinel")?(T=u.jsx(r("IGDSBox.react"),{marginTop:11,position:"relative"}),i[19]=T):T=i[19];var D;return i[20]!==I?(D=u.jsxs(u.Fragment,{children:[T,u.jsx(r("PolarisFRXReportModalOptionList.react"),{children:I})]}),i[20]=I,i[21]=D):D=i[21],D}function p(e){return e!=null}function _(e){var t=o("react-compiler-runtime").c(6),n=e.labelText,a=e.onSelect,i=r("isStringNullOrEmpty")(n)?o("PolarisFRXWebReportStrings").DEFAULT_UNFOLLOW_BUTTON_TEXT:n,l=o("PolarisReactRedux.react").useDispatch(),s;t[0]!==l||t[1]!==a?(s=function(){a(),l(o("PolarisFRXWebReportActions").doStartUnfollowFollowupAction())},t[0]=l,t[1]=a,t[2]=s):s=t[2];var c;return t[3]!==s||t[4]!==i?(c=u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{onSelect:s,children:i}),t[3]=s,t[4]=i,t[5]=c):c=t[5],c}function f(e){var t=o("react-compiler-runtime").c(6),n=e.labelText,a=e.onSelect,i=r("isStringNullOrEmpty")(n)?o("PolarisFRXWebReportStrings").DEFAULT_BLOCK_BUTTON_TEXT:n,l=o("PolarisReactRedux.react").useDispatch(),s;t[0]!==l||t[1]!==a?(s=function(){a(),l(o("PolarisFRXWebReportActions").doStartBlockFollowupAction())},t[0]=l,t[1]=a,t[2]=s):s=t[2];var c;return t[3]!==i||t[4]!==s?(c=u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{onSelect:s,textColor:o("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.RED,children:i}),t[3]=i,t[4]=s,t[5]=c):c=t[5],c}function g(e){var t=o("react-compiler-runtime").c(6),n=e.labelText,a=e.onSelect,i=r("isStringNullOrEmpty")(n)?o("PolarisFRXWebReportStrings").DEFAULT_GET_SUPPORT_BUTTON_TEXT:n,l=o("PolarisReactRedux.react").useDispatch(),s;t[0]!==l||t[1]!==a?(s=function(){a(),l(o("PolarisFRXWebReportActions").doOpenSupportHubFollowupAction())},t[0]=l,t[1]=a,t[2]=s):s=t[2];var c;return t[3]!==s||t[4]!==i?(c=u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{onSelect:s,children:i}),t[3]=s,t[4]=i,t[5]=c):c=t[5],c}function h(e){var t=o("react-compiler-runtime").c(8),n=e.labelText,a=e.onSelect,i=r("isStringNullOrEmpty")(n)?o("PolarisFRXWebReportStrings").DEFAULT_NOTIFY_GUARDIAN_BUTTON_TEXT:n,l=o("PolarisReactRedux.react").useDispatch(),s=o("PolarisReactRedux.react").useSelector(o("PolarisFRXWebReportStateSelectors").getDisableNotifyGuardianOption),c=s===!0?o("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.GREY:o("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.DEFAULT,d;t[0]!==l||t[1]!==a?(d=function(){a(),l(o("PolarisFRXWebReportActions").doStartNotifyGuardianFollowupAction())},t[0]=l,t[1]=a,t[2]=d):d=t[2];var m;return t[3]!==s||t[4]!==i||t[5]!==d||t[6]!==c?(m=u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{disabled:s,onSelect:d,textColor:c,children:i}),t[3]=s,t[4]=i,t[5]=d,t[6]=c,t[7]=m):m=t[7],m}l.default=m}),98);
__d("PolarisFRXReportModalRichText.react",["PolarisFRXReportModalLinkUtils","PolarisFastLink.react","PolarisTextWithEntities.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.token;if(!t)return null;var n=t.color,r=t.style,o=t.uri;return n==null&&(n=t[3]),r==null&&(r=t[1]),(o===""||o==null)&&(o=t[2]),r!=null&&(r=parseInt(r,10)),{color:n,style:r,uri:o}}function c(e){if(!e)return[];var t=[];return e.forEach(function(e){var n=e.length,r=e.offset,o=u(e)||{},a=o.color,i=o.style,l=o.uri;n!=null&&r!=null&&(l!=null||a!=null||i!=null)&&t.push({color:a,length:n,offset:r,override_uri:l,style:i})}),t}function d(e){var t=o("react-compiler-runtime").c(5),n=e.richText;if(n==null)return null;var a=n.markup,i=n.text;if(i==null)return null;var l;t[0]!==a?(l=c(a),t[0]=a,t[1]=l):l=t[1];var u;return t[2]!==l||t[3]!==i?(u=s.jsx(r("PolarisTextWithEntities.react"),{rangeRenderer:p,ranges:l,text:i,textRenderer:m}),t[2]=l,t[3]=i,t[4]=u):u=t[4],u}function m(e){return s.jsx(s.Fragment,{children:e})}function p(e,t){var n=t.override_uri;return n!=null?s.jsx(r("PolarisFastLink.react"),{href:n,target:o("PolarisFRXReportModalLinkUtils").shouldLinkUseBlankTarget(n)?"_blank":void 0,children:e}):e}l.default=d}),98);
__d("PolarisFRXWebReportAPIUtilsLogComplianceEntrypointMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25979823861615573"}),null);
__d("PolarisFRXWebReportAPIUtilsLogComplianceEntrypointMutation.graphql",["PolarisFRXWebReportAPIUtilsLogComplianceEntrypointMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"compliance_type"},{defaultValue:null,kind:"LocalArgument",name:"context"}],t=[{alias:null,args:[{fields:[{kind:"Variable",name:"compliance_type",variableName:"compliance_type"},{kind:"Variable",name:"context",variableName:"context"}],kind:"ObjectValue",name:"input"}],concreteType:"IgFrxLogComplianceEntrypointResponsePayload",kind:"LinkedField",name:"ig_frx_log_compliance_entrypoint",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"PolarisFRXWebReportAPIUtilsLogComplianceEntrypointMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"PolarisFRXWebReportAPIUtilsLogComplianceEntrypointMutation",selections:t},params:{id:n("PolarisFRXWebReportAPIUtilsLogComplianceEntrypointMutation_instagramRelayOperation"),metadata:{},name:"PolarisFRXWebReportAPIUtilsLogComplianceEntrypointMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("PolarisFRXWebReportAPIUtils",["CometRelay","PolarisFRXWebReportAPIUtilsLogComplianceEntrypointMutation.graphql","PolarisFRXWebReportConstants","PolarisInstapi","PolarisRelayEnvironment","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){o("PolarisInstapi").apiPost("/api/v1/web/reports/log_tag_selected/",{body:e}).catch(r("emptyFunction"))}function u(e){o("PolarisInstapi").apiPost("/api/v1/web/reports/handle_guided_action/",{body:e}).catch(r("emptyFunction"))}var c=e!==void 0?e:e=n("PolarisFRXWebReportAPIUtilsLogComplianceEntrypointMutation.graphql");function d(e){var t,n=o("PolarisFRXWebReportConstants").FRX_COMPLIANCE_SCREEN_TYPE_STRINGS[e.compliance_type];o("CometRelay").commitMutation(r("PolarisRelayEnvironment"),{mutation:c,onError:r("emptyFunction"),variables:{compliance_type:n,context:(t=e.context)!=null?t:""}})}l.logFRXTagSelected=s,l.handleFRXGuidedAction=u,l.logFRXComplianceEntrypointRenderedGraphQL=d}),98);
__d("PolarisFRXReportConfirmationScreenModalForSupervision.react",["IGDSBox.react","IGDSCircleCheckPanoOutlineIcon.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportMainButton.react","PolarisFRXReportModalFollowUpActionSection.react","PolarisFRXReportModalRichText.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportStrings","PolarisGenericStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){var n=t.action_type;if(n!=null){var r=e.screenPayload.response;o("PolarisFRXWebReportAPIUtils").handleFRXGuidedAction({action_type:n,context:r==null?void 0:r.context})}}function c(e){var t=o("react-compiler-runtime").c(13),n=e.headerParams,a=e.onClose,i;t[0]!==a?(i=function(){return a()},t[0]=a,t[1]=i):i=t[1];var l=i,u,c;t[2]!==e?(u=s.jsx(d,babelHelpers.extends({},e)),c=s.jsx(m,babelHelpers.extends({},e)),t[2]=e,t[3]=u,t[4]=c):(u=t[3],c=t[4]);var p;t[5]!==l?(p=s.jsx(r("IGDSBox.react"),{marginBottom:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM,marginTop:4,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:s.jsx(r("PolarisFRXReportMainButton.react"),{onClick:l,text:o("PolarisGenericStrings").CLOSE_TEXT})}),t[5]=l,t[6]=p):p=t[6];var _;return t[7]!==n||t[8]!==l||t[9]!==u||t[10]!==c||t[11]!==p?(_=s.jsxs(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:n,onClose:l,children:[u,c,p]}),t[7]=n,t[8]=l,t[9]=u,t[10]=c,t[11]=p,t[12]=_):_=t[12],_}function d(e){var t=o("react-compiler-runtime").c(14),n=e.screenPayload,a;t[0]!==n?(a=n||{},t[0]=n,t[1]=a):a=t[1];var i=a,l=i.response,u;t[2]!==l?(u=l||{},t[2]=l,t[3]=u):u=t[3];var c=u,d=c.follow_up_actions_title,m=c.subtitle,p;t[4]!==m?(p=m?s.jsx(r("IGDSBox.react"),{marginTop:6,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextSection,{textAlign:"center",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:m})})}):null,t[4]=m,t[5]=p):p=t[5];var _=p,f=null;if(d){var g;if(t[6]!==d?(g=s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:d})}),t[6]=d,t[7]=g):g=t[7],f=g,_){var h;t[8]!==f?(h=s.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",children:f}),t[8]=f,t[9]=h):h=t[9],f=h}}var y;t[10]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(r("IGDSCircleCheckPanoOutlineIcon.react"),{alt:o("PolarisFRXWebReportStrings").CHECKMARK_ICON_ALT_TEXT,color:"ig-success",size:48}),t[10]=y):y=t[10];var C;return t[11]!==f||t[12]!==_?(C=s.jsx(r("IGDSBox.react"),{marginTop:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:s.jsxs(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",marginTop:6,position:"relative",children:[y,_,f]})}),t[11]=f,t[12]=_,t[13]=C):C=t[13],C}function m(e){var t=o("react-compiler-runtime").c(6),n=e.reportedOwner,a=e.screenPayload,i=a.response,l=i==null?void 0:i.follow_up_actions;if(!l||l.length===0)return null;var c;t[0]!==e?(c=function(n){u(e,n)},t[0]=e,t[1]=c):c=t[1];var d;return t[2]!==l||t[3]!==n||t[4]!==c?(d=s.jsx(r("PolarisFRXReportModalFollowUpActionSection.react"),{followUpActions:l,onSelectFollowupAction:c,reportedOwner:n}),t[2]=l,t[3]=n,t[4]=c,t[5]=d):d=t[5],d}l.default=c}),98);
__d("PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29609414422005335"}),null);
__d("PolarisFRXReportModalFetaSupervisionQuery.graphql",["PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"is_f3_supervised_user",storageKey:null},t={alias:null,args:null,concreteType:"XFBXMFCGuardianPreferredProfile",kind:"LinkedField",name:"f3_guardian_preferred_profile",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisFRXReportModalFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:e,action:"THROW"},t],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PolarisFRXReportModalFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,t,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation"),metadata:{},name:"PolarisFRXReportModalFetaSupervisionQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisFRXReportModalSupportHub.react",["CometPlaceholder.react","IGDSBox.react","IGDSSpinner.react","JSResourceForInteraction","PolarisFRXReportBaseScreenModal.react","PolarisNavigationUtils","lazyLoadComponent","react","react-compiler-runtime","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("lazyLoadComponent")(r("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisFRXReportModalSupportHub.react")),c="com.bloks.www.frx.support_hub_async";function d(e){var t,n=o("react-compiler-runtime").c(22),a=(t=e.is_igd)!=null?t:!1,l=e.location,d=e.tags_selected,p;n[0]===Symbol.for("react.memo_cache_sentinel")?(p=r("uuidv4")(),n[0]=p):p=n[0];var _;n[1]!==e.location||n[2]!==e.tags_selected||n[3]!==a?(_={is_fullscreen_enabled:!1,is_igd:a,location:l,selected_tags:d,session_id:""+p},n[1]=e.location,n[2]=e.tags_selected,n[3]=a,n[4]=_):_=n[4];var f=_,g;n[5]!==e?(g=function(){e.onClose&&e.onClose()},n[5]=e,n[6]=g):g=n[6];var h=g,y;n[7]!==e?(y=function(){e.onGoBack&&e.onGoBack()},n[7]=e,n[8]=y):y=n[8];var C=y,b=m,v;if(n[9]!==C){var S=function(t){C()};v={"bk.action.navigation.OpenUrl":b,"bk.action.navigation.OpenUrlV2":b,"bk.action.screen.Close":S,"ig.action.navigation.OpenUrl":b},n[9]=C,n[10]=v}else v=n[10];var R=v,L=!!e.onGoBack,E;n[11]!==C||n[12]!==L?(E={headerEnabled:!1,onBackButton:C,titleText:"Support",withBackButton:L},n[11]=C,n[12]=L,n[13]=E):E=n[13];var k=E,I;n[14]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",justifyContent:"center",position:"relative",children:s.jsx(r("IGDSSpinner.react"),{})}),n[14]=I):I=n[14];var T=I,D;n[15]!==R||n[16]!==f?(D=s.jsx(r("IGDSBox.react"),{color:"primaryBackground",minHeight:300,position:"relative",children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(u,{actionOverrides:R,appId:c,loadingFallback:T,params:f})})}),n[15]=R,n[16]=f,n[17]=D):D=n[17];var x;return n[18]!==k||n[19]!==h||n[20]!==D?(x=s.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:k,onClose:h,children:D}),n[18]=k,n[19]=h,n[20]=D,n[21]=x):x=n[21],x}function m(e,t){return o("PolarisNavigationUtils").openURLWithFullPageReload(t,{openInNewTab:!0})}l.default=d}),98);
__d("PolarisFRXComplianceScreenModal.react",["IGDSBox.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportMainButton.react","PolarisFRXReportModalRichText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(20),n=e.headerParams,a=e.onClose,i=e.screenPayload,l=i.response,u;t[0]!==l?(u=l||{},t[0]=l,t[1]=u):u=t[1];var d=u,m=d.button_text,p=d.contact_form_url,_=d.content,f=d.title,g;t[2]!==f?(g=f?s.jsx(r("IGDSBox.react"),{marginBottom:4,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",textAlign:"start",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:f})})}):null,t[2]=f,t[3]=g):g=t[3];var h;t[4]!==_?(h=_&&_.length>0?s.jsx(r("IGDSBox.react"),{position:"relative",children:_.map(c)}):null,t[4]=_,t[5]=h):h=t[5];var y;t[6]!==g||t[7]!==h?(y=s.jsxs(r("IGDSBox.react"),{marginTop:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:[g,h]}),t[6]=g,t[7]=h,t[8]=y):y=t[8];var C;t[9]!==m||t[10]!==p||t[11]!==e.onSubmitScreen?(C=(m==null?void 0:m.text)!=null?s.jsx(r("PolarisFRXReportMainButton.react"),{"data-testid":void 0,href:p,onClick:e.onSubmitScreen,text:m.text,textAlign:"center"}):null,t[9]=m,t[10]=p,t[11]=e.onSubmitScreen,t[12]=C):C=t[12];var b;t[13]!==C?(b=s.jsx(r("IGDSBox.react"),{marginBottom:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM,marginTop:4,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:C}),t[13]=C,t[14]=b):b=t[14];var v;return t[15]!==n||t[16]!==a||t[17]!==y||t[18]!==b?(v=s.jsxs(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:n,onClose:a,children:[y,b]}),t[15]=n,t[16]=a,t[17]=y,t[18]=b,t[19]=v):v=t[19],v}function c(e,t){return s.jsx(r("IGDSBox.react"),{marginBottom:3,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"start",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:e})})},t)}c.displayName=c.name+" [from "+i.id+"]",l.default=u}),98);
__d("PolarisFRXReportConfirmationScreenModal.react",["IGDSBox.react","IGDSCircleCheckPanoOutlineIcon.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportMainButton.react","PolarisFRXReportModalFollowUpActionSection.react","PolarisFRXReportModalRichText.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportStrings","PolarisGenericStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){var n=t.action_type;if(n!=null){var r=e.screenPayload.response;o("PolarisFRXWebReportAPIUtils").handleFRXGuidedAction({action_type:n,context:r==null?void 0:r.context})}}function c(e){var t=o("react-compiler-runtime").c(13),n=e.headerParams,a=e.onClose,i;t[0]!==a?(i=function(){return a()},t[0]=a,t[1]=i):i=t[1];var l=i,u,c;t[2]!==e?(u=s.jsx(d,babelHelpers.extends({},e)),c=s.jsx(m,babelHelpers.extends({},e)),t[2]=e,t[3]=u,t[4]=c):(u=t[3],c=t[4]);var p;t[5]!==l?(p=s.jsx(r("IGDSBox.react"),{marginBottom:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM,marginTop:4,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:s.jsx(r("PolarisFRXReportMainButton.react"),{"data-testid":void 0,onClick:l,text:o("PolarisGenericStrings").CLOSE_TEXT})}),t[5]=l,t[6]=p):p=t[6];var _;return t[7]!==n||t[8]!==l||t[9]!==u||t[10]!==c||t[11]!==p?(_=s.jsxs(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:n,onClose:l,children:[u,c,p]}),t[7]=n,t[8]=l,t[9]=u,t[10]=c,t[11]=p,t[12]=_):_=t[12],_}function d(e){var t=o("react-compiler-runtime").c(14),n=e.screenPayload,a;t[0]!==n?(a=n||{},t[0]=n,t[1]=a):a=t[1];var i=a,l=i.response,u;t[2]!==l?(u=l||{},t[2]=l,t[3]=u):u=t[3];var c=u,d=c.follow_up_actions_title,m=c.subtitle,p;t[4]!==m?(p=m?s.jsx(r("IGDSBox.react"),{alignItems:"start",marginTop:6,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",textAlign:"center",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:m})})}):null,t[4]=m,t[5]=p):p=t[5];var _=p,f=null;if(d){var g;if(t[6]!==d?(g=s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:d})}),t[6]=d,t[7]=g):g=t[7],f=g,_){var h;t[8]!==f?(h=s.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",children:f}),t[8]=f,t[9]=h):h=t[9],f=h}}var y;t[10]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(r("IGDSCircleCheckPanoOutlineIcon.react"),{alt:o("PolarisFRXWebReportStrings").CHECKMARK_ICON_ALT_TEXT,color:"ig-success",size:48}),t[10]=y):y=t[10];var C;return t[11]!==f||t[12]!==_?(C=s.jsx(r("IGDSBox.react"),{marginTop:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:s.jsxs(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",marginTop:6,position:"relative",children:[y,_,f]})}),t[11]=f,t[12]=_,t[13]=C):C=t[13],C}function m(e){var t=o("react-compiler-runtime").c(6),n=e.reportedOwner,a=e.screenPayload,i=a.response,l=i==null?void 0:i.follow_up_actions;if(!l||l.length===0)return null;var c;t[0]!==e?(c=function(n){u(e,n)},t[0]=e,t[1]=c):c=t[1];var d;return t[2]!==l||t[3]!==n||t[4]!==c?(d=s.jsx(r("PolarisFRXReportModalFollowUpActionSection.react"),{followUpActions:l,onSelectFollowupAction:c,reportedOwner:n}),t[2]=l,t[3]=n,t[4]=c,t[5]=d):d=t[5],d}l.default=c}),98);
__d("PolarisFRXReportModalScreenContentSectionList.react",["IGDSBox.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=4;function c(e){var t=o("react-compiler-runtime").c(7),n=e.sections,a=e.marginBetween,i=a===void 0?u:a,l;if(t[0]!==i||t[1]!==n){var c;t[3]!==i?(c=function(t,n){var e=n>0&&i!==0?s.jsx(r("IGDSBox.react"),{marginTop:i,position:"relative"}):null;return s.jsxs(s.Fragment,{children:[e,t]},"section-"+n)},t[3]=i,t[4]=c):c=t[4],l=n.filter(d).map(c),t[0]=i,t[1]=n,t[2]=l}else l=t[2];var m=l,p;return t[5]!==m?(p=s.jsx(s.Fragment,{children:m}),t[5]=m,t[6]=p):p=t[6],p}function d(e){return!!e}l.default=c}),98);
__d("PolarisFRXReportModalPolicyEducationSection.react",["IGDSBox.react","IGDSText.react","IGDSTextVariants.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=2,c=1,d="\u2022";function m(e,t){var n=e.first_paragraph,o=[];return[n].forEach(function(e){!e||(e==null?void 0:e.text)==null||(e==null?void 0:e.text)===""||o.push(s.jsx(r("IGDSText.react"),{color:"secondaryText",size:"body",weight:t?"semibold":"normal",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:e})}))}),o}function p(e){var t=e.policies,n=t===void 0?[]:t;if(!n||n.length===0)return[];var a=[];return n.forEach(function(e){var t=e.title;t&&a.push(s.jsx("div",{role:"listitem",children:s.jsxs(r("IGDSBox.react"),{direction:"row",position:"relative",children:[s.jsx(r("IGDSBox.react"),{marginEnd:2,position:"relative",children:s.jsx("div",{"aria-hidden":"true",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",zeroMargin:!0,children:d})})}),s.jsx(r("IGDSBox.react"),{flex:"grow",position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:t})})})]})}))}),a}function _(e){var t=o("react-compiler-runtime").c(23),n=e.policyEducation,a=n.second_paragraph,i=n.title,l;t[0]!==i?(l=i?s.jsx(o("IGDSTextVariants.react").IGDSTextSection,{zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:i})}):null,t[0]=i,t[1]=l):l=t[1];var d=l,_;t[2]!==n?(_=p(n),t[2]=n,t[3]=_):_=t[3];var f=_,g=f.length>0,h;t[4]!==n||t[5]!==g?(h=m(n,g),t[4]=n,t[5]=g,t[6]=h):h=t[6];var y=h,C;t[7]!==y||t[8]!==d?(C=y.length>0?s.jsx(r("IGDSBox.react"),{marginTop:d?u:0,position:"relative",children:s.jsx(r("PolarisFRXReportModalScreenContentSectionList.react"),{marginBetween:u,sections:y})}):null,t[7]=y,t[8]=d,t[9]=C):C=t[9];var b=C,v;t[10]!==b||t[11]!==f||t[12]!==d?(v=f.length>0?s.jsx(r("IGDSBox.react"),{marginTop:d||b?c:0,position:"relative",children:s.jsx("div",{role:"list",children:s.jsx(r("PolarisFRXReportModalScreenContentSectionList.react"),{marginBetween:c,sections:f})})}):null,t[10]=b,t[11]=f,t[12]=d,t[13]=v):v=t[13];var S=v,R;t[14]!==S||t[15]!==a||t[16]!==d?(R=a?s.jsxs(r("IGDSBox.react"),{marginTop:S?1:0,position:"relative",children:[s.jsx(r("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:a})}),s.jsx(r("IGDSBox.react"),{height:d?2:10,position:"relative"})]}):null,t[14]=S,t[15]=a,t[16]=d,t[17]=R):R=t[17];var L=R,E;return t[18]!==b||t[19]!==S||t[20]!==L||t[21]!==d?(E=s.jsxs(r("IGDSBox.react"),{position:"relative",children:[d,L,b,S]}),t[18]=b,t[19]=S,t[20]=L,t[21]=d,t[22]=E):E=t[22],E}l.default=_}),98);
__d("PolarisFRXReportModalPromptButton.react",["fbt","PolarisFRXReportMainButton.react","PolarisFRXWebReportStateSelectors","PolarisReactRedux.react","react","react-compiler-runtime","useCometAccessibilityAlerts"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(15),n=o("PolarisReactRedux.react").useSelector(o("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing),a=r("useCometAccessibilityAlerts")(),i=a.accessibilityAlerts,l=a.triggerAccessibilityAlert,c=e.actionType,d=e.canSubmitOnClick,m=e.disabled,p=e.href,_=e.label,f=e.onSubmit,g=e.primaryButton,h=m===void 0?!1:m,y=g===void 0?!0:g,C=h||d&&n,b;t[0]!==c||t[1]!==d||t[2]!==f||t[3]!==l?(b=function(){l(s._(/*BTDS*/"Loading")),d&&f&&f(c)},t[0]=c,t[1]=d,t[2]=f,t[3]=l,t[4]=b):b=t[4];var v=d&&n,S;t[5]!==p||t[6]!==_||t[7]!==y||t[8]!==C||t[9]!==b||t[10]!==v?(S=u.jsx(r("PolarisFRXReportMainButton.react"),{disabled:C,href:p,onClick:b,primaryButton:y,spinner:v,text:_}),t[5]=p,t[6]=_,t[7]=y,t[8]=C,t[9]=b,t[10]=v,t[11]=S):S=t[11];var R;return t[12]!==i||t[13]!==S?(R=u.jsxs(u.Fragment,{children:[S,i]}),t[12]=i,t[13]=S,t[14]=R):R=t[14],R}l.default=c}),226);
__d("PolarisFRXReportPolicyEducationScreenModal.react",["IGDSBox.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalPolicyEducationSection.react","PolarisFRXReportModalPromptButton.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisFRXWebReportUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(24),n=e.headerParams,a=e.onClose,i=e.screenPayload,l=i.response,u;t[0]!==l?(u=l||{},t[0]=l,t[1]=u):u=t[1];var m=u,p=m.policy_education,_=m.subtitle,f;t[2]!==_?(f=_?s.jsx(c,{subtitle:_}):null,t[2]=_,t[3]=f):f=t[3];var g=f,h;t[4]!==p?(h=p?s.jsx(r("PolarisFRXReportModalPolicyEducationSection.react"),{policyEducation:p}):null,t[4]=p,t[5]=h):h=t[5];var y=h,C;t[6]!==i?(C=o("PolarisFRXWebReportUtils").getPromptButtonRenderPropsFromScreenPayload(i),t[6]=i,t[7]=C):C=t[7];var b=C,v;t[8]!==b||t[9]!==e?(v=b?s.jsx(d,{parentProps:e,promptButtonProps:b}):null,t[8]=b,t[9]=e,t[10]=v):v=t[10];var S=v,R=null;if(p){var L=p.education_button;if(L){var E,k,I=(E=(k=L.title)==null?void 0:k.text)!=null?E:"",T;if(t[11]!==L.action_type||t[12]!==L.url||t[13]!==I){var D={actionType:L.action_type,canSubmitOnClick:!1,href:L.url,label:I,primaryButton:!1};T=s.jsx(r("PolarisFRXReportModalPromptButton.react"),babelHelpers.extends({},D)),t[11]=L.action_type,t[12]=L.url,t[13]=I,t[14]=T}else T=t[14];R=T}}var x;t[15]!==R||t[16]!==y||t[17]!==S||t[18]!==g?(x=s.jsx(r("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[g,y,S,R]}),t[15]=R,t[16]=y,t[17]=S,t[18]=g,t[19]=x):x=t[19];var $;return t[20]!==n||t[21]!==a||t[22]!==x?($=s.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:n,onClose:a,children:x}),t[20]=n,t[21]=a,t[22]=x,t[23]=$):$=t[23],$}function c(e){var t=o("react-compiler-runtime").c(2),n=e.subtitle,a;return t[0]!==n?(a=s.jsx(r("IGDSBox.react"),{alignItems:"start",marginTop:2,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:n})})}),t[0]=n,t[1]=a):a=t[1],a}function d(e){var t=o("react-compiler-runtime").c(5),n=e.parentProps,a=e.promptButtonProps,i=n.onSubmitScreen,l;t[0]!==i?(l=function(t){return i(t)},t[0]=i,t[1]=l):l=t[1];var u;return t[2]!==a||t[3]!==l?(u=s.jsx(r("PolarisFRXReportModalPromptButton.react"),babelHelpers.extends({},a,{onSubmit:l})),t[2]=a,t[3]=l,t[4]=u):u=t[4],u}l.default=u}),98);
__d("PolarisReportSearchBoxContainer.react",["PolarisMobileSearchBox.react","PolarisReactRedux.react","PolarisSearchActions","polarisSearchSelectors","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.search,n=o("polarisSearchSelectors").getCurrentSearchContent(e);return{currentTab:t.currentSearchTab,discoverToken:"",loading:n.loading,rankToken:n.rankToken,results:n.results,searchedForQuery:n.searchedForQuery,selectedIndex:n.selectedIndex,suggested:t.suggested}}function c(e){return{onClearSearch:function(){e(o("PolarisSearchActions").clearSearch())},onNavigateToResult:function(n,r,a){e(o("PolarisSearchActions").navigateToResult(n,r,a))},onSearch:function(n,r,a,i,l){e(o("PolarisSearchActions").search(n,r,a))},onSelectResult:function(n,r){e(o("PolarisSearchActions").selectResult(n,r))}}}var d=o("PolarisReactRedux.react").connect(u,c)(r("PolarisMobileSearchBox.react"));l.default=d}),98);
__d("PolarisReportButton.react",["PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.color,i=e.disabled,l=e.onClick,u=a===void 0?"ig-primary-button":a,c;return t[0]!==n||t[1]!==u||t[2]!==i||t[3]!==l?(c=s.jsx(r("PolarisIGCoreButton.react"),{color:u,disabled:i,fullWidth:!0,large:!0,onClick:l,children:n}),t[0]=n,t[1]=u,t[2]=i,t[3]=l,t[4]=c):c=t[4],c}l.default=u}),98);
__d("PolarisReportUserImpersonationListItem.react",["IGDSBox.react","IGDSListItem.react","IGDSTextVariants.react","PolarisAssetManagerGlyphMapping","PolarisGenericStrings","PolarisIGCoreIcon.react","PolarisReportButton.react","PolarisReportStrings","PolarisUserAvatar.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$1=function(){t.props.onReport()},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){var e=this.props.result;return s.jsx(r("IGDSListItem.react"),{addOnEnd:s.jsx(r("PolarisReportButton.react"),{onClick:this.$1,children:o("PolarisReportStrings").nextText}),addOnStart:s.jsx(r("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:e.profilePictureUrl,size:44,username:e.username}),subtitle:e.fullName,title:s.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",display:"block",children:[s.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{breakWord:!0,children:e.username}),e.isVerified?s.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginStart:1,children:s.jsx(r("PolarisIGCoreIcon.react"),{alt:o("PolarisGenericStrings").VERIFIED_TEXT,icon:o("PolarisAssetManagerGlyphMapping").ICONS.VERIFIED_SMALL})}):null]})})},t})(s.Component);l.ReportUserImpersonationListItem=u}),98);
__d("PolarisReportUserImpersonationSearchBox.react",["IGDSBox.react","PolarisReportSearchBoxContainer.react","PolarisReportUserImpersonationListItem.react","PolarisSearchConstants","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(23),n=e.fromWebview,a=e.onSelectVictim,i=e.reportedUserID,l=e.searchBoxPlaceHolder,u=e.userSearchResults,c=e.verifiedOnly,d=n===void 0?!1:n,m;t[0]!==l?(m=s.jsx(r("PolarisReportSearchBoxContainer.react"),{analyticsContext:void 0,disableResultKeyboardNav:!0,hideCancelButton:!0,isActive:!0,placeholder:l,searchContext:o("PolarisSearchConstants").SEARCH_CONTEXT.USER,useHistory:!0}),t[0]=l,t[1]=m):m=t[1];var p=d?0:2,_;t[2]!==d?(_={0:{},1:{className:"x14sbp7s x14xr3q5"}}[!!d<<0],t[2]=d,t[3]=_):_=t[3];var f;if(t[4]!==a||t[5]!==i||t[6]!==u||t[7]!==c){var g;t[9]!==i||t[10]!==c?(g=function(t){return c?t.isVerified&&t.pk!==i.toString():t.pk!==i.toString()},t[9]=i,t[10]=c,t[11]=g):g=t[11];var h;t[12]!==a?(h=function(t,n){return s.jsx(o("PolarisReportUserImpersonationListItem.react").ReportUserImpersonationListItem,{onReport:function(){return a(t)},result:t},n)},t[12]=a,t[13]=h):h=t[13],f=u.filter(g).map(h),t[4]=a,t[5]=i,t[6]=u,t[7]=c,t[8]=f}else f=t[8];var y;t[14]!==_||t[15]!==f?(y=s.jsx("div",babelHelpers.extends({},_,{children:f})),t[14]=_,t[15]=f,t[16]=y):y=t[16];var C;t[17]!==p||t[18]!==y?(C=s.jsx(r("IGDSBox.react"),{color:"primaryBackground",marginTop:p,position:"relative",children:y}),t[17]=p,t[18]=y,t[19]=C):C=t[19];var b;return t[20]!==m||t[21]!==C?(b=s.jsxs("div",{children:[m,C]}),t[20]=m,t[21]=C,t[22]=b):b=t[22],b}l.default=u}),98);
__d("PolarisFRXReportSelectVictimScreenModal.react",["IGDSBox.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisReactRedux.react","PolarisReportConstants","PolarisReportUserImpersonationSearchBox.react","PolarisSearchActions","PolarisSearchConstants","polarisSearchSelectors","react","react-compiler-runtime","useJSON"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){for(var t=e.allSearchResults,n=[],r=0;r<t.length;r++){var o=t[r];o.type==="USER_RESULT"&&n.push(o)}return n}function d(e){var t=o("react-compiler-runtime").c(3),n=e.onClearSearch,r,a;t[0]!==n?(r=function(){return(function(){n()})},a=[n],t[0]=n,t[1]=r,t[2]=a):(r=t[1],a=t[2]),u(r,a)}function m(e){d(e);var t=e.headerParams,n=e.onClose,a=e.onSelectVictim,i=e.reportedOwner,l=e.screenPayload,u=l.response,m=u||{},p=m.subtitle,_=u.context,f=i.id,g=p?s.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:p})})}):null,h=!1;try{var y=r("useJSON")(_!=null?_:null),C=y==null?void 0:y.tags;h=(C==null?void 0:C.includes(o("PolarisReportConstants").IGUserImpersonationSomeoneIFollowTag.tag_type))===!0}catch(e){h=!1}var b=!h,v=s.jsx(r("PolarisReportUserImpersonationSearchBox.react"),{onSelectVictim:function(t){return a(t)},reportedUserID:f,searchBoxPlaceHolder:o("PolarisSearchConstants").IMPERSONATION_SEARCH_TEXT,userSearchResults:c(e),verifiedOnly:b});return s.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:t,onClose:n,children:s.jsx(r("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[g,v]})})}m.displayName=m.name+" [from "+i.id+"]";function p(e){var t=o("polarisSearchSelectors").getCurrentSearchContent(e),n=t.results;return{allSearchResults:n}}var _={onClearSearch:o("PolarisSearchActions").clearSearch},f=o("PolarisReactRedux.react").connect(p,_)(m);l.default=f}),98);
__d("PolarisFRXReportTagSelectionScreenModal.react",["fbt","IGDSBox.react","IGDSInfoPanoFilledIcon.react","IGDSText.react","IGDSTextVariants.react","InstagramAdHideResponseFalcoEvent","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalOptionList.react","PolarisFRXReportModalOptionListItem.react","PolarisFRXReportModalPolicyEducationSection.react","PolarisFRXReportModalPromptButton.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportConstants","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportUtils","PolarisFastLink.react","PolarisReactRedux.react","PolarisReportConstants","goUriOnNewWindow","isEmpty","isStringNullOrEmpty","polarisAdsSelectors.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useEffect,p=d.useRef,_=d.useState,f={ctaLink:{cursor:"x1ypdohk",$$css:!0}},g=null,h="";function y(e,t,n,a){var i,l=e.isFRXScreenRequestProcessing,s=e.onSubmitScreen,u=e.screenPayload.response,c=t.setStateSelectedTagTitle,d=t.setStateSelectedTagType,m=n.tag_type,p=n.title,_=(i=p==null?void 0:p.text)!=null?i:"";if(n.tag_click_override_url!=null){r("goUriOnNewWindow")(n.tag_click_override_url);return}l||m==null||m===""||(d(m),c(_),o("PolarisFRXWebReportAPIUtils").logFRXTagSelected({context:u==null?void 0:u.context,selected_tag_type:m}),a||s({selectedPromptButtonActionType:null,selectedTagTitles:[_],selectedTagTypes:[m]}))}function C(e,t,n){var o=e.onSubmitScreen,a=t.selectedTagTitle,i=t.selectedTagType;r("isStringNullOrEmpty")(i)||o({selectedPromptButtonActionType:n,selectedTagTitles:[a],selectedTagTypes:[i]})}function b(e){var t=e.onComplianceContextualMessageClicked,n=e.screenPayload,r=n.response,o=r||{},a=o.compliance;a&&t({complianceType:a.type,isComplianceNavigation:!0})}function v(){var e=o("react-compiler-runtime").c(3),t=_(g),n=t[0],r=t[1],a=_(h),i=a[0],l=a[1],s;return e[0]!==i||e[1]!==n?(s={selectedTagTitle:i,selectedTagType:n,setStateSelectedTagTitle:l,setStateSelectedTagType:r},e[0]=i,e[1]=n,e[2]=s):s=e[2],s}function S(e,t){var n=t.setStateSelectedTagTitle,r=t.setStateSelectedTagType,o=e.screenPayload.frxScreenRequestID,a=p(),i=a.current;m(function(){a.current=o,o!==i&&(r(g),n(h))},[o,i,r,n])}function R(e){var t=o("react-compiler-runtime").c(7),n=v();S(e,n);var r=e.headerParams,a=e.onClose,i;t[0]!==e||t[1]!==n?(i=c.jsx(L,{parentProps:e,parentState:n}),t[0]=e,t[1]=n,t[2]=i):i=t[2];var l;return t[3]!==r||t[4]!==a||t[5]!==i?(l=c.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:r,onClose:a,children:i}),t[3]=r,t[4]=a,t[5]=i,t[6]=l):l=t[6],l}function L(t){var n=o("react-compiler-runtime").c(33),a=t.parentProps,i=t.parentState,l=a.screenPayload,s=l.response,u;n[0]!==s?(u=s||{},n[0]=s,n[1]=u):u=n[1];var d=u,m=d.compliance,p=d.policy_education,_=d.report_tags,f=d.second_subtitle,g=d.subtitle,h;if(n[2]!==g){var y;h=g&&!(e||(e=r("isEmpty")))((y=g.text)==null?void 0:y.trim())?c.jsx(E,{subtitle:g}):null,n[2]=g,n[3]=h}else h=n[3];var C=h,v;if(n[4]!==f){var S;v=f&&!(e||(e=r("isEmpty")))((S=f.text)==null?void 0:S.trim())?c.jsx(k,{secondSubtitle:f}):null,n[4]=f,n[5]=v}else v=n[5];var R=v,L;n[6]!==a||n[7]!==i||n[8]!==_?(L=_&&_.length>0?c.jsx(I,{parentProps:a,parentState:i,reportTags:_}):null,n[6]=a,n[7]=i,n[8]=_,n[9]=L):L=n[9];var $=L,P;n[10]!==m||n[11]!==a||n[12]!==(s==null?void 0:s.context)?(P=m?c.jsx(T,{compliance:m,context:s==null?void 0:s.context,onOpenComplianceScreen:function(){b(a)}}):null,n[10]=m,n[11]=a,n[12]=s==null?void 0:s.context,n[13]=P):P=n[13];var N=P,M;n[14]!==p?(M=p?c.jsx(D,{policyEducation:p}):null,n[14]=p,n[15]=M):M=n[15];var w=M,A;n[16]!==l?(A=o("PolarisFRXWebReportUtils").getPromptButtonRenderPropsFromScreenPayload(l),n[16]=l,n[17]=A):A=n[17];var F=A,O;n[18]!==a||n[19]!==i||n[20]!==F?(O=F?c.jsx(x,{parentProps:a,parentState:i,promptButtonProps:F}):null,n[18]=a,n[19]=i,n[20]=F,n[21]=O):O=n[21];var B=O,W=C!=null?o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP:0,q=w||B?o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM:0,U;n[22]!==N||n[23]!==w||n[24]!==B||n[25]!==$||n[26]!==R||n[27]!==C?(U=c.jsx(r("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[C,R,$,N,w,B]}),n[22]=N,n[23]=w,n[24]=B,n[25]=$,n[26]=R,n[27]=C,n[28]=U):U=n[28];var V;return n[29]!==q||n[30]!==W||n[31]!==U?(V=c.jsx(r("IGDSBox.react"),{marginBottom:q,marginTop:W,position:"relative",children:U}),n[29]=q,n[30]=W,n[31]=U,n[32]=V):V=n[32],V}function E(e){var t=o("react-compiler-runtime").c(2),n=e.subtitle,a;return t[0]!==n?(a=c.jsx(r("IGDSBox.react"),{alignItems:"start",marginTop:2,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:c.jsx(o("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",children:c.jsx(r("PolarisFRXReportModalRichText.react"),{richText:n})})}),t[0]=n,t[1]=a):a=t[1],a}function k(e){var t=o("react-compiler-runtime").c(2),n=e.secondSubtitle,a;return t[0]!==n?(a=c.jsx(r("IGDSBox.react"),{marginTop:0,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:c.jsx(r("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",zeroMargin:!0,children:c.jsx(r("PolarisFRXReportModalRichText.react"),{richText:n})})}),t[0]=n,t[1]=a):a=t[1],a}function I(e){var t=o("react-compiler-runtime").c(26),n=e.parentProps,a=e.parentState,i=e.reportTags,l=n.frxMetadata,s=n.isFRXScreenRequestProcessing,u=n.onSelectReportAd,d=n.screenPayload,m=d.response,p;t[0]!==m?(p=m||{},t[0]=m,t[1]=p):p=t[1];var _=p,f=_.style,g=a.selectedTagType,h=f===o("PolarisFRXWebReportConstants").FRX_TAG_SELECTION_STYLE_INTS.RADIO_BUTTONS,C=o("polarisAdsSelectors.react").useFRXReportAdLoggingParams(l.object_id,l.location),b;if(t[2]!==l.object_id||t[3]!==l.object_type||t[4]!==C||t[5]!==s||t[6]!==u||t[7]!==n||t[8]!==a||t[9]!==i||t[10]!==g||t[11]!==h){var v;t[13]!==l.object_id||t[14]!==l.object_type||t[15]!==C||t[16]!==s||t[17]!==u||t[18]!==n||t[19]!==a||t[20]!==g||t[21]!==h?(v=function(t,i){var e=t.tag_type,d=t.title,m=g===e,p=s&&m&&!h,_=h?o("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_VARIANTS.RADIO:o("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_VARIANTS.BUTTON,f="tag-"+i;return c.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{"data-testid":void 0,loading:p,onSelect:function(){l.object_type===o("PolarisReportConstants").FRXObjectType.AD&&(u!=null?u(e):r("InstagramAdHideResponseFalcoEvent").log(function(){return babelHelpers.extends({ad_id:l.object_id,response:e},C)})),y(n,a,t,h)},selected:m,value:f,variant:_,children:d==null?void 0:d.text},f)},t[13]=l.object_id,t[14]=l.object_type,t[15]=C,t[16]=s,t[17]=u,t[18]=n,t[19]=a,t[20]=g,t[21]=h,t[22]=v):v=t[22],b=i.map(v),t[2]=l.object_id,t[3]=l.object_type,t[4]=C,t[5]=s,t[6]=u,t[7]=n,t[8]=a,t[9]=i,t[10]=g,t[11]=h,t[12]=b}else b=t[12];var S=b,R;return t[23]!==S||t[24]!==h?(R=c.jsx(r("PolarisFRXReportModalOptionList.react"),{asRadio:h,children:S}),t[23]=S,t[24]=h,t[25]=R):R=t[25],R}function T(e){var t=o("react-compiler-runtime").c(17),n=e.compliance,a=e.context,i=e.onOpenComplianceScreen,l=n.cta,u=n.description,d=n.title,p,_;if(t[0]!==n.type||t[1]!==a?(p=function(){n.type!=null&&n.type!==o("PolarisFRXWebReportConstants").FRX_COMPLIANCE_SCREEN_TYPE_INTS.NONE&&o("PolarisFRXWebReportAPIUtils").logFRXComplianceEntrypointRenderedGraphQL({compliance_type:n.type,context:a})},_=[n.type,a],t[0]=n.type,t[1]=a,t[2]=p,t[3]=_):(p=t[2],_=t[3]),m(p,_),n.type===o("PolarisFRXWebReportConstants").FRX_COMPLIANCE_SCREEN_TYPE_INTS.NONE)return null;var g;t[4]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx(r("IGDSBox.react"),{alignItems:"start",display:"flex",marginEnd:4,marginTop:0,minWidth:20,children:c.jsx(r("IGDSInfoPanoFilledIcon.react"),{alt:s._(/*BTDS*/"info_pano_icon"),color:"ig-primary-icon",size:20})}),t[4]=g):g=t[4];var h;t[5]!==d?(h=d&&c.jsx(r("IGDSBox.react"),{marginBottom:4,children:c.jsx(r("IGDSText.react"),{color:"primaryText",size:"body",weight:"semibold",children:c.jsx(r("PolarisFRXReportModalRichText.react"),{richText:d})})}),t[5]=d,t[6]=h):h=t[6];var y;t[7]!==l||t[8]!==u?(y=u&&c.jsx(r("IGDSBox.react"),{marginBottom:l?4:0,children:c.jsx(r("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",children:c.jsx(r("PolarisFRXReportModalRichText.react"),{richText:u})})}),t[7]=l,t[8]=u,t[9]=y):y=t[9];var C;t[10]!==l||t[11]!==i?(C=l&&c.jsx(r("IGDSBox.react"),{xstyle:f.ctaLink,children:c.jsx(r("IGDSText.react"),{color:"link",size:"body",weight:"normal",children:c.jsx(r("PolarisFastLink.react"),{onClick:i,children:c.jsx(r("PolarisFRXReportModalRichText.react"),{richText:l})})})}),t[10]=l,t[11]=i,t[12]=C):C=t[12];var b;return t[13]!==h||t[14]!==y||t[15]!==C?(b=c.jsx(r("IGDSBox.react"),{marginBottom:8,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:c.jsxs(r("IGDSBox.react"),{direction:"row",display:"flex",shape:"rounded",children:[g,c.jsxs(r("IGDSBox.react"),{direction:"column",display:"flex",flex:"grow",children:[h,y,C]})]})}),t[13]=h,t[14]=y,t[15]=C,t[16]=b):b=t[16],b}function D(e){var t=o("react-compiler-runtime").c(2),n=e.policyEducation,a;return t[0]!==n?(a=c.jsx(r("IGDSBox.react"),{paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:c.jsx(r("PolarisFRXReportModalPolicyEducationSection.react"),{policyEducation:n})}),t[0]=n,t[1]=a):a=t[1],a}function x(e){var t=o("react-compiler-runtime").c(7),n=e.parentProps,a=e.parentState,i=e.promptButtonProps,l=a.selectedTagType,s=!l,u;t[0]!==n||t[1]!==a?(u=function(t){return C(n,a,t)},t[0]=n,t[1]=a,t[2]=u):u=t[2];var d;return t[3]!==i||t[4]!==s||t[5]!==u?(d=c.jsx(r("IGDSBox.react"),{paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:c.jsx(r("PolarisFRXReportModalPromptButton.react"),babelHelpers.extends({},i,{disabled:s,onSubmit:u}))}),t[3]=i,t[4]=s,t[5]=u,t[6]=d):d=t[6],d}function $(e){return{isFRXScreenRequestProcessing:o("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing(e)}}var P=o("PolarisReactRedux.react").connect($,null)(R);l.default=P}),226);
__d("PolarisFRXReportUtils",[],(function(t,n,r,o,a,i){"use strict";var e=["ig_ad_ip_violation","ig_ad_ip_violation","ig_intellectual_property_v1","ig_ar_effect_ip_violation","ig_intellectual_property_direct_message","ig_hashtag_intellectual_property","ig_ad_spam","ig_spam_v3","ig_spam_direct_message","ig_bullying_or_harassment_comment_v3","ig_bullying_or_harassment_direct_message","ig_hashtag_bullying_or_harassment","ig_ar_effect_harassment_or_bullying","ig_harassment_or_bullying","ig_nudity_v2","ig_nudity_direct_message","ig_clips_audio_page_nudity","ig_clips_effect_page_nudity","ig_clips_prompt_page_nudity","ig_hashtag_nudity","ig_ar_effect_nudity_or_pornography","ig_ad_sexually_inappropriate","ig_iab_sexually_inappropriate","product_sexualized_content_or_adult_products","bi_commerce_sexualized_or_adult_content","inappropriate_content","ig_commerce_ugc_graphic_content","bi_commerce_abusive_or_harmful","ig_violence_parent","ig_ad_violent_prohibited","ig_ar_effect_violence","ig_violence_direct_message","ig_hashtag_violence","ig_violence_v3","ig_violence","ig_dangerous_org_or_individual","ig_hate_speech_v3","ig_ar_effect_hate_speech","ig_hate_speech_direct_message","ig_hashtag_hate_speech","ig_i_dont_like_it_v3","ig_ar_effect_i_dont_like_it","ig_i_dont_like_it_direct_message","ig_ad_offensive","ig_self_injury_v3","ig_ar_effect_self_injury","ig_hashtag_self_injury","ig_self_injury_direct_message","ig_ad_scam_misleading","ig_product_scam_fraud_v2","ig_product_scam_fraud_reportable","ig_iab_scam_misleading","bi_commerce_misleading_or_possible_scam","ig_sale_of_illegal_or_regulated_goods_v3","ig_sale_of_illegal_or_regulated_goods_direct_message","ig_sale_of_illegal_or_regulated_goods_v2","ig_ar_effect_drugs","ig_ar_effect_firearms","bi_commerce_alcohol_tobacco_and_weapons","bi_commerce_animal_products_or_sales","ig_false_news","ig_ar_effect_false_information","ig_report_report_as_unlawful","bi_commerce_discriminatory_listing","discrimination","ig_something_else","something_else","ig_ad_political","ig_eating_disorder","bi_commerce_buying_or_selling","ig_commerce_ugc_manipulation","ig_commerce_ugc_irrelevance","ig_commerce_review_irrelevant","ig_commerce_fake_review","ig_commerce_product_answer_irrelevant","ig_commerce_product_question_irrelevant","ig_user_impersonation","ig_unwanted_joiner","ig_iab_excessive_ads","ig_iab_other","page_place_inaccurate_info","bi_commerce_service_or_job","product_no_intent_to_sale","bi_commerce_appears_to_be_counterfeit","bi_commerce_health_or_wellness","bi_commerce_other_prohibited","bi_commerce_no_service_offered","bi_commerce_health_or_medical","information_misuse","dont_recognize_activity"];function l(t){return e.includes(t)}i.shouldUseTagType=l}),66);
__d("PolarisFRXReportScreenModal.react",["IGDSBox.react","IGDSSpinner.react","PolarisFRXComplianceScreenModal.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportConfirmationScreenModal.react","PolarisFRXReportPolicyEducationScreenModal.react","PolarisFRXReportSelectVictimScreenModal.react","PolarisFRXReportTagSelectionScreenModal.react","PolarisFRXReportUtils","PolarisFRXWebReportActions","PolarisFRXWebReportConstants","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisFRXWebReportUtils","PolarisReactRedux.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useState;function c(e){e.onClose&&e.onClose()}function d(e){var t=e.isFRXScreenRequestProcessing,n=e.onGoBackOneFRXScreen;n&&!t&&n()}function m(e,t){var n=e.frxMetadata,r=e.isFRXScreenRequestProcessing,a=e.onRequestNextFRXScreen,i=e.onStoreReportedTagTitle,l=e.reportedTagTitle,s=e.screenPayload;if(!r){var u=s||{},c=u.response,d=u.type,m=c||{},p=m.context,_=t==null?void 0:t.selectedTagTypes,f=_!=null&&_.length>0?_[0]:null,g=t==null?void 0:t.selectedTagTitles,h=g!=null&&g.length>0?g[0]:"";l===""&&f!=null&&o("PolarisFRXReportUtils").shouldUseTagType(f)&&h!==""&&i(h);var y=(t==null?void 0:t.isComplianceNavigation)===!0,C=y?o("PolarisFRXWebReportConstants").FRX_SCREEN_INPUT_REQUEST_TYPE_INTS.COMPLIANCE_CARD:o("PolarisFRXWebReportUtils").getNextFRXScreenInputRequestTypeFromScreenPayloadType(d);C!=null&&a({context:p,frxPromptRequestType:C,metadata:n,optionalParams:t})}}function p(e){var t=o("react-compiler-runtime").c(67),n=e.frxMetadata,a=e.hasMountedScreenFlow,i=e.hasPreviousScreens,l=e.isFRXScreenRequestProcessing,p=e.onSelectReportAd,g=e.reportedOwner,h=e.screenPayload,y=e.showFRXDropOffSurveyModal,C=e.threadId,b;t[0]!==e?(b=function(){return d(e)},t[0]=e,t[1]=b):b=t[1];var v;t[2]!==i||t[3]!==h||t[4]!==b?(v=o("PolarisFRXReportBaseScreenModal.react").getDefaultScreenModalHeaderParamsFromScreenPayload(h,i,b),t[2]=i,t[3]=h,t[4]=b,t[5]=v):v=t[5];var S=v,R=u(!1),L=R[0],E=R[1],k;t[6]!==e?(k=function(){E(!0),c(e)},t[6]=e,t[7]=k):k=t[7];var I=k,T;t[8]!==S||t[9]!==I?(T=s.jsx(f,{headerParams:S,onClose:I}),t[8]=S,t[9]=I,t[10]=T):T=t[10];var D=T;if(!h){if(l||!a||L){var x;return t[11]!==S||t[12]!==I?(x=s.jsx(_,{headerParams:S,onClose:I}),t[11]=S,t[12]=I,t[13]=x):x=t[13],x}return D}var $=h.type;switch($){case o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.TAG_SELECTION:{var P;t[14]!==I||t[15]!==y?(P=function(){I(),y!=null&&y()},t[14]=I,t[15]=y,t[16]=P):P=t[16];var N;t[17]!==e?(N=function(n){m(e,babelHelpers.extends({},n))},t[17]=e,t[18]=N):N=t[18];var M;t[19]!==e?(M=function(n){m(e,babelHelpers.extends({},n))},t[19]=e,t[20]=M):M=t[20];var w;return t[21]!==n||t[22]!==S||t[23]!==p||t[24]!==h||t[25]!==P||t[26]!==N||t[27]!==M?(w=s.jsx(r("PolarisFRXReportTagSelectionScreenModal.react"),{frxMetadata:n,headerParams:S,onClose:P,onComplianceContextualMessageClicked:N,onSelectReportAd:p,onSubmitScreen:M,screenPayload:h}),t[21]=n,t[22]=S,t[23]=p,t[24]=h,t[25]=P,t[26]=N,t[27]=M,t[28]=w):w=t[28],w}case o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.POLICY_EDUCATION:{var A;t[29]!==I||t[30]!==y?(A=function(){I(),y!=null&&y()},t[29]=I,t[30]=y,t[31]=A):A=t[31];var F;t[32]!==e||t[33]!==g.id||t[34]!==C?(F=function(n){m(e,{responsible_id:g.id,selectedPromptButtonActionType:n,thread_id:C})},t[32]=e,t[33]=g.id,t[34]=C,t[35]=F):F=t[35];var O;return t[36]!==S||t[37]!==h||t[38]!==A||t[39]!==F?(O=s.jsx(r("PolarisFRXReportPolicyEducationScreenModal.react"),{headerParams:S,onClose:A,onSubmitScreen:F,screenPayload:h}),t[36]=S,t[37]=h,t[38]=A,t[39]=F,t[40]=O):O=t[40],O}case o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION:{var B;return t[41]!==S||t[42]!==I||t[43]!==g||t[44]!==h?(B=s.jsx(r("PolarisFRXReportConfirmationScreenModal.react"),{headerParams:S,onClose:I,reportedOwner:g,screenPayload:h}),t[41]=S,t[42]=I,t[43]=g,t[44]=h,t[45]=B):B=t[45],B}case o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.SELECT_VICTIM:{var W;t[46]!==I||t[47]!==y?(W=function(){I(),y!=null&&y()},t[46]=I,t[47]=y,t[48]=W):W=t[48];var q;t[49]!==e?(q=function(n){m(e,{selectedVictimID:n.pk})},t[49]=e,t[50]=q):q=t[50];var U;return t[51]!==S||t[52]!==g||t[53]!==h||t[54]!==W||t[55]!==q?(U=s.jsx(r("PolarisFRXReportSelectVictimScreenModal.react"),{headerParams:S,onClose:W,onSelectVictim:q,reportedOwner:g,screenPayload:h}),t[51]=S,t[52]=g,t[53]=h,t[54]=W,t[55]=q,t[56]=U):U=t[56],U}case o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.COMPLIANCE_CARD:{var V;t[57]!==I||t[58]!==y?(V=function(){I(),y!=null&&y()},t[57]=I,t[58]=y,t[59]=V):V=t[59];var H;t[60]!==I?(H=function(){I()},t[60]=I,t[61]=H):H=t[61];var G;return t[62]!==S||t[63]!==h||t[64]!==V||t[65]!==H?(G=s.jsx(r("PolarisFRXComplianceScreenModal.react"),{headerParams:S,onClose:V,onSubmitScreen:H,screenPayload:h}),t[62]=S,t[63]=h,t[64]=V,t[65]=H,t[66]=G):G=t[66],G}default:return D}}function _(e){var t=o("react-compiler-runtime").c(4),n=e.headerParams,a=e.onClose,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",justifyContent:"center",minHeight:122,position:"relative",children:s.jsx(r("IGDSSpinner.react"),{})}),t[0]=i):i=t[0];var l;return t[1]!==n||t[2]!==a?(l=s.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:n,onClose:a,children:i}),t[1]=n,t[2]=a,t[3]=l):l=t[3],l}function f(e){var t=o("react-compiler-runtime").c(3),n=e.headerParams,r=e.onClose,a;return t[0]!==n||t[1]!==r?(a=s.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:n,onClose:r,children:o("PolarisFRXWebReportStrings").DEFAULT_ERROR_MESSAGE_TEXT}),t[0]=n,t[1]=r,t[2]=a):a=t[2],a}function g(e){return{isFRXScreenRequestProcessing:o("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing(e),reportedTagTitle:o("PolarisFRXWebReportStateSelectors").getReportedTagTitle(e)}}var h={onRequestNextFRXScreen:o("PolarisFRXWebReportActions").doRequestNextFRXScreenAction,onStoreReportedTagTitle:o("PolarisFRXWebReportActions").doStoreReportedTagTitle},y=o("PolarisReactRedux.react").connect(g,h)(p);l.default=y}),98);
__d("PolarisFRXUnfollowUserFollowupModal.react",["PolarisConnectionsLogger","PolarisUnfollowDialog.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.onClose,a=e.userToUnfollow,i=a.id;if(!i)return null;var l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={},t[0]=l):l=t[0];var u;return t[1]!==n||t[2]!==i?(u=s.jsx(r("PolarisUnfollowDialog.react"),{analyticsContext:o("PolarisConnectionsLogger").CONNECTIONS_CONTAINER_MODULES.frx_web_reporting,analyticsExtra:l,onClose:n,userId:i}),t[1]=n,t[2]=i,t[3]=u):u=t[3],u}l.default=u}),98);
__d("PolarisFRXReportModal.react",["IGDSBox.react","IGDSSpinner.react","PolarisFRXBlockUserFollowupModal.react","PolarisFRXNotifyGuardianFollowupModal.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportConfirmationScreenModalForSupervision.react","PolarisFRXReportModalFetaSupervisionQuery.graphql","PolarisFRXReportModalSupportHub.react","PolarisFRXReportScreenModal.react","PolarisFRXUnfollowUserFollowupModal.react","PolarisFRXWebReportActions","PolarisFRXWebReportState","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisReactRedux.react","PolarisReportConstants","nullthrows","react","react-compiler-runtime","react-relay/relay-hooks/useLazyLoadQuery","usePolarisAnalyticsContext","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useMemo,p=c.useState;function _(e){var t=e.frxObjectType,n=e.isAfterConfirmationScreen,r=e.onClose,o=e.onConfirm,a=e.onDoReportingModalClosedAction,i=e.reportedObjectID;n&&o!=null&&o(),a({isAfterConfirmationScreen:n,reportedObjectID:i,reportedObjectType:t}),r&&r()}function f(e){var t=e.onGoBackOneFRXScreen;t()}function g(e,t,n){if(t===!0){var r=e.onDoDisableNotifyGuardianOption;r()}var o=e.onDoOpenNotifyGuardianFollowupModalToPreviousScreen,a=e.reportedOwner.id;o(t,n,a,e.reportedTagTitle)}function h(e,t,n,r){var a=o("react-compiler-runtime").c(6),i=e.onRequestInitFRXScreen,l,s;a[0]!==r||a[1]!==t||a[2]!==i||a[3]!==n?(l=function(){t||(i(r),n(!0))},s=[n,t,r,i],a[0]=r,a[1]=t,a[2]=i,a[3]=n,a[4]=l,a[5]=s):(l=a[4],s=a[5]),d(l,s)}function y(t){var a,i,l,s,c=o("react-compiler-runtime").c(70),d=p(!1),m=d[0],y=d[1],C=t.containerModule,b=t.currScreenPayload,v=t.currRenderStep,S=t.screenHistorySize,R=t.reportedObjectID,L=t.frxEntryPoint,E=t.frxLocation,k=t.frxObjectType,I=t.reportedOwner,T=t.showFRXDropOffSurveyModal,D=t.useSimpleBlockModalWithoutRefresh,x=t.threadId,$=t.threadKey,P=t.onSelectReportAd,N=t.isGroupThread,M=t.shouldReportAsInstamadillo,w=L===void 0?o("PolarisReportConstants").FRXEntryPoint.CHEVRON_BUTTON:L,A=r("usePolarisAnalyticsContext")(),F=o("PolarisReactRedux.react").useDispatch(),O=C!=null?C:A,B;c[0]!==w||c[1]!==E||c[2]!==k||c[3]!==R||c[4]!==O?(B={container_module:O,entry_point:w,location:E,object_id:R,object_type:k},c[0]=w,c[1]=E,c[2]=k,c[3]=R,c[4]=O,c[5]=B):B=c[5];var W=B;h(t,m,y,W);var q;c[6]!==t?(q=function(){return _(t)},c[6]=t,c[7]=q):q=c[7];var U=q,V=S>1,H;c[8]!==t?(H=function(){return f(t)},c[8]=t,c[9]=H):H=c[9];var G;c[10]!==b||c[11]!==V||c[12]!==H?(G=o("PolarisFRXReportBaseScreenModal.react").getDefaultScreenModalHeaderParamsFromScreenPayload(b,V,H),c[10]=b,c[11]=V,c[12]=H,c[13]=G):G=c[13];var z=G,j;c[14]!==z||c[15]!==U?(j=u.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:z,onClose:U,children:o("PolarisFRXWebReportStrings").DEFAULT_ERROR_MESSAGE_TEXT}),c[14]=z,c[15]=U,c[16]=j):j=c[16];var K=j,Q;c[17]===Symbol.for("react.memo_cache_sentinel")?(Q=u.jsx(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",justifyContent:"center",minHeight:122,position:"relative",children:u.jsx(r("IGDSSpinner.react"),{})}),c[17]=Q):Q=c[17];var X;c[18]!==z||c[19]!==U?(X=u.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:z,onClose:U,children:Q}),c[18]=z,c[19]=U,c[20]=X):X=c[20];var Y=X,J=r("usePolarisViewer")();J!==null&&(J==null?void 0:J.guardianId)!==null&&(J==null?void 0:J.guardianId)!==""&&F(o("PolarisFRXWebReportActions").doStoreGuardianInformation(r("nullthrows")(J==null?void 0:J.guardianId)));var Z,ee;c[21]===Symbol.for("react.memo_cache_sentinel")?(ee=e!==void 0?e:e=n("PolarisFRXReportModalFetaSupervisionQuery.graphql"),Z={},c[21]=Z,c[22]=ee):(Z=c[21],ee=c[22]);var te=r("react-relay/relay-hooks/useLazyLoadQuery")(ee,Z),ne=(a=te.xfb_youth_platform)==null||(a=a.viewer)==null?void 0:a.is_f3_supervised_user,re=(i=(l=te.xfb_youth_platform)==null||(l=l.viewer)==null||(l=l.f3_guardian_preferred_profile)==null?void 0:l.full_name)!=null?i:null,oe=o("PolarisReactRedux.react").useSelector(o("PolarisFRXWebReportStateSelectors").getGuardianUsername);ne===!0&&oe===""&&re!==null&&(oe=re);var ae;if(c[23]!==(b==null||(s=b.response)==null||(s=s.report_info)==null?void 0:s.selected_tags)){var ie,le,se;ae=(ie=b==null||(le=b.response)==null||(le=le.report_info)==null?void 0:le.selected_tags)!=null?ie:[],c[23]=b==null||(se=b.response)==null||(se=se.report_info)==null?void 0:se.selected_tags,c[24]=ae}else ae=c[24];var ue=ae,ce=E===o("PolarisReportConstants").FRXLocation.DIRECT_MESSAGES||E===o("PolarisReportConstants").FRXLocation.DIRECT_THREAD||E===o("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_MESSAGE||E===o("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_THREAD||k===o("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE||k===o("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE_THREAD||k===o("PolarisReportConstants").FRXObjectType.ENCRYPTED_DIRECT_MESSAGE;switch(v){case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.UNFOLLOW:{var de;return c[25]!==U||c[26]!==I?(de=u.jsx(r("PolarisFRXUnfollowUserFollowupModal.react"),{onClose:U,userToUnfollow:I}),c[25]=U,c[26]=I,c[27]=de):de=c[27],de}case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.BLOCK:{var me;return c[28]!==k||c[29]!==N||c[30]!==U||c[31]!==I||c[32]!==M||c[33]!==$||c[34]!==D?(me=u.jsx(r("PolarisFRXBlockUserFollowupModal.react"),{frxObjectType:k,isGroupThread:N,onClose:U,shouldReportAsInstamadillo:M,threadKey:$,userToBlock:I,useSimpleBlockModalWithoutRefresh:D}),c[28]=k,c[29]=N,c[30]=U,c[31]=I,c[32]=M,c[33]=$,c[34]=D,c[35]=me):me=c[35],me}case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.SUPPORT_HUB:{var pe;c[36]!==t?(pe=function(){return f(t)},c[36]=t,c[37]=pe):pe=c[37];var _e;return c[38]!==E||c[39]!==ce||c[40]!==U||c[41]!==pe||c[42]!==ue?(_e=u.jsx(r("PolarisFRXReportModalSupportHub.react"),{is_igd:ce,location:E,onClose:U,onGoBack:pe,tags_selected:ue}),c[38]=E,c[39]=ce,c[40]=U,c[41]=pe,c[42]=ue,c[43]=_e):_e=c[43],_e}case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.NOTIFY_GUARDIAN:{var fe;c[44]!==t?(fe=function(n,r){return g(t,n,r)},c[44]=t,c[45]=fe):fe=c[45];var ge=I==null?void 0:I.username,he;return c[46]!==oe||c[47]!==U||c[48]!==t.reportedTagTitle||c[49]!==fe||c[50]!==ge?(he=u.jsx(r("PolarisFRXNotifyGuardianFollowupModal.react"),{guardianUsername:oe,onClose:U,onNotify:fe,reportedTagTitle:t.reportedTagTitle,reportedUsername:ge}),c[46]=oe,c[47]=U,c[48]=t.reportedTagTitle,c[49]=fe,c[50]=ge,c[51]=he):he=c[51],he}case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.NOTIFY_GUARDIAN_FOLLOWUP:{if(!b)return m?K:Y;var ye;return c[52]!==b||c[53]!==z||c[54]!==U||c[55]!==I?(ye=u.jsx(r("PolarisFRXReportConfirmationScreenModalForSupervision.react"),{headerParams:z,onClose:U,reportedOwner:I,screenPayload:b}),c[52]=b,c[53]=z,c[54]=U,c[55]=I,c[56]=ye):ye=c[56],ye}case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.DEFAULT:default:{var Ce=S>1,be;c[57]!==t?(be=function(){return f(t)},c[57]=t,c[58]=be):be=c[58];var ve;return c[59]!==b||c[60]!==W||c[61]!==m||c[62]!==U||c[63]!==P||c[64]!==I||c[65]!==T||c[66]!==Ce||c[67]!==be||c[68]!==x?(ve=u.jsx(r("PolarisFRXReportScreenModal.react"),{frxMetadata:W,hasMountedScreenFlow:m,hasPreviousScreens:Ce,onClose:U,onGoBackOneFRXScreen:be,onSelectReportAd:P,reportedOwner:I,screenPayload:b,showFRXDropOffSurveyModal:T,threadId:x}),c[59]=b,c[60]=W,c[61]=m,c[62]=U,c[63]=P,c[64]=I,c[65]=T,c[66]=Ce,c[67]=be,c[68]=x,c[69]=ve):ve=c[69],ve}}}function C(e){var t;return{currRenderStep:(t=o("PolarisFRXWebReportStateSelectors")).getCurrRenderStep(e),currScreenPayload:t.getCurrScreenPayload(e),isAfterConfirmationScreen:t.getIsConfirmationScreenInHistoryStack(e),reportedTagTitle:t.getReportedTagTitle(e),screenHistorySize:t.getScreenHistorySize(e)}}var b={onDoDisableNotifyGuardianOption:o("PolarisFRXWebReportActions").doDisableNotifyGuardianOption,onDoOpenNotifyGuardianFollowupModalToPreviousScreen:o("PolarisFRXWebReportActions").doOpenNotifyGuardianFollowupModalToPreviousScreenAction,onDoReportingModalClosedAction:o("PolarisFRXWebReportActions").doReportingModalClosedAction,onGoBackOneFRXScreen:o("PolarisFRXWebReportActions").doGoBackOneFRXScreenAction,onRequestInitFRXScreen:o("PolarisFRXWebReportActions").doRequestInitFRXScreenAction},v=o("PolarisReactRedux.react").connect(C,b)(y);l.default=v}),98);
__d("polarisCommentSelectors.react",["PolarisPaginationUtils","PolarisReactRedux.react","nullthrows","polarisCreateSelectorWithArg","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=r("polarisCreateSelectorWithArg")(function(e){return e.comments.byId},function(e){return e.comments.byPostId},function(e,t){return function(n){var a=t.get(n);if(a==null)return null;var i=a.commentIds;return i.toSeq().map(function(t){return r("nullthrows")(e.get(t))}).slice(i.count()-o("PolarisPaginationUtils").getVisibleCount(a.pagination),i.count()).filter(function(e){return!e.deleted&&!e.didReportAsSpam})}}),s=r("polarisCreateSelectorWithArg")(function(e){return e.posts.byId},function(e){return e.comments.byId},function(e,t){return function(n){var o=r("nullthrows")(e.get(n)),a=o.previewCommentIds;return a==null?[]:a.map(function(e){return t.get(e)}).filter(Boolean)}});function u(e,t){return r("nullthrows")(e.comments.byId.get(t))}function c(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=function(n){return e==null?null:n.comments.translationById.get(e)},t[0]=e,t[1]=n):n=t[1],o("PolarisReactRedux.react").useSelector(n)}l.selectVisibleCommentsForPostId=e,l.getPreviewCommentsForPostId=s,l.getCommentById=u,l.useCommentTranslation=c}),98);
__d("usePolarisComment",["PolarisReactRedux.react","polarisCommentSelectors.react","polarisUserSelectors","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("react-compiler-runtime").c(3),r;return n[0]!==e||n[1]!==t?(r=function(r){var n=o("polarisCommentSelectors.react").getCommentById(r,e);return t(n)},n[0]=e,n[1]=t,n[2]=r):r=n[2],o("PolarisReactRedux.react").useSelector(r)}function s(e,t){var n=o("react-compiler-runtime").c(3),r;return n[0]!==e||n[1]!==t?(r=function(r){var n=o("polarisCommentSelectors.react").getCommentById(r,e),a=o("polarisUserSelectors").getUserByIdOrThrows(r,n.userId);return t(n,a)},n[0]=e,n[1]=t,n[2]=r):r=n[2],o("PolarisReactRedux.react").useSelector(r)}function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=function(n){var t;return e==null?null:(t=n.comments.byId.get(e))!=null?t:null},t[0]=e,t[1]=n):n=t[1],o("PolarisReactRedux.react").useSelector(n)}l.useComment=e,l.useCommentAndOwner=s,l.useCommentOrNull=u}),98);
__d("PolarisCommentTranslationPrompt.react",["fbt","CometPressable.react","IGDSTextVariants.react","PolarisCommentActions","PolarisReactRedux.react","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisComment"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback;function d(e){var t,n=o("react-compiler-runtime").c(22),a=e.commentId,i=e.inFeed,l=e.isCaptionWithTranslation,c=e.isOverMedia,d=c===void 0?!1:c,m=o("PolarisReactRedux.react").useDispatch(),p=((t=o("usePolarisComment").useCommentOrNull(a))==null?void 0:t.hasTranslation)===!0,_=l===!0||p,f=o("polarisCommentSelectors.react").useCommentTranslation(a),g=f==null?void 0:f.translatedText,h;n[0]!==a||n[1]!==m||n[2]!==g?(h=function(){a!=null&&(g!=null?m(o("PolarisCommentActions").showCommentTranslatedText(a)):m(o("PolarisCommentActions").translateComment(a)))},n[0]=a,n[1]=m,n[2]=g,n[3]=h):h=n[3];var y=h;if(_!==!0)return null;var C=i===!0?"primaryText":"secondaryText";if((f==null?void 0:f.loading)===!0){var b=d?"webAlwaysWhite":C,v;n[4]===Symbol.for("react.memo_cache_sentinel")?(v=s._(/*BTDS*/"Loading..."),n[4]=v):v=n[4];var S;return n[5]!==b?(S=u.jsx(o("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:b,children:v}),n[5]=b,n[6]=S):S=n[6],S}if((f==null?void 0:f.showTranslatedText)===!0){var R;n[7]!==a||n[8]!==m?(R=function(){a!=null&&m(o("PolarisCommentActions").showCommentOriginalText(a))},n[7]=a,n[8]=m,n[9]=R):R=n[9];var L=d?"webAlwaysWhite":C,E;n[10]===Symbol.for("react.memo_cache_sentinel")?(E=s._(/*BTDS*/"See original"),n[10]=E):E=n[10];var k;n[11]!==L?(k=u.jsx(o("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:L,children:E}),n[11]=L,n[12]=k):k=n[12];var I;return n[13]!==R||n[14]!==k?(I=u.jsx(r("CometPressable.react"),{onPress:R,overlayDisabled:!0,children:k}),n[13]=R,n[14]=k,n[15]=I):I=n[15],I}var T=d?"webAlwaysWhite":C,D;n[16]===Symbol.for("react.memo_cache_sentinel")?(D=s._(/*BTDS*/"See translation"),n[16]=D):D=n[16];var x;n[17]!==T?(x=u.jsx(o("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:T,children:D}),n[17]=T,n[18]=x):x=n[18];var $;return n[19]!==y||n[20]!==x?($=u.jsx(r("CometPressable.react"),{onPress:y,overlayDisabled:!0,children:x}),n[19]=y,n[20]=x,n[21]=$):$=n[21],$}l.default=d}),226);
__d("PolarisPostCaptionTranslationPrompt.react",["IGDSBox.react","PolarisCommentTranslationPrompt.react","react","react-compiler-runtime","usePolarisPost"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=e.inFeed,a=e.marginBottom,i=e.postId,l=a===void 0?0:a,u=o("usePolarisPost").usePost(i,d),m=o("usePolarisPost").usePost(i,c);if(u!==!0||m==null)return null;var p;t[0]!==m||t[1]!==n?(p=s.jsx(r("PolarisCommentTranslationPrompt.react"),{commentId:m,inFeed:n,isCaptionWithTranslation:!0}),t[0]=m,t[1]=n,t[2]=p):p=t[2];var _;return t[3]!==l||t[4]!==p?(_=s.jsx(r("IGDSBox.react"),{marginBottom:l,children:p}),t[3]=l,t[4]=p,t[5]=_):_=t[5],_}function c(e){return e.captionCommentId}function d(e){return e.captionHasTranslation}l.default=u}),98);
__d("PolarisPostComment.react",["cx","fbt","IGDSBox.react","IGDSButton.react","IGDSIconButton.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDSText.react","IGDSTextVariants.react","IGDSVerifiedBadge.react","Locale","PolarisApproveCommentDialog.react","PolarisCommentActions","PolarisCommentLikeListsActions","PolarisCommentLikedByListDialogRoot.entrypoint","PolarisCommentOptionsDialog.react","PolarisCommentScrollHelper","PolarisCommentTranslationPrompt.react","PolarisConfig","PolarisDoubleTappable","PolarisEngagementLogger","PolarisFastLink.react","PolarisIGCoreConstants","PolarisIgWellbeingRestrictManageCommentFalcoEvent","PolarisLikeButton.react","PolarisLikedByListDialogPlaceholder.react","PolarisLinkBuilder","PolarisPendingCommentActions","PolarisPostCaptionTranslationPrompt.react","PolarisPostGifComment.react","PolarisPostStrings","PolarisPostVariants","PolarisReactRedux.react","PolarisTimestamp.react","PolarisTruncatedText.react","PolarisUA","PolarisUserAvatarWithStories.react","PolarisUserHoverCard.react","PolarisUserText.react","PolarisViewpointReact.react","QE2Logger","joinClasses","nullthrows","polarisPostSelectors","polarisUserSelectors","qex","react","react-compiler-runtime","useIGDSEntryPointDialog","usePolarisDynamicIpadUpsell","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentAction","usePolarisLoggedOutIntentEntryPointDialog"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useEffect,_=d.useRef,f=d.useState,g=750,h=3e3,y="x5dmxwo-B",C={avatar:{alignSelf:"xqcrz7y",marginTop:"xdj266r",marginInlineEnd:"x14iifvp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0},reducedAvatarMargin:{marginTop:"xr9ek0c",marginInlineEnd:"x1sa5p1d",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0},restrictedContent:{opacity:"xbyyjgo",$$css:!0}};function b(e){var t=o("react-compiler-runtime").c(22),n=e.parentProps,a=n.commentOwnerId,i=n.commentOwnerUsername,l=n.isAuthorVerified,s=n.isCaption,u=n.isRestrictedPending,d=n.postOwnerIsUnpublished,m=n.showRichComment,p=l===void 0?!1:l,_=s===void 0?!1:s,f=d===void 0?!1:d,g=m===void 0?!1:m,h=u&&!e.showRestrictedContent,y=_?"h2":"h3";if(h){var C;return t[0]===Symbol.for("react.memo_cache_sentinel")?(C=c.jsx(r("IGDSBox.react"),{marginBottom:1,position:"relative",children:c.jsx(r("IGDSText.react"),{color:"tertiaryText",size:"body",weight:"semibold",children:o("PolarisPostStrings").RESTRICTED_ACCOUNT_HEADER_TEXT})}),t[0]=C):C=t[0],C}else if(!_||f!==!0){var b;t[1]!==u?(b={0:"x6s0dn4 x3nfvp2",1:"x6s0dn4 x3nfvp2 xbyyjgo"}[(u===!0)<<0],t[1]=u,t[2]=b):b=t[2];var v;t[3]!==i?(v=o("PolarisLinkBuilder").buildUserLink(r("nullthrows")(i)),t[3]=i,t[4]=v):v=t[4];var S;t[5]!==i?(S=r("nullthrows")(i),t[5]=i,t[6]=S):S=t[6];var R;t[7]!==v||t[8]!==S?(R=c.jsx(r("IGDSButton.react"),{display:"block",href:v,label:S,variant:"secondary_link"}),t[7]=v,t[8]=S,t[9]=R):R=t[9];var L;t[10]!==a||t[11]!==i||t[12]!==R?(L=c.jsx(r("IGDSBox.react"),{marginEnd:1,position:"relative",children:c.jsx(r("PolarisUserHoverCard.react"),{display:"inline",userId:a,username:i,children:R})}),t[10]=a,t[11]=i,t[12]=R,t[13]=L):L=t[13];var E;t[14]!==p||t[15]!==g?(E=g&&p&&c.jsx(r("IGDSBox.react"),{marginEnd:1,position:"relative",children:c.jsx(r("IGDSVerifiedBadge.react"),{size:"small"})}),t[14]=p,t[15]=g,t[16]=E):E=t[16];var k;return t[17]!==y||t[18]!==b||t[19]!==L||t[20]!==E?(k=c.jsxs(y,{className:b,children:[L,E]}),t[17]=y,t[18]=b,t[19]=L,t[20]=E,t[21]=k):k=t[21],k}return null}function v(e){var t=o("react-compiler-runtime").c(10),n=e.parentProps,a=n.captionCreatedAt,i=n.commentThreadId,l=n.disableTimestampNav,s=n.id,u=n.isCaption,d=n.isEdited,m=n.postedAt,p=n.postShortcode,_=u===void 0?!1:u,f=d===void 0?!1:d,g=_&&f&&a!=null?a:m,h;t[0]!==g?(h=c.jsx(r("PolarisTimestamp.react"),{className:"_a9ze _a9zf",value:g}),t[0]=g,t[1]=h):h=t[1];var y=h;if(p!=null&&s!=null){var C;t[2]!==s||t[3]!==i||t[4]!==p?(C=i!=null&&i!==s?o("PolarisLinkBuilder").buildReplyPermalink(p,i,s,o("PolarisUA").isMobile()):o("PolarisLinkBuilder").buildCommentPermalink(p,s,o("PolarisUA").isMobile()),t[2]=s,t[3]=i,t[4]=p,t[5]=C):C=t[5];var b=C,v=l===!0?S:void 0,R;t[6]!==v||t[7]!==b||t[8]!==y?(R=c.jsx(r("PolarisFastLink.react"),{className:"_a9zg",href:b,onClick:v,children:y}),t[6]=v,t[7]=b,t[8]=y,t[9]=R):R=t[9],y=R}return y}function S(e){return e.preventDefault()}function R(e){var t,n=o("react-compiler-runtime").c(147),a=f(null),i=a[0],l=a[1],s=f(!1),d=s[0],m=s[1],S=f(!1),R=S[0],E=S[1],k=f(!1),I=k[0],T=k[1],D=_(null),x=f(!1),$=x[0],P=x[1],N,M;n[0]!==e.id?(N=function(){if(e.id!=null)return o("PolarisCommentScrollHelper").subscribeToCommentScroll(e.id,function(){var e=D.current;e!=null&&(e.scrollIntoView({behavior:"smooth",block:"center"}),window.setTimeout(function(){o("PolarisCommentScrollHelper").observeElementVisible(e,function(){P(!0),window.setTimeout(function(){P(!1)},h)})},200))})},M=[e.id],n[0]=e.id,n[1]=N,n[2]=M):(N=n[1],M=n[2]),p(N,M);var w;n[3]!==i?(w=function(){window.clearTimeout(i)},n[3]=i,n[4]=w):w=n[4];var A=w,F=o("usePolarisDynamicIpadUpsell").usePolarisDesktopExcludingIpad(),O,B;n[5]!==A?(O=function(){return(function(){A()})},B=[A],n[5]=A,n[6]=O,n[7]=B):(O=n[6],B=n[7]),p(O,B);var W;n[8]===Symbol.for("react.memo_cache_sentinel")?(W=function(){E(!0)},n[8]=W):W=n[8];var q=W,U;n[9]!==e.isCaption||n[10]!==e.showRichComment?(U=function(){!o("PolarisUA").isMobile()||e.showRichComment!==!0||e.isCaption===!0||l(window.setTimeout(q,g))},n[9]=e.isCaption,n[10]=e.showRichComment,n[11]=U):U=n[11];var V=U,H;n[12]===Symbol.for("react.memo_cache_sentinel")?(H=function(){E(!1)},n[12]=H):H=n[12];var G=H,z;n[13]!==e?(z=function(){E(!1),e.onDeleteComment()},n[13]=e,n[14]=z):z=n[14];var j=z,K;n[15]!==e?(K=function(){var t=e.id,n=e.onDeleteCommentClick;n&&n(r("nullthrows")(t))},n[15]=e,n[16]=K):K=n[16];var Q=K,X;n[17]!==e?(X=function(n){var t=e.onLikeComment,r=e.onUnlikeComment;n?t():r()},n[17]=e,n[18]=X):X=n[18];var Y=X,J;n[19]!==e?(J=function(){var t=e.isRestrictedPending,n=e.likedByViewer,r=e.loggedIn,o=e.onLikeComment,a=t===void 0?!1:t,i=n===void 0?!1:n;!i&&!a&&r&&o()},n[19]=e,n[20]=J):J=n[20];var Z=J,ee;n[21]===Symbol.for("react.memo_cache_sentinel")?(ee={},n[21]=ee):ee=n[21];var te=(t=e.id)!=null?t:"",ne;n[22]!==te?(ne={routeParams:ee,routeProps:{commentId:te}},n[22]=te,n[23]=ne):ne=n[23];var re=r("useIGDSEntryPointDialog")(r("PolarisCommentLikedByListDialogRoot.entrypoint"),ne,"button",L),oe=re[0],ae;n[24]!==F||n[25]!==e||n[26]!==oe?(ae=function(){var t=e.code,n=e.commentOwnerId,a=e.commentOwnerUsername,i=e.fetchCommentLikes,l=e.id,s=e.likeCount,u=e.loggedIn,c=e.onLikeCountClick,d=e.onLoggedOutDialogClick,m=e.onLoggedOutIntentClick,p=e.viewerId;if(u){if(c)if(o("QE2Logger").logExposureForIGWebCookieCritical("ig_web_h1_2023_desktop_reels_comment_likes_graphql","is_enabled"),r("qex")._("1656")){var _=p===n;oe({isOwnerTheViewer:_,likeAndViewCountsDisabled:!1,likeCount:s,ownerUsername:a,productType:void 0,viewCount:0})}else i(),c(r("nullthrows")(l))}else F?d(o("PolarisLinkBuilder").buildMediaLink(r("nullthrows")(t)),"post_comment_like_count"):m("post_comment_like_count")},n[24]=F,n[25]=e,n[26]=oe,n[27]=ae):ae=n[27];var ie=ae,le;n[28]!==e?(le=function(){var t=e.loggedIn,n=e.onLoggedOutDialogPreload;!t&&o("PolarisUA").isDesktop()&&n()},n[28]=e,n[29]=le):le=n[29];var se=le,ue;n[30]!==e?(ue=function(n){var t=e.analyticsContext,a=e.commentOwnerId,i=e.commentThreadId,l=e.id,s=e.isRestrictedPending,u=e.mediaType,c=e.postId,d=e.postOwnerId,m=e.viewerId;switch(n.state){case"entered":if(l!=null&&m!=null){o("PolarisEngagementLogger").logCommentImpression({commentAuthorId:a,commentId:l,commentThreadId:i,containerModule:t,mediaAuthorId:d,mediaId:c,mediaType:u}),s&&r("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"impression",actorIgUserid:a,commentId:l,commentThreadId:i,parentMediaId:c,step:"pending_comment"});return}}},n[30]=e,n[31]=ue):ue=n[31];var ce=ue,de;n[32]!==F||n[33]!==e?(de=function(){var t=e.code,n=e.loggedIn,a=e.onLoggedOutDialogClick,i=e.onLoggedOutIntentClick,l=e.onReplyClick;n?l():F?a(o("PolarisLinkBuilder").buildMediaLink(r("nullthrows")(t)),"post_comment_reply"):i("post_comment_reply")},n[32]=F,n[33]=e,n[34]=de):de=n[34];var me=de,pe;n[35]!==e?(pe=function(){var t=e.loggedIn,n=e.onLoggedOutDialogPreload;!t&&o("PolarisUA").isDesktop()&&n()},n[35]=e,n[36]=pe):pe=n[36];var _e=pe,fe;n[37]!==e?(fe=function(){var t=e.commentOwnerId,n=e.commentThreadId,o=e.id,a=e.postId;r("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:t,commentId:o,commentThreadId:n,parentMediaId:a,step:"pending_comment_see_hidden"}),T(!0)},n[37]=e,n[38]=fe):fe=n[38];var ge=fe,he;n[39]!==e?(he=function(){var t=e.commentOwnerId,n=e.commentThreadId,o=e.id,a=e.postId;r("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:t,commentId:o,commentThreadId:n,parentMediaId:a,step:"pending_comment_approve"}),m(!0)},n[39]=e,n[40]=he):he=n[40];var ye=he,Ce;n[41]===Symbol.for("react.memo_cache_sentinel")?(Ce=function(){m(!1)},n[41]=Ce):Ce=n[41];var be=Ce,ve;n[42]!==Q||n[43]!==e||n[44]!==I?(ve=function(){var t=e.commentOwnerId,n=e.commentThreadId,o=e.id,a=e.postId;r("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:t,commentId:o,commentThreadId:n,parentMediaId:a,step:I?"pending_comment_delete":"pending_comment_delete_hidden"}),Q()},n[42]=Q,n[43]=e,n[44]=I,n[45]=ve):ve=n[45];var Se=ve,Re;n[46]!==ie||n[47]!==se||n[48]!==e?(Re=function(){var t=e.code,n=e.id,a=e.likeCount,i=e.loggedIn;if(a==null||a===0)return null;var l=a.toLocaleString(),s=u._(/*BTDS*/"{like count} like",[u._param("like count",l)]),d=u._(/*BTDS*/"{like count} likes",[u._param("like count",l)]),m=a===1?s:d;return a>0&&(o("PolarisUA").isDesktop()||!i?c.jsx("button",{className:"_a9ze",onClick:ie,onMouseEnter:se,children:c.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:m})}):c.jsx(r("PolarisFastLink.react"),{className:"_a9ze _amp7",href:"/p/"+r("nullthrows")(t)+"/c/"+r("nullthrows")(n)+"/liked_by/",children:m}))},n[46]=ie,n[47]=se,n[48]=e,n[49]=Re):Re=n[49];var Le=Re,Ee=e.className,ke=e.commentingDisabledForViewer,Ie=e.commentOwnerAvatar,Te=e.commentOwnerId,De=e.commentOwnerUsername,xe=e.commentThreadId,$e=e.communityNoteComponent,Pe=e.customPaddingStyle,Ne=e.giphyMediaInfo,Me=e.hideUserAvatar,we=e.id,Ae=e.isCaption,Fe=e.isEdited,Oe=e.isPermalinkedComment,Be=e.isRestrictedPending,We=e.likedByViewer,qe=e.mediaCommentInfo,Ue=e.postId,Ve=e.postOwnerId,He=e.postOwnerIsUnpublished,Ge=e.reducedAvatarMargin,ze=e.showCommentOptionsInline,je=e.showRemoveIcon,Ke=e.showRichComment,Qe=e.translation,Xe=e.variant,Ye=e.viewerId,Je=Me===void 0?!1:Me,Ze=Ae===void 0?!1:Ae,et=Fe===void 0?!1:Fe,tt=Oe===void 0?!1:Oe,nt=ze===void 0?!1:ze,rt=Ke===void 0?!1:Ke,ot,at,it,lt,st,ut,ct,dt,mt,pt,_t,ft,gt,ht;if(n[50]!==Te||n[51]!==Ne||n[52]!==ce||n[53]!==Ze||n[54]!==tt||n[55]!==Be||n[56]!==Ve||n[57]!==e.text||n[58]!==nt||n[59]!==je||n[60]!==I||n[61]!==rt||n[62]!==Qe||n[63]!==Xe||n[64]!==Ye){var yt,Ct,bt;ht=e.text.toString(),(Qe==null?void 0:Qe.showTranslatedText)===!0&&Qe.translatedText!=null&&(ht=Qe.translatedText),it=!Ze&&Ye!=null&&(Ye===Te||Ve===Ye),pt=it&&je&&!rt,lt=!Ze&&Ye!=null&&!pt&&!Be;var vt;n[79]!==tt?(vt=o("PolarisConfig").isLoggedOutFRXEligible()&&tt,n[79]=tt,n[80]=vt):vt=n[80];var St=vt,Rt;n[81]!==St||n[82]!==Ze||n[83]!==rt||n[84]!==Ye?(Rt=St||rt&&!o("PolarisUA").isMobile()&&!Ze&&Ye!=null,n[81]=St,n[82]=Ze,n[83]=rt,n[84]=Ye,n[85]=Rt):Rt=n[85],st=Rt,at=Xe===o("PolarisPostVariants").VARIANTS.feed?r("PolarisTruncatedText.react"):r("PolarisUserText.react"),dt=!!Ze||!lt&&!it,_t=Be&&!I,mt=Be&&I;var Lt=Ne!=null;ct=Lt?(yt=Ne==null||(Ct=Ne.first_party_cdn_proxied_images)==null||(Ct=Ct.fixed_height)==null?void 0:Ct.url)!=null?yt:Ne==null||(bt=Ne.images)==null||(bt=bt.fixed_height)==null?void 0:bt.url:void 0;var Et=nt===!0?"_a9ze":"",kt=(nt!==!0?"_a9zh":"")+(nt===!0?" _a9zi":""),It;n[86]===Symbol.for("react.memo_cache_sentinel")?(It=c.jsx(r("IGDSIconButton.react"),{"data-testid":void 0,onClick:q,children:c.jsx(r("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:c.jsx(r("IGDSMoreHorizontalPanoOutlineIcon.react"),{alt:o("PolarisPostStrings").COMMENT_OPTIONS_ALT_TEXT,color:"ig-secondary-text"})})}),n[86]=It):It=n[86];var Tt;n[87]!==kt?(Tt=c.jsx("div",{className:kt,children:It}),n[87]=kt,n[88]=Tt):Tt=n[88];var Dt;n[89]!==Et||n[90]!==Tt?(Dt=c.jsx("div",{className:Et,children:Tt}),n[89]=Et,n[90]=Tt,n[91]=Dt):Dt=n[91],ut=Dt,ot=o("PolarisViewpointReact.react").Viewpoint,ft=ce,gt=ht.replace(" ","-"),n[50]=Te,n[51]=Ne,n[52]=ce,n[53]=Ze,n[54]=tt,n[55]=Be,n[56]=Ve,n[57]=e.text,n[58]=nt,n[59]=je,n[60]=I,n[61]=rt,n[62]=Qe,n[63]=Xe,n[64]=Ye,n[65]=ot,n[66]=at,n[67]=it,n[68]=lt,n[69]=st,n[70]=ut,n[71]=ct,n[72]=dt,n[73]=mt,n[74]=pt,n[75]=_t,n[76]=ft,n[77]=gt,n[78]=ht}else ot=n[65],at=n[66],it=n[67],lt=n[68],st=n[69],ut=n[70],ct=n[71],dt=n[72],mt=n[73],pt=n[74],_t=n[75],ft=n[76],gt=n[77],ht=n[78];var xt;n[92]!==at||n[93]!==it||n[94]!==lt||n[95]!==st||n[96]!==Ee||n[97]!==ut||n[98]!==Ie||n[99]!==Te||n[100]!==De||n[101]!==xe||n[102]!==ke||n[103]!==$e||n[104]!==Pe||n[105]!==ct||n[106]!==ye||n[107]!==j||n[108]!==V||n[109]!==A||n[110]!==Q||n[111]!==Z||n[112]!==Y||n[113]!==me||n[114]!==_e||n[115]!==Se||n[116]!==ge||n[117]!==Je||n[118]!==we||n[119]!==Ze||n[120]!==et||n[121]!==dt||n[122]!==$||n[123]!==Be||n[124]!==We||n[125]!==qe||n[126]!==Ue||n[127]!==Ve||n[128]!==He||n[129]!==e||n[130]!==Ge||n[131]!==Le||n[132]!==d||n[133]!==mt||n[134]!==R||n[135]!==nt||n[136]!==pt||n[137]!==I||n[138]!==rt||n[139]!==_t||n[140]!==ht?(xt=function(n){return c.jsxs(o("PolarisDoubleTappable").DoubleTappable,{onDoubleClick:Z,role:"button",children:[c.jsx("li",{className:r("joinClasses")((rt?"_a9zj":"")+(Pe==="compact"?" _a9zk":"")+" _a9zl",Ee),onMouseDown:V,onMouseUp:A,onTouchEnd:A,onTouchMove:A,onTouchStart:V,ref:n,children:c.jsxs("div",{className:"_a9zm","data-testid":void 0,ref:D,style:$?{animationDuration:h+"ms",animationFillMode:"forwards",animationName:y,animationTimingFunction:"ease-out",borderRadius:"8px",marginBlock:-16,marginInline:"-8px",paddingBlock:16,paddingInline:"8px"}:void 0,children:[c.jsxs("div",{className:(dt?"_a9zn":"")+" _a9zo",children:[rt&&!Je&&c.jsx(r("PolarisUserHoverCard.react"),{display:"block",userId:Te,username:De,children:c.jsx(r("PolarisUserAvatarWithStories.react"),{isLink:!He,profilePictureUrl:Ie!=null?Ie:"",size:r("PolarisIGCoreConstants").AVATAR_SIZES.small,storyEntrypoint:"post_comment",username:De,xstyle:[C.avatar,Ge===!0&&C.reducedAvatarMargin,Be===!0&&C.restrictedContent]})}),c.jsxs("div",{className:"_a9zr",children:[c.jsx(b,{parentProps:e,showRestrictedContent:I}),!_t&&(ct!=null?c.jsx(r("PolarisPostGifComment.react"),{gifSrc:ct}):c.jsxs("div",babelHelpers.extends({},{0:{className:"xt0psk2"},1:{className:"xt0psk2 xbyyjgo"}}[(Be===!0)<<0],{"data-testid":void 0,children:[c.jsx(at,{display:"inline",headlineTag:Ze===!0?"h1":void 0,size:"body",value:ht}),qe!=null&&c.jsx(r("IGDSBox.react"),{marginBottom:1,marginTop:2,position:"relative",children:c.jsx(r("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",children:u._(/*BTDS*/"Photo available on app")})})]}))),rt&&c.jsx(r("IGDSBox.react"),{marginBottom:1,marginTop:2,position:"relative",children:c.jsxs(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",dir:o("Locale").isRTL()?"rtl":"ltr",children:[Ze&&et&&c.jsxs(c.Fragment,{children:[o("PolarisPostStrings").CAPTION_EDITED_TEXT,"\xA0\xB7\xA0"]}),c.jsx(v,{parentProps:e}),Ze&&c.jsx(r("IGDSBox.react"),{display:"inlineBlock",position:"relative",children:c.jsx(r("PolarisPostCaptionTranslationPrompt.react"),{postId:Ue})}),!Ze&&!Be&&c.jsxs(c.Fragment,{children:[Le(),ke!==!0&&c.jsx("button",{className:"_a9ze",onClick:me,onMouseEnter:_e,children:c.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:o("PolarisPostStrings").REPLY_TEXT})}),we!=null&&c.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginEnd:2,position:"relative",children:c.jsx(r("PolarisCommentTranslationPrompt.react"),{commentId:we})}),st&&nt===!0&&ut]}),_t&&c.jsx("button",{className:"_a9ze",onClick:ge,children:c.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:o("PolarisPostStrings").RESTRICT_SEE_COMMENT_TEXT})}),mt&&c.jsx("button",{className:"_a9ze",onClick:ye,children:c.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:o("PolarisApproveCommentDialog.react").APPROVE_COMMENT_CTA})}),Be&&c.jsx("button",{className:"_a9ze",onClick:Se,children:c.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:o("PolarisPostStrings").RESTRICT_DELETE_COMMENT_TEXT})})]})}),$e!=null&&$e]})]}),pt&&c.jsx("button",{className:"_a9zt",onClick:Q,title:o("PolarisPostStrings").DELETE_COMMENT_TEXT,children:c.jsx(r("IGDSText.react"),{color:"tertiaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:o("PolarisPostStrings").DELETE_COMMENT_TEXT})}),st&&!nt&&ut,lt&&c.jsx(r("PolarisLikeButton.react"),{className:"_a9zu",isLiked:!!We,onChange:Y,padding:0,size:12})]})}),R&&we!=null&&c.jsx(r("PolarisCommentOptionsDialog.react"),{canDeleteComment:!!it,commentId:we,commentOwnerAvatar:Ie!=null?Ie:"",commentOwnerId:Te,commentOwnerUsername:De,mediaOwnerId:Ve,onClose:G,onDelete:j}),d&&we!=null&&c.jsx(o("PolarisApproveCommentDialog.react").ApproveCommentDialog,{commentId:we,commentOwnerId:Te,commentOwnerUsername:De,commentThreadId:xe,onClose:be,postId:Ue})]})},n[92]=at,n[93]=it,n[94]=lt,n[95]=st,n[96]=Ee,n[97]=ut,n[98]=Ie,n[99]=Te,n[100]=De,n[101]=xe,n[102]=ke,n[103]=$e,n[104]=Pe,n[105]=ct,n[106]=ye,n[107]=j,n[108]=V,n[109]=A,n[110]=Q,n[111]=Z,n[112]=Y,n[113]=me,n[114]=_e,n[115]=Se,n[116]=ge,n[117]=Je,n[118]=we,n[119]=Ze,n[120]=et,n[121]=dt,n[122]=$,n[123]=Be,n[124]=We,n[125]=qe,n[126]=Ue,n[127]=Ve,n[128]=He,n[129]=e,n[130]=Ge,n[131]=Le,n[132]=d,n[133]=mt,n[134]=R,n[135]=nt,n[136]=pt,n[137]=I,n[138]=rt,n[139]=_t,n[140]=ht,n[141]=xt):xt=n[141];var $t;return n[142]!==ot||n[143]!==ft||n[144]!==gt||n[145]!==xt?($t=c.jsx(ot,{action:ft,id:gt,children:xt}),n[142]=ot,n[143]=ft,n[144]=gt,n[145]=xt,n[146]=$t):$t=n[146],$t}function L(e){return c.jsx(r("PolarisLikedByListDialogPlaceholder.react"),{onClose:e})}L.displayName=L.name+" [from "+i.id+"]";function E(e,t){var n=t.commentOwnerId,a=t.postId,i=t.postOwnerId,l=o("polarisUserSelectors").getUserByIdOrThrows(e,n),s=o("polarisPostSelectors").getPostOrNullById(e,a),u=t.id;return u==null&&(u=s==null?void 0:s.captionCommentId),{commentOwnerAvatar:l.profilePictureUrl,commentOwnerId:r("nullthrows")(l.id),commentOwnerUsername:r("nullthrows")(l.username),postOwnerIsUnpublished:o("polarisUserSelectors").getUserByIdOrThrows(e,i).isUnpublished,postShortcode:s&&s.code,translation:u!=null?e.comments.translationById.get(u):null,viewerId:e.users.viewerId}}function k(e,t){var n={commentAuthorId:t.commentOwnerId,commentId:t.id||"",containerModule:t.analyticsContext,mediaAuthorId:t.postOwnerId,mediaId:t.id||"",mediaType:t.mediaType||0};return{fetchCommentLikes:function(){return e(o("PolarisCommentLikeListsActions").requestCommentLikes(r("nullthrows")(t.id)))},onDeleteComment:function(){return e(o("PolarisCommentActions").deleteComment(t.postId,t.id||"",t.analyticsContext))},onLikeComment:function(r){return e(o("PolarisCommentActions").likeComment(babelHelpers.extends({},n,{userId:r||""})))},onReplyClick:function(a){return e(o("PolarisPendingCommentActions").changePendingComment(t.postId,"@"+(a||"")+" ",r("nullthrows")(t.commentThreadId),t.commentOwnerId,a))},onUnlikeComment:function(r){return e(o("PolarisCommentActions").unlikeComment(babelHelpers.extends({},n,{userId:r||""})))}}}function I(e,t,n){return babelHelpers.extends({},e,t,n,{onLikeComment:function(){return t.onLikeComment(e.viewerId)},onReplyClick:function(){return t.onReplyClick(e.commentOwnerUsername)},onUnlikeComment:function(){return t.onUnlikeComment(e.viewerId)}})}function T(e){var t=o("react-compiler-runtime").c(13),n=r("usePolarisLoggedOutIntentAction")(),a=r("usePolarisLoggedOutBlockingEntryPointDialog")(),i=a[0],l=a[1],s=r("usePolarisLoggedOutIntentEntryPointDialog")(),u=s[0],d=s[1],m;t[0]!==i||t[1]!==u?(m=function(t,n){var e={contentReportingLink:t,nextUrl:t,source:n};o("PolarisUA").isDesktop()||o("PolarisConfig").isLoggedOutFRXEligible()?u==null||u(e):i==null||i(e)},t[0]=i,t[1]=u,t[2]=m):m=t[2];var p=m,_;t[3]!==l||t[4]!==d?(_=function(){o("PolarisUA").isDesktop()||o("PolarisConfig").isLoggedOutFRXEligible()?d==null||d(!0):l==null||l(!0)},t[3]=l,t[4]=d,t[5]=_):_=t[5];var f=_,g;t[6]!==n?(g=function(t){return n({source:t})},t[6]=n,t[7]=g):g=t[7];var h;return t[8]!==f||t[9]!==p||t[10]!==e||t[11]!==g?(h=c.jsx(R,babelHelpers.extends({},e,{onLoggedOutDialogClick:p,onLoggedOutDialogPreload:f,onLoggedOutIntentClick:g})),t[8]=f,t[9]=p,t[10]=e,t[11]=g,t[12]=h):h=t[12],h}var D=o("PolarisReactRedux.react").connect(E,k,I)(T);l.default=D}),226);
__d("PolarisThreadedCommentSelectors",["PolarisPaginationUtils","immutable-4.0.0-rc.9","nullthrows","polarisCreateSelectorWithArg"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return!e.deleted&&!e.didReportAsSpam}var s=r("polarisCreateSelectorWithArg")(function(e){return e.posts.byId},function(e){return e.comments.byId},function(e){return e.threadedComments.parentByPostId},function(t,n,a){return function(i){var l=a[i],s=t.get(i);if(!l||!s)return o("immutable-4.0.0-rc.9").List();var u=l.commentIds,c=o("PolarisPaginationUtils").getVisibleCount(l.pagination),d=s.hasRankedComments===!0?0:u.count()-c;return u.map(function(e){return r("nullthrows")(n.get(e))}).slice(d,d+c).filter(function(t){return e(t)})}}),u=r("polarisCreateSelectorWithArg")(function(e){return e.comments.byId},function(e){return e.threadedComments.childByParentId},function(t,n){return function(a){var i=r("nullthrows")(n[a]),l=i.commentIds,s=i.pagination,u=l.map(function(e){return r("nullthrows")(t.get(e))}),c=o("PolarisPaginationUtils").getVisibleCount(s),d=u.slice(0,c).filter(function(t){return e(t)}),m=u.slice(c,u.count()).filter(function(t){return e(t)}),p=m.map(function(e){return e.id});return{remainingCachedShowableChildCommentIds:p,visibleChildComments:d}}}),c=r("polarisCreateSelectorWithArg")(function(e){return e.comments.byId},function(e){return e.threadedComments.childByParentId},function(e,t){return function(e){var n=r("nullthrows")(t[e]);return n.count||0}});function d(e,t){return!!e.threadedComments.initialCommentsLoading[t]}l.selectVisibleParentCommentsForPostId=s,l.selectChildCommentsForParentIdSplitByVisibility=u,l.getTotalChildCommentCountForParentId=c,l.getThreadedCommentsLoading=d}),98);
__d("PolarisCommentThread.react",["cx","fbt","IGDSBox.react","IGDSSpinner.react","PolarisIGCoreButton.react","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisPaginationUtils","PolarisPostComment.react","PolarisPostVariants","PolarisReactRedux.react","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","isStringNullOrEmpty","nullthrows","polarisCommentReducer","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(25),n=e.childComment,a=e.disableTimestampNav,i=e.parentProps,l=i.analyticsContext,s=i.code,u=i.commentingDisabledForViewer,d=i.hideUserAvatar,m=i.loggedIn,p=i.onDeleteCommentClick,_=i.onLikeCountClick,f=i.parentComment,g=i.postId,h=i.postOwnerId,y=i.reducedAvatarMargin,C=i.showCommentOptionsInline,b=i.showRemoveIcon,v=!!d,S;return t[0]!==l||t[1]!==n.giphyMediaInfo||t[2]!==n.id||t[3]!==n.isAuthorVerified||t[4]!==n.isRestrictedPending||t[5]!==n.likeCount||t[6]!==n.likedByViewer||t[7]!==n.mediaCommentInfo||t[8]!==n.postedAt||t[9]!==n.text||t[10]!==n.userId||t[11]!==s||t[12]!==u||t[13]!==a||t[14]!==m||t[15]!==p||t[16]!==_||t[17]!==f.id||t[18]!==g||t[19]!==h||t[20]!==y||t[21]!==C||t[22]!==b||t[23]!==v?(S=c.jsx(r("PolarisPostComment.react"),{analyticsContext:l,className:"_a9ye",code:s,commentingDisabledForViewer:u,commentOwnerId:n.userId,commentThreadId:f.id,disableTimestampNav:a,giphyMediaInfo:n.giphyMediaInfo,hideUserAvatar:v,id:n.id,isAuthorVerified:n.isAuthorVerified,isRestrictedPending:n.isRestrictedPending,likeCount:n.likeCount,likedByViewer:n.likedByViewer,loggedIn:m,mediaCommentInfo:n.mediaCommentInfo,onDeleteCommentClick:p,onLikeCountClick:_,postedAt:n.postedAt,postId:g,postOwnerId:h,reducedAvatarMargin:y,showCommentOptionsInline:C,showRemoveIcon:b,showRichComment:!0,text:n.text,variant:o("PolarisPostVariants").VARIANTS.flexible},n.id),t[0]=l,t[1]=n.giphyMediaInfo,t[2]=n.id,t[3]=n.isAuthorVerified,t[4]=n.isRestrictedPending,t[5]=n.likeCount,t[6]=n.likedByViewer,t[7]=n.mediaCommentInfo,t[8]=n.postedAt,t[9]=n.text,t[10]=n.userId,t[11]=s,t[12]=u,t[13]=a,t[14]=m,t[15]=p,t[16]=_,t[17]=f.id,t[18]=g,t[19]=h,t[20]=y,t[21]=C,t[22]=b,t[23]=v,t[24]=S):S=t[24],S}var m=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={hasPermalinkedReplyBeenHidden:!1},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidUpdate=function(t,n){(t.parentComment.id!==this.props.parentComment.id||t.permalinkedReplyId!==this.props.permalinkedReplyId)&&this.setState({hasPermalinkedReplyBeenHidden:!1})},n.$1=function(){var e=this.props,t=e.childCommentsCacheCanShowMoreWithoutFetch,n=e.childCommentsCanFetchMorePagination,r=e.childCommentsHasNextPage,o=e.permalinkedReply,a=e.remainingCachedShowableChildCommentIds;return o!=null&&r===!0&&t===!0&&n!==!0&&a.count()===1&&a.get(0)===o.id},n.$2=function(t){var e=this.props.childCommentsHasNextPage;return e!==!0||t&&this.$1()},n.$3=function(t){var e=this.props,n=e.analyticsContext,r=e.childCommentsCacheCanShowMoreWithoutFetch,a=e.childCommentsIsFetching,i=e.hideReplies,l=e.loadChildComments,s=e.loadChildCommentsV2,u=e.onHidePermalinkReply,c=e.parentComment,d=c.id,m=c.userId,p=e.permalinkedReply,_=e.postId,f=e.postOwnerId,g=e.showReplies;a||(t?(i(d),o("PolarisInteractionsLogger").logInteractionAction({commentAuthorId:m,commentId:d,containerModule:n,eventName:"instagram_child_comments_collapse",mediaAuthorId:f,mediaId:_}),p!=null&&(u!=null&&u(),this.setState({hasPermalinkedReplyBeenHidden:!0}))):r?g(d):o("PolarisIsLoggedIn").isLoggedIn()?s(_,d):l(d))},n.$4=function(t,n){var e=this,o=this.props,a=o.childCommentsIsFetching,i=o.replyPagerNodeRef,l=o.totalChildCommentCount,s=this.$2(n),d=n?1:0,m=t+d,p=l-m,_;return s&&!a?_=u._(/*BTDS*/"Hide replies"):p<=0?_=u._(/*BTDS*/"View replies"):_=u._(/*BTDS*/"View replies ({hidden replies})",[u._param("hidden replies",p)]),c.jsx("li",{className:"_a9yg",ref:i,children:c.jsxs(r("IGDSBox.react"),{direction:"row",marginBottom:t>0?4:0,marginTop:n?2:0,position:"relative",children:[c.jsxs(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return e.$3(s)},children:[c.jsx("div",{className:"_a9yh"}),c.jsx("span",{className:"_a9yi",children:_})]}),a&&c.jsx("div",{className:"_a9yj",children:c.jsx(r("IGDSSpinner.react"),{size:"small"})})]})})},n.render=function(){var e=this,t=this.props,n=t.analyticsContext,a=t.code,i=t.commentingDisabledForViewer,l=t.customIndentationPadding,s=t.hideUserAvatar,u=t.innerRef,m=t.isPermalinkedComment,p=t.loggedIn,_=t.onDeleteCommentClick,f=t.onLikeCountClick,g=t.parentComment,h=t.permalinkedReply,y=t.permalinkedReplyAnimating,C=t.permalinkedReplyId,b=t.permalinkedReplyNodeRef,v=t.postId,S=t.postOwnerId,R=t.reducedAvatarMargin,L=t.showCommentOptionsInline,E=t.showRemoveIcon,k=t.totalChildCommentCount,I=t.visibleChildComments,T=this.state.hasPermalinkedReplyBeenHidden,D=null;h&&!(T&&I.count()===0)&&(D=c.jsx("div",{className:"_a9yk"+(y===!0&&!T?" _a9yl":""),ref:b,children:c.jsx(d,{childComment:h,disableTimestampNav:!0,parentProps:this.props})}));var x=I.map(function(t,n){return D&&r("nullthrows")(h).id===t.id?null:c.jsx(d,{childComment:t,parentProps:e.props},n)}).filter(function(e){return e!=null}),$=this.$4(x.count(),D!=null),P=l!=null?{margin:"12px 0 0 "+l+"px",width:"calc(100% - "+l+"px)"}:void 0;return c.jsxs("ul",{className:"_a9ym",ref:u,children:[c.jsx(r("PolarisPostComment.react"),{analyticsContext:n,code:a,commentingDisabledForViewer:i,commentOwnerId:g.userId,commentThreadId:g.id,disableTimestampNav:m===!0&&C==null,giphyMediaInfo:g.giphyMediaInfo,hideUserAvatar:!!s,id:g.id,isAuthorVerified:g.isAuthorVerified,isPermalinkedComment:m,isRestrictedPending:g.isRestrictedPending,likeCount:g.likeCount,likedByViewer:g.likedByViewer,loggedIn:p,mediaCommentInfo:g.mediaCommentInfo,onDeleteCommentClick:_,onLikeCountClick:f,postedAt:g.postedAt,postId:v,postOwnerId:S,reducedAvatarMargin:R,showCommentOptionsInline:L,showRemoveIcon:E,showRichComment:!0,text:g.text,variant:o("PolarisPostVariants").VARIANTS.flexible}),k!==0&&c.jsx("li",{children:c.jsxs("ul",{className:"_a9yo",style:P,children:[D,x," ",$]})})]})},t})(c.Component);function p(e,t){var n,a=t.parentComment,i=t.permalinkedReplyId,l=o("PolarisThreadedCommentSelectors").selectChildCommentsForParentIdSplitByVisibility(e,a.id),s=l.remainingCachedShowableChildCommentIds,u=l.visibleChildComments,c=o("PolarisThreadedCommentSelectors").getTotalChildCommentCountForParentId(e,a.id),d=(n=e.threadedComments.childByParentId[a.id])!=null?n:o("polarisCommentReducer").EMPTY_POST_COMMENTS_STATE,m=d.pagination,p=null;return r("isStringNullOrEmpty")(i)||(p=e.comments.byId.get(i)),{childCommentsCacheCanShowMoreWithoutFetch:o("PolarisPaginationUtils").getVisibleCount(m)<o("PolarisPaginationUtils").getLoadedCount(m),childCommentsCanFetchMorePagination:o("PolarisPaginationUtils").canFetchMorePagination(m),childCommentsHasNextPage:o("PolarisPaginationUtils").hasNextPage(m),childCommentsIsFetching:o("PolarisPaginationUtils").isFetching(m),permalinkedReply:p,remainingCachedShowableChildCommentIds:s,totalChildCommentCount:c||0,visibleChildComments:u}}var _={hideReplies:o("PolarisThreadedCommentActions").hideChildComments,loadChildComments:o("PolarisThreadedCommentActions").requestNextChildCommentPage,loadChildCommentsV2:o("PolarisThreadedCommentActions").requestNextChildCommentPageV2,showReplies:o("PolarisThreadedCommentActions").showChildComments},f=o("PolarisReactRedux.react").connect(p,_)(m);l.default=f}),226);
__d("PolarisDeleteCommentModal.react",["fbt","IGCoreDialog.react","PolarisCommentActions","PolarisGenericStrings","PolarisReactRedux.react","polarisLogAction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(15),n=e.analyticsContext,a=e.commentId,i=e.onClose,l=e.postId,c=o("PolarisReactRedux.react").useDispatch(),d;t[0]!==n||t[1]!==a||t[2]!==c||t[3]!==i||t[4]!==l?(d=function(t){r("polarisLogAction")("commentDelete",{source:n}),c(o("PolarisCommentActions").deleteComment(l,a,n)),i(t)},t[0]=n,t[1]=a,t[2]=c,t[3]=i,t[4]=l,t[5]=d):d=t[5];var m=d,p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"Delete Comment"),t[6]=p):p=t[6];var _;t[7]!==m?(_=u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:m,children:p}),t[7]=m,t[8]=_):_=t[8];var f;t[9]!==i?(f=u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:i,children:o("PolarisGenericStrings").CANCEL_TEXT}),t[9]=i,t[10]=f):f=t[10];var g;return t[11]!==i||t[12]!==_||t[13]!==f?(g=u.jsxs(o("IGCoreDialog.react").IGCoreDialog,{onModalClose:i,children:[_,f]}),t[11]=i,t[12]=_,t[13]=f,t[14]=g):g=t[14],g}l.default=c}),226);
__d("PolarisPostActionLoadPostQueryInlineFragment.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"PolarisPostActionLoadPostQueryInlineFragment"};a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles"};a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryInlineMediaFragment.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"PolarisPostActionLoadPostQueryInlineMediaFragment"};a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryInlineSharerFragment.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"PolarisPostActionLoadPostQueryInlineSharerFragment"};a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryLegacyQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24324795310485890"}),null);
__d("PolarisPostActionLoadPostQueryLegacyQuery.graphql",["PolarisPostActionLoadPostQueryLegacyQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:3,kind:"LocalArgument",name:"fetch_related_profile_media_count"},t={defaultValue:null,kind:"LocalArgument",name:"fetch_tagged_user_count"},r={defaultValue:null,kind:"LocalArgument",name:"hoisted_comment_id"},o={defaultValue:null,kind:"LocalArgument",name:"hoisted_reply_id"},a={defaultValue:null,kind:"LocalArgument",name:"shortcode"},i=[{kind:"Variable",name:"shortcode",variableName:"shortcode"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"shortcode",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"thumbnail_src",storageKey:null},d={alias:null,args:null,concreteType:"XDTGraphMediaDimensions",kind:"LinkedField",name:"dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"buttons",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"gating_type",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"center_button",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"post_reveal_cta",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"time_gated",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"misinformation_type",storageKey:null},b={alias:null,args:null,concreteType:"XDTGraphMediaGatingInfo",kind:"LinkedField",name:"gating_info",plural:!1,selections:[m,p,_,f,g,h,y,C],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"fact_check_overall_rating",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},L={alias:null,args:null,concreteType:"XDTGraphMediaFactCheck",kind:"LinkedField",name:"fact_check_information",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaFactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[S,R,{alias:null,args:null,kind:"ScalarField",name:"appeal_email",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_directly_rated",storageKey:null}],storageKey:null},E={alias:null,args:null,concreteType:"XDTGraphMediaSensitivityFrictionInfo",kind:"LinkedField",name:"sensitivity_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sensitivity_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_primary_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_secondary_button",storageKey:null}],storageKey:null},k={alias:null,args:null,concreteType:"XDTGraphMediaSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_have_sharing_friction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bloks_app_url",storageKey:null}],storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},D={alias:null,args:null,concreteType:"XDTGraphMediaOverlayIconSpec",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"icon_glyph",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon_type",storageKey:null},S,T],storageKey:null},x=[{alias:null,args:null,kind:"ScalarField",name:"button_type",storageKey:null},I,{alias:null,args:null,kind:"ScalarField",name:"secondary_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},D,{alias:null,args:null,concreteType:"XDTGraphMediaOverlayTextColorSpec",kind:"LinkedField",name:"text_color",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"light",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dark",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_text_centered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_chevron",storageKey:null}],$={alias:null,args:null,concreteType:"XDTGraphMediaOverlayInfo",kind:"LinkedField",name:"media_overlay_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"banner",plural:!1,selections:x,storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"buttons",plural:!0,selections:x,storageKey:null},p,D,C,{alias:null,args:null,kind:"ScalarField",name:"overlay_layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"overlay_type",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"bloks_data",storageKey:null}],storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"media_preview",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"display_url",storageKey:null},M={alias:null,args:null,concreteType:"XDTGraphImageResource",kind:"LinkedField",name:"display_resources",plural:!0,selections:[T,{alias:null,args:null,kind:"ScalarField",name:"config_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"config_height",storageKey:null}],storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"is_video",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"tracking_token",storageKey:null},F={alias:null,args:null,concreteType:"XDTGraphUpcomingEventDict",kind:"LinkedField",name:"upcoming_event",plural:!1,selections:[s,f,{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reminder_enabled",storageKey:null}],storageKey:null},O=[{kind:"Variable",name:"first",variableName:"fetch_tagged_user_count"}],B={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"followed_by_viewer",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},V={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"user",plural:!1,selections:[B,W,s,q,R,U],storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},z={alias:null,args:O,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[V,H,G],storageKey:null}],storageKey:null}],storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"is_private",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},Q=[K],X={alias:null,args:null,concreteType:"XDTgraphuser_edge_followed_by_connection",kind:"LinkedField",name:"edge_followed_by",plural:!1,selections:Q,storageKey:null},Y={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:[s,U,{alias:null,args:null,kind:"ScalarField",name:"has_onboarded_to_text_post_app",storageKey:null},q,R,{alias:null,args:null,kind:"ScalarField",name:"blocked_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"restricted_by_viewer",storageKey:null},W,B,{alias:null,args:null,kind:"ScalarField",name:"has_blocked_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_embeds_disabled",storageKey:null},j,{alias:null,args:null,kind:"ScalarField",name:"is_unpublished",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requested_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pass_tiering_recommendation",storageKey:null},{alias:null,args:null,concreteType:"XDTgraphuser_edge_owner_to_timeline_media_connection",kind:"LinkedField",name:"edge_owner_to_timeline_media",plural:!1,selections:Q,storageKey:null},X],storageKey:null},J=[{kind:"Literal",name:"first",value:1}],Z={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"can_see_insights_as_brand",storageKey:null},te={alias:null,args:null,kind:"ScalarField",name:"caption_is_edited",storageKey:null},ne={alias:null,args:null,kind:"ScalarField",name:"has_ranked_comments",storageKey:null},re={alias:null,args:null,kind:"ScalarField",name:"like_and_view_counts_disabled",storageKey:null},oe={alias:null,args:null,concreteType:"XDTPageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null}],storageKey:null},ae={alias:null,args:null,kind:"ScalarField",name:"did_report_as_spam",storageKey:null},ie=[s,q,R,U],le={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:ie,storageKey:null},se={alias:null,args:null,kind:"ScalarField",name:"viewer_has_liked",storageKey:null},ue={alias:null,args:null,concreteType:"XDTgraphcomment_edge_liked_by_connection",kind:"LinkedField",name:"edge_liked_by",plural:!1,selections:Q,storageKey:null},ce={alias:null,args:null,kind:"ScalarField",name:"is_restricted_pending",storageKey:null},de=[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[s,I,Z,ae,le,se,ue,ce],storageKey:null}],me={alias:null,args:[{kind:"Literal",name:"first",value:3}],concreteType:"XDTgraphcomment_edge_threaded_comments_connection",kind:"LinkedField",name:"edge_threaded_comments",plural:!1,selections:[K,oe,{alias:null,args:null,concreteType:"XDTgraphcomment_edge_threaded_comments",kind:"LinkedField",name:"edges",plural:!0,selections:de,storageKey:null}],storageKey:"edge_threaded_comments(first:3)"},pe={alias:null,args:[{kind:"Literal",name:"first",value:24}],concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment_connection",kind:"LinkedField",name:"edge_media_to_parent_comment",plural:!1,selections:[K,oe,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[s,I,Z,ae,le,se,ue,ce,me],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_parent_comment(first:24)"},_e={alias:null,args:[{kind:"Variable",name:"hoisted_comment_id",variableName:"hoisted_comment_id"}],concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment_connection",kind:"LinkedField",name:"edge_media_to_hoisted_comment",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[s,I,Z,ae,le,se,ue,ce,{alias:null,args:[{kind:"Variable",name:"hoisted_reply_id",variableName:"hoisted_reply_id"}],concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply_connection",kind:"LinkedField",name:"edge_comment_to_hoisted_reply",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply",kind:"LinkedField",name:"edges",plural:!0,selections:de,storageKey:null}],storageKey:null},me],storageKey:null}],storageKey:null}],storageKey:null},fe={alias:null,args:[{kind:"Literal",name:"first",value:2}],concreteType:"XDTgraphmediainterface_edge_media_preview_comment_connection",kind:"LinkedField",name:"edge_media_preview_comment",plural:!1,selections:[K,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_comment",kind:"LinkedField",name:"edges",plural:!0,selections:de,storageKey:null}],storageKey:"edge_media_preview_comment(first:2)"},ge={alias:null,args:null,kind:"ScalarField",name:"comments_disabled",storageKey:null},he={alias:null,args:null,kind:"ScalarField",name:"commenting_disabled_for_viewer",storageKey:null},ye={alias:null,args:null,kind:"ScalarField",name:"taken_at_timestamp",storageKey:null},Ce={alias:null,args:[{kind:"Literal",name:"first",value:10}],concreteType:"XDTgraphmediainterface_edge_media_preview_like_connection",kind:"LinkedField",name:"edge_media_preview_like",plural:!1,selections:[K,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_like",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"node",plural:!1,selections:ie,storageKey:null}],storageKey:null}],storageKey:"edge_media_preview_like(first:10)"},be=[s,U],ve={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"sponsor",plural:!1,selections:be,storageKey:null},Se={alias:null,args:null,kind:"ScalarField",name:"is_affiliate",storageKey:null},Re={alias:null,args:null,kind:"ScalarField",name:"is_paid_partnership",storageKey:null},Le={alias:null,args:null,concreteType:"XDTGraphLocation",kind:"LinkedField",name:"location",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"has_public_page",storageKey:null},S,{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_json",storageKey:null}],storageKey:null},Ee={alias:null,args:null,concreteType:"XDTGraphNftAssetInfoType",kind:"LinkedField",name:"nft_asset_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"asset_id",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"shimmer_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_igid",storageKey:null}],storageKey:null},ke={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved",storageKey:null},Ie={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved_to_collection",storageKey:null},Te={alias:null,args:null,kind:"ScalarField",name:"viewer_in_photo_of_you",storageKey:null},De={alias:null,args:null,kind:"ScalarField",name:"viewer_can_reshare",storageKey:null},xe={alias:null,args:null,kind:"ScalarField",name:"is_ad",storageKey:null},$e={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"coauthor_producers",plural:!0,selections:ie,storageKey:null},Pe={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"pinned_for_users",plural:!0,selections:ie,storageKey:null},Ne={alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},Me=[Ne],we={kind:"InlineFragment",selections:Me,type:"XDTGraphImage",abstractKey:null},Ae={alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_related_profiles_connection",kind:"LinkedField",name:"edge_related_profiles",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_related_profiles",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"node",plural:!1,selections:[s,B,j,q,R,U,X,{alias:null,args:[{kind:"Variable",name:"first",variableName:"fetch_related_profile_media_count"}],concreteType:"XDTgraphuser_edge_owner_to_timeline_media_connection",kind:"LinkedField",name:"edge_owner_to_timeline_media",plural:!1,selections:[K,{alias:null,args:null,concreteType:"XDTgraphuser_edge_owner_to_timeline_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,s,u,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_like_connection",kind:"LinkedField",name:"edge_media_preview_like",plural:!1,selections:Q,storageKey:null},{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_comment_connection",kind:"LinkedField",name:"edge_media_preview_comment",plural:!1,selections:Q,storageKey:null},c,{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:be,storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaGatingInfo",kind:"LinkedField",name:"gating_info",plural:!1,selections:[m,p,_,f,g,h,y],storageKey:null},k,$,w,we,{kind:"InlineFragment",selections:Me,type:"XDTGraphSidecar",abstractKey:null},{kind:"InlineFragment",selections:Me,type:"XDTGraphVideo",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Fe={alias:null,args:null,concreteType:"XDTGraphDashInfo",kind:"LinkedField",name:"dash_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_dash_eligible",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"number_of_qualities",storageKey:null}],storageKey:null},Oe={alias:null,args:null,kind:"ScalarField",name:"has_audio",storageKey:null},Be={alias:null,args:null,kind:"ScalarField",name:"video_url",storageKey:null},We={alias:null,args:null,kind:"ScalarField",name:"video_view_count",storageKey:null},qe={alias:null,args:null,kind:"ScalarField",name:"video_play_count",storageKey:null},Ue={kind:"InlineFragment",selections:[Ne,Fe,Oe,Be,We,qe,{alias:null,args:null,kind:"ScalarField",name:"encoding_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_published",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_type",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"video_duration",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphClipsMusicAttributionInfo",kind:"LinkedField",name:"clips_music_attribution_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"artist_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"song_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uses_original_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_id",storageKey:null}],storageKey:null}],type:"XDTGraphVideo",abstractKey:null},Ve={kind:"InlineFragment",selections:[Ne,Fe,Oe,Be,We,qe],type:"XDTGraphVideo",abstractKey:null},He={alias:null,args:O,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[V,H,G,s],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o,a],kind:"Fragment",metadata:null,name:"PolarisPostActionLoadPostQueryLegacyQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisPostActionLoadPostQueryInlineFragment",selections:[l,s,u,c,d,b,v,L,E,k,$,P,N,M,w,A,F,z,Y,{alias:null,args:J,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[Z,I],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},ee,te,ne,re,pe,_e,fe,ge,he,ye,Ce,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[ve],storageKey:null}],storageKey:null}],storageKey:null},Se,Re,Le,Ee,se,ke,Ie,Te,De,xe,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[u,c],storageKey:null}],storageKey:null}],storageKey:null},$e,Pe,Ae,Ue,we,{kind:"InlineFragment",selections:[Ne,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,s,u,d,b,v,L,E,k,$,P,N,M,Ve,we,w,A,F,z],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null}],args:null,argumentDefinitions:[{kind:"RootArgument",name:"fetch_related_profile_media_count"},{kind:"RootArgument",name:"fetch_tagged_user_count"},{kind:"RootArgument",name:"hoisted_comment_id"},{kind:"RootArgument",name:"hoisted_reply_id"}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e,t,r,o],kind:"Operation",name:"PolarisPostActionLoadPostQueryLegacyQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[l,{kind:"TypeDiscriminator",abstractKey:"__isXDTGraphMediaInterface"},s,u,c,d,b,v,L,E,k,$,P,N,M,w,A,F,He,Y,{alias:null,args:J,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[Z,I,s],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},ee,te,ne,re,pe,_e,fe,ge,he,ye,Ce,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[ve,s],storageKey:null}],storageKey:null}],storageKey:null},Se,Re,Le,Ee,se,ke,Ie,Te,De,xe,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,u,c,s],storageKey:null}],storageKey:null}],storageKey:null},$e,Pe,Ae,Ue,we,{kind:"InlineFragment",selections:[Ne,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,s,u,d,b,v,L,E,k,$,P,N,M,Ve,we,w,A,F,He],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null}],storageKey:null}]},params:{id:n("PolarisPostActionLoadPostQueryLegacyQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_shortcode_media"]},name:"PolarisPostActionLoadPostQueryLegacyQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryMediaIdQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25617395364531909"}),null);
__d("PolarisPostActionLoadPostQueryMediaIdQuery.graphql",["PolarisPostActionLoadPostQueryMediaIdQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"mediaId"}],t=[{kind:"Variable",name:"media_id",variableName:"mediaId"}],r={alias:null,args:null,kind:"ScalarField",name:"code",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"taken_at",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"inventory_source",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},m={alias:null,args:null,concreteType:"XDTVideoVersion",kind:"LinkedField",name:"video_versions",plural:!0,selections:[u,c,d,{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"is_dash_eligible",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"number_of_qualities",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"video_dash_manifest",storageKey:null},y={alias:null,args:null,concreteType:"XDTImageVersion2",kind:"LinkedField",name:"image_versions2",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTImageCandidate",kind:"LinkedField",name:"candidates",plural:!0,selections:[d,c,u],storageKey:null}],storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"is_paid_partnership",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"is_pending",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"is_unpublished",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"organic_tracking_token",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"is_private",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},T={alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[a,_,p,k,{alias:null,args:null,kind:"ScalarField",name:"is_embeds_disabled",storageKey:null},S,I,v,{alias:null,args:null,concreteType:"XDTRelationshipInfoDict",kind:"LinkedField",name:"friendship_status",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"following",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"blocking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followed_by",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"incoming_request",storageKey:null},k,{alias:null,args:null,kind:"ScalarField",name:"is_restricted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_unconnected",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"outgoing_request",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscribed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_feed_favorite",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"latest_reel_media",storageKey:null}],storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"comments_disabled",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"like_and_view_counts_disabled",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"can_viewer_reshare",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"product_type",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},M={alias:null,args:null,concreteType:"XDTUserTagInfosDict",kind:"LinkedField",name:"usertags",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTUserTagInfoDict",kind:"LinkedField",name:"in",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[o,v,_,p,I],storageKey:null}],storageKey:null}],storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},F={alias:null,args:null,concreteType:"XDTMediaOverlayPayloadSchema",kind:"LinkedField",name:"media_overlay_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTButtonSpec",kind:"LinkedField",name:"banner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"button_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_chevron",storageKey:null},{alias:null,args:null,concreteType:"XDTIconSpec",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"icon_glyph",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon_type",storageKey:null},w,{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_text_centered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"secondary_text",storageKey:null},A,{alias:null,args:null,concreteType:"XDTTextColorSpec",kind:"LinkedField",name:"text_color",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"dark",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"light",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"carousel_parent_id",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"bloks_app_url",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"should_have_sharing_friction",storageKey:null},U={alias:null,args:null,concreteType:"XDTSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[W,q],storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"preview",storageKey:null},H={alias:null,args:null,concreteType:"XDTLocationDict",kind:"LinkedField",name:"location",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"lat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lng",storageKey:null},w,p],storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"has_audio",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"audio_type",storageKey:null},j={alias:null,args:null,concreteType:"XDTClipsAchievementsInfo",kind:"LinkedField",name:"achievements_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"show_achievements",storageKey:null}],storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"should_mute_audio",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason",storageKey:null},X={alias:null,args:null,concreteType:"XDTMusicInfo",kind:"LinkedField",name:"music_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTMusicConsumptionInfoDict",kind:"LinkedField",name:"music_consumption_info",plural:!1,selections:[K,Q],storageKey:null},{alias:null,args:null,concreteType:"XDTTrackData",kind:"LinkedField",name:"music_asset_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"display_artist",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_cluster_id",storageKey:null}],storageKey:null}],storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"original_audio_title",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"audio_asset_id",storageKey:null},Z={alias:null,args:null,concreteType:"XDTOriginalSoundConsumptionInfo",kind:"LinkedField",name:"consumption_info",plural:!1,selections:[Q,{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason_type",storageKey:null}],storageKey:null},ee={alias:null,args:null,concreteType:"XDTClipsAppAttribution",kind:"LinkedField",name:"clips_attribution_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attribution_app_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attribution_app_name",storageKey:null},{alias:null,args:null,concreteType:"XDTClipsPivotPageHeader",kind:"LinkedField",name:"pivot_page_header",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"developer_app_logo_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"media_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"content_url",storageKey:null}],storageKey:null}],storageKey:null},te={alias:null,args:null,concreteType:"XDTCommentDict",kind:"LinkedField",name:"caption",plural:!1,selections:[A],storageKey:null},ne={alias:null,args:null,kind:"ScalarField",name:"main_feed_carousel_starting_media_id",storageKey:null},re={alias:null,args:null,kind:"ScalarField",name:"has_liked",storageKey:null},oe={alias:null,args:null,kind:"ScalarField",name:"commenting_disabled_for_viewer",storageKey:null},ae={alias:null,args:null,kind:"ScalarField",name:"comment_count",storageKey:null},ie={alias:null,args:null,kind:"ScalarField",name:"media_level_comment_controls",storageKey:null},le={alias:null,args:null,kind:"ScalarField",name:"ig_media_sharing_disabled",storageKey:null},se={alias:null,args:null,kind:"ScalarField",name:"audience",storageKey:null},ue={alias:null,args:null,kind:"ScalarField",name:"is_shared_from_basel",storageKey:null},ce={alias:null,args:null,kind:"ScalarField",name:"visibility",storageKey:null},de={alias:null,args:null,kind:"ScalarField",name:"photo_of_you",storageKey:null},me={alias:null,args:null,kind:"ScalarField",name:"carousel_media_count",storageKey:null},pe={alias:null,args:null,kind:"ScalarField",name:"view_count",storageKey:null},_e={alias:null,args:null,kind:"ScalarField",name:"like_count",storageKey:null},fe={alias:null,args:null,kind:"ScalarField",name:"logging_info_token",storageKey:null},ge={alias:null,args:null,concreteType:"XDTSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[q,W],storageKey:null},he={alias:null,args:null,concreteType:"XDTUserTagInfosDict",kind:"LinkedField",name:"usertags",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTUserTagInfoDict",kind:"LinkedField",name:"in",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[o,v,_,p,I,a],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"PolarisPostActionLoadPostQueryMediaIdQuery",selections:[{alias:null,args:t,concreteType:"XDTMediaInfoListResponse",kind:"LinkedField",name:"xdt_api__v1__media__media_id_web_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisPostActionLoadPostQueryInlineMediaFragment",selections:[{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,a,i,l,s,m,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"facepile_top_likers",plural:!0,selections:[p,o,_],storageKey:null},f,g,h,y,C,{alias:null,args:null,concreteType:"XDTSponsorTag",kind:"LinkedField",name:"sponsor_tags",plural:!0,selections:[b,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"sponsor",plural:!1,selections:[o,_,p,v,S],storageKey:null}],storageKey:null},R,L,E,T,D,x,$,P,N,M,F,{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"carousel_media",plural:!0,selections:[a,o,O,f,h,R,L,y,B,U,V,E,m,F,M],storageKey:null},H,G,{alias:null,args:null,concreteType:"XDTClipsMetadataDict",kind:"LinkedField",name:"clips_metadata",plural:!1,selections:[z,j,X,{alias:null,args:null,concreteType:"XDTOriginalSoundData",kind:"LinkedField",name:"original_sound_info",plural:!1,selections:[Y,K,J,Z,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"ig_artist",plural:!1,selections:[_],storageKey:null}],storageKey:null}],storageKey:null},ee,te,ne,re,oe,ae,ie,le,se,ue,ce,de,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"invited_coauthor_producers",plural:!0,selections:[o],storageKey:null},me,pe,_e,fe,ge],storageKey:null}],args:null,argumentDefinitions:[]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"PolarisPostActionLoadPostQueryMediaIdQuery",selections:[{alias:null,args:t,concreteType:"XDTMediaInfoListResponse",kind:"LinkedField",name:"xdt_api__v1__media__media_id_web_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,a,i,l,s,m,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"facepile_top_likers",plural:!0,selections:[p,o,_,a],storageKey:null},f,g,h,y,C,{alias:null,args:null,concreteType:"XDTSponsorTag",kind:"LinkedField",name:"sponsor_tags",plural:!0,selections:[b,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"sponsor",plural:!1,selections:[o,_,p,v,S,a],storageKey:null}],storageKey:null},R,L,E,T,D,x,$,P,N,he,F,{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"carousel_media",plural:!0,selections:[a,o,O,f,h,R,L,y,B,U,V,E,m,F,he],storageKey:null},H,G,{alias:null,args:null,concreteType:"XDTClipsMetadataDict",kind:"LinkedField",name:"clips_metadata",plural:!1,selections:[z,j,X,{alias:null,args:null,concreteType:"XDTOriginalSoundData",kind:"LinkedField",name:"original_sound_info",plural:!1,selections:[Y,K,J,Z,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"ig_artist",plural:!1,selections:[_,a],storageKey:null}],storageKey:null}],storageKey:null},ee,te,ne,re,oe,ae,ie,le,se,ue,ce,de,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"invited_coauthor_producers",plural:!0,selections:[o,a],storageKey:null},me,pe,_e,fe,ge],storageKey:null}],storageKey:null}]},params:{id:n("PolarisPostActionLoadPostQueryMediaIdQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_api__v1__media__media_id_web_info"]},name:"PolarisPostActionLoadPostQueryMediaIdQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29599222026389233"}),null);
__d("PolarisPostActionLoadPostQueryQuery.graphql",["PolarisPostActionLoadPostQueryQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"fetch_tagged_user_count"},t={defaultValue:null,kind:"LocalArgument",name:"hoisted_comment_id"},r={defaultValue:null,kind:"LocalArgument",name:"hoisted_reply_id"},o={defaultValue:null,kind:"LocalArgument",name:"shortcode"},a=[{kind:"Variable",name:"shortcode",variableName:"shortcode"}],i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"shortcode",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"thumbnail_src",storageKey:null},c={alias:null,args:null,concreteType:"XDTGraphMediaDimensions",kind:"LinkedField",name:"dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"misinformation_type",storageKey:null},_={alias:null,args:null,concreteType:"XDTGraphMediaGatingInfo",kind:"LinkedField",name:"gating_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"buttons",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"gating_type",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"center_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_reveal_cta",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time_gated",storageKey:null},p],storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"fact_check_overall_rating",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},y={alias:null,args:null,concreteType:"XDTGraphMediaFactCheck",kind:"LinkedField",name:"fact_check_information",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaFactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[g,h,{alias:null,args:null,kind:"ScalarField",name:"appeal_email",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_directly_rated",storageKey:null}],storageKey:null},C={alias:null,args:null,concreteType:"XDTGraphMediaSensitivityFrictionInfo",kind:"LinkedField",name:"sensitivity_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sensitivity_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_primary_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_secondary_button",storageKey:null}],storageKey:null},b={alias:null,args:null,concreteType:"XDTGraphMediaSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_have_sharing_friction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bloks_app_url",storageKey:null}],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},R={alias:null,args:null,concreteType:"XDTGraphMediaOverlayIconSpec",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"icon_glyph",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon_type",storageKey:null},g,S],storageKey:null},L=[{alias:null,args:null,kind:"ScalarField",name:"button_type",storageKey:null},v,{alias:null,args:null,kind:"ScalarField",name:"secondary_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},R,{alias:null,args:null,concreteType:"XDTGraphMediaOverlayTextColorSpec",kind:"LinkedField",name:"text_color",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"light",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dark",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_text_centered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_chevron",storageKey:null}],E={alias:null,args:null,concreteType:"XDTGraphMediaOverlayInfo",kind:"LinkedField",name:"media_overlay_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"banner",plural:!1,selections:L,storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"buttons",plural:!0,selections:L,storageKey:null},d,R,p,{alias:null,args:null,kind:"ScalarField",name:"overlay_layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"overlay_type",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"bloks_data",storageKey:null}],storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"media_preview",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"display_url",storageKey:null},T={alias:null,args:null,concreteType:"XDTGraphImageResource",kind:"LinkedField",name:"display_resources",plural:!0,selections:[S,{alias:null,args:null,kind:"ScalarField",name:"config_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"config_height",storageKey:null}],storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"is_video",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"tracking_token",storageKey:null},$={alias:null,args:null,concreteType:"XDTGraphUpcomingEventDict",kind:"LinkedField",name:"upcoming_event",plural:!1,selections:[l,m,{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reminder_enabled",storageKey:null}],storageKey:null},P=[{kind:"Variable",name:"first",variableName:"fetch_tagged_user_count"}],N={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"followed_by_viewer",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},F={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"user",plural:!1,selections:[N,M,l,w,h,A],storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},W={alias:null,args:P,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[F,O,B],storageKey:null}],storageKey:null}],storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},U=[q],V={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:[l,A,w,h,{alias:null,args:null,kind:"ScalarField",name:"blocked_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"restricted_by_viewer",storageKey:null},M,N,{alias:null,args:null,kind:"ScalarField",name:"has_blocked_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_embeds_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_private",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_unpublished",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requested_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pass_tiering_recommendation",storageKey:null},{alias:null,args:null,concreteType:"XDTgraphuser_edge_owner_to_timeline_media_connection",kind:"LinkedField",name:"edge_owner_to_timeline_media",plural:!1,selections:U,storageKey:null},{alias:null,args:null,concreteType:"XDTgraphuser_edge_followed_by_connection",kind:"LinkedField",name:"edge_followed_by",plural:!1,selections:U,storageKey:null}],storageKey:null},H=[{kind:"Literal",name:"first",value:1}],G={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"can_see_insights_as_brand",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"caption_is_edited",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"has_ranked_comments",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"like_and_view_counts_disabled",storageKey:null},X={alias:null,args:null,concreteType:"XDTPageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null}],storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"did_report_as_spam",storageKey:null},J=[l,w,h,A],Z={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:J,storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"viewer_has_liked",storageKey:null},te={alias:null,args:null,concreteType:"XDTgraphcomment_edge_liked_by_connection",kind:"LinkedField",name:"edge_liked_by",plural:!1,selections:U,storageKey:null},ne={alias:null,args:null,kind:"ScalarField",name:"is_restricted_pending",storageKey:null},re=[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[l,v,G,Y,Z,ee,te,ne],storageKey:null}],oe={alias:null,args:[{kind:"Literal",name:"first",value:3}],concreteType:"XDTgraphcomment_edge_threaded_comments_connection",kind:"LinkedField",name:"edge_threaded_comments",plural:!1,selections:[q,X,{alias:null,args:null,concreteType:"XDTgraphcomment_edge_threaded_comments",kind:"LinkedField",name:"edges",plural:!0,selections:re,storageKey:null}],storageKey:"edge_threaded_comments(first:3)"},ae={alias:null,args:[{kind:"Literal",name:"first",value:24}],concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment_connection",kind:"LinkedField",name:"edge_media_to_parent_comment",plural:!1,selections:[q,X,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[l,v,G,Y,Z,ee,te,ne,oe],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_parent_comment(first:24)"},ie={alias:null,args:[{kind:"Variable",name:"hoisted_comment_id",variableName:"hoisted_comment_id"}],concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment_connection",kind:"LinkedField",name:"edge_media_to_hoisted_comment",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[l,v,G,Y,Z,ee,te,ne,{alias:null,args:[{kind:"Variable",name:"hoisted_reply_id",variableName:"hoisted_reply_id"}],concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply_connection",kind:"LinkedField",name:"edge_comment_to_hoisted_reply",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply",kind:"LinkedField",name:"edges",plural:!0,selections:re,storageKey:null}],storageKey:null},oe],storageKey:null}],storageKey:null}],storageKey:null},le={alias:null,args:[{kind:"Literal",name:"first",value:2}],concreteType:"XDTgraphmediainterface_edge_media_preview_comment_connection",kind:"LinkedField",name:"edge_media_preview_comment",plural:!1,selections:[q,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_comment",kind:"LinkedField",name:"edges",plural:!0,selections:re,storageKey:null}],storageKey:"edge_media_preview_comment(first:2)"},se={alias:null,args:null,kind:"ScalarField",name:"comments_disabled",storageKey:null},ue={alias:null,args:null,kind:"ScalarField",name:"commenting_disabled_for_viewer",storageKey:null},ce={alias:null,args:null,kind:"ScalarField",name:"taken_at_timestamp",storageKey:null},de={alias:null,args:[{kind:"Literal",name:"first",value:10}],concreteType:"XDTgraphmediainterface_edge_media_preview_like_connection",kind:"LinkedField",name:"edge_media_preview_like",plural:!1,selections:[q,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_like",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"node",plural:!1,selections:J,storageKey:null}],storageKey:null}],storageKey:"edge_media_preview_like(first:10)"},me={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"sponsor",plural:!1,selections:[l,A],storageKey:null},pe={alias:null,args:null,kind:"ScalarField",name:"is_affiliate",storageKey:null},_e={alias:null,args:null,kind:"ScalarField",name:"is_paid_partnership",storageKey:null},fe={alias:null,args:null,concreteType:"XDTGraphLocation",kind:"LinkedField",name:"location",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"has_public_page",storageKey:null},g,{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_json",storageKey:null}],storageKey:null},ge={alias:null,args:null,concreteType:"XDTGraphNftAssetInfoType",kind:"LinkedField",name:"nft_asset_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"asset_id",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"shimmer_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_igid",storageKey:null}],storageKey:null},he={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved",storageKey:null},ye={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved_to_collection",storageKey:null},Ce={alias:null,args:null,kind:"ScalarField",name:"viewer_in_photo_of_you",storageKey:null},be={alias:null,args:null,kind:"ScalarField",name:"viewer_can_reshare",storageKey:null},ve={alias:null,args:null,kind:"ScalarField",name:"is_ad",storageKey:null},Se={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"coauthor_producers",plural:!0,selections:J,storageKey:null},Re={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"pinned_for_users",plural:!0,selections:J,storageKey:null},Le={alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},Ee={alias:null,args:null,concreteType:"XDTGraphDashInfo",kind:"LinkedField",name:"dash_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_dash_eligible",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"number_of_qualities",storageKey:null}],storageKey:null},ke={alias:null,args:null,kind:"ScalarField",name:"has_audio",storageKey:null},Ie={alias:null,args:null,kind:"ScalarField",name:"video_url",storageKey:null},Te={alias:null,args:null,kind:"ScalarField",name:"video_view_count",storageKey:null},De={alias:null,args:null,kind:"ScalarField",name:"video_play_count",storageKey:null},xe={kind:"InlineFragment",selections:[Le,Ee,ke,Ie,Te,De,{alias:null,args:null,kind:"ScalarField",name:"encoding_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_published",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_type",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"video_duration",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphClipsMusicAttributionInfo",kind:"LinkedField",name:"clips_music_attribution_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"artist_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"song_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uses_original_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_id",storageKey:null}],storageKey:null}],type:"XDTGraphVideo",abstractKey:null},$e={kind:"InlineFragment",selections:[Le],type:"XDTGraphImage",abstractKey:null},Pe={kind:"InlineFragment",selections:[Le,Ee,ke,Ie,Te,De],type:"XDTGraphVideo",abstractKey:null},Ne={alias:null,args:P,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[F,O,B,l],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o],kind:"Fragment",metadata:null,name:"PolarisPostActionLoadPostQueryQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles",selections:[i,l,s,u,c,_,f,y,C,b,E,k,I,T,D,x,$,W,V,{alias:null,args:H,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[G,v],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},z,j,K,Q,ae,ie,le,se,ue,ce,de,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[me],storageKey:null}],storageKey:null}],storageKey:null},pe,_e,fe,ge,ee,he,ye,Ce,be,ve,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[s,u],storageKey:null}],storageKey:null}],storageKey:null},Se,Re,xe,$e,{kind:"InlineFragment",selections:[Le,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,l,s,c,_,f,y,C,b,E,k,I,T,Pe,$e,D,x,$,W],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null}],args:null,argumentDefinitions:[{kind:"RootArgument",name:"fetch_tagged_user_count"},{kind:"RootArgument",name:"hoisted_comment_id"},{kind:"RootArgument",name:"hoisted_reply_id"}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[o,e,t,r],kind:"Operation",name:"PolarisPostActionLoadPostQueryQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[i,{kind:"TypeDiscriminator",abstractKey:"__isXDTGraphMediaInterface"},l,s,u,c,_,f,y,C,b,E,k,I,T,D,x,$,Ne,V,{alias:null,args:H,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[G,v,l],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},z,j,K,Q,ae,ie,le,se,ue,ce,de,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[me,l],storageKey:null}],storageKey:null}],storageKey:null},pe,_e,fe,ge,ee,he,ye,Ce,be,ve,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,s,u,l],storageKey:null}],storageKey:null}],storageKey:null},Se,Re,xe,$e,{kind:"InlineFragment",selections:[Le,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,l,s,c,_,f,y,C,b,E,k,I,T,Pe,$e,D,x,$,Ne],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null}],storageKey:null}]},params:{id:n("PolarisPostActionLoadPostQueryQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_shortcode_media"]},name:"PolarisPostActionLoadPostQueryQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisPostActionLoadPostQuerySharerQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9817375101688294"}),null);
__d("PolarisPostActionLoadPostQuerySharerQuery.graphql",["PolarisPostActionLoadPostQuerySharerQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"mediaId"},t={defaultValue:null,kind:"LocalArgument",name:"shid"},r=[{kind:"Variable",name:"media_id",variableName:"mediaId"},{kind:"Variable",name:"shid",variableName:"shid"}],o={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url_hd",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null};return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"PolarisPostActionLoadPostQuerySharerQuery",selections:[{alias:null,args:r,concreteType:"XDTShidUserResponse",kind:"LinkedField",name:"xdt_get_relationship_for_shid_logged_out",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisPostActionLoadPostQueryInlineSharerFragment",selections:[{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"sender",plural:!1,selections:[o,a,i,l],storageKey:null}],args:null,argumentDefinitions:[]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"PolarisPostActionLoadPostQuerySharerQuery",selections:[{alias:null,args:r,concreteType:"XDTShidUserResponse",kind:"LinkedField",name:"xdt_get_relationship_for_shid_logged_out",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"sender",plural:!1,selections:[o,a,i,l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("PolarisPostActionLoadPostQuerySharerQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_get_relationship_for_shid_logged_out"]},name:"PolarisPostActionLoadPostQuerySharerQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisPostActionLoadPostQuery",["PolarisPostActionLoadPostQueryInlineFragment.graphql","PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles.graphql","PolarisPostActionLoadPostQueryInlineMediaFragment.graphql","PolarisPostActionLoadPostQueryInlineSharerFragment.graphql","PolarisPostActionLoadPostQueryLegacyQuery.graphql","PolarisPostActionLoadPostQueryMediaIdQuery.graphql","PolarisPostActionLoadPostQueryQuery.graphql","PolarisPostActionLoadPostQuerySharerQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=e!==void 0?e:e=n("PolarisPostActionLoadPostQueryInlineMediaFragment.graphql"),g=s!==void 0?s:s=n("PolarisPostActionLoadPostQueryInlineFragment.graphql"),h=u!==void 0?u:u=n("PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles.graphql"),y=c!==void 0?c:c=n("PolarisPostActionLoadPostQueryInlineSharerFragment.graphql"),C=d!==void 0?d:d=n("PolarisPostActionLoadPostQueryQuery.graphql"),b=m!==void 0?m:m=n("PolarisPostActionLoadPostQueryLegacyQuery.graphql"),v=p!==void 0?p:p=n("PolarisPostActionLoadPostQueryMediaIdQuery.graphql"),S=_!==void 0?_:_=n("PolarisPostActionLoadPostQuerySharerQuery.graphql");l.MEDIA_INLINE_FRAGMENT=f,l.INLINE_FRAGMENT=g,l.INLINE_FRAGMENT_WITHOUT_RELATED_PROFILES=h,l.SHARER_INLINE_FRAGMENT=y,l.POST_QUERY=C,l.POST_QUERY_LEGACY=b,l.POST_QUERY_MEDIA_ID=v,l.POST_SHARER_INFORMATION=S}),98);
__d("PolarisPostActionPostPageLoaded",["nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{postData:r("nullthrows")(e.shortcode_media),type:"POST_PAGE_LOADED"}}l.postPageLoaded=e}),98);
__d("PolarisPostActionLoadPost",["CometRelay","FBLogger","PolarisAdsActions","PolarisInstapi","PolarisIsLoggedIn","PolarisPostActionLoadPostQuery","PolarisPostActionPostLoadedV2","PolarisPostActionPostPageLoaded","PolarisRelayEnvironment","PolarisSenderNameHelpers","PolarisThreadedCommentActions","asyncToGeneratorRuntime","err","getErrorSafe","getPolarisPostIdFromNativeId","isTruthy","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("CometRelay").fetchQuery(r("PolarisRelayEnvironment"),o("PolarisPostActionLoadPostQuery").POST_SHARER_INFORMATION,{mediaId:t,shid:e}).toPromise();if(n==null||n.xdt_get_relationship_for_shid_logged_out==null)return null;var a=o("CometRelay").readInlineData(o("PolarisPostActionLoadPostQuery").SHARER_INLINE_FRAGMENT,n.xdt_get_relationship_for_shid_logged_out);return a}),s.apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("CometRelay").fetchQuery(r("PolarisRelayEnvironment"),o("PolarisPostActionLoadPostQuery").POST_QUERY_MEDIA_ID,{mediaId:e}).toPromise();if(t==null)throw r("err")("Post modal response is unexpectedly null");var n=o("CometRelay").readInlineData(o("PolarisPostActionLoadPostQuery").MEDIA_INLINE_FRAGMENT,t==null?void 0:t.xdt_api__v1__media__media_id_web_info);return n.items!=null?[].concat(n.items):null}),c.apply(this,arguments)}function d(e){return e.split("_").length>1}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("PolarisInstapi").apiGet("/api/v1/media/{media_id}/info/",{path:{media_id:e},query:{}}),n=t.data;return n.items!=null?[].concat(n.items):null}),p.apply(this,arguments)}function _(t,a,i,l,s){return i===void 0&&(i=!1),(function(){var c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n,c){if(n({shortcode:t,type:"POST_PAGE_LOADING"}),a!=null&&o("PolarisIsLoggedIn").isLoggedIn())try{n(o("PolarisThreadedCommentActions").requestInitialComments(r("getPolarisPostIdFromNativeId")(a)));var p=d(a)?yield u(a):yield m(a);if(p!=null){var _=p[0],f=new Set(c().ads.feed.keys());_!=null&&_.ad_id!=null?n(o("PolarisAdsActions").adMediaInfoLoaded(p[0],t)):n(o("PolarisPostActionPostLoadedV2").postLoadedV2(p,t,f))}}catch(e){var g=r("getErrorSafe")(e);r("FBLogger")("ig_web").catching(g)}else{var h=i?o("PolarisPostActionLoadPostQuery").POST_QUERY:o("PolarisPostActionLoadPostQuery").POST_QUERY_LEGACY;try{if(s!=null&&a!=null&&o("PolarisSenderNameHelpers").shouldShowSenderName("postPage")){var y=yield e(s,a);y!=null&&n({fullName:y.sender.full_name,profilePicUrl:y.sender.profile_pic_url,profilePicUrlHd:y.sender.profile_pic_url_hd,sharedMediaId:a,type:"UPDATE_SHARER_INFORMATION",username:y.sender.username})}var C=yield o("CometRelay").fetchQuery(r("PolarisRelayEnvironment"),h,{shortcode:t}).toPromise(),b;i?b=o("CometRelay").readInlineData(o("PolarisPostActionLoadPostQuery").INLINE_FRAGMENT_WITHOUT_RELATED_PROFILES,C==null?void 0:C.xdt_shortcode_media):b=o("CometRelay").readInlineData(o("PolarisPostActionLoadPostQuery").INLINE_FRAGMENT,C==null?void 0:C.xdt_shortcode_media);var v=b.accessibility_caption==null&&r("isTruthy")(l);v&&(b=babelHelpers.extends({},b,{accessibility_caption:l})),n(o("PolarisPostActionPostPageLoaded").postPageLoaded({shortcode_media:r("nullthrows")(b)}))}catch(e){var S=r("getErrorSafe")(e);r("FBLogger")("ig_web").catching(S).mustfix("unexpected")}}});return function(e,t){return c.apply(this,arguments)}})()}l.loadPost=_}),98);
__d("polarisPostModalHelpers",["fbt","FBLogger","justknobx","vulture"],(function(t,n,r,o,a,i,l,s){"use strict";var e=1032,u=55,c=500,d=250,m=s._(/*BTDS*/"Previous"),p=s._(/*BTDS*/"Next"),_=-1,f=1;function g(e){var t="";switch(e){case"profilePage":case"selfProfilePage":t="profilePageModal";break;case"locationPage":t="locationPageModal";break;case"exploreLandingPage":t="discoverMediaPageModal";break;case"DirectThreadPage":t="directThreadPageModal";break;case"ClipsAudioPage":t="clipsAudioPageModal";break;case"feedPage":case"pastPostsFeedPage":case"followingFeedPage":case"favoritesFeedPage":t="feedPageModal";break;case"KeywordSearchExplorePage":t="keywordSearchExplorePageModal";break;case"adsActivityFeed":r("vulture")("ffZkBqw2cGlao5s8XEe1u1x7yM8="),t="adActivityFeedModal";break;case"ExploreSERPPage":r("vulture")("ozn07wewnSY-kWidXVdFNfubl7g="),t="ExploreSERPPageModal";break;default:r("FBLogger")("ig_web").mustfix("Unexpected analytics context: "+e)}return t}function h(e){var t=e.match(new RegExp("^(.+/)(saved)/(.+)/(.+)/"));return t!=null?t[4]:null}function y(e){return!!e.match(new RegExp("/p/"))}function C(e){var t=e.match(new RegExp("/([^/]+)/[^/]*$"));return t?t[1]:null}function b(e,t,n,r){if(e.height>e.width){var o=n/e.height;r.style.maxHeight=n,r.style.maxWidth=e.width*o,r.style.aspectRatio=e.width+" / "+e.height}else t&&(r.style.aspectRatio="1"),r.style.maxHeight=n,r.style.maxWidth=n;return r}function v(e,t,n,r){n.style.maxWidth=t;var o=t/e.width;return n.style.maxHeight=e.height*o+r,n.style.aspectRatio=e.width*o+" / "+(e.height*o+r),n}function S(t){var n=t.dimensions,o=t.footerHeight,a=o===void 0?u:o,i=t.viewportHeight,l=t.viewportWidth,s=t.hasSidebarInRedesign,m=t.hasFooter,p=m===void 0?!1:m;if(n==null||i===0||l===0)return null;var _={style:{maxHeight:0,maxWidth:0}},f=l-128-(s?c:0);if(n){var g=i>l&&p===!0?f:s?i-48:i-48-d;if(g>e&&r("justknobx")._("64")&&(g=e),p===!1)_=b(n,s,g,_);else{var h=n.height,y=(g-a)/h;_.style.maxHeight=g,s?n.height>=n.width?i>l?_=v(n,g,_,a):n.width*y>f?_=v(n,f,_,a):(_.style.maxHeight=g,_.style.aspectRatio=n.width*y+" / "+(n.height*y+a),_.style.maxWidth=n.width*y):(_.style.aspectRatio=n.width*y>n.height*y+a?"1":n.width*y+" / "+(n.height*y+a),_.style.maxWidth=i>l||n.width*y>n.height*y+a?g:n.width*y):_=v(n,g,_,a)}s&&(_.style.flexBasis=_.style.maxWidth)}return _}l.PREVIOUS_ARROW_TITLE=m,l.NEXT_ARROW_TITLE=p,l.LEFT_DELTA=_,l.RIGHT_DELTA=f,l.getModalPageIdFromAnalyticsContext=g,l.getCollectionIdFromPath=h,l.isPostUrl=y,l.getPostCodeFromPath=C,l.getMediaContainerProps=S}),226);
__d("PolarisProfileTabTaggedPhotosConstants",[],(function(t,n,r,o,a,i){"use strict";var e="tagged";i.TAGGED_TAB_ID=e}),66);
__d("PolarisInstantPostModal.react",["PolarisPostModalInternal.react","PolarisProfileTabTaggedPhotosConstants","polarisPostSelectors","react","react-compiler-runtime","usePolarisSelector"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t,n=o("react-compiler-runtime").c(5),a=!1,i=((t=e.modalEntryPath)==null?void 0:t.endsWith("/"+o("PolarisProfileTabTaggedPhotosConstants").TAGGED_TAB_ID+"/"))===!0,l;n[0]!==e.postId?(l=function(n){return o("polarisPostSelectors").getPostOrNullById(n,e.postId)},n[0]=e.postId,n[1]=l):l=n[1];var u=r("usePolarisSelector")(l);(u==null||i&&u.isVideo===!0)&&(a=!0);var c;return n[2]!==e||n[3]!==a?(c=s.jsx(r("PolarisPostModalInternal.react"),babelHelpers.extends({},e,{showLoadingShimmer:a})),n[2]=e,n[3]=a,n[4]=c):c=n[4],c}l.default=u}),98);
__d("PolarisIsLoggedInDesktop",["PolarisIsLoggedIn","PolarisUA"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!o("PolarisUA").isMobile()&&o("PolarisIsLoggedIn").isLoggedIn()}l.isLoggedInDesktop=e}),98);
__d("PolarisHotKeys.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={keyMap:{}},d=s.createContext(c);function m(e){var t=o("react-compiler-runtime").c(13),n=e.children,r=e.className,a=e.isButton,i=e.keyMap,l=a===void 0?!1:a,c=u(d).keyMap,m=_,f=p,g;t[0]!==i?(g=function(t){if(i[t.key]!=null&&f()&&m(t)){var e=i[t.key];e(),t.stopPropagation()}},t[0]=i,t[1]=g):g=t[1];var h=g,y=l?"button":"presentation",C=l?0:-1,b;t[2]!==i?(b={keyMap:i},t[2]=i,t[3]=b):b=t[3];var v;t[4]!==n||t[5]!==r||t[6]!==h||t[7]!==y||t[8]!==C?(v=typeof n=="function"?n(h,y,C):s.jsx("div",{className:r,onKeyUp:h,role:y,tabIndex:C,children:n}),t[4]=n,t[5]=r,t[6]=h,t[7]=y,t[8]=C,t[9]=v):v=t[9];var S;return t[10]!==b||t[11]!==v?(S=s.jsx(d.Provider,{value:b,children:v}),t[10]=b,t[11]=v,t[12]=S):S=t[12],S}function p(){var e,t;return((e=document.activeElement)==null?void 0:e.tagName.toLowerCase())!=="textarea"&&((t=document.activeElement)==null?void 0:t.tagName.toLowerCase())!=="input"}function _(e){return!(e.ctrlKey||e.altKey||e.metaKey)}l.default=m}),98);
__d("PolarisEmbedHashHelpers",["memoize"],(function(t,n,r,o,a,i,l){"use strict";var e=r("memoize")(function(){var e=window.location.hash,t=decodeURIComponent(e.substring(e.indexOf("#")+1)),n;try{n=JSON.parse(t)}catch(e){n={}}return{clientId:n.ci,offset:n.os,sdkLoadEnd:n.le,sdkLoadStart:n.ls}});l.getHashPayload=e}),98);
__d("polarisGetEmbedRequestID",["nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("nullthrows")(document.querySelector(".Embed"));return e.getAttribute("data-request-id")}l.default=e}),98);
__d("PolarisEmbedLogger",["InstagramQueryParamsHelper","PolarisEmbedHashHelpers","PolarisLogger","PolarisLoggerUtils","PolarisPigeonLogger","gkx","polarisGetEmbedRequestID"],(function(t,n,r,o,a,i,l){"use strict";var e=["url"],s=["url"],u=["url"];function c(e){var t=o("PolarisLoggerUtils").trimAndSanitizeUrl(e||window.location.href),n=r("polarisGetEmbedRequestID")();return n!=null?o("InstagramQueryParamsHelper").appendQueryParams(t,{ig_rid:n}):t}function d(t,n,a){if(r("gkx")("25394")){var i=o("PolarisLogger").getExtra(),l=i.url,s=babelHelpers.objectWithoutPropertiesLoose(i,e),u=babelHelpers.extends({client_id:o("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:t.actionName,is_copyright_blocked:t.isCopyrightBlocked,media_id:t.mediaId,media_type:t.mediaType,owner_id:t.ownerId===""?null:t.ownerId},s),d=babelHelpers.extends({obj_id:c(l),obj_type:"url"},a);o("PolarisLogger").logPigeonEvent(o("PolarisPigeonLogger").createEvent("instagram_web_embeds",u,d),n)}}function m(e,t,n){var r=o("PolarisLogger").getAnonymousExtra(),a=r.url,i=babelHelpers.objectWithoutPropertiesLoose(r,s),l=babelHelpers.extends({client_id:o("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:e.actionName,is_copyright_blocked:e.isCopyrightBlocked,media_id:e.mediaId,media_type:e.mediaType,owner_id:e.ownerId===""?null:e.ownerId},i),u=babelHelpers.extends({obj_id:c(a),obj_type:"url"},n);o("PolarisLogger").logPigeonEvent(o("PolarisPigeonLogger").createEvent("instagram_web_embeds_anonymous",l,u),t)}function p(e){var t=e.isCopyrightBlocked,n=e.mediaId,r=e.mediaType,o=e.ownerId;m({actionName:"view",isCopyrightBlocked:t,mediaId:n,mediaType:r,ownerId:o})}function _(e,t,n){if(r("gkx")("25394")){var a=o("PolarisLogger").getExtra(e),i=a.url,l=babelHelpers.objectWithoutPropertiesLoose(a,u),s=babelHelpers.extends({client_id:o("PolarisEmbedHashHelpers").getHashPayload().clientId,parent_url:window.document.referrer},l),d=babelHelpers.extends({obj_id:c(i),obj_type:"url"},n);o("PolarisLogger").logPigeonEvent(o("PolarisPigeonLogger").createEvent("instagram_web_embed_perf_events",s,d),t)}}l.logEmbedAction=d,l.logEmbedPageView=p,l.logEmbedTimings=_}),98);
__d("PolarisEmbedVideoWatchAgain.react",["cx","fbt","PolarisEmbedLogger","PolarisFastLink.react","PolarisLinkBuilder","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=u._(/*BTDS*/"Control"),m=u._(/*BTDS*/"Watch again on Instagram"),p="https://www.instagram.com";function _(e){var t=o("react-compiler-runtime").c(4),n=e.className,a=e.href,i=e.onClick,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=c.jsx(r("PolarisFastLink.react"),{"aria-label":d,className:n,href:a,onClick:i,target:"_blank"}),t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}function f(e){var t,n=o("react-compiler-runtime").c(20),a=e.post,i=a.code,l;n[0]!==i?(l=i!=null&&i.length>0?o("PolarisLinkBuilder").buildMediaLink(i):"",n[0]=i,n[1]=l):l=n[1];var s=l,u=""+p+s+"?utm_source=ig_embed&utm_campaign=embed_video_watch_again",d;if(n[2]!==a.id||n[3]!==((t=a.owner)==null?void 0:t.id)){var f;d=function(){var e;o("PolarisEmbedLogger").logEmbedAction({actionName:"videoWatchAgainClick",mediaId:a.id,mediaType:"video",ownerId:((e=a.owner)==null?void 0:e.id)||""})},n[2]=a.id,n[3]=(f=a.owner)==null?void 0:f.id,n[4]=d}else d=n[4];var g=d,h;n[5]!==g||n[6]!==u?(h=c.jsx(r("PolarisFastLink.react"),{"aria-label":m,className:"_aarb _9zwu",href:u,onClick:g,target:"_blank"}),n[5]=g,n[6]=u,n[7]=h):h=n[7];var y;n[8]!==g||n[9]!==u?(y=c.jsx(r("PolarisFastLink.react"),{"aria-label":m,className:"_aarc",href:u,onClick:g,target:"_blank",children:m}),n[8]=g,n[9]=u,n[10]=y):y=n[10];var C;n[11]!==h||n[12]!==y?(C=c.jsx("div",{className:"_aar9",children:c.jsxs("div",{className:"_aara",children:[h,y]})}),n[11]=h,n[12]=y,n[13]=C):C=n[13];var b;n[14]!==g||n[15]!==u?(b=c.jsx(_,{className:"_aard",href:u,onClick:g}),n[14]=g,n[15]=u,n[16]=b):b=n[16];var v;return n[17]!==C||n[18]!==b?(v=c.jsxs(c.Fragment,{children:[C,b]}),n[17]=C,n[18]=b,n[19]=v):v=n[19],v}l.default=f}),226);
__d("PolarisVideoHeight",["PolarisSizing"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){Object.assign(r,{height:"100%",position:"absolute",width:"100%"});var a=null;e.dimensions!=null&&(a=o("PolarisSizing").getHeightPercent(e.dimensions)),a!=null&&a!==100&&(t&&(a=Math.min(a,o("PolarisSizing").CAPPED_HEIGHT_PERCENT)),Object.assign(n,{paddingBottom:"calc("+a+"% - 1px)"}),Object.assign(r,{height:"calc(100% + 1px)"}))}l.setVideoHeightCompensation=e}),98);
__d("PolarisEmbedVideo.react",["cx","PolarisEmbedLogger","PolarisEmbedVideoWatchAgain.react","PolarisUserTagIndicatorWithSheet.react","PolarisVideoHeight","PolarisVideoPlayButton.react","Run","joinClasses","keyMirror","nullthrows","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=r("keyMirror")({finished:null,paused:null,playing:null}),d=(function(e){function t(t){var n;n=e.call(this,t)||this,n.$1=u.createRef(),n.$2=!1,n.$3=null,n.handleVisiblityChange=function(){n.state.playerState!=null&&document.visibilityState&&document.visibilityState==="hidden"&&n.stop()},n.handleBeforeUnload=function(){n.state.playerState===c.playing&&n.stop()},n.handlePlayerPlayEvent=function(){n.setState({playerState:c.playing})},n.handlePlayerPauseEvent=function(){n.pause()},n.handlePlayerEndedEvent=function(){n.stop()},n.handleContainerClick=function(e){n.state.playerState!==c.playing?n.play():n.pause()};var r={playerState:null};return n.state=r,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){document.addEventListener("visibilitychange",this.handleVisiblityChange),this.$3=o("Run").onBeforeUnload(this.handleBeforeUnload);var e=r("nullthrows")(this.$1.current);e.addEventListener("play",this.handlePlayerPlayEvent),e.addEventListener("pause",this.handlePlayerPauseEvent),e.addEventListener("ended",this.handlePlayerEndedEvent)},n.componentDidUpdate=function(t){this.props.isVisible===!1&&t.isVisible===!0&&this.pause()},n.componentWillUnmount=function(){this.handleBeforeUnload(),document.removeEventListener("visibilitychange",this.handleVisiblityChange),this.$3!=null&&(this.$3.remove(),this.$3=null);var e=r("nullthrows")(this.$1.current);e.removeEventListener("play",this.handlePlayerPlayEvent),e.removeEventListener("pause",this.handlePlayerPauseEvent),e.removeEventListener("ended",this.handlePlayerEndedEvent)},n.play=function(){if(this.state.playerState!==c.playing){if(this.$2===!1){var e;o("PolarisEmbedLogger").logEmbedAction({actionName:"videoFirstPlayClick",mediaId:this.props.post.id,mediaType:"video",ownerId:((e=this.props.post.owner)==null?void 0:e.id)||""}),this.$2=!0}r("nullthrows")(this.$1.current).play()}},n.pause=function(){this.state.playerState===c.playing&&(r("nullthrows")(this.$1.current).pause(),this.setState({playerState:c.paused}))},n.stop=function(){if(this.state.playerState!==c.finished){var e=r("nullthrows")(this.$1.current);e.pause(),e.currentTime=0,this.setState({playerState:c.finished})}},n.render=function(){var e=this.props,t=e.className,n=e.post,a=this.state.playerState,i={},l={};o("PolarisVideoHeight").setVideoHeightCompensation(n,!0,i,l);var s=a===c.finished,d=!a||a===c.paused;return u.jsxs("div",{className:r("joinClasses")(t,"_aand"),style:i,children:[u.jsx("div",{style:l,children:!n.mediaOverlayInfo&&u.jsx("video",{className:"_aane",controls:!1,controlsList:void 0,"data-testid":void 0,loop:!1,playsInline:!0,poster:n.src,preload:"none",ref:this.$1,src:n.videoUrl,children:u.jsx("track",{kind:"captions"})})}),s?u.jsx(r("PolarisEmbedVideoWatchAgain.react"),{post:n}):u.jsx(r("PolarisVideoPlayButton.react"),{onClick:this.handleContainerClick,showPlayButton:d}),n.usertags&&n.usertags.length>=1&&u.jsx(r("PolarisUserTagIndicatorWithSheet.react"),{mediaId:n.id,usertags:n.usertags})]})},t})(u.Component);l.default=d}),98);
__d("PolarisPhotoWrapper.react",["InstagramODS","PolarisClickEventLoggerProvider.react","PolarisExternalLink.react","PolarisSponsoredPostContext.react","PolarisTrackingNodeProvider.react","PolarisUA","polarisAdsSelectors.react","react","react-compiler-runtime","usePolarisOffsiteTrackingDataURLParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(7),n=e.children,a=e.externalURL,i=e.wrappedRef,l=d,u=r("usePolarisOffsiteTrackingDataURLParams")(a),c;t[0]!==n||t[1]!==a||t[2]!==u?(c=function(t){return s.jsx("div",{ref:t,children:s.jsx(r("PolarisExternalLink.react"),{className:"x4gyw5p",href:a,ignoreDoubleClick:!0,onClick:l,queryParams:u,children:n})})},t[0]=n,t[1]=a,t[2]=u,t[3]=c):c=t[3];var m;return t[4]!==c||t[5]!==i?(m=s.jsx(r("PolarisClickEventLoggerProvider.react"),{ignoreDoubleClick:!0,children:s.jsx(r("PolarisTrackingNodeProvider.react"),{ref:i,trackingNode:86,children:c})}),t[4]=c,t[5]=i,t[6]=m):m=t[6],m}function d(){r("InstagramODS").incr("web.ads.feed.link_click")}function m(e){var t=o("react-compiler-runtime").c(10),n=e.children,a=e.postId,i=e.ref,l=o("polarisAdsSelectors.react").useFeedAdInfo(a,p),d=u(o("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),m=d.singleImageAdAsCta,_;if(t[0]!==(l==null?void 0:l.ctaItems)||t[1]!==a){var f;_=l==null||(f=l.ctaItems)==null||(f=f.get(a))==null?void 0:f.ctaLinkUrl,t[0]=l==null?void 0:l.ctaItems,t[1]=a,t[2]=_}else _=t[2];var g=_;if(g!=null&&m&&o("PolarisUA").isDesktop()){var h;return t[3]!==n||t[4]!==g||t[5]!==i?(h=s.jsx(r("PolarisTrackingNodeProvider.react"),{trackingNode:12,children:function(t){return s.jsx("div",{ref:t,children:s.jsx(c,{externalURL:g,wrappedRef:i,children:n})})}}),t[3]=n,t[4]=g,t[5]=i,t[6]=h):h=t[6],h}var y;return t[7]!==n||t[8]!==i?(y=s.jsx("div",{ref:i,children:n}),t[7]=n,t[8]=i,t[9]=y):y=t[9],y}function p(e){return e}l.default=m}),98);
__d("PolarisMedia_DEPRECATED.react",["JSResourceForInteraction","PolarisDoubleTappable","PolarisEmbedVideo.react","PolarisFeedSeenStateManagerSingleton","PolarisIGCoreToast.react","PolarisIsLoggedInDesktop","PolarisLikeAnimation.react","PolarisMediaNoteBubbleGroup.react","PolarisMediaVideo.react","PolarisPhoto.react","PolarisPhotoWithIndicator.react","PolarisPhotoWrapper.react","PolarisSensitivityOverlay.react","PolarisSidecarMedia.react","PolarisUA","PolarisViewpointReact.react","lazyLoadComponent","nullthrows","polarisVideoUtils","polarisWithRemountOnChange","react","react-compiler-runtime","usePolarisMediaSensitivityOverlay"],(function(t,n,r,o,a,i,l){"use strict";var e=["adInfo","analyticsContext","asSidecarChild","autoplay","checkIsSensitivityOverlayDisabledCallback","commentsAreStacked","firstSidecarChildSrc","hasViewInsights","id","initialCarouselIndex","isEmbed","isVisible","mediaFooter","onLike","onMediaRendered","onSensitivityOverlayCleared","onSetModal","onSidecarChildIndexChange","onToastClose","onVideoFinished","onVideoLoop","post","relationship","sensitivityOverlayMediaOverlayInfoLoggingProps","showToast","toastString","viewer","visiblePosition"],s=["mediaFooter"],u,c=u||(u=o("react")),d=u.useState,m=r("lazyLoadComponent")(r("JSResourceForInteraction")("PolarisPostSecretReelQRCode.react").__setRef("PolarisMedia_DEPRECATED.react"));function p(t){var n=o("react-compiler-runtime").c(160),a=d(!1),i=a[0],l=a[1],u=d(!1),p=u[0],_=u[1],f=d(0),g=f[0],h=f[1],y;n[0]===Symbol.for("react.memo_cache_sentinel")?(y=r("PolarisFeedSeenStateManagerSingleton").get(),n[0]=y):y=n[0];var C=y,b;n[1]!==g||n[2]!==t?(b=function(){t.onLike&&(t.onLike(),h(g+1))},n[1]=g,n[2]=t,n[3]=b):b=n[3];var v=b,S;n[4]===Symbol.for("react.memo_cache_sentinel")?(S=function(){l(!0)},n[4]=S):S=n[4];var R=S,L;n[5]===Symbol.for("react.memo_cache_sentinel")?(L=function(){l(!1)},n[5]=L):L=n[5];var E=L,k;n[6]!==t?(k=function(n,r){var e=t.onMediaRendered,o=t.post;o.isVideo!==!0&&e&&e({mediaType:"Photo",resourceName:n,timeTaken:r})},n[6]=t,n[7]=k):k=n[7];var I=k,T;n[8]!==p?(T=function(t){e:switch(t.state){case"entered":case"updated":{var e=t.percentVisible>.2;p!==e&&_(e);break e}case"exited":_(!1)}},n[8]=p,n[9]=T):T=n[9];var D=T,x;n[10]!==t.analyticsContext||n[11]!==t.autoplay?(x=function(n,r){if(n===!0&&t.autoplay===!0){if(o("polarisVideoUtils").isFeed(t.analyticsContext))return!1;if(r===0&&o("PolarisIsLoggedInDesktop").isLoggedInDesktop())return!0}return!1},n[10]=t.analyticsContext,n[11]=t.autoplay,n[12]=x):x=n[12];var $=x,P,N,M,w,A,F,O,B,W,q,U,V,H,G,z,j,K,Q,X,Y,J,Z,ee;if(n[13]!==t){var te=t.adInfo,ne=t.analyticsContext,re=t.asSidecarChild,oe=t.autoplay,ae=t.checkIsSensitivityOverlayDisabledCallback,ie=t.commentsAreStacked,le=t.firstSidecarChildSrc,se=t.hasViewInsights,ue=t.id,ce=t.initialCarouselIndex,de=t.isEmbed,me=t.isVisible,pe=t.mediaFooter,_e=t.onLike,fe=t.onMediaRendered,ge=t.onSensitivityOverlayCleared,he=t.onSetModal,ye=t.onSidecarChildIndexChange,Ce=t.onToastClose,be=t.onVideoFinished,ve=t.onVideoLoop,Se=t.post,Re=t.relationship,Le=t.sensitivityOverlayMediaOverlayInfoLoggingProps,Ee=t.showToast,ke=t.toastString,Ie=t.viewer,Te=t.visiblePosition,De=babelHelpers.objectWithoutPropertiesLoose(t,e);N=te,M=ne,w=re,A=oe,F=ie,O=le,B=ue,W=de,q=me,U=pe,P=ge,V=ye,H=Ce,G=be,z=ve,K=Se,Q=Re,X=Le,Y=Ee,J=ke,Z=Ie,ee=Te,j=De,n[13]=t,n[14]=P,n[15]=N,n[16]=M,n[17]=w,n[18]=A,n[19]=F,n[20]=O,n[21]=B,n[22]=W,n[23]=q,n[24]=U,n[25]=V,n[26]=H,n[27]=G,n[28]=z,n[29]=j,n[30]=K,n[31]=Q,n[32]=X,n[33]=Y,n[34]=J,n[35]=Z,n[36]=ee}else P=n[14],N=n[15],M=n[16],w=n[17],A=n[18],F=n[19],O=n[20],B=n[21],W=n[22],q=n[23],U=n[24],V=n[25],H=n[26],G=n[27],z=n[28],j=n[29],K=n[30],Q=n[31],X=n[32],Y=n[33],J=n[34],Z=n[35],ee=n[36];var xe,$e;n[37]!==K?($e=K||{},n[37]=K,n[38]=$e):$e=n[38];var Pe=$e,Ne=Pe.dimensions,Me=Pe.displayResources,we=Pe.upcomingEvent,Ae=Pe.id,Fe=Pe.isVideo,Oe=Pe.mediaPreview,Be=Pe.owner,We=Pe.sidecarChildren,qe=Pe.src,Ue=Pe.usertags,Ve=Fe===void 0?!1:Fe,He;n[39]!==We?(He=We===void 0?[]:We,n[39]=We,n[40]=He):He=n[40];var Ge=He,ze=Ge&&Ge.length>0,je;if(n[41]!==M||n[42]!==ze||n[43]!==K){if(je=[],!ze&&o("polarisVideoUtils").isFeed(M)){var Ke;n[45]!==K?(Ke=function(t){C.addImpressionFromPost(K,t)},n[45]=K,n[46]=Ke):Ke=n[46],je.push(Ke)}n[41]=M,n[42]=ze,n[43]=K,n[44]=je}else je=n[44];var Qe=!1,Xe=r("usePolarisMediaSensitivityOverlay")(K,M,P,t.checkIsSensitivityOverlayDisabledCallback),Ye=Xe.mediaOverlayCoverInfo,Je=Xe.handleHideSensitivityOverlay,Ze=Xe.shouldShowSensitivityOverlay;if(Be&&Ze){var et,tt,nt;n[47]!==X?(nt=X||{},n[47]=X,n[48]=nt):nt=n[48];var rt=nt,ot=rt.checkIfMediaOverlayInfoImpressionLoggingDisabled,at=rt.onLoggedMediaOverlayInfoImpression,it=K.code;if(!o("PolarisUA").isMobile()&&it!=null&&(((et=Ye)==null?void 0:et.overlayType)==="SECRET_LINK"||((tt=Ye)==null?void 0:tt.overlayType)==="EARLY_ACCESS")){var lt=K.isVideo===!0?"reel":"p",st;n[49]!==it||n[50]!==lt?(st=c.jsx(m,{params:{permalink_key:lt,shortcode:it}}),n[49]=it,n[50]=lt,n[51]=st):st=n[51];var ut;n[52]!==Ye||n[53]!==st?(ut=babelHelpers.extends({},Ye,{extra:st}),n[52]=Ye,n[53]=st,n[54]=ut):ut=n[54],Ye=ut}var ct;n[55]!==ot||n[56]!==Ae?(ct=ot!=null?ot(Ae):!1,n[55]=ot,n[56]=Ae,n[57]=ct):ct=n[57];var dt=!Ve&&!ze,mt;n[58]!==Je||n[59]!==K?(mt=function(){return Je(K)},n[58]=Je,n[59]=K,n[60]=mt):mt=n[60];var pt;n[61]!==M||n[62]!==w||n[63]!==Ne||n[64]!==q||n[65]!==Ye||n[66]!==Oe||n[67]!==at||n[68]!==Be.id||n[69]!==Ae||n[70]!==ct||n[71]!==dt||n[72]!==mt?(pt=c.jsx(r("PolarisSensitivityOverlay.react"),{analyticsContext:M,asSidecarChild:w,dimensions:Ne,disableMediaOverlayInfoImpressionLogging:ct,isPhoto:dt,isVisible:q,mediaId:Ae,mediaOverlayCoverInfo:Ye,onLoggedMediaOverlayInfoImpression:at,onShowPostClicked:mt,ownerId:Be.id,previewData:Oe}),n[61]=M,n[62]=w,n[63]=Ne,n[64]=q,n[65]=Ye,n[66]=Oe,n[67]=at,n[68]=Be.id,n[69]=Ae,n[70]=ct,n[71]=dt,n[72]=mt,n[73]=pt):pt=n[73],xe=pt}else if(ze){var _t;if(F===!0)Qe=!0,_t=t;else{var ft;if(n[74]!==t){var gt=t.mediaFooter,ht=babelHelpers.objectWithoutPropertiesLoose(t,s);ft=ht,n[74]=t,n[75]=ft}else ft=n[75];_t=ft}var yt;n[76]!==V||n[77]!==Ge||n[78]!==_t?(yt=c.jsx(r("PolarisSidecarMedia.react"),babelHelpers.extends({},_t,{onChildIndexChange:V,sidecarChildren:Ge})),n[76]=V,n[77]=Ge,n[78]=_t,n[79]=yt):yt=n[79],xe=yt}else if(Ve){var Ct=p,bt;n[80]!==D?(bt=[D],n[80]=D,n[81]=bt):bt=n[81];var vt=bt,St;n[82]!==je||n[83]!==vt?(St=[].concat(vt,je),n[82]=je,n[83]=vt,n[84]=St):St=n[84];var Rt;n[85]!==N||n[86]!==M||n[87]!==w||n[88]!==A||n[89]!==O||n[90]!==B||n[91]!==W||n[92]!==Ct||n[93]!==H||n[94]!==G||n[95]!==z||n[96]!==K||n[97]!==t.className||n[98]!==Q||n[99]!==$||n[100]!==Y||n[101]!==J||n[102]!==ee?(Rt=function(n){return c.jsxs("div",{ref:n,children:[W===!0?c.jsx(r("PolarisEmbedVideo.react"),{className:t.className,isVisible:Ct,post:K}):c.jsx(r("PolarisMediaVideo.react"),{adInfo:N,analyticsContext:M,asSidecarChild:w,autoplay:A,className:t.className,firstSidecarChildSrc:O,isVisible:Ct,onFinished:G,onLoop:z,post:K,relationship:Q,shouldAutoPlay:$(Ct,ee),upcomingEventMediaId:B}),Y===!0&&J!=null&&c.jsx(r("PolarisIGCoreToast.react"),{absolutePosition:!0,duration:3e3,onClose:H,wide:!0,children:J})]})},n[85]=N,n[86]=M,n[87]=w,n[88]=A,n[89]=O,n[90]=B,n[91]=W,n[92]=Ct,n[93]=H,n[94]=G,n[95]=z,n[96]=K,n[97]=t.className,n[98]=Q,n[99]=$,n[100]=Y,n[101]=J,n[102]=ee,n[103]=Rt):Rt=n[103];var Lt;n[104]!==K.id||n[105]!==St||n[106]!==Rt?(Lt=c.jsx(o("PolarisViewpointReact.react").Viewpoint,{action:St,id:K.id,children:Rt}),n[104]=K.id,n[105]=St,n[106]=Rt,n[107]=Lt):Lt=n[107],xe=Lt}else{var Et;n[108]!==qe?(Et=r("nullthrows")(qe),n[108]=qe,n[109]=Et):Et=n[109];var kt;n[110]!==Ne||n[111]!==Me||n[112]!==I||n[113]!==g||n[114]!==Ae||n[115]!==Et?(kt={dimensions:Ne,likeEventCount:g,onPhotoRendered:I,postId:Ae,src:Et,srcSet:Me},n[110]=Ne,n[111]=Me,n[112]=I,n[113]=g,n[114]=Ae,n[115]=Et,n[116]=kt):kt=n[116];var It=kt,Tt;if(n[117]!==M||n[118]!==w||n[119]!==O||n[120]!==B||n[121]!==i||n[122]!==q||n[123]!==It||n[124]!==j||n[125]!==qe||n[126]!==we||n[127]!==Ue||n[128]!==Z){if(Ue&&Ue.length>0||we){var Dt=w===!0?O:qe,xt;n[130]!==Dt?(xt=r("nullthrows")(Dt),n[130]=Dt,n[131]=xt):xt=n[131],Tt=c.jsx(o("PolarisPhotoWithIndicator.react").PhotoWithIndicator,babelHelpers.extends({},j,It,{analyticsContext:M,isFocused:i,isVisible:q,upcomingEvent:we,upcomingEventMediaId:B,upcomingEventThumbnailSrc:xt,usertags:Ue,viewer:Z}))}else Tt=c.jsx(r("PolarisPhoto.react"),babelHelpers.extends({},j,It,{analyticsContext:M,asSidecarChild:w}));n[117]=M,n[118]=w,n[119]=O,n[120]=B,n[121]=i,n[122]=q,n[123]=It,n[124]=j,n[125]=qe,n[126]=we,n[127]=Ue,n[128]=Z,n[129]=Tt}else Tt=n[129];var $t;n[132]!==je?($t=[].concat(je),n[132]=je,n[133]=$t):$t=n[133];var Pt=$t,Nt;n[134]!==Tt||n[135]!==K.id?(Nt=function(t){return c.jsx(r("PolarisPhotoWrapper.react"),{postId:K.id,ref:t,children:Tt})},n[134]=Tt,n[135]=K.id,n[136]=Nt):Nt=n[136];var Mt;n[137]!==Pt||n[138]!==K.id||n[139]!==Nt?(Mt=c.jsx(o("PolarisViewpointReact.react").Viewpoint,{action:Pt,id:K.id,children:Nt}),n[137]=Pt,n[138]=K.id,n[139]=Nt,n[140]=Mt):Mt=n[140];var wt=Mt,At;n[141]!==g?(At=c.jsx(r("PolarisLikeAnimation.react"),{likeEventCount:g},g),n[141]=g,n[142]=At):At=n[142];var Ft;n[143]!==v||n[144]!==At||n[145]!==wt?(Ft=c.jsxs(o("PolarisDoubleTappable").DoubleTappable,{onBlur:E,onDoubleClick:v,onFocus:R,role:"button",children:[wt,At]}),n[143]=v,n[144]=At,n[145]=wt,n[146]=Ft):Ft=n[146],xe=Ft}var Ot;n[147]!==Ae||n[148]!==K.floating_context_items?(Ot=K.floating_context_items!=null&&K.floating_context_items.length>0?c.jsx(r("PolarisMediaNoteBubbleGroup.react"),{floatingContextItems:K.floating_context_items,mediaId:Ae}):null,n[147]=Ae,n[148]=K.floating_context_items,n[149]=Ot):Ot=n[149];var Bt=Ot;if(U!=null&&!Qe&&!Ze){var Wt;n[150]!==xe||n[151]!==U?(Wt=c.jsxs(c.Fragment,{children:[xe,U]}),n[150]=xe,n[151]=U,n[152]=Wt):Wt=n[152],xe=Wt}var qt;n[153]===Symbol.for("react.memo_cache_sentinel")?(qt={className:"x1n2onr6"},n[153]=qt):qt=n[153];var Ut=xe,Vt;n[154]===Symbol.for("react.memo_cache_sentinel")?(Vt={className:"xyxf0pu xyx8ycp x10l6tqk x1vjfegm"},n[154]=Vt):Vt=n[154];var Ht;n[155]!==Bt?(Ht=c.jsx("div",babelHelpers.extends({},Vt,{children:Bt})),n[155]=Bt,n[156]=Ht):Ht=n[156];var Gt;return n[157]!==xe||n[158]!==Ht?(Gt=c.jsxs("div",babelHelpers.extends({},qt,{children:[Ut,Ht]})),n[157]=xe,n[158]=Ht,n[159]=Gt):Gt=n[159],Gt}function _(e,t){return e.id!==t.id}var f=r("polarisWithRemountOnChange")(_)(p);l.default=f}),98);
__d("PolarisSidecarChild.react",["IGDSBox.react","PolarisMedia_DEPRECATED.react","PolarisOrganicImpressionAction","PolarisViewpointReact.react","PolarisVpvdImpressionAction","cr:5000","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["index","media","mediaWidth","onChildIndexChange","sidecarChildIndex","sidecarChildren","analyticsContext","isVisible","mediaFooter","onMediaRendered","post"],s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(43),i,l,s,c,d,m,p,_,f,g;if(a[0]!==t){var h=t.index,y=t.media,C=t.mediaWidth,b=t.onChildIndexChange,v=t.sidecarChildIndex,S=t.sidecarChildren,R=t.analyticsContext,L=t.isVisible,E=t.mediaFooter,k=t.onMediaRendered,I=t.post,T=babelHelpers.objectWithoutPropertiesLoose(t,e);l=h,c=y,d=C,f=v,g=S,i=R,s=L,m=k,_=I,p=T,a[0]=t,a[1]=i,a[2]=l,a[3]=s,a[4]=c,a[5]=d,a[6]=m,a[7]=p,a[8]=_,a[9]=f,a[10]=g}else i=a[1],l=a[2],s=a[3],c=a[4],d=a[5],m=a[6],p=a[7],_=a[8],f=a[9],g=a[10];var D;a[11]!==i||a[12]!==l||a[13]!==s||a[14]!==c||a[15]!==m||a[16]!==p||a[17]!==f||a[18]!==g?(D=c.isUpsell===!0&&n("cr:5000")!=null?u.jsx(n("cr:5000"),{upsellSidecarChild:c}):u.jsx(r("PolarisMedia_DEPRECATED.react"),babelHelpers.extends({},p,{accessibilityCaption:c.accessibilityCaption,analyticsContext:i,asSidecarChild:!0,firstSidecarChildSrc:g[0].src,isVisible:f===l?s:!1,onMediaRendered:m,post:c})),a[11]=i,a[12]=l,a[13]=s,a[14]=c,a[15]=m,a[16]=p,a[17]=f,a[18]=g,a[19]=D):D=a[19];var x=D;if(l===0){var $;return a[20]!==c.id||a[21]!==d||a[22]!==x?($=u.jsx(r("IGDSBox.react"),{position:"relative",width:d,children:x},c.id),a[20]=c.id,a[21]=d,a[22]=x,a[23]=$):$=a[23],$}var P;a[24]!==i||a[25]!==c?(P=o("PolarisOrganicImpressionAction").makeCarouselImpressionAction(c,i),a[24]=i,a[25]=c,a[26]=P):P=a[26];var N;a[27]!==i||a[28]!==l||a[29]!==c||a[30]!==_.id||a[31]!==g[0]?(N=o("PolarisVpvdImpressionAction").makeCarouselVpvdImpressionAction(c,g[0],l,_.id,i),a[27]=i,a[28]=l,a[29]=c,a[30]=_.id,a[31]=g[0],a[32]=N):N=a[32];var M;a[33]!==P||a[34]!==N?(M=[P,N],a[33]=P,a[34]=N,a[35]=M):M=a[35];var w;a[36]!==d||a[37]!==x?(w=function(t){return u.jsx(r("IGDSBox.react"),{containerRef:t,position:"relative",width:d,children:x})},a[36]=d,a[37]=x,a[38]=w):w=a[38];var A;return a[39]!==c.id||a[40]!==M||a[41]!==w?(A=u.jsx(o("PolarisViewpointReact.react").Viewpoint,{action:M,id:c.id,children:w},c.id),a[39]=c.id,a[40]=M,a[41]=w,a[42]=A):A=a[42],A}l.default=c}),98);
__d("usePolarisSidecarMediaOrUpsell",["PolarisIsLoggedIn","PolarisUA","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=4,s=2;function u(t){var n=o("react-compiler-runtime").c(3),r=t.post,a=t.sidecarChildren;if(o("PolarisIsLoggedIn").isLoggedIn()||o("PolarisUA").isDesktop()||a.some(c)||r.dimensions===null||r.owner===null)return a;var i;if(n[0]!==r||n[1]!==a){i=[].concat(a);var l=i.length>=e?s:null;if(l!=null&&i[l-1].mediaPreview!=null){var u={dimensions:r.dimensions,id:"",isUpsell:!0,isVideo:!1,mediaPreview:i[l-1].mediaPreview,owner:r.owner,src:""};i.splice(l,0,u)}n[0]=r,n[1]=a,n[2]=i}else i=n[2];return i}function c(e){return e.mediaOverlayInfo!=null}l.default=u}),98);
__d("PolarisSidecarMedia.react",["PolarisSidecarChild.react","PolarisSidecar_DEPRECATED.react","react","react-compiler-runtime","usePolarisSidecarMediaOrUpsell"],(function(t,n,r,o,a,i,l){"use strict";var e=["sidecarChildren","initialCarouselIndex","post"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){var n=o("react-compiler-runtime").c(23),a,i,l,s;n[0]!==t?(s=t.sidecarChildren,a=t.initialCarouselIndex,l=t.post,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s):(a=n[1],i=n[2],l=n[3],s=n[4]);var c;n[5]!==i.onChildIndexChange?(c=function(t,n,r){return[i.onChildIndexChange].filter(Boolean).forEach(function(e){return e(t,n,r)})},n[5]=i.onChildIndexChange,n[6]=c):c=n[6];var d=c,p;n[7]!==l||n[8]!==s?(p={post:l,sidecarChildren:s},n[7]=l,n[8]=s,n[9]=p):p=n[9];var _=r("usePolarisSidecarMediaOrUpsell")(p),f;n[10]!==i||n[11]!==l||n[12]!==_?(f=function(t,n){return _.map(function(e,o){return u.jsx(r("PolarisSidecarChild.react"),babelHelpers.extends({index:o,media:e,mediaWidth:t,post:l,sidecarChildIndex:n,sidecarChildren:_},i),o)})},n[10]=i,n[11]=l,n[12]=_,n[13]=f):f=n[13];var g=f,h;n[14]!==_?(h=_.map(m).filter(Boolean),n[14]=_,n[15]=h):h=n[15];var y=h,C;n[16]!==y||n[17]!==a||n[18]!==d||n[19]!==i.mediaFooter||n[20]!==g||n[21]!==_.length?(C=u.jsx(o("PolarisSidecar_DEPRECATED.react").Sidecar,{dimensions:y,initialCarouselIndex:a,mediaFooter:i.mediaFooter,numSidecarChildren:_.length,onChildIndexChange:d,renderSidecarChildren:g}),n[16]=y,n[17]=a,n[18]=d,n[19]=i.mediaFooter,n[20]=g,n[21]=_.length,n[22]=C):C=n[22];var b=C;return b}function m(e){var t=e.dimensions;return t}l.default=d}),98);
__d("PolarisMediaContainer.react",["PolarisMedia_DEPRECATED.react","PolarisReactRedux.react","polarisPostSelectors","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["onPostMediaRendered","onPostSidecarChildIndexChange"],s,u=s||(s=o("react"));function c(e,t){return{onMediaRendered:o("polarisPostSelectors").getOnMediaRendered(e,t.onPostMediaRendered)}}function d(e,t){return{onSidecarChildIndexChange:function(n,r,o){var e=t.onPostSidecarChildIndexChange;e&&e(r)}}}function m(t,n,r){var o=r.onPostMediaRendered,a=r.onPostSidecarChildIndexChange,i=babelHelpers.objectWithoutPropertiesLoose(r,e);return babelHelpers.extends({},i,t,n)}var p=o("PolarisReactRedux.react").connect(c,d,m)(r("PolarisMedia_DEPRECATED.react"));l.default=p}),98);
__d("PolarisPostActionLikePost",["PolarisAPILikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisSentryFeedbackActions","PolarisToastActions","QPLUserFlow","polarisLogAction","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(t,n,a){return function(i){return r("polarisLogAction")("likeAttempt",n),r("QPLUserFlow").start(r("qpl")._(379204822,"720"),{annotations:{string:{source:n==null?void 0:n.source}}}),i({postId:t,type:"LIKE_POST_REQUESTED"}),o("PolarisAPILikePost").likePost(t).then(function(){a!=null?o("PolarisAdsEngagementLogger").logAdLike(n,a):o("PolarisEngagementLogger").logOrganicLike(n),r("QPLUserFlow").endSuccess(r("qpl")._(379204822,"720")),i({postId:t,type:"LIKE_POST_SUCCEEDED"})},function(a){var l;r("polarisLogAction")("likeFailure",n),r("QPLUserFlow").endFailure(r("qpl")._(379204822,"720"),"request_failed");var s=((l=a.responseObject)==null?void 0:l.spam)||!1;if(s){var u,c,d,m,p,_,f,g=(u=a.responseObject)==null?void 0:u.feedback_title,h=(c=a.responseObject)==null?void 0:c.feedback_message,y=(d=a.responseObject)==null?void 0:d.feedback_url,C=(m=a.responseObject)==null?void 0:m.feedback_action,b=(p=a.responseObject)==null?void 0:p.feedback_appeal_label,v=(_=a.responseObject)==null?void 0:_.restriction_enrollment_data,S=(f=a.responseObject)==null?void 0:f.enforcement_transparency_instance_identifier;i(o("PolarisSentryFeedbackActions").showSentryFeedback({action:C,enforcement_transparency_instance_identifier:S,feedback_appeal_label:b,message:h,restriction_enrollment_data:v,source:n.source,sourceOfAction:"like_post",title:g,url:y}))}i({postId:t,type:"LIKE_POST_FAILED"}),i(o("PolarisToastActions").showToast({actionHandler:function(){return i(e(t,n))},actionText:o("PolarisGenericStrings").RETRY_TEXT,text:o("PolarisGenericStrings").GENERIC_ERROR_MESSAGE}))})}}l.likePost=e}),98);
__d("PolarisPostActionRemovePostFromCollection",["InstagramODS","PolarisAPIEditCollection"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.collectionId,n=e.postId;return function(e){return e({collectionId:t,postId:n,type:"REMOVE_POST_FROM_COLLECTION_REQUESTED"}),r("InstagramODS").incr("web.unsaveFromCollection.attempt"),o("PolarisAPIEditCollection").editCollection({collectionId:t,postIdsToRemove:[n]}).then(function(){e({collectionId:t,postId:n,type:"REMOVE_POST_FROM_COLLECTION_SUCCEEDED"}),r("InstagramODS").incr("web.unsaveFromCollection.success")}).catch(function(){e({collectionId:t,postId:n,type:"REMOVE_POST_FROM_COLLECTION_FAILED"}),r("InstagramODS").incr("web.unsaveFromCollection.failure")})}}l.removePostFromCollection=e}),98);
__d("PolarisPostActionSavePost",["PolarisAPISavePost","PolarisAdsEngagementLogger","polarisLogAction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return function(a){return r("polarisLogAction")("saveAttempt",t),a({postId:e,type:"SAVE_POST_REQUESTED"}),o("PolarisAPISavePost").savePost(e).then(function(){r("polarisLogAction")("saveSuccess",t),a({postId:e,type:"SAVE_POST_SUCCEEDED"}),n!=null&&o("PolarisAdsEngagementLogger").logAdSave(n)},function(){r("polarisLogAction")("saveFailure",t),a({postId:e,type:"SAVE_POST_FAILED"})})}}l.savePost=e}),98);
__d("PolarisPostActionUnlikePost",["PolarisAPIUnlikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisSentryFeedbackActions","PolarisToastActions","QPLUserFlow","polarisLogAction","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(t,n,a){return function(i){return r("polarisLogAction")("unlikeAttempt",n),r("QPLUserFlow").start(r("qpl")._(379198902,"749"),{annotations:{string:{source:n==null?void 0:n.source}}}),i({postId:t,type:"UNLIKE_POST_REQUESTED"}),o("PolarisAPIUnlikePost").unlikePost(t).then(function(){a!=null?o("PolarisAdsEngagementLogger").logAdUnlike(n,a):o("PolarisEngagementLogger").logOrganicUnlike(n),r("QPLUserFlow").endSuccess(r("qpl")._(379198902,"749")),i({postId:t,type:"UNLIKE_POST_SUCCEEDED"})},function(a){var l,s=((l=a.responseObject)==null?void 0:l.spam)||!1;if(s){var u,c,d,m,p,_,f,g=(u=a.responseObject)==null?void 0:u.feedback_title,h=(c=a.responseObject)==null?void 0:c.feedback_message,y=(d=a.responseObject)==null?void 0:d.feedback_url,C=(m=a.responseObject)==null?void 0:m.feedback_action,b=(p=a.responseObject)==null?void 0:p.feedback_appeal_label,v=(_=a.responseObject)==null?void 0:_.restriction_enrollment_data,S=(f=a.responseObject)==null?void 0:f.enforcement_transparency_instance_identifier;i(o("PolarisSentryFeedbackActions").showSentryFeedback({action:C,enforcement_transparency_instance_identifier:S,feedback_appeal_label:b,message:h,restriction_enrollment_data:v,source:n.source,sourceOfAction:"unlike_post",title:g,url:y}))}r("polarisLogAction")("unlikeFailure",n),r("QPLUserFlow").endFailure(r("qpl")._(379198902,"749"),"request_failed"),i({postId:t,type:"UNLIKE_POST_FAILED"}),i(o("PolarisToastActions").showToast({actionHandler:function(){return i(e(t,n))},actionText:o("PolarisGenericStrings").RETRY_TEXT,text:o("PolarisGenericStrings").GENERIC_ERROR_MESSAGE}))})}}l.unlikePost=e}),98);
__d("PolarisPostActionUnsavePost",["PolarisAPIUnsavePost","PolarisAdsEngagementLogger","polarisLogAction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return function(a){return r("polarisLogAction")("unsaveAttempt",t),a({postId:e,type:"UNSAVE_POST_REQUESTED"}),o("PolarisAPIUnsavePost").unsavePost(e).then(function(){r("polarisLogAction")("unsaveSuccess",t),a({postId:e,type:"UNSAVE_POST_SUCCEEDED"}),n!=null&&o("PolarisAdsEngagementLogger").logAdUnsave(n)},function(){r("polarisLogAction")("unsaveFailure",t),a({postId:e,type:"UNSAVE_POST_FAILED"})})}}l.unsavePost=e}),98);
__d("PolarisPostCoauthorReviewOverlayFooterCTA.react",["fbt","FBLogger","IGDSBox.react","IGDSButton.react","IGDSTextVariants.react","JSResourceForInteraction","PolarisConfig","PolarisUserHoverCard.react","PolarisUserLink.react","err","gkx","polarisGetPostFromGraphMediaInterface","react","react-compiler-runtime","useIGDSLazyDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback,d=r("JSResourceForInteraction")("PolarisCoauthorReviewDialog.react").__setRef("PolarisPostCoauthorReviewOverlayFooterCTA.react");function m(e){var t,n,a=o("react-compiler-runtime").c(22),i=e.invitedCoauthorProducers,l=e.mediaId,c=e.mediaShortcode,m=e.productType,p=e.user,_=r("useIGDSLazyDialog")(d),f=_[0],g;a[0]!==l||a[1]!==c||a[2]!==m||a[3]!==f||a[4]!==(p==null?void 0:p.username)?(g=function(){var e;f({mediaId:l!=null?l:"",mediaShortcode:c!=null?c:"",productType:m,username:(e=p==null?void 0:p.username)!=null?e:""})},a[0]=l,a[1]=c,a[2]=m,a[3]=f,a[4]=p==null?void 0:p.username,a[5]=g):g=a[5];var h=g;if(p==null||p.username==null||l==null){var y=r("err")("PolarisPostCoauthorReviewOverlayFooterCTA requires a post user");return r("FBLogger")("ig_web").catching(y),null}var C=o("PolarisConfig").getViewerIdOrZero(),b=i!=null&&i.some(function(e){return(e==null?void 0:e.id)===C});if(!b)return null;var v=!p.isUnpublished,S=(t=p==null?void 0:p.username)!=null?t:"",R=(n=p==null?void 0:p.username)!=null?n:"",L;a[6]!==R?(L=u.jsx(r("PolarisUserLink.react"),{username:R}),a[6]=R,a[7]=L):L=a[7];var E;a[8]!==v||a[9]!==S||a[10]!==L||a[11]!==p.id?(E=u.jsx(r("PolarisUserHoverCard.react"),{display:"inline-block",isUserAvailable:v,userId:p.id,username:S,children:L}),a[8]=v,a[9]=S,a[10]=L,a[11]=p.id,a[12]=E):E=a[12];var k=E,I;a[13]!==k?(I=s._(/*BTDS*/"{media_owner_username} invited you to be a collaborator on their post.",[s._param("media_owner_username",k)]),a[13]=k,a[14]=I):I=a[14];var T=I,D;a[15]!==k?(D=s._(/*BTDS*/"{media_owner_username} invited you to be a collaborator on their reel.",[s._param("media_owner_username",k)]),a[15]=k,a[16]=D):D=a[16];var x=D,$;return a[17]!==h||a[18]!==T||a[19]!==m||a[20]!==x?($=r("gkx")("4757")?u.jsxs(r("IGDSBox.react"),{alignItems:"center",color:"primaryBackground",direction:"row",justifyContent:"between",paddingX:3,paddingY:2,position:"relative",children:[u.jsx(r("IGDSBox.react"),{flex:"shrink",marginEnd:5,marginStart:1,maxWidth:350,overflow:"auto",wrap:!0,children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryText",maxLines:3,zeroMargin:!0,children:m===o("polarisGetPostFromGraphMediaInterface").PRODUCT_TYPE_CLIPS?x:T})}),u.jsx(r("IGDSBox.react"),{flex:"shrink",marginEnd:1,children:u.jsx(r("IGDSButton.react"),{display:"inline",label:s._(/*BTDS*/"Review"),onClick:h,variant:"tertiary"})})]}):null,a[17]=h,a[18]=T,a[19]=m,a[20]=x,a[21]=$):$=a[21],$}l.default=m}),226);
__d("PolarisPostCommentInputPicker.react",["CometPlaceholder.react","PolarisUA","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react")),c=r("deferredLoadComponent")(r("requireDeferredForDisplay")("PolarisPostCommentInput.react").__setRef("PolarisPostCommentInputPicker.react"));function d(t){var n=o("react-compiler-runtime").c(17),a,i;n[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l=r("usePolarisIsOnFeedPage")(),s=r("usePolarisIsOnAdsActivityPage")(),d;n[3]!==s||n[4]!==l||n[5]!==a?(d=(l||s)&&a.inModal!==!0&&o("PolarisUA").isDesktop(),n[3]=s,n[4]=l,n[5]=a,n[6]=d):d=n[6];var m=d,p;n[7]!==m?(p={0:{className:"x1qjc9v5 x5ur3kl x13fuv20 x178xt8z x9f619 x78zum5 xdt5ytf x2lah0s xnnlda6 x1gslohp x1n2onr6"},1:{className:"x1qjc9v5 x9f619 x78zum5 xdt5ytf x2lah0s x1d6elog"}}[!!m<<0],n[7]=m,n[8]=p):p=n[8];var _;n[9]!==p?(_=u.jsx("div",babelHelpers.extends({},p)),n[9]=p,n[10]=_):_=n[10];var f;n[11]!==a||n[12]!==i?(f=u.jsx(c,babelHelpers.extends({},a,{ref:i})),n[11]=a,n[12]=i,n[13]=f):f=n[13];var g;return n[14]!==_||n[15]!==f?(g=u.jsx(r("CometPlaceholder.react"),{fallback:_,name:"PostCommentInputPicker",children:f}),n[14]=_,n[15]=f,n[16]=g):g=n[16],g}l.default=d}),98);
__d("PolarisPostFeatures.react",["FBLogger","PolarisPostConstants","PolarisPostModalRenderingContext.react","PolarisPostVariants","PolarisReactRedux.react","PolarisRelationshipTypes","PolarisUA","polarisRelationshipSelectors.react","react-compiler-runtime","usePolarisDisplayProperties","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[{overrides:{threeLineHeaderEnabled:!0},predicate:"isThreeLineHeaderEnabled"},{overrides:{avatarSize:(e=o("PolarisPostConstants")).AVATAR_SIZE_SMALL,commentsAreStacked:!0},predicate:"isFeed"},{overrides:{avatarSize:e.AVATAR_SIZE_SMALL,commentsAreStacked:!0},predicate:"isWidePhotoOnMediumScreen"},{overrides:{avatarSize:e.AVATAR_SIZE_SMALL,hasThreadedSidebarComments:!0,showPostButton:!0},predicate:"isRichCommentsEnabled"},{overrides:{avatarSize:e.AVATAR_SIZE_SMALL,commentsAreStacked:!0,hasThreadedSidebarComments:!1,showPostButton:!0},predicate:"isStackedScreenSize"},{overrides:{hasPhotosOfYouOption:!0},predicate:"isViewerInUserTags"},{overrides:{showFollowButton:!1},predicate:"isFeedAndOwnerFollowedByViewer"},{overrides:{showFollowButton:!1},predicate:"isModalAndOwnerFollowedByViewer"},{overrides:{canViewerProvideFeedback:!1},predicate:"isOwnerPrivate"},{overrides:{canViewerProvideFeedback:!0},predicate:"isOwnerFollowedByViewer"},{overrides:{canViewerProvideFeedback:!0,showFollowButton:!1},predicate:"isOwnerTheViewer"},{overrides:{showFollowButton:!1},predicate:"isOwnerUnpublished"},{overrides:{showFollowButton:!1},predicate:"isBlocked"},{overrides:{showFollowButton:!1},predicate:"hasFollowHashtagInfo"},{overrides:{canViewerProvideFeedback:!1},predicate:"isLoggedOut"}],u={avatarSize:e.AVATAR_SIZE_LARGE,canViewerProvideFeedback:!0,commentsAreStacked:!1,hasPhotosOfYouOption:!1,hasThreadedSidebarComments:!1,showFollowButton:!0,showPostButton:!1,threeLineHeaderEnabled:!1};function c(e){var t,n=e.isInModal,r=e.owner,a=e.post,i=e.relationship,l=e.variant,s=e.viewer,u=e.viewportWidth,c=l===o("PolarisPostVariants").VARIANTS.feed,d=!!s,m=!s,p=(s==null?void 0:s.id)===r.id,_=i.followedByViewer.state===o("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING,f=!!a.followHashtagInfo,g=!!a.location&&(a.sponsors||[]).length>0;return{hasFollowHashtagInfo:f,isBlocked:i.hasBlockedViewer.state===o("PolarisRelationshipTypes").BLOCK_STATUS_BLOCKED,isFavorited:((t=i.favoritedByViewer)==null?void 0:t.state)===o("PolarisRelationshipTypes").FAVORITE_STATUS_FAVORITED,isFeed:c,isFeedAndOwnerFollowedByViewer:c&&_,isLoggedIn:d,isLoggedOut:m,isModalAndOwnerFollowedByViewer:n&&_,isOwnerFollowedByViewer:_,isOwnerPrivate:!!r.isPrivate,isOwnerTheViewer:p,isOwnerUnpublished:!!r.isUnpublished,isRichCommentsEnabled:!0,isSidecar:(a.sidecarChildren||[]).length>0,isStackedScreenSize:u<o("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,isThreeLineHeaderEnabled:g,isViewerInUserTags:d&&(a.usertags||[]).some(function(e){return e.user.id===(s==null?void 0:s.id)}),isWidePhotoOnMediumScreen:!!(a.dimensions&&a.dimensions.width/a.dimensions.height>1.5&&u>o("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF&&u<=o("PolarisPostConstants").MEDIUM_SCREEN_MAX)}}function d(e){var t=c(e),n=t.isBlocked,o=t.isFavorited,a=t.isLoggedIn,i=t.isSidecar,l=t.isStackedScreenSize;return babelHelpers.extends({isBlocked:n,isFavorited:o,isLoggedIn:a,isSidecar:i,isStackedScreenSize:l},s.filter(function(e){var n=e.predicate,o=t[n];if(typeof o!="boolean")throw r("FBLogger")("instagram_web").mustfixThrow("Could not find predicate %s",n);return o}).reduce(function(e,t){var n=t.overrides;return babelHelpers.extends({},e,n)},u))}function m(e){var t=o("react-compiler-runtime").c(12),n=e.owner,a=e.path,i=e.post,l=e.variant,s;t[0]!==n.id?(s=function(t){return o("polarisRelationshipSelectors.react").getRelationship(t.relationships,n.id)},t[0]=n.id,t[1]=s):s=t[1];var u=o("PolarisReactRedux.react").useSelector(s),c=r("usePolarisViewer")(),m=r("usePolarisDisplayProperties")(),p=m.viewportHeight,_=m.viewportWidth,f=o("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext(),g=f.isInModal,h;if(t[2]!==g||t[3]!==n||t[4]!==a||t[5]!==i||t[6]!==u||t[7]!==l||t[8]!==c||t[9]!==p||t[10]!==_){var y={isInModal:g,isMobile:o("PolarisUA").isMobile(),owner:n,path:a,post:i,relationship:u,variant:l,viewer:c,viewportHeight:p,viewportWidth:_};h=d(y),t[2]=g,t[3]=n,t[4]=a,t[5]=i,t[6]=u,t[7]=l,t[8]=c,t[9]=p,t[10]=_,t[11]=h}else h=t[11];return h}l.getPostFeatures=d,l.usePolarisPostFeatures=m}),98);
__d("PolarisInFeedPostModalContext",["emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).createContext,u=s(r("emptyFunction"));l.InFeedPostModalContext=u}),98);
__d("PolarisPostFastShareButton.react",["CometPlaceholder.react","IGDContactSearchDialogType.flow","IGDSMessagesOutlineIcon.react","IGDSecureShareSheetDialogPlaceholder.react","JSResourceForInteraction","PolarisIGCoreSVGIconButton.react","PolarisIsLoggedIn","PolarisPostModalContext.react","PolarisPostStrings","PolarisPostTypeUtils","QPLUserFlow","lazyLoadComponent","polarisLogAction","qpl","react","react-compiler-runtime","useIGDSLazyDialog","useIGDSecureShareSheetInteractionLogger","useIGDShareSheetOnSubmitPost","usePolarisPost","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo,m=u.useState,p=r("JSResourceForInteraction")("IGDSecureShareSheetDialog.react").__setRef("PolarisPostFastShareButton.react"),_=r("lazyLoadComponent")(r("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisPostFastShareButton.react"));function f(e){var t=o("react-compiler-runtime").c(42),n=e.analyticsContext,a=e["data-testid"],l=e.mediaId,u=e.mediaOverlayInfo,c=e.postId,d=e.sharingFrictionInfo,f=o("usePolarisPost").usePost(c,h),y=o("PolarisPostModalContext.react").useSetPostModal(),C=r("useIGDSLazyDialog")(p,g),b=C[0],v=C[1],S=m(!1),R=S[0],L=S[1],E=(d==null?void 0:d.bloksAppUrl)!=null&&(d==null?void 0:d.shouldHaveSharingFriction)===!0,k=u!=null?u:f.mediaOverlayInfo,I;t[0]!==f||t[1]!==k?(I=babelHelpers.extends({},f,{mediaOverlayInfo:k}),t[0]=f,t[1]=k,t[2]=I):I=t[2];var T=I,D=r("useIGDShareSheetOnSubmitPost")(T),x=o("useIGDSecureShareSheetInteractionLogger").useLogShareSheetInteraction(),$;t[3]!==n||t[4]!==x||t[5]!==D||t[6]!==b||t[7]!==f||t[8]!==y||t[9]!==E||t[10]!==T?($=function(){if(r("polarisLogAction")("shareClick",{source:n,type:o("PolarisPostTypeUtils").getPostType(f)}),r("QPLUserFlow").start(r("qpl")._(379205139,"1723"),{annotations:{bool:{is_graphql:!1},string:{source:n}}}),!E){if(!o("PolarisIsLoggedIn").isLoggedIn())y("share");else{var e=r("uuidv4")();x("igd_sharesheet_open",{flowInstanceId:e,shareType:o("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:n}),b({flowInstanceId:e,onSubmit:D,post:T})}L(!0)}},t[3]=n,t[4]=x,t[5]=D,t[6]=b,t[7]=f,t[8]=y,t[9]=E,t[10]=T,t[11]=$):$=t[11];var P=$,N;t[12]!==n||t[13]!==x||t[14]!==D||t[15]!==b||t[16]!==T?(N=function(t){L(!1);var e=r("uuidv4")();x("igd_sharesheet_open",{flowInstanceId:e,shareType:o("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:n}),b({flowInstanceId:e,onSubmit:D,post:T})},t[12]=n,t[13]=x,t[14]=D,t[15]=b,t[16]=T,t[17]=N):N=t[17];var M=N,w;t[18]===Symbol.for("react.memo_cache_sentinel")?(w=function(t){L(!1)},t[18]=w):w=t[18];var A=w,F;t[19]!==n||t[20]!==l?(F={media_id:l,module:n},t[19]=n,t[20]=l,t[21]=F):F=t[21];var O=F,B;t[22]!==M?(B={"ig.action.navigation.OpenShareSheet":M,"ig.action.navigation.ResumeStoryPlayback":A},t[22]=M,t[23]=B):B=t[23];var W=B,q;t[24]!==W||t[25]!==O||t[26]!==l||t[27]!==E||t[28]!==(d==null?void 0:d.bloksAppUrl)||t[29]!==R?(q=function(){return E?R&&(d==null?void 0:d.bloksAppUrl)!=null&&s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(_,{actionOverrides:W,appId:d==null?void 0:d.bloksAppUrl,params:O},l)}):null},t[24]=W,t[25]=O,t[26]=l,t[27]=E,t[28]=d==null?void 0:d.bloksAppUrl,t[29]=R,t[30]=q):q=t[30];var U=q,V;t[31]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(r("IGDSMessagesOutlineIcon.react"),{alt:o("PolarisPostStrings").SHARE_TEXT,color:"ig-secondary-text",size:24}),t[31]=V):V=t[31];var H;t[32]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx(r("IGDSMessagesOutlineIcon.react"),{alt:o("PolarisPostStrings").SHARE_TEXT,color:"ig-primary-text",size:24}),t[32]=H):H=t[32];var G;t[33]!==a||t[34]!==P||t[35]!==v?(G=s.jsx(r("PolarisIGCoreSVGIconButton.react"),{"data-testid":void 0,hover:V,onClick:P,ref:v,children:H}),t[33]=a,t[34]=P,t[35]=v,t[36]=G):G=t[36];var z;t[37]!==U?(z=U(),t[37]=U,t[38]=z):z=t[38];var j;return t[39]!==G||t[40]!==z?(j=s.jsxs(s.Fragment,{children:[G,z]}),t[39]=G,t[40]=z,t[41]=j):j=t[41],j}function g(e){return s.jsx(r("IGDSecureShareSheetDialogPlaceholder.react"),{onClose:e})}g.displayName=g.name+" [from "+i.id+"]";function h(e){return e}l.default=f}),98);
__d("PolarisSaveButton.react",["IGDSIconButton.react","IGDSSavePanoFilledIcon.react","IGDSSavePanoOutlineIcon.react","JSResourceForInteraction","PolarisIGCoreAnchoredPopover.react","PolarisIGCorePressable.react","PolarisPostStrings","PolarisReactRedux.react","PolarisSavedCollectionPicker.react","PolarisSavedPostsActionRequestNextSavedCollections","PolarisUA","nullthrows","polarisSavedPostsSelectors","react","react-compiler-runtime","useIGDSLazyDialog","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useState,c=24,d=-16,m=5;function p(e){var t=o("react-compiler-runtime").c(40),n=e.analyticsContext,a=e.collectionsPostSavedTo,i=e["data-testid"],l=e.isSaved,p=e.onMouseEnter,f=e.onSaveMedia,g=e.onSaveMediaToCollection,h=e.onShowToast,y=e.postId,C=e.thumbnailSrcSet,b=o("PolarisReactRedux.react").useDispatch(),v=r("usePolarisViewer")(),S=!v,R;t[0]!==S||t[1]!==v?(R=function(t){if(S)return null;var e=r("nullthrows")(v);return o("polarisSavedPostsSelectors").getAllSavedCollectionsForUser(t,r("nullthrows")(e.id))},t[0]=S,t[1]=v,t[2]=R):R=t[2];var L=o("PolarisReactRedux.react").useSelector(R),E;t[3]!==S||t[4]!==v?(E=function(t){if(S)return null;var e=r("nullthrows")(v);return o("polarisSavedPostsSelectors").getSavedCollectionsPaginationForUser(t,r("nullthrows")(e.id))},t[3]=S,t[4]=v,t[5]=E):E=t[5];var k=o("PolarisReactRedux.react").useSelector(E),I;t[6]!==L||t[7]!==k?(I=function(){return L==null||k==null?!1:L.length>=m?!0:!k.moreAvailable&&L.length>1},t[6]=L,t[7]=k,t[8]=I):I=t[8];var T=I,D;t[9]!==S?(D=!S&&o("PolarisUA").isDesktop(),t[9]=S,t[10]=D):D=t[10];var x=D,$=T()&&x,P=function(t){t.preventDefault(),f(!l),!l&&$&&(h!=null&&h(),F(!0))},N=function(){if(p==null||p(),!S&&!T()&&!r("nullthrows")(k).isFetching){var e=r("nullthrows")(v);b(o("PolarisSavedPostsActionRequestNextSavedCollections").requestInitialSavedCollections(r("nullthrows")(e.id)))}F(!1)},M=u(!1),w=M[0],A=M[1],F=A,O;t[11]===Symbol.for("react.memo_cache_sentinel")?(O=r("JSResourceForInteraction")("PolarisCreateCollectionWithPostModal.react").__setRef("PolarisSaveButton.react"),t[11]=O):O=t[11];var B=r("useIGDSLazyDialog")(O),W=B[0],q;t[12]!==n||t[13]!==a||t[14]!==w||t[15]!==l||t[16]!==f||t[17]!==g||t[18]!==y||t[19]!==F||t[20]!==$||t[21]!==C||t[22]!==W?(q=$?s.jsx(r("PolarisSavedCollectionPicker.react"),{collectionsPostSavedTo:a,hidePopover:w,onSaveMedia:f,onSaveMediaToCollection:g,postId:y,postIsSaved:l,setHidePopover:F,setShowCreateCollectionModal:function(){return W({onSaveChange:f,postId:y,source:n,srcSet:C})}}):null,t[12]=n,t[13]=a,t[14]=w,t[15]=l,t[16]=f,t[17]=g,t[18]=y,t[19]=F,t[20]=$,t[21]=C,t[22]=W,t[23]=q):q=t[23];var U;t[24]!==x||t[25]!==l?(U=l||!x?null:s.jsx(r("IGDSSavePanoOutlineIcon.react"),{alt:o("PolarisPostStrings").SAVE_TEXT,color:"ig-secondary-text",size:c}),t[24]=x,t[25]=l,t[26]=U):U=t[26];var V;t[27]!==l?(V=l?s.jsx(r("IGDSSavePanoFilledIcon.react"),{alt:o("PolarisPostStrings").UNSAVE_TEXT,color:"ig-primary-text",size:c}):s.jsx(r("IGDSSavePanoOutlineIcon.react"),{alt:o("PolarisPostStrings").SAVE_TEXT,color:"ig-primary-text",size:c}),t[27]=l,t[28]=V):V=t[28];var H;t[29]!==i||t[30]!==P||t[31]!==U||t[32]!==V?(H=s.jsx(r("IGDSIconButton.react"),{"data-testid":void 0,hover:U,onClick:P,padding:8,children:V}),t[29]=i,t[30]=P,t[31]=U,t[32]=V,t[33]=H):H=t[33];var G;t[34]!==N||t[35]!==H?(G=s.jsx(r("PolarisIGCorePressable.react"),{onMouseEnter:N,onPress:_,children:H}),t[34]=N,t[35]=H,t[36]=G):G=t[36];var z;return t[37]!==G||t[38]!==q?(z=s.jsx(r("PolarisIGCoreAnchoredPopover.react"),{content:q,offsetTop:d,preferredPositionX:"center",preferredPositionY:"top",showOnHover:!0,children:G}),t[37]=G,t[38]=q,t[39]=z):z=t[39],z}function _(){}l.default=p}),98);
__d("usePolarisMediaSaveToCollectionReduxHandler",["PolarisPostActionAddPostToCollection","PolarisPostActionRemovePostFromCollection","PolarisReactRedux.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(3),n=o("PolarisReactRedux.react").useDispatch(),r;return t[0]!==n||t[1]!==e?(r=function(r,a){n(r?o("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:a,postId:e}):o("PolarisPostActionAddPostToCollection").addPostToCollection({collectionId:a,postIds:[e]}))},t[0]=n,t[1]=e,t[2]=r):r=t[2],r}l.default=u}),98);
__d("PolarisPostFeedbackControls_DEPRECATED.react",["IGRouter_DO_NOT_USE.react","PolarisCommentButton.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisLikeButton.react","PolarisPostFastShareButton.react","PolarisPostVariants","PolarisReactRedux.react","PolarisRepostButton.react","PolarisSaveButton.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","logPolarisPostModalOpen","maybeGetViewerRepostId","polarisLogAction","polarisPostSelectors","qex","react","react-compiler-runtime","stylex","usePolarisMediaSaveToCollectionReduxHandler","usePolarisNavigateToLogin","usePolarisPostShowSavedToastHandler","usePolarisSelector"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p={repostButton:{display:"x1rg5ohu",$$css:!0},root:{display:"x78zum5",flexDirection:"x1q0g3np",marginTop:"x1gslohp",$$css:!0}};function _(t){var n=o("react-compiler-runtime").c(84),a=t.analyticsContext,i=t.canViewerProvideFeedback,l=t.canViewerRepost,s=t.canViewerReshare,c=t.code,d=t.commentsDisabled,_=t.containerRef,h=t.customAlignment,y=t.hideShareButton,C=t.isBlocked,b=t.isSidecar,v=t.isVideo,S=t.likedByViewer,R=t.mediaId,L=t.onCommentClick,E=t.onLikeChange,k=t.onSaveChange,I=t.ownerIsPrivate,T=t.ownerUsername,D=t.postId,x=t.savedByViewer,$=t.sharingFrictionInfo,P=t.variant,N=t.xstyle,M=t.history,w=o("PolarisReactRedux.react").useDispatch(),A;n[0]!==D?(A=function(t){return o("polarisPostSelectors").getPostById(t,D)},n[0]=D,n[1]=A):A=n[1];var F=r("usePolarisSelector")(A),O;n[2]!==D?(O=function(t){return o("polarisPostSelectors").getSavedCollectionsForPost(t,D)},n[2]=D,n[3]=O):O=n[3];var B=r("usePolarisSelector")(O),W;if(n[4]!==F.floating_context_items){var q,U=(q=F.floating_context_items)==null?void 0:q.map(g).filter(Boolean);W=r("maybeGetViewerRepostId")(U==null?void 0:U.map(f)),n[4]=F.floating_context_items,n[5]=W}else W=n[5];var V=W,H=r("usePolarisPostShowSavedToastHandler")(),G=m(o("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),z=G.canUserSeePersistentCta,j=m(o("PolarisInFeedPostModalContext").InFeedPostModalContext),K=r("usePolarisNavigateToLogin")(c,T),Q=K[0],X=K[1],Y;n[6]!==a||n[7]!==Q||n[8]!==E?(Y=function(t){o("PolarisIsLoggedIn").isLoggedIn()?E(t,"button"):(r("polarisLogAction")("likeAttempt",{source:a}),Q("like"))},n[6]=a,n[7]=Q,n[8]=E,n[9]=Y):Y=n[9];var J=Y,Z;n[10]!==a||n[11]!==Q||n[12]!==k?(Z=function(t){o("PolarisIsLoggedIn").isLoggedIn()?k(t):(r("polarisLogAction")("saveAttempt",{source:a}),Q("save"))},n[10]=a,n[11]=Q,n[12]=k,n[13]=Z):Z=n[13];var ee=Z,te;n[14]!==X?(te=function(){o("PolarisIsLoggedIn").isLoggedIn()||X()},n[14]=X,n[15]=te):te=n[15];var ne=te,re=r("usePolarisMediaSaveToCollectionReduxHandler")(D),oe;n[16]!==a||n[17]!==z||n[18]!==c||n[19]!==w||n[20]!==M||n[21]!==b||n[22]!==v||n[23]!==Q||n[24]!==L||n[25]!==j||n[26]!==D||n[27]!==P?(oe=function(){var e=o("PolarisUA").isMobile();if(r("polarisLogAction")("commentButtonClicked",{isLoggedIn:o("PolarisIsLoggedIn").isLoggedIn(),source:a,type:v?"video":"photo"}),o("PolarisIsLoggedIn").isLoggedIn())if(o("PolarisUA").isDesktop()&&P===o("PolarisPostVariants").VARIANTS.feed)w(o("PolarisFeedActionOpenPostModalForId").openPostModalForId(D)),j(D),r("logPolarisPostModalOpen")(a,o("PolarisInteractionsLogger").getMediaTypeFromPost({isSidecar:b,isVideo:v}),"feed_comment");else if(P===o("PolarisPostVariants").VARIANTS.feed||e){var t,n=r("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((t={},t[o("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=z||void 0,t.shortcode=c,t));M.push(n)}else L();else Q("comment")},n[16]=a,n[17]=z,n[18]=c,n[19]=w,n[20]=M,n[21]=b,n[22]=v,n[23]=Q,n[24]=L,n[25]=j,n[26]=D,n[27]=P,n[28]=oe):oe=n[28];var ae=oe,ie=!o("PolarisIsLoggedIn").isLoggedIn()||i;if(C||!ie)return null;var le;n[29]!==l?(le=l===!0&&r("qex")._("4562")===!0,n[29]=l,n[30]=le):le=n[30];var se=le,ue=I!==!0&&!!s,ce=h==="left",de;n[31]!==ce?(de={0:"x1rg5ohu x1qfufaz",1:"x1rg5ohu x1qfufaz x1xegmmw x9ek82g"}[!!ce<<0],n[31]=ce,n[32]=de):de=n[32];var me;n[33]!==J||n[34]!==ne||n[35]!==S||n[36]!==de?(me=u.jsx(r("PolarisLikeButton.react"),{className:de,"data-testid":void 0,isLiked:S,onChange:J,onMouseEnter:ne}),n[33]=J,n[34]=ne,n[35]=S,n[36]=de,n[37]=me):me=n[37];var pe;n[38]!==d||n[39]!==ae||n[40]!==ne||n[41]!==ce?(pe=!d&&u.jsx(r("PolarisCommentButton.react"),{className:{0:"x1rg5ohu",1:"x1rg5ohu x1xegmmw x182iqb8"}[!!ce<<0],"data-testid":void 0,onClick:ae,onHoverStart:ne}),n[38]=d,n[39]=ae,n[40]=ne,n[41]=ce,n[42]=pe):pe=n[42];var _e;n[43]!==D||n[44]!==se||n[45]!==V?(_e=se&&u.jsx(r("PolarisRepostButton.react"),{mediaId:D,viewerRepostId:V,xstyle:p.repostButton}),n[43]=D,n[44]=se,n[45]=V,n[46]=_e):_e=n[46];var fe;n[47]!==a||n[48]!==y||n[49]!==ce||n[50]!==R||n[51]!==D||n[52]!==ue||n[53]!==$?(fe=ue&&y!==!0&&u.jsx("span",babelHelpers.extends({},{0:{className:"x1rg5ohu"},1:{className:"x1rg5ohu x1xegmmw x14yy4lh"}}[!!ce<<0],{children:u.jsx(r("PolarisPostFastShareButton.react"),{analyticsContext:a,"data-testid":void 0,mediaId:R,mediaOverlayInfo:null,postId:D,sharingFrictionInfo:$})})),n[47]=a,n[48]=y,n[49]=ce,n[50]=R,n[51]=D,n[52]=ue,n[53]=$,n[54]=fe):fe=n[54];var ge;n[55]!==me||n[56]!==pe||n[57]!==_e||n[58]!==fe?(ge=u.jsxs(u.Fragment,{children:[me,pe,_e,fe]}),n[55]=me,n[56]=pe,n[57]=_e,n[58]=fe,n[59]=ge):ge=n[59];var he=ge,ye;n[60]!==N?(ye=(e||(e=r("stylex"))).props(p.root,N),n[60]=N,n[61]=ye):ye=n[61];var Ce;n[62]!==ce?(Ce={0:{className:"x972fbf x10w94by x1qhh985 x14e42zd x1rg5ohu xln7xf2 xk390pu xdj266r xat24cr x1ows92d xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},1:{className:"x972fbf x10w94by x1qhh985 x14e42zd x1rg5ohu xln7xf2 xk390pu xdj266r xat24cr xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1xegmmw x1lziwak xo1ph6p"}}[!!ce<<0],n[62]=ce,n[63]=Ce):Ce=n[63];var be;n[64]!==B?(be=B!=null?B:[],n[64]=B,n[65]=be):be=n[65];var ve;n[66]!==a||n[67]!==ee||n[68]!==ne||n[69]!==re||n[70]!==H||n[71]!==F.displayResources||n[72]!==D||n[73]!==x||n[74]!==be?(ve=u.jsx(r("PolarisSaveButton.react"),{analyticsContext:a,collectionsPostSavedTo:be,"data-testid":void 0,isSaved:x,onMouseEnter:ne,onSaveMedia:ee,onSaveMediaToCollection:re,onShowToast:H,postId:D,thumbnailSrcSet:F.displayResources}),n[66]=a,n[67]=ee,n[68]=ne,n[69]=re,n[70]=H,n[71]=F.displayResources,n[72]=D,n[73]=x,n[74]=be,n[75]=ve):ve=n[75];var Se;n[76]!==Ce||n[77]!==ve?(Se=u.jsx("span",babelHelpers.extends({},Ce,{children:ve})),n[76]=Ce,n[77]=ve,n[78]=Se):Se=n[78];var Re;return n[79]!==he||n[80]!==_||n[81]!==ye||n[82]!==Se?(Re=u.jsxs("section",babelHelpers.extends({},ye,{ref:_,children:[he,Se]})),n[79]=he,n[80]=_,n[81]=ye,n[82]=Se,n[83]=Re):Re=n[83],Re}function f(e){return{id:e.id,user_id:e.user_id}}function g(e){return e.media_note}var h=o("IGRouter_DO_NOT_USE.react").withIGRouter(_);l.default=h}),98);
__d("PolarisPostFooter.react",["IGDSBox.react","IGDSDivider.react","PolarisBoostMultiBoostUtils.react","PolarisBoostUtils","PolarisPostAboveFooterSection.react","PolarisPostBoostButton.react","PolarisPostViewInsights.react","nullthrows","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={marginTop0:{marginTop:"xdj266r",$$css:!0},marginTop16:{marginTop:"xw7yly9",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(29),n=e.analyticsContext,a=e.bloksAppId,i=e.boostedStatus,l=e.boostUnavailableIdentifier,c=e.boostUnavailableReason,d=e.className,m=e.hasViewInsights,p=e.mediaId,_=e.mediaOwnerIGID,f=e.productType,g=e.viewerId,h=o("PolarisBoostUtils").useIsEligibleForBoost(i!=null&&g!=null),y;t[0]!==l||t[1]!==i?(y=o("PolarisBoostMultiBoostUtils.react").isEligibleForMultiBoostWebWithinBoostFlow(i,l),t[0]=l,t[1]=i,t[2]=y):y=t[2];var C=y;if(!m&&!h)return null;var b=m?"between":"end",v=m?u.marginTop0:u.marginTop16,S;t[3]!==a||t[4]!==m||t[5]!==p?(S=m&&s.jsx(r("PolarisPostViewInsights.react"),{bloksAppId:a,mediaId:p}),t[3]=a,t[4]=m,t[5]=p,t[6]=S):S=t[6];var R;t[7]!==n||t[8]!==l||t[9]!==c||t[10]!==i||t[11]!==p||t[12]!==_||t[13]!==f||t[14]!==h?(R=h&&i!=null&&f!=="ad"&&s.jsx(r("PolarisPostBoostButton.react"),{analyticsContext:n,boostedStatus:i,boostUnavailableIdentifier:l,boostUnavailableReason:c,mediaId:p,mediaOwnerIGID:_,productType:r("nullthrows")(f)}),t[7]=n,t[8]=l,t[9]=c,t[10]=i,t[11]=p,t[12]=_,t[13]=f,t[14]=h,t[15]=R):R=t[15];var L;t[16]!==b||t[17]!==v||t[18]!==S||t[19]!==R?(L=s.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:b,paddingX:4,paddingY:3,position:"relative",xstyle:v,children:[S,R]}),t[16]=b,t[17]=v,t[18]=S,t[19]=R,t[20]=L):L=t[20];var E=L,k;t[21]!==n||t[22]!==i||t[23]!==C||t[24]!==E?(k=C?s.jsxs(r("IGDSBox.react"),{children:[s.jsx(r("PolarisPostAboveFooterSection.react"),{analyticsContext:n,boostedStatus:i}),s.jsx(r("IGDSBox.react"),{marginStart:4,width:"90%",children:s.jsx(r("IGDSDivider.react"),{})}),E]}):E,t[21]=n,t[22]=i,t[23]=C,t[24]=E,t[25]=k):k=t[25];var I;return t[26]!==d||t[27]!==k?(I=s.jsx("section",{className:d,children:k}),t[26]=d,t[27]=k,t[28]=I):I=t[28],I}l.default=c}),98);
__d("PolarisPostRemoveCommentsSelectors",["reselect"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.postRemoveComments}var s=o("reselect").createSelector(e,function(e){var t=e.isVisible;return t});l.getPostRemoveCommentsIsVisible=s}),98);
__d("PolarisThreadedComments.react",["cx","fbt","FBLogger","IGDSBox.react","IGDSDivider.react","PolarisBatchDOM","PolarisCommentCover.react","PolarisCommentThread.react","PolarisCommentsSectionText.react","PolarisCommentsSortContext.react","PolarisCommentsStrings","PolarisConfig","PolarisFacebookCommentCountSheet.react","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisLinkBuilder","PolarisNoCommentsPlaceholder.react","PolarisPaginationUtils","PolarisPendingCommentState","PolarisPostComment.react","PolarisPostCommentsContainerPlaceholder.react","PolarisPostVariants","PolarisReactRedux.react","PolarisSortCommentsUtil","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","PolarisThreadedCommentsLoadMoreButton.react","PolarisUA","PolarisWebStorage","cr:1342","isStringNullOrEmpty","nullthrows","polarisCommentReducer","polarisUserSelectors","qex","react","react-compiler-runtime","requestIdleCallback","useIGDSToaster"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d={commentsCover:{marginInlineStart:"x1diwwjn",$$css:!0}};function m(e,t){var n=t.getBoundingClientRect().top,r=n-t.scrollTop,o=e.getBoundingClientRect().top;return o-r}function p(e){var t=o("react-compiler-runtime").c(22),n=e.innerRef,a=e.isPermalinkedComment,i=e.onHidePermalinkReply,l=e.parentComment,s=e.parentProps,u=e.parentState,d=e.permalinkedReplyId,m=e.permalinkedReplyNodeRef,p=e.replyPagerNodeRef,_=s.analyticsContext,f=s.code,g=s.commentingDisabledForViewer,h=s.customIndentationPadding,y=s.handleDeleteCommentClick,C=s.hideUserAvatar,b=s.id,v=s.isDeletingComments,S=s.loggedIn,R=s.onLikeCountClick,L=s.ownerId,E=s.reducedAvatarMargin,k=s.showCommentOptionsInline,I=u.commentPermalinkAnimEnabled,T;return t[0]!==_||t[1]!==f||t[2]!==I||t[3]!==g||t[4]!==h||t[5]!==y||t[6]!==C||t[7]!==b||t[8]!==n||t[9]!==v||t[10]!==a||t[11]!==S||t[12]!==i||t[13]!==R||t[14]!==L||t[15]!==l||t[16]!==d||t[17]!==m||t[18]!==E||t[19]!==p||t[20]!==k?(T=c.jsx(r("PolarisCommentThread.react"),{analyticsContext:_,code:f,commentingDisabledForViewer:g,customIndentationPadding:h,hideUserAvatar:C,innerRef:n,isPermalinkedComment:a,loggedIn:S,onDeleteCommentClick:y,onHidePermalinkReply:i,onLikeCountClick:R,parentComment:l,permalinkedReplyAnimating:I,permalinkedReplyId:d,permalinkedReplyNodeRef:m,postId:b,postOwnerId:L,reducedAvatarMargin:E,replyPagerNodeRef:p,showCommentOptionsInline:k,showRemoveIcon:v}),t[0]=_,t[1]=f,t[2]=I,t[3]=g,t[4]=h,t[5]=y,t[6]=C,t[7]=b,t[8]=n,t[9]=v,t[10]=a,t[11]=S,t[12]=i,t[13]=R,t[14]=L,t[15]=l,t[16]=d,t[17]=m,t[18]=E,t[19]=p,t[20]=k,t[21]=T):T=t[21],T}var _=(function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,t.$2=c.createRef(),t.$3=c.createRef(),t.$4=c.createRef(),t.$5=[],t.state={commentPermalinkAnimEnabled:!1,commentsSortOrder:t.props.sortOrder,isAutoscrollingCommentPermalink:!1,replyPermalinkLastHideTime:null,showHiddenComments:!1},t.$13=function(e){var n=t.props,r=n.analyticsContext,a=n.code,i=n.hasRankedComments,l=n.id,s=n.loadMore,u=n.mediaType,c=n.ownerId;s(l,i,a),o("PolarisInteractionsLogger").logInteractionAction({containerModule:r,eventName:"instagram_child_comments_load_more",mediaAuthorId:c,mediaId:l,mediaType:u})},t.$14=function(){t.setState({showHiddenComments:!0})},t.$15=function(e){var n,a=(n=r("qex")._("4381"))!=null?n:!1;if(t.setState({commentsSortOrder:e}),a){var i,l=t.props.add,s=(i=o("PolarisConfig").getViewerId())!=null?i:"",c="last_comments_sort_"+s,d=r("PolarisWebStorage").getLocalStorage();if(d)try{var m={sortOrder:e};d.setItem(c,JSON.stringify(m))}catch(e){r("FBLogger")("ig_web").mustfix("Unable to set comments sort value")}if(e===o("PolarisSortCommentsUtil").CommentsOptionValues.RECENT&&l){var p=u._(/*BTDS*/"You\u2019ll see the most recent comments from people you follow unless you change your preference."),_={message:p,target:"bottom"};l(_,{duration:5e3})}}},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var a=t.prototype;return a.$6=function(){return this.$2.current||null},a.$7=function(){return this.$3.current||null},a.$8=function(){return this.$4.current||null},a.$9=function(t,n,a,i){var e=this;this.setState({commentPermalinkAnimEnabled:!1,isAutoscrollingCommentPermalink:!0}),o("PolarisBatchDOM").measure(function(){var l,s=m(n,t);if(a){var u=m(a,t),c=a.getBoundingClientRect().height,d=t.getBoundingClientRect().height,p=Math.max(d-c,0);l=Math.max(s,u-p)}else l=s;o("PolarisBatchDOM").mutate(function(){t.scrollTop=l;var n=function(){e.setState({commentPermalinkAnimEnabled:!0,isAutoscrollingCommentPermalink:!1})};i?r("requestIdleCallback")(function(){n()}):n()})})},a.componentDidMount=function(){var e,t,n=this.$1;if(n){var a=this.$6();if(a)this.$9(n,a,this.$7(),!0);else if(!this.props.hasRankedComments){if(o("PolarisUA").isDesktop())return;n.scrollTop=n.scrollHeight}var i=(e=o("PolarisConfig").getViewerId())!=null?e:"",l="last_comments_sort_"+i,s=r("PolarisWebStorage").getLocalStorage(),u=(t=r("qex")._("4381"))!=null?t:!1;if(s&&u)try{var c=s.getItem(l);if(!r("isStringNullOrEmpty")(c)){var d=JSON.parse(c);d.sortOrder&&d.sortOrder!==this.state.commentsSortOrder&&(this.setState({commentsSortOrder:d.sortOrder}),this.props.requestComments(this.props.id,void 0,d.sortOrder))}}catch(e){r("FBLogger")("ig_web").mustfix("Unable to get comments sort value from localStorage")}}},a.componentDidUpdate=function(t,n,r){var e=this.$1;if(e){var o=this.$6();if(o){if(this.state.isAutoscrollingCommentPermalink)return;if(this.props.permalinkedCommentId!==t.permalinkedCommentId||this.props.permalinkedReplyId!==t.permalinkedReplyId||this.props.permalinkedComment!==t.permalinkedComment){this.$9(e,o,this.$7(),!1);return}}this.$10(t,n,r,e,o)}},a.$10=function(t,n,r,a,i){var e=this,l=t.commentSaveIsInFlight&&!this.props.commentSaveIsInFlight,s=r||{},u=s.newCommentCachedOffset,c=t.id===this.props.id&&t.permalinkedCommentId===this.props.permalinkedCommentId&&t.permalinkedReplyId===this.props.permalinkedReplyId&&n.replyPermalinkLastHideTime!==this.state.replyPermalinkLastHideTime,d=this.$8();l&&!t.commentWasReply&&this.$5[0]&&this.$5[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),o("PolarisBatchDOM").measure(function(){var n=null;l&&!t.commentWasReply&&!e.props.hasRankedComments?n=a.scrollHeight:u!=null?n=a.scrollHeight-u:c&&i&&d&&(n=e.$11(a,i,d)),o("PolarisBatchDOM").mutate(function(){n!=null&&(a.scrollTop=n)})})},a.$11=function(t,n,r){var e=m(r,t),o=m(n,t),a=6,i=Math.max(e-a,o);return t.scrollTop>i?i:null},a.getSnapshotBeforeUpdate=function(t,n){var e=t.comments,r=this.props.comments,o=this.$1;return o&&t.id===this.props.id&&r.count()>e.count()&&!this.props.hasRankedComments?{newCommentCachedOffset:o.scrollHeight-o.scrollTop}:null},a.$12=function(){this.setState({replyPermalinkLastHideTime:new Date().valueOf()})},a.render=function(){var e=this,t=this.props,a=t.analyticsContext,i=t.captionAndTitle,l=t.captionCreatedAt,s=t.captionIsEdited,u=t.captionsDisabled,m=t.className,_=t.comments,f=t.commentsDisabled,g=t.commentsHasNextPage,h=t.communityNoteComponent,y=t.disableScroll,C=t.fbCommentCount,b=t.hasCoveredComments,v=t.hasRankedComments,S=t.hideUserAvatar,R=t.id,L=t.initialCommentsLoading,E=t.isFeedFeedbackAggregated,k=t.isOwnerVerified,I=t.loggedIn,T=t.mediaType,D=t.ownerId,x=t.permalinkedComment,$=t.permalinkedReplyId,P=t.postedAt,N=t.reducedAvatarMargin,M=t.requestComments,w=t.showCommentOptionsInline,A=t.showPagerBelowComments,F=f!==!0&&!!g,O=L&&_.size===0,B=C!=null&&C!==0&&T===2,W=C!=null&&C!==0&&E===!0,q=B||W;if((i==null||i==="")&&_.count()===0&&!F&&!O&&!q)return o("PolarisUA").isDesktop()?c.jsxs("div",{className:m,children:[h,c.jsx(r("PolarisNoCommentsPlaceholder.react"),{})]}):c.jsx("div",{className:m});var U=null,V=null,H=null;if(!O&&f!==!0){U=x?c.jsx("div",{className:"_a9z3"+(this.state.commentPermalinkAnimEnabled&&!$?" _a9yl":""),ref:this.$2,children:c.jsx(p,{isPermalinkedComment:!0,onHidePermalinkReply:function(){return e.$12()},parentComment:x,parentProps:this.props,parentState:this.state,permalinkedReplyId:$,permalinkedReplyNodeRef:this.$3,replyPagerNodeRef:this.$4})}):null;var G=function(){var t;return(t=e.props.comments.findIndex(function(e){return e.isAuthorVerified===!1}))!=null?t:-1};V=_.map(function(t,n){return x&&t.id===x.id||t.isCovered===!0?null:c.jsxs(r("IGDSBox.react"),{marginBottom:4,children:[c.jsx(p,{innerRef:function(r){return e.$5[n]=r},parentComment:t,parentProps:e.props,parentState:e.state},n),e.props.sortOrder===o("PolarisSortCommentsUtil").CommentsOptionValues.META_VERIFIED&&G()===n+1&&c.jsx(r("IGDSDivider.react"),{})]},n)}).filter(function(e){return!!e}),H=_.filter(function(e){return e.isCovered===!0}).map(function(t,n){return c.jsx(p,{innerRef:function(r){return e.$5[n]=r},parentComment:t,parentProps:e.props,parentState:e.state},n)})}var z=null;u!==!0&&(r("isStringNullOrEmpty")(i)?h!=null&&(z=c.jsxs(c.Fragment,{children:[h,c.jsx(r("IGDSDivider.react"),{})]})):z=c.jsxs(c.Fragment,{children:[c.jsx(r("PolarisPostComment.react"),{analyticsContext:a,captionCreatedAt:l,className:(o("PolarisUA").isMobile()?"_a9z4":"")+" _a9z5",commentOwnerId:D,communityNoteComponent:h,hideUserAvatar:!!S,isAuthorVerified:!!k,isCaption:!0,isEdited:!!s,isRestrictedPending:!1,loggedIn:I,mediaType:T,postedAt:r("nullthrows")(P),postId:R,postOwnerId:D,reducedAvatarMargin:N,showCommentOptionsInline:w,showRemoveIcon:!1,showRichComment:!0,text:i,variant:o("PolarisPostVariants").VARIANTS.flexible},"captionAndTitle"),h!=null&&c.jsx(r("IGDSDivider.react"),{})]}));var j=F&&this.renderLoadMoreCommentsLink(U!=null),K=v||A===!0,Q=function(t){return M(R,void 0,t)},X=o("PolarisSortCommentsUtil").showCommentsSortOptions(this.props.sortOrder,_.size),Y=function(){return _.some(function(e){return e.isAuthorVerified===!0})},J=this.props.sortOrder===o("PolarisSortCommentsUtil").CommentsOptionValues.META_VERIFIED&&!Y(),Z=c.jsx(r("IGDSBox.react"),{marginEnd:o("PolarisUA").isMobile()?4:0,marginStart:o("PolarisUA").isMobile()?4:0,children:c.jsx(r("IGDSDivider.react"),{})});return c.jsx(o("PolarisCommentsSortContext.react").PolarisCommentsSortContextProvider,{commentsSortOrder:this.state.commentsSortOrder,setCommentsSortOrder:this.$15,children:c.jsx("div",{className:m,children:c.jsxs("ul",{className:"_a9z6"+(y?" _a9z7":"")+(U!==null?" _a9z8":"")+(z===null?" _a9z9":"")+(!j||K?" _a9za":""),ref:function(n){return e.$1=n},children:[z,c.jsxs(r("IGDSBox.react"),{direction:"column",display:"flex",children:[X&&n("cr:1342")!=null&&c.jsx(r("IGDSBox.react"),{marginStart:12,marginTop:2,children:c.jsx(n("cr:1342"),{commentsCount:_.size,fetchComments:Q})}),U]}),O?c.jsx(r("PolarisPostCommentsContainerPlaceholder.react"),{}):null,!K&&j,c.jsxs(r("IGDSBox.react"),{children:[L?c.jsx(r("PolarisPostCommentsContainerPlaceholder.react"),{}):c.jsxs(r("IGDSBox.react"),{children:[J&&c.jsx(r("PolarisCommentsSectionText.react"),{commentsDivider:Z,marginStart:12,text:o("PolarisSortCommentsUtil").NO_META_VERIFIED_COMMENTS}),c.jsxs(r("IGDSBox.react"),{children:[!o("PolarisConfig").isLoggedOutFRXEligible()&&V,K&&j,!j&&b&&!this.state.showHiddenComments&&c.jsx(r("PolarisCommentCover.react"),{onClick:this.$14,postId:R,postOwnerId:D,xstyle:d.commentsCover}),this.state.showHiddenComments&&c.jsxs(c.Fragment,{children:[c.jsx(r("PolarisCommentsSectionText.react"),{commentsDivider:Z,marginStart:12,text:o("PolarisCommentsStrings").COVERED_COMMENTS}),H]})]})]}),q&&c.jsx(r("PolarisFacebookCommentCountSheet.react"),{fbCommentCount:C,isReels:T===2,marginStart:4})]})]})})})},a.renderLoadMoreCommentsLink=function(t){var e=this.props,n=e.code,a=e.commentsIsFetching,i=e.hasRankedComments,l=o("PolarisLinkBuilder").buildMediaCommentsLink(r("nullthrows")(n),o("PolarisUA").isMobile()),s,u;return i?(s=0,u=0):t?(s=2,u=2):(s=0,u=4),c.jsx("li",{children:c.jsx(r("PolarisThreadedCommentsLoadMoreButton.react"),{commentsIsFetching:a,handleLoadMoreCommentsClick:this.$13,marginBottom:u,marginTop:s,url:l})})},t})(c.PureComponent);function f(e,t){var n,r,a,i,l=t.id,s=t.ownerId,u=t.permalinkedCommentId,c=o("PolarisThreadedCommentSelectors").getThreadedCommentsLoading(e,l),d=o("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(e,l),m=(n=e.threadedComments.parentByPostId[l])!=null?n:o("polarisCommentReducer").EMPTY_POST_COMMENTS_STATE,p=m.count,_=m.pagination,f=(r=e.pendingComments[l])!=null?r:o("PolarisPendingCommentState").EMPTY_PENDING_COMMENT,g=null;!c&&u!=null&&u!==""&&(g=e.comments.byId.get(u));var h=(a=(i=e.threadedComments.parentByPostId[l])==null?void 0:i.sortOrder)!=null?a:o("PolarisSortCommentsUtil").CommentsOptionValues.TOP;return{comments:d,commentSaveIsInFlight:f.committing,commentsHasNextPage:o("PolarisPaginationUtils").hasNextPage(_),commentsIsFetching:o("PolarisPaginationUtils").isFetching(_),commentsTotalCount:p!=null?p:0,commentWasReply:f.repliedToCommentId!=null,hasCoveredComments:d.some(function(e){return e.isCovered===!0}),initialCommentsLoading:c,isOwnerVerified:o("polarisUserSelectors").getUserByIdOrThrows(e,s).isVerified,permalinkedComment:g,sortOrder:h}}function g(e){return{loadMore:function(n,r,a){o("PolarisIsLoggedIn").isLoggedIn()&&e(o("PolarisThreadedCommentActions").requestNextParentCommentPageV2(n,r))},requestComments:function(n,r,a){e(o("PolarisThreadedCommentActions").requestInitialComments(n,r,a))}}}var h=o("PolarisReactRedux.react").connect(f,g)(_);function y(e){var t=o("react-compiler-runtime").c(3),n=r("useIGDSToaster")(),a=n.add,i;return t[0]!==a||t[1]!==e?(i=c.jsx(h,babelHelpers.extends({add:a},e)),t[0]=a,t[1]=e,t[2]=i):i=t[2],i}var C=y;l.default=C}),226);
__d("PolarisThreadedCommentsLoader.react",["CometErrorBoundary.react","CometPlaceholder.react","FBLogger","IGDSBox.react","IGDSSpinner.react","PolarisReactRedux.react","PolarisThreadedCommentActions","react","react-compiler-runtime","usePolarisGetQuerySetup"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.children,a=e.initialCommentsQuery,i=e.postId,l;return t[0]!==i?(l=o("PolarisThreadedCommentActions").setupPostComments(i),t[0]=i,t[1]=l):l=t[1],r("usePolarisGetQuerySetup")(a,l),n}function c(e){var t=o("react-compiler-runtime").c(11),n=e.children,a=e.initialCommentsQuery,l=e.postId,c=o("PolarisReactRedux.react").useDispatch(),m;t[0]!==c||t[1]!==l?(m=function(t){c(o("PolarisThreadedCommentActions").initialCommentsError(l)),r("FBLogger")("ig_web").catching(t)},t[0]=c,t[1]=l,t[2]=m):m=t[2];var p=m,_;t[3]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(r("IGDSBox.react"),{direction:"row",justifyContent:"center",position:"relative",children:s.jsx(r("IGDSSpinner.react"),{})}),t[3]=_):_=t[3];var f;t[4]!==n||t[5]!==a||t[6]!==l?(f=s.jsx(r("CometPlaceholder.react"),{fallback:_,name:i.id,children:s.jsx(u,{initialCommentsQuery:a,postId:l,children:n})}),t[4]=n,t[5]=a,t[6]=l,t[7]=f):f=t[7];var g;return t[8]!==p||t[9]!==f?(g=s.jsx(r("CometErrorBoundary.react"),{fallback:d,onError:p,type:"warn",children:f}),t[8]=p,t[9]=f,t[10]=g):g=t[10],g}function d(){return null}l.default=c}),98);
__d("PolarisPostComments.react",["PolarisDeleteCommentModal.react","PolarisPostRemoveCommentsSelectors","PolarisPostVariants","PolarisReactRedux.react","PolarisThreadedComments.react","PolarisThreadedCommentsLoader.react","PolarisUA","nullthrows","polarisUserSelectors","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={commentToDeleteId:null,showDeleteCommentModal:!1},t.$1=function(e){t.setState({commentToDeleteId:e,showDeleteCommentModal:!0})},t.$2=function(){t.setState({commentToDeleteId:null,showDeleteCommentModal:!1})},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$3=function(){return this.props.variant!==o("PolarisPostVariants").VARIANTS.feed&&!o("PolarisUA").isMobile()},n.render=function(){var e=this.props,t=e.analyticsContext,n=e.caption,o=e.captionCreatedAt,a=e.captionIsEdited,i=e.captionsDisabled,l=e.className,u=e.code,c=e.commentingDisabledForViewer,d=e.commentsDisabled,m=e.communityNoteComponent,p=e.customIndentationPadding,_=e.fbCommentCount,f=e.hasRankedComments,g=e.hideUserAvatar,h=e.id,y=e.initialCommentsQuery,C=e.isFeedFeedbackAggregated,b=e.mediaType,v=e.onLikeCountClick,S=e.ownerId,R=e.permalinkedCommentId,L=e.permalinkedReplyId,E=e.postedAt,k=e.reducedAvatarMargin,I=e.showCommentOptionsInline,T=e.showRemoveCommentIcons,D=e.viewerId,x=D!=null,$;return $=s.jsx(r("PolarisThreadedComments.react"),{analyticsContext:t,captionAndTitle:n,captionCreatedAt:o,captionIsEdited:a,captionsDisabled:i,className:l,code:u,commentingDisabledForViewer:c,commentsDisabled:d,communityNoteComponent:m,customIndentationPadding:p,fbCommentCount:_,handleDeleteCommentClick:this.$1,hasRankedComments:f,hideUserAvatar:!!g,id:h,isDeletingComments:T,isFeedFeedbackAggregated:C,loggedIn:x,mediaType:b,onLikeCountClick:v,ownerId:S,permalinkedCommentId:R,permalinkedReplyId:L,postedAt:E,reducedAvatarMargin:k,showCommentOptionsInline:I}),y!=null&&($=s.jsx(r("PolarisThreadedCommentsLoader.react"),{initialCommentsQuery:y,postId:h,children:$})),s.jsxs(s.Fragment,{children:[$,this.state.showDeleteCommentModal&&s.jsx(r("PolarisDeleteCommentModal.react"),{analyticsContext:t,commentId:r("nullthrows")(this.state.commentToDeleteId),onClose:this.$2,postId:h})]})},t})(s.PureComponent);u.defaultProps={variant:o("PolarisPostVariants").VARIANTS.flexible};function c(e){var t;return{showRemoveCommentIcons:o("PolarisPostRemoveCommentsSelectors").getPostRemoveCommentsIsVisible(e),viewerId:(t=o("polarisUserSelectors").getViewer__DEPRECATED(e))==null?void 0:t.id}}var d=o("PolarisReactRedux.react").connect(c)(u);l.default=d}),98);
__d("PolarisPostFastPreviewCaption.react",["IGDSBox.react","PolarisPostFastCommentPrimitive.react","PolarisPostFastCrawlerComment.react","PolarisUA","nullthrows","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisIsOnFeedPage","usePolarisPost"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(10),n=e.enableTruncation,a=e.inModal,i=e.postId,l=r("usePolarisIsOnFeedPage")(),u=l&&a!==!0&&o("PolarisUA").isDesktop(),g=o("usePolarisPost").usePostAndOwner(i,f),h=o("usePolarisPost").usePostAndOwner(i,_),y=o("usePolarisPost").usePostAndOwner(i,p),C=o("usePolarisPost").usePostAndOwner(i,m),b=o("usePolarisPost").usePost(i,d),v=o("usePolarisPost").usePost(i,c),S=o("polarisCommentSelectors.react").useCommentTranslation(v);if(b==null||b==="")return null;(S==null?void 0:S.showTranslatedText)===!0&&S.translatedText!=null&&(b=S.translatedText);var R=u?2:1,L;t[0]!==n||t[1]!==C||t[2]!==y||t[3]!==b||t[4]!==g||t[5]!==h?(L=n===!0?s.jsx(r("PolarisPostFastCrawlerComment.react"),{isAuthorUnpublished:C,isAuthorVerified:y,text:b,userId:g,username:h}):s.jsx(r("PolarisPostFastCommentPrimitive.react"),{isAuthorUnpublished:C,isAuthorVerified:y,isCaption:!0,text:b,userId:g,username:h}),t[0]=n,t[1]=C,t[2]=y,t[3]=b,t[4]=g,t[5]=h,t[6]=L):L=t[6];var E;return t[7]!==R||t[8]!==L?(E=s.jsx(r("IGDSBox.react"),{marginBottom:R,position:"relative",children:L}),t[7]=R,t[8]=L,t[9]=E):E=t[9],E}function c(e){return e.captionCommentId}function d(e){return e.caption}function m(e,t){return t.isUnpublished}function p(e,t){return t.isVerified}function _(e,t){return r("nullthrows")(t.username)}function f(e,t){return r("nullthrows")(t.id)}l.default=u}),98);
__d("PolarisPostFastCommentLikeButton.react",["PolarisCommentActions","PolarisConfig","PolarisInteractionsLogger","PolarisLikeButton.react","PolarisReactRedux.react","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisComment","usePolarisPost"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){var n=o("react-compiler-runtime").c(8),a=o("usePolarisComment").useComment(e,d),i=o("usePolarisPost").usePost(t,o("PolarisInteractionsLogger").getMediaTypeFromPost),l=o("usePolarisPost").usePostAndOwner(t,c),s=r("usePolarisAnalyticsContext")(),u;if(n[0]===Symbol.for("react.memo_cache_sentinel")){var m;u=(m=o("PolarisConfig").getViewerId())!=null?m:"",n[0]=u}else u=n[0];var p;return n[1]!==s||n[2]!==a||n[3]!==e||n[4]!==t||n[5]!==l||n[6]!==i?(p={commentAuthorId:a,commentId:e,containerModule:s,mediaAuthorId:l,mediaId:t,mediaType:i,userId:u},n[1]=s,n[2]=a,n[3]=e,n[4]=t,n[5]=l,n[6]=i,n[7]=p):p=n[7],p}function c(e,t){return t.id}function d(e){return e.id}function m(e){var t=o("react-compiler-runtime").c(7),n=e.color,a=e.commentId,i=e.postId,l=o("PolarisReactRedux.react").useDispatch(),c=u(a,i),d=o("usePolarisComment").useComment(a,p),m;t[0]!==l||t[1]!==c?(m=function(t){l(t?o("PolarisCommentActions").likeComment(c):o("PolarisCommentActions").unlikeComment(c))},t[0]=l,t[1]=c,t[2]=m):m=t[2];var _=m,f;return t[3]!==n||t[4]!==d||t[5]!==_?(f=s.jsx(r("PolarisLikeButton.react"),{color:n,isLiked:d,onChange:_,padding:0,size:12}),t[3]=n,t[4]=d,t[5]=_,t[6]=f):f=t[6],f}function p(e){return e.likedByViewer}var _=s.memo(m);l.default=_}),98);
__d("PolarisPostFastPreviewComment.react",["PolarisPostFastCommentPrimitive.react","nullthrows","react","react-compiler-runtime","usePolarisComment"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t,n=o("react-compiler-runtime").c(5),a=e.commentId,i=(t=o("usePolarisComment")).useCommentAndOwner(a,p),l=t.useCommentAndOwner(a,m),u=t.useComment(a,d),_=t.useComment(a,c),f;return n[0]!==_||n[1]!==u||n[2]!==i||n[3]!==l?(f=s.jsx(r("PolarisPostFastCommentPrimitive.react"),{isAuthorVerified:_,text:u,userId:i,username:l}),n[0]=_,n[1]=u,n[2]=i,n[3]=l,n[4]=f):f=n[4],f}function c(e){return e.isAuthorVerified}function d(e){return e.text}function m(e,t){return r("nullthrows")(t.username)}function p(e,t){return r("nullthrows")(t.id)}l.default=u}),98);
__d("PolarisPostFastViewAllComments.react",["fbt","IGDSText.react","PolarisBigNumber.react","PolarisConfig","PolarisFastLink.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisReactRedux.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","logPolarisPostModalOpen","nullthrows","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentEntryPointDialog","usePolarisPost"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext;function p(e){var t=o("react-compiler-runtime").c(26),n=e.postId,a=o("usePolarisPost").usePost(n,f),i=o("usePolarisPost").usePost(n,_),l=o("usePolarisPost").usePost(n,o("PolarisInteractionsLogger").getMediaTypeFromPost),c=m(o("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),d=c.canUserSeePersistentCta,p;t[0]!==d?(p=function(t){var e;return r("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((e={},e[o("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=d||void 0,e.shortcode=r("nullthrows")(t.code),e))},t[0]=d,t[1]=p):p=t[1];var g=o("usePolarisPost").usePost(n,p),h=o("PolarisReactRedux.react").useDispatch(),y=r("usePolarisAnalyticsContext")(),C=m(o("PolarisInFeedPostModalContext").InFeedPostModalContext),b;t[2]===Symbol.for("react.memo_cache_sentinel")?(b=!o("PolarisIsLoggedIn").isLoggedIn()&&o("PolarisUA").isMobile(),t[2]=b):b=t[2];var v=b,S;t[3]===Symbol.for("react.memo_cache_sentinel")?(S=v||o("PolarisIsLoggedIn").isLoggedIn()&&o("PolarisUA").isDesktop(),t[3]=S):S=t[3];var R=S,L=r("usePolarisLoggedOutBlockingEntryPointDialog")(),E=L[0],k=L[1],I=r("usePolarisLoggedOutIntentEntryPointDialog")(),T=I[0],D=I[1],x;t[4]!==k||t[5]!==D?(x=function(){o("PolarisUA").isDesktop()||o("PolarisConfig").isLoggedOutFRXEligible()?D==null||D(!0):k==null||k(!0)},t[4]=k,t[5]=D,t[6]=x):x=t[6];var $=x,P;t[7]!==y||t[8]!==h||t[9]!==C||t[10]!==E||t[11]!==T||t[12]!==i||t[13]!==n||t[14]!==l?(P=function(t,a){if(o("PolarisIsLoggedIn").isLoggedIn())o("PolarisInteractionsLogger").logInteractionAction({containerModule:y,eventName:"instagram_organic_comment_view_all",mediaAuthorId:i,mediaId:n,mediaType:l}),o("PolarisUA").isDesktop()&&(t.preventDefault(),h(o("PolarisFeedActionOpenPostModalForId").openPostModalForId(n)),r("logPolarisPostModalOpen")(y,l,"feed_view_all_comments"),C(n));else if(v){t.preventDefault();var e={contentReportingLink:n,nextUrl:a,source:"post_comment_view_all"};o("PolarisUA").isDesktop()||o("PolarisConfig").isLoggedOutFRXEligible()?T==null||T(e):E==null||E(e)}},t[7]=y,t[8]=h,t[9]=C,t[10]=E,t[11]=T,t[12]=i,t[13]=n,t[14]=l,t[15]=P):P=t[15];var N=P,M;t[16]!==N||t[17]!==g?(M=function(t){return N(t,g)},t[16]=N,t[17]=g,t[18]=M):M=t[18];var w;t[19]!==a?(w=u.jsx(r("IGDSText.react"),{color:"secondaryText",zeroMargin:!0,children:a===1?s._(/*BTDS*/"View 1 comment"):s._(/*BTDS*/"View all {count} comments",[s._param("count",u.jsx(r("PolarisBigNumber.react"),{value:a}))])}),t[19]=a,t[20]=w):w=t[20];var A;return t[21]!==$||t[22]!==M||t[23]!==w||t[24]!==g?(A=u.jsx(r("PolarisFastLink.react"),{"data-testid":void 0,href:g,onClick:M,onMouseEnter:$,shouldOpenModal:R,children:w}),t[21]=$,t[22]=M,t[23]=w,t[24]=g,t[25]=A):A=t[25],A}function _(e){var t;return r("nullthrows")((t=e.owner)==null?void 0:t.id)}function f(e){return e.numComments||0}l.default=p}),226);
__d("PolarisPostFastPreviewCommentsList.react",["IGDSBox.react","PolarisConfig","PolarisIsLoggedIn","PolarisPostFastCommentLikeButton.react","PolarisPostFastPreviewComment.react","PolarisPostFastViewAllComments.react","PolarisReactRedux.react","PolarisThreadedCommentSelectors","PolarisUA","isTruthy","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePolarisPost"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(13),n=e.postId,a=e.previewCommentIds,i=r("usePolarisIsOnFeedPage")(),l=r("usePolarisIsOnAdsActivityPage")(),u;t[0]!==l||t[1]!==i?(u=(i||l)&&o("PolarisUA").isDesktop(),t[0]=l,t[1]=i,t[2]=u):u=t[2];var c=u,d=c;if(o("PolarisConfig").isLoggedOutFRXEligible())return null;if(a.length>0){var m=c?1:0,p;if(t[3]!==d||t[4]!==n||t[5]!==a){var _;t[7]!==d||t[8]!==n?(_=function(t){return s.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",marginBottom:1,position:"relative",children:[s.jsx(r("PolarisPostFastPreviewComment.react"),{commentId:t}),o("PolarisIsLoggedIn").isLoggedIn()&&s.jsx(r("IGDSBox.react"),{marginStart:d?2:0,position:"relative",children:s.jsx(r("PolarisPostFastCommentLikeButton.react"),{color:d?"ig-secondary-icon":void 0,commentId:t,postId:n})})]},t)},t[7]=d,t[8]=n,t[9]=_):_=t[9],p=a.map(_),t[3]=d,t[4]=n,t[5]=a,t[6]=p}else p=t[6];var f;return t[10]!==m||t[11]!==p?(f=s.jsx(r("IGDSBox.react"),{marginBottom:m,position:"relative",children:p}),t[10]=m,t[11]=p,t[12]=f):f=t[12],f}return null}function d(e){var t=o("react-compiler-runtime").c(26),n=e.inModal,a=e.postId,i=e.shouldIncreaseCommentPreviews,l=i===void 0?!1:i,u=r("usePolarisIsOnFeedPage")(),d;t[0]!==n||t[1]!==u?(d=u&&n!==!0&&o("PolarisUA").isDesktop(),t[0]=n,t[1]=u,t[2]=d):d=t[2];var f=d,g;t[3]!==l?(g=r("isTruthy")(l),t[3]=l,t[4]=g):g=t[4];var h=g,y=o("usePolarisPost").usePost(a,_),C;t[5]!==h||t[6]!==a?(C=function(t){return h?o("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(t,a).toArray():o("polarisCommentSelectors.react").getPreviewCommentsForPostId(t,a)},t[5]=h,t[6]=a,t[7]=C):C=t[7];var b=o("PolarisReactRedux.react").useSelector(C),v;t[8]!==b?(v=b.map(p),t[8]=b,t[9]=v):v=t[9];var S=v,R=o("usePolarisPost").usePost(a,m),L=R>S.length;if(!y||R<=0)return null;var E;t[10]!==S.length||t[11]!==h?(E=!o("PolarisIsLoggedIn").isLoggedIn()&&S.length>0&&!h,t[10]=S.length,t[11]=h,t[12]=E):E=t[12];var k=E,I;t[13]!==L||t[14]!==f||t[15]!==a?(I=L&&s.jsx(r("IGDSBox.react"),{alignItems:"start",marginBottom:f?2:1,position:"relative",children:s.jsx(r("PolarisPostFastViewAllComments.react"),{postId:a})}),t[13]=L,t[14]=f,t[15]=a,t[16]=I):I=t[16];var T;t[17]!==S||t[18]!==k?(T=k?S.slice(-1):S,t[17]=S,t[18]=k,t[19]=T):T=t[19];var D;t[20]!==a||t[21]!==T?(D=s.jsx(c,{postId:a,previewCommentIds:T}),t[20]=a,t[21]=T,t[22]=D):D=t[22];var x;return t[23]!==I||t[24]!==D?(x=s.jsxs(s.Fragment,{children:[I,D]}),t[23]=I,t[24]=D,t[25]=x):x=t[25],x}function m(e){var t;return(t=e.numComments)!=null?t:0}function p(e){return e.id}function _(e){return!e.commentsDisabled}l.default=d}),98);
__d("PolarisPostPreviewCommentsPicker.react",["CometPlaceholder.react","IGDSBox.react","IGDSSpinner.react","PolarisPostCaptionTranslationPrompt.react","PolarisPostComments.react","PolarisPostFastPreviewCaption.react","PolarisPostFastPreviewCommentsList.react","PolarisPostVariants","PolarisUA","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","xigRequireInterop"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(34),a=r("usePolarisIsOnFeedPage")(),l=r("usePolarisIsOnAdsActivityPage")(),u;t[0]!==l||t[1]!==a?(u=(a||l)&&o("PolarisUA").isDesktop(),t[0]=l,t[1]=a,t[2]=u):u=t[2];var c=u,d=e.variant!==o("PolarisPostVariants").VARIANTS.feed&&!o("PolarisUA").isMobile(),m=e.communityNoteComponent;if(d){var p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(r("IGDSSpinner.react"),{position:"absolute"}),t[3]=p):p=t[3];var _;t[4]!==e.className?(_=s.jsx("div",{className:e.className,children:p}),t[4]=e.className,t[5]=_):_=t[5];var f;t[6]!==e?(f=s.jsx(r("PolarisPostComments.react"),babelHelpers.extends({},e)),t[6]=e,t[7]=f):f=t[7];var g;return t[8]!==_||t[9]!==f?(g=s.jsx(r("CometPlaceholder.react"),{fallback:_,name:i.id,children:f}),t[8]=_,t[9]=f,t[10]=g):g=t[10],g}var h;t[11]===Symbol.for("react.memo_cache_sentinel")?(h=r("xigRequireInterop")(n("PolarisPostFastPreviewCommentsList.react")),t[11]=h):h=t[11];var y=h.default,C;t[12]===Symbol.for("react.memo_cache_sentinel")?(C=r("xigRequireInterop")(n("PolarisPostFastPreviewCaption.react")),t[12]=C):C=t[12];var b=C.default,v;t[13]!==b||t[14]!==e.enableTruncation||t[15]!==e.id||t[16]!==e.inModal?(v=s.jsx(b,{enableTruncation:e.enableTruncation,inModal:e.inModal,postId:e.id}),t[13]=b,t[14]=e.enableTruncation,t[15]=e.id,t[16]=e.inModal,t[17]=v):v=t[17];var S;t[18]!==c||t[19]!==e.id?(S=c&&s.jsx(r("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,marginBottom:2,postId:e.id}),t[18]=c,t[19]=e.id,t[20]=S):S=t[20];var R;t[21]!==y||t[22]!==e.id||t[23]!==e.inModal||t[24]!==e.shouldIncreaseCommentPreviews?(R=s.jsx(y,{inModal:e.inModal,postId:e.id,shouldIncreaseCommentPreviews:e.shouldIncreaseCommentPreviews}),t[21]=y,t[22]=e.id,t[23]=e.inModal,t[24]=e.shouldIncreaseCommentPreviews,t[25]=R):R=t[25];var L;t[26]!==m||t[27]!==v||t[28]!==S||t[29]!==R?(L=s.jsxs(r("IGDSBox.react"),{position:"relative",children:[v,S,m,R]}),t[26]=m,t[27]=v,t[28]=S,t[29]=R,t[30]=L):L=t[30];var E;return t[31]!==e.className||t[32]!==L?(E=s.jsx("div",{className:e.className,children:L}),t[31]=e.className,t[32]=L,t[33]=E):E=t[33],E}l.default=u}),98);
__d("PolarisPostLikers.react",["IGDSBox.react","IGDSText.react","IGRouter_DO_NOT_USE.react","PolarisFacepile.next.react","PolarisLikedByListActions","PolarisLikedByListButton.react","PolarisLikedByText.react","PolarisLinkBuilder","PolarisPostUtils","PolarisReactRedux.react","PolarisUA","polarisLogAction","react","react-compiler-runtime","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentEntryPointDialog","usePolarisLoggedOutShowIncreasedFeatureWalls"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback,c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$2=function(){n.props.onLike()},n.$3=function(e){n.$1(),!n.props.viewer&&n.props.inModal!==!0?(e.preventDefault(),n.props.onGoToLoginModal(n.props.code)):o("PolarisUA").isDesktop()&&(e.preventDefault(),n.props.onViewLikedByList(n.props.mediaId),n.props.onLikeCountClick(e))},n.$4=function(){!n.props.viewer&&n.props.inModal!==!0&&n.props.onPreloadDialog()},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$1=function(){r("polarisLogAction")("likeCountClick")},n.render=function(){var e=o("PolarisPostUtils").getOrderedUsersForLikedByList(this.props.users,this.props.viewer).map(function(e){return e.profilePictureUrl}).filter(Boolean),t=s.jsx(r("PolarisFacepile.next.react"),{avatarSize:this.props.avatarSize,border:"transparent",userProfilePicUrls:e}),n=!!this.props.viewer;return s.jsxs(r("IGDSBox.react"),{direction:"row",flex:"grow",position:"relative",children:[e.length>0&&n===!0&&s.jsx(r("IGDSBox.react"),{alignItems:"start",direction:"column",justifyContent:"start",marginEnd:1,position:"relative",children:s.jsx(r("PolarisLikedByListButton.react"),{code:this.props.code,fbLikeCount:this.props.fbLikeCount,inModal:this.props.inModal,isFeedbackAggregated:this.props.isFeedbackAggregated,isFeedFeedbackAggregated:this.props.isFeedFeedbackAggregated,isSharedToFb:this.props.isSharedToFb,onClick:this.$3,onMouseEnter:this.$4,children:t})}),s.jsx(r("IGDSBox.react"),{alignItems:"start",direction:"column",flex:"grow",margin:"auto",position:"relative",wrap:!0,children:s.jsx(r("IGDSText.react"),{zeroMargin:!0,children:s.jsx(r("PolarisLikedByText.react"),{code:this.props.code,hideCounts:this.props.hideCounts,inModal:!!this.props.inModal,mediaId:this.props.mediaId,onClick:this.$3,onLike:this.$2,onMouseEnter:this.$4,topLikers:this.props.topLikers,totalCount:this.props.totalCount,users:this.props.users})})})]})},t})(s.Component);function d(e){return{onViewLikedByList:function(n){return e(o("PolarisLikedByListActions").requestNativeLikedByList(n))}}}function m(e){var t=o("react-compiler-runtime").c(12),n=r("usePolarisLoggedOutBlockingEntryPointDialog")(),a=n[0],i=n[1],l=r("usePolarisLoggedOutIntentEntryPointDialog")(),u=l[0],d=l[1],m=r("usePolarisLoggedOutShowIncreasedFeatureWalls")(),p;t[0]!==i||t[1]!==d||t[2]!==m?(p=function(){m()?d==null||d(!0):i==null||i(!0)},t[0]=i,t[1]=d,t[2]=m,t[3]=p):p=t[3];var _=p,f;t[4]!==a||t[5]!==u||t[6]!==m?(f=function(t){var e=o("PolarisLinkBuilder").buildMediaLink(t),n={contentReportingLink:e,nextUrl:e,source:"post_likers"};m()?u==null||u(n):a==null||a(n)},t[4]=a,t[5]=u,t[6]=m,t[7]=f):f=t[7];var g=f,h;return t[8]!==g||t[9]!==_||t[10]!==e?(h=s.jsx(c,babelHelpers.extends({},e,{onGoToLoginModal:g,onPreloadDialog:_})),t[8]=g,t[9]=_,t[10]=e,t[11]=h):h=t[11],h}var p=o("IGRouter_DO_NOT_USE.react").withIGRouter(o("PolarisReactRedux.react").connect(null,d)(m));l.default=p}),98);
__d("PolarisPostSocialProof.react",["PolarisPostLikers.react","PolarisPostVariants","PolarisPostViews.react","PolarisShouldHideLikeCountsWithControls","PolarisUA","nullthrows","polarisGetPostFromGraphMediaInterface","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(36),n=e.analyticsContext,a=e.canLike,i=e.className,l=e.code,u=e.containerRef,c=e.fbLikeCount,d=e.inModal,m=e.isFeedbackAggregated,p=e.isFeedFeedbackAggregated,_=e.isSharedToFb,f=e.likeAndViewCountsDisabled,g=e.likedByViewer,h=e.likers,y=e.mediaId,C=e.numPreviewLikes,b=e.onLikeChange,v=e.onLikeCountClick,S=e.productType,R=e.topLikers,L=e.variant,E=e.videoViews,k=e.viewer,I=e.viewerIsOwner,T=E!=null&&E>0,D=C!==0,x=r("usePolarisIsOnFeedPage")(),$=r("usePolarisIsOnAdsActivityPage")(),P;L===o("PolarisPostVariants").VARIANTS.feed?P=D||T:P=D||T||a;var N=k==null?void 0:k.hideLikeAndViewCounts,M;t[0]!==f||t[1]!==N||t[2]!==I?(M=o("PolarisShouldHideLikeCountsWithControls").shouldHideLikeCountsWithControls(N,f,I),t[0]=f,t[1]=N,t[2]=I,t[3]=M):M=t[3];var w=M,A;t[4]!==T||t[5]!==w||t[6]!==S?(A=T&&!w&&!o("polarisGetPostFromGraphMediaInterface").isClipsProductType(S),t[4]=T,t[5]=w,t[6]=S,t[7]=A):A=t[7];var F=A;if(!P)return null;var O;t[8]!==d||t[9]!==$||t[10]!==x?(O=(x||$)&&d!==!0&&o("PolarisUA").isDesktop(),t[8]=d,t[9]=$,t[10]=x,t[11]=O):O=t[11];var B=O,W;t[12]!==n||t[13]!==l||t[14]!==B||t[15]!==c||t[16]!==w||t[17]!==d||t[18]!==p||t[19]!==m||t[20]!==_||t[21]!==g||t[22]!==h||t[23]!==y||t[24]!==C||t[25]!==b||t[26]!==v||t[27]!==F||t[28]!==R||t[29]!==E||t[30]!==k?(W=F?s.jsx(r("PolarisPostViews.react"),{analyticsContext:n,likeCount:C,viewCount:r("nullthrows")(E)}):s.jsx(r("PolarisPostLikers.react"),{avatarSize:B?"micro":void 0,code:l,fbLikeCount:c,hideCounts:w,inModal:!!d,isFeedbackAggregated:m,isFeedFeedbackAggregated:p,isSharedToFb:_,likedByViewer:g,mediaId:y,onLike:function(){b(!0,"beTheFirstPrompt")},onLikeCountClick:v,topLikers:R,totalCount:C,users:h,viewer:k}),t[12]=n,t[13]=l,t[14]=B,t[15]=c,t[16]=w,t[17]=d,t[18]=p,t[19]=m,t[20]=_,t[21]=g,t[22]=h,t[23]=y,t[24]=C,t[25]=b,t[26]=v,t[27]=F,t[28]=R,t[29]=E,t[30]=k,t[31]=W):W=t[31];var q;return t[32]!==i||t[33]!==u||t[34]!==W?(q=s.jsx("section",{className:i,ref:u,children:W}),t[32]=i,t[33]=u,t[34]=W,t[35]=q):q=t[35],q}l.default=u}),98);
__d("PolarisPostDetailsSection.react",["IGDSBox.react","IGDSText.react","PolarisCommentLikedByListContainerLazy.react","PolarisFeedPageConstants","PolarisGenericStrings","PolarisHotKeys.react","PolarisIGTheme.react","PolarisInteractionsLogger","PolarisLikedByListContainerLazy.react","PolarisLikedByListVariant","PolarisMediaOverlayCommunityNote","PolarisMediaOverlayInfoTypes","PolarisPendingCommentState","PolarisPostCaptionTranslationPrompt.react","PolarisPostCommentInputPicker.react","PolarisPostConstants","PolarisPostFeatures.react","PolarisPostFeedbackControls_DEPRECATED.react","PolarisPostFooter.react","PolarisPostModalRenderingContext.react","PolarisPostPreviewCommentsPicker.react","PolarisPostSocialProof.react","PolarisPostTimestamp.react","PolarisPostVariants","PolarisReactRedux.react","PolarisUA","isStringNullOrEmpty","nullthrows","polarisAdsSelectors.react","polarisGetAppPlatform","react","react-compiler-runtime","stylex","usePolarisDisplayProperties","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useMemo,p=c.useRef,_=c.useState,f={commentInput:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},commentInputAsSidebar:{order:"x1hrcb2b",$$css:!0},commentInputHidden:{display:"x1s85apg",minHeight:"x1wxaq2x",$$css:!0},commentInputStatic:{paddingInlineEnd:"xv54qhq",$$css:!0},commentInputV2:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},commentInputV2WithRichComments:{paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",$$css:!0},comments:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",overflowX:"xw2csxc",overflowY:"x1odjw0f",position:"x1n2onr6",$$css:!0},commentsAsSidebar:{marginTop:"xdj266r",marginInlineEnd:"xule2z1",marginBottom:"xat24cr",marginInlineStart:"xwqyzqf",order:"x9ek82g",overflowX:"x6ikm8r",$$css:!0},commentsMarginBottom:{marginBottom:"x12nagc",$$css:!0},commentsMarginBottomDense:{marginBottom:"xat24cr",$$css:!0},commentsV2:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"x4ii5y1",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xpdmqnj",paddingBottom:"x18d9i69",paddingInlineStart:"x1g0dm76",$$css:!0},commentsWithRichComments:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"x4ii5y1",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",$$css:!0},expandedSidebarContainerResponsive:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1t39747",borderEndEndRadius:"x1wcsgtt",borderEndStartRadius:"xbiv7yw",$$css:!0},feedback:{marginTop:"x1gslohp",paddingBottom:"xwib8y2",paddingTop:"x1yrsyyn",$$css:!0},feedbackAsSidebar:{borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",order:"xo1ph6p",$$css:!0},feedbackV2:{paddingBottom:"x10b6aqq",paddingTop:"xexx8yu",$$css:!0},feedbackV2WithRichComments:{paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",$$css:!0},feedbackWithRichComments:{paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0},msite:{borderBottomColor:"xh05dso",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",$$css:!0},responsiveViewInsights:{marginInlineStart:"x162z183",width:"x1j7kr1c",$$css:!0},roundedSidebarContainer:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1ga7v0g",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0},sectionWithNoPadding:{overflowX:"x1plvlek",overflowY:"xryxfnj",paddingInlineEnd:"xyri2b",paddingInlineStart:"x1c1uobl",$$css:!0},sidebarContainer:{display:"x78zum5",flexDirection:"xdt5ytf",pointerEvents:"x67bb7w",position:"x1n2onr6",$$css:!0},sidebarContainerAsSidebar:{backgroundColor:"xvbhtw8",height:"x5yr21d",width:"x4h1yfo",$$css:!0},sidebarContainerFeedRoot:{backgroundColor:"xvbhtw8",$$css:!0},sidebarContainerInModal:{backgroundColor:"xvbhtw8",height:"x5yr21d",$$css:!0},sidebarContainerV2:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0},timestamp:{marginBottom:"x1yztbdb",$$css:!0},timestampAsSidebar:{order:"x1h3rv7z",$$css:!0},timestampDense:{marginBottom:"x1e56ztr",$$css:!0},timestampV2:{paddingInlineStart:"x1g0dm76",$$css:!0},timestampWithRichComments:{paddingInlineStart:"xf7dkkf",$$css:!0},viewInsights:{borderBottomStyle:"x1sy0etr",borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",order:"x14yy4lh",$$css:!0}};function g(t){var n,a,i,l,s=o("react-compiler-runtime").c(98),c=t.analyticsContext,m=t.bloksAppId,g=t.communityNoteComponent,C=t.currSidecarIndex,b=t.currSidecarItem,v=t.enableTruncation,S=t.handleLikeChange,R=t.handleSaveChange,L=t.hasDenserFeedRedesign,E=t.hasSidebarInRedesign,k=t.hasViewInsights,I=t.initialCommentsQuery,T=t.owner,D=t.permalinkedCommentId,x=t.permalinkedReplyId,$=t.post,P=t.postAuthorId,N=t.postAuthorUsername,M=t.postFeedbackControlsRef,w=t.postHeader,A=t.redesignWithoutSidebar,F=t.redesignWithSidebar,O=t.shouldIncreaseCommentPreviews,B=t.showDetailsAsSidebar,W=t.variant,q=t.viewer,U;if(s[0]!==T.followedByViewer||s[1]!==((n=$.mediaOverlayInfo)==null?void 0:n.overlay_type)){var V,H;U=((V=$.mediaOverlayInfo)==null||(V=V.overlay_type)==null?void 0:V.toUpperCase())==="EARLY_ACCESS"&&T.followedByViewer!==!0,s[0]=T.followedByViewer,s[1]=(H=$.mediaOverlayInfo)==null?void 0:H.overlay_type,s[2]=U}else U=s[2];var G=U,z;if(s[3]!==$.commentsDisabled||s[4]!==((a=$.mediaOverlayInfo)==null?void 0:a.overlay_type)||s[5]!==G){var j,K;z=$.commentsDisabled===!0||((j=$.mediaOverlayInfo)==null||(j=j.overlay_type)==null?void 0:j.toUpperCase())==="SECRET_LINK"||G,s[3]=$.commentsDisabled,s[4]=(K=$.mediaOverlayInfo)==null?void 0:K.overlay_type,s[5]=G,s[6]=z}else z=s[6];var Q=z,X;s[7]===Symbol.for("react.memo_cache_sentinel")?(X=o("PolarisUA").isDesktop(),s[7]=X):X=s[7];var Y=!X,J=_(null),Z=J[0],ee=J[1],te=_(!1),ne=te[0],re=te[1],oe=_(!1),ae=oe[0],ie=oe[1],le=r("usePolarisDisplayProperties")(),se=le.viewportWidth,ue=p(null),ce;s[8]!==Q||s[9]!==ae||s[10]!==$.commentingDisabledForViewer||s[11]!==se?(ce=function(){return!Q&&$.commentingDisabledForViewer!==!0&&(ae||se>=o("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF)},s[8]=Q,s[9]=ae,s[10]=$.commentingDisabledForViewer,s[11]=se,s[12]=ce):ce=s[12];var de=ce,me;s[13]!==$.id?(me=function(t){var e;return(e=t.pendingComments[$.id])!=null?e:o("PolarisPendingCommentState").EMPTY_PENDING_COMMENT},s[13]=$.id,s[14]=me):me=s[14];var pe=o("PolarisReactRedux.react").useSelector(me),_e=pe.committing,fe=r("usePrevious")(_e),ge=o("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext(),he=ge.isInModal,ye;s[15]===Symbol.for("react.memo_cache_sentinel")?(ye=function(){ie(!0),ue.current&&ue.current.focusAndScroll()},s[15]=ye):ye=s[15];var Ce=ye,be;s[16]===Symbol.for("react.memo_cache_sentinel")?(be=function(){re(!1)},s[16]=be):be=s[16];var ve=be,Se;s[17]===Symbol.for("react.memo_cache_sentinel")?(Se=function(t){re(!0)},s[17]=Se):Se=s[17];var Re=Se,Le;s[18]===Symbol.for("react.memo_cache_sentinel")?(Le=function(){ee(null)},s[18]=Le):Le=s[18];var Ee=Le,ke;s[19]===Symbol.for("react.memo_cache_sentinel")?(ke=function(t){ee(t)},s[19]=ke):ke=s[19];var Ie=ke,Te;s[20]!==$.commentsDisabled||s[21]!==q?(Te=q?{c:function(){$.commentsDisabled!==!0&&Ce()}}:{},s[20]=$.commentsDisabled,s[21]=q,s[22]=Te):Te=s[22];var De=Te,xe=r("usePrevious")($),$e,Pe;s[23]!==$||s[24]!==xe?($e=function(){xe!=null&&$!=null&&xe!==$&&(ee(null),re(!1))},Pe=[$,xe],s[23]=$,s[24]=xe,s[25]=$e,s[26]=Pe):($e=s[25],Pe=s[26]),d($e,Pe);var Ne,Me;s[27]!==_e||s[28]!==fe?(Ne=function(){fe===!0&&_e===!1&&ie(!1)},Me=[_e,fe],s[27]=_e,s[28]=fe,s[29]=Ne,s[30]=Me):(Ne=s[29],Me=s[30]),d(Ne,Me);var we;s[31]!==T||s[32]!==$||s[33]!==W?(we={owner:T,post:$,variant:W},s[31]=T,s[32]=$,s[33]=W,s[34]=we):we=s[34];var Ae=o("PolarisPostFeatures.react").usePolarisPostFeatures(we),Fe=Ae.canViewerProvideFeedback,Oe=Ae.commentsAreStacked,Be=Ae.hasThreadedSidebarComments,We=Ae.isBlocked,qe=Ae.isSidecar,Ue=Ae.isStackedScreenSize,Ve=Ae.showPostButton,He=o("polarisAdsSelectors.react").useFeedAdInfo($==null?void 0:$.id,y),Ge=r("usePolarisIsOnFeedPage")(),ze=r("usePolarisIsOnAdsActivityPage")(),je;s[35]!==he||s[36]!==ze||s[37]!==Ge?(je=(Ge||ze)&&he!==!0&&o("PolarisUA").isDesktop(),s[35]=he,s[36]=ze,s[37]=Ge,s[38]=je):je=s[38];var Ke=je,Qe=Ke,Xe=o("PolarisIGTheme.react").useTheme(),Ye;s[39]!==Xe?(Ye=Xe.getTheme(),s[39]=Xe,s[40]=Ye):Ye=s[40];var Je=Ye===o("PolarisIGTheme.react").IGTheme.Dark,Ze=g;(i=$.mediaOverlayInfo)==null||i.overlay_type,(l=$.mediaOverlayInfo)==null||l.buttons;var et;e:{var tt;if(G){et=null;break e}if(Ze!=null){et=Ze;break e}var nt;if(s[41]!==((tt=$.mediaOverlayInfo)==null?void 0:tt.buttons)){var rt,ot;nt=$==null||(rt=$.mediaOverlayInfo)==null||(rt=rt.buttons)==null?void 0:rt.find(h),s[41]=(ot=$.mediaOverlayInfo)==null?void 0:ot.buttons,s[42]=nt}else nt=s[42];var at=nt,it;s[43]!==at||s[44]!==$.id?(it=at!=null?u.jsx(r("PolarisMediaOverlayCommunityNote"),{communityNoteButtonsProp:at,entityID:$.id}):null,s[43]=at,s[44]=$.id,s[45]=it):it=s[45],et=it}var lt=et,st=F?"grow":"none",ut;s[46]!==He||s[47]!==c||s[48]!==m||s[49]!==Fe||s[50]!==Z||s[51]!==Oe||s[52]!==Q||s[53]!==lt||s[54]!==C||s[55]!==b||s[56]!==v||s[57]!==Qe||s[58]!==S||s[59]!==R||s[60]!==L||s[61]!==E||s[62]!==Be||s[63]!==k||s[64]!==I||s[65]!==We||s[66]!==Je||s[67]!==he||s[68]!==qe||s[69]!==Ue||s[70]!==T||s[71]!==D||s[72]!==x||s[73]!==$||s[74]!==P||s[75]!==N||s[76]!==M||s[77]!==w||s[78]!==F||s[79]!==A||s[80]!==O||s[81]!==de||s[82]!==G||s[83]!==B||s[84]!==ne||s[85]!==Ve||s[86]!==W||s[87]!==q?(ut=function(n,a,i){var t,l,s,d;return u.jsxs("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(f.sidebarContainer,W===o("PolarisPostVariants").VARIANTS.feed&&f.sidebarContainerFeedRoot,B&&!he&&f.sidebarContainerAsSidebar,he&&f.sidebarContainerInModal,!he&&L&&f.sidebarContainerV2,A&&f.roundedSidebarContainer,F&&f.expandedSidebarContainerResponsive),{onKeyUp:n,role:a,tabIndex:i,children:[(he===!0?E:!Oe)?w:null,u.jsxs("div",babelHelpers.extends({},{0:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3"},8:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j"},4:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl"},12:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl"},2:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},10:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},6:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},14:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},1:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1b5io7h"},9:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1b5io7h"},5:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1b5io7h"},13:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1b5io7h"},3:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},11:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},7:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},15:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"}}[!!B<<3|!!Be<<2|!!Qe<<1|!!Je<<0],{children:[u.jsx(r("PolarisPostFooter.react"),{analyticsContext:c,bloksAppId:m,boostedStatus:$.boostedStatus,boostUnavailableIdentifier:$.boostUnavailableIdentifier,boostUnavailableReason:$.boostUnavailableReason,className:e(o("PolarisUA").isMobile()?f.msite:f.viewInsights,!E&&f.responsiveViewInsights,Oe&&qe),hasViewInsights:k,mediaId:$.id,mediaOwnerIGID:P,productType:$.productType,viewerId:q==null?void 0:q.id}),u.jsx(r("PolarisPostFeedbackControls_DEPRECATED.react"),{analyticsContext:c,canViewerProvideFeedback:Fe,canViewerRepost:$.canViewerRepost,canViewerReshare:$.viewerCanReshare,code:r("nullthrows")($.code),commentsDisabled:Q,containerRef:M,currSidecarIndex:C,hideShareButton:$.igMediaSharingDisabled===!0,isBlocked:We,isSidecar:qe,isVideo:!!$.isVideo,likedByViewer:!!$.likedByViewer,mediaId:b!=null?b.id:$.id,numSteps:(t=$.sidecarChildren)==null?void 0:t.length,onCommentClick:Ce,onLikeChange:S,onSaveChange:R,ownerIsPrivate:T.isPrivate,ownerUsername:T.username,postId:$.id,savedByViewer:!!$.savedByViewer,sharingFrictionInfo:b!=null?b.sharingFrictionInfo:$.sharingFrictionInfo,variant:W,xstyle:[f.feedback,L&&f.feedbackV2,L&&Be&&f.feedbackV2WithRichComments,B&&f.feedbackAsSidebar,Be&&f.feedbackWithRichComments,Qe&&f.sectionWithNoPadding]}),$.code!=null&&u.jsx(r("PolarisPostSocialProof.react"),{analyticsContext:c,canLike:!We&&Fe,className:{0:"x1e56ztr",8:"x12nagc x182iqb8",4:"x1e56ztr xv54qhq xf7dkkf",12:"x12nagc x182iqb8 xv54qhq xf7dkkf",2:"x1e56ztr xpdmqnj x1g0dm76",10:"x12nagc x182iqb8 xpdmqnj x1g0dm76",6:"x1e56ztr xpdmqnj x1g0dm76",14:"x12nagc x182iqb8 xpdmqnj x1g0dm76",1:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",9:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",5:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",13:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",3:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",11:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",7:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",15:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl"}[!!B<<3|!!Be<<2|!!(L&&Be)<<1|!!Qe<<0],code:r("nullthrows")($.code),fbLikeCount:$.fbLikeCount,inModal:he,isFeedbackAggregated:$.isFeedbackAggregated,isFeedFeedbackAggregated:$.isFeedFeedbackAggregated,isSharedToFb:$.isSharedToFb,likeAndViewCountsDisabled:$.likeAndViewCountsDisabled,likedByViewer:!!$.likedByViewer,likers:$.likers||[],mediaId:$.id,numPreviewLikes:$.numPreviewLikes||0,onLikeChange:S,onLikeCountClick:Re,productType:$.productType,topLikers:$.topLikers,variant:W,videoViews:$.videoViews,viewer:q,viewerIsOwner:P===(q==null?void 0:q.id)}),u.jsx(r("PolarisPostPreviewCommentsPicker.react"),{analyticsContext:c,caption:$.caption,captionCreatedAt:$.captionCreatedAt,captionHasTranslation:$.captionHasTranslation,captionId:$.captionCommentId,captionIsEdited:$.captionIsEdited,captionsDisabled:G,className:e(f.comments,!Y&&f.commentsMarginBottom,Y&&f.commentsMarginBottomDense,B&&f.commentsAsSidebar,Be&&f.commentsWithRichComments,L&&Be&&f.commentsV2,Qe&&f.sectionWithNoPadding),code:$.code,commentingDisabledForViewer:(l=$.commentingDisabledForViewer)!=null?l:!1,commentsDisabled:Q,commentsQuery:null,communityNoteComponent:lt,enableTruncation:v,fbCommentCount:$.fbCommentCount,hasRankedComments:$.hasRankedComments===!0,id:$.id,initialCommentsQuery:I,inModal:he,isFeedFeedbackAggregated:$.isFeedFeedbackAggregated,mediaType:o("PolarisInteractionsLogger").getMediaTypeFromPost($),onLikeCountClick:Ie,owner:T,ownerId:P,permalinkedCommentId:D,permalinkedReplyId:x,postedAt:r("nullthrows")($.postedAt),postId:$.id,shouldIncreaseCommentPreviews:O,showCommentOptionsInline:!0,title:$.title,variant:W}),!Qe&&u.jsx("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(!Y&&f.timestamp,Y&&f.timestampDense,B&&f.timestampAsSidebar,Be&&f.timestampWithRichComments,L&&Be&&f.timestampV2),{children:$.isSponsored===!0?null:u.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",position:"relative",children:[u.jsx(r("PolarisPostTimestamp.react"),{code:r("nullthrows")($.code),isVideo:$.isVideo,postedAt:r("nullthrows")($.postedAt),productType:(s=$.productType)!=null?s:"",username:T.username}),c===o("PolarisFeedPageConstants").FEED_PAGE_ANALYTICS_CONTEXT&&u.jsx(r("IGDSBox.react"),{marginStart:2,position:"relative",children:u.jsx(r("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,postId:$.id})})]})})),(o("polarisGetAppPlatform").isIOS()||de())&&u.jsx(r("PolarisPostCommentInputPicker.react"),{adInfo:He,analyticsContext:c,canViewerProvideFeedback:Fe,hasPostButton:Ve,id:$.id,inModal:he,isRevampVersion:!1,isVideo:$.isVideo,ownerId:T.id,ref:ue,xstyle:[f.commentInput,B&&f.commentInputAsSidebar,L&&f.commentInputV2,L&&Be&&f.commentInputV2WithRichComments,!de()&&f.commentInputHidden,!Ue&&f.commentInputStatic]},$.id),!de()&&o("PolarisUA").isDesktop()&&$.commentsDisabled!==!0&&$.commentingDisabledForViewer===!0&&u.jsx("div",babelHelpers.extends({},{0:{className:"x6s0dn4 x1xp8e9x x13fuv20 x178xt8z x78zum5 x1dnml7z xl56j7k x1gslohp x1hrcb2b"},2:{className:"x6s0dn4 x1xp8e9x x13fuv20 x178xt8z x78zum5 x1dnml7z xl56j7k x1hrcb2b xdj266r"},1:{className:"x6s0dn4 x1xp8e9x x178xt8z x78zum5 xl56j7k x1gslohp x1hrcb2b x1ejq31n x18oe1m7 x1sy0etr xstzfhl xxeg0ib"},3:{className:"x6s0dn4 x1xp8e9x x178xt8z x78zum5 xl56j7k x1hrcb2b xdj266r x1ejq31n x18oe1m7 x1sy0etr xstzfhl xxeg0ib"}}[!!L<<1|!!Qe<<0],{children:u.jsx(r("IGDSText.react"),{color:"tertiaryText",textAlign:"center",children:o("PolarisGenericStrings").COMMENTING_LIMITED})}))]})),ne&&u.jsx(r("PolarisLikedByListContainerLazy.react"),{display:r("PolarisLikedByListVariant").Modal,fbLikeCount:$.fbLikeCount,isFeedbackAggregated:$.isFeedbackAggregated,isFeedFeedbackAggregated:$.isFeedFeedbackAggregated,isOwnerTheViewer:(q==null?void 0:q.id)===P,isSharedToFb:$.isSharedToFb,likeAndViewCountsDisabled:$.likeAndViewCountsDisabled,likeCount:$.numLikes||0,mediaId:$.id,onClose:ve,ownerUsername:N,productType:(d=$.productType)!=null?d:"",shortcode:r("nullthrows")($.code),viewCount:$.videoViews}),!r("isStringNullOrEmpty")(Z)&&u.jsx(r("PolarisCommentLikedByListContainerLazy.react"),{commentId:Z,display:r("PolarisLikedByListVariant").Modal,onClose:Ee})]}))},s[46]=He,s[47]=c,s[48]=m,s[49]=Fe,s[50]=Z,s[51]=Oe,s[52]=Q,s[53]=lt,s[54]=C,s[55]=b,s[56]=v,s[57]=Qe,s[58]=S,s[59]=R,s[60]=L,s[61]=E,s[62]=Be,s[63]=k,s[64]=I,s[65]=We,s[66]=Je,s[67]=he,s[68]=qe,s[69]=Ue,s[70]=T,s[71]=D,s[72]=x,s[73]=$,s[74]=P,s[75]=N,s[76]=M,s[77]=w,s[78]=F,s[79]=A,s[80]=O,s[81]=de,s[82]=G,s[83]=B,s[84]=ne,s[85]=Ve,s[86]=W,s[87]=q,s[88]=ut):ut=s[88];var ct;s[89]!==De||s[90]!==ut?(ct=u.jsx(r("PolarisHotKeys.react"),{keyMap:De,children:ut}),s[89]=De,s[90]=ut,s[91]=ct):ct=s[91];var dt;s[92]!==st||s[93]!==ct?(dt=u.jsx(r("IGDSBox.react"),{flex:st,position:"relative",children:ct}),s[92]=st,s[93]=ct,s[94]=dt):dt=s[94];var mt=dt;if(F){var pt;s[95]===Symbol.for("react.memo_cache_sentinel")?(pt={className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x1iyjqo2 x5wqa0o xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak x65f84u x1vq45kp xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x11njtxf"},s[95]=pt):pt=s[95];var _t;return s[96]!==mt?(_t=u.jsx("div",babelHelpers.extends({},pt,{children:mt})),s[96]=mt,s[97]=_t):_t=s[97],_t}return mt}function h(e){return(e==null?void 0:e.button_type)===o("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_TYPES.COMMUNITY_NOTE}function y(e){return e}l.default=g}),98);
__d("PolarisPostHeaderFavoritedIconButton.react",["IGDSBox.react","IGDSIconButton.react","IGDSStarPanoFilledGradientIcon.react","PolarisFavoritesStrings","PolarisPostModalContext.react","polarisLogAction","react","react-compiler-runtime","usePolarisAnalyticsContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.isFavorited,a=o("PolarisPostModalContext.react").useSetPostModal(),i=r("usePolarisAnalyticsContext")();if(n&&(i==="feedPage"||i==="postPage")){var l;t[0]!==a?(l=function(){r("polarisLogAction")("favoriteIconInPostHeaderClick"),a("favorites")},t[0]=a,t[1]=l):l=t[1];var u;t[2]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(r("IGDSBox.react"),{marginEnd:2,position:"relative",children:s.jsx(r("IGDSStarPanoFilledGradientIcon.react"),{alt:o("PolarisFavoritesStrings").FAVORITED_ICON_ALT,size:16})}),t[2]=u):u=t[2];var c;return t[3]!==l?(c=s.jsx(r("IGDSIconButton.react"),{onClick:l,children:u}),t[3]=l,t[4]=c):c=t[4],c}return null}l.default=u}),98);
__d("PolarisPostInvitedCoauthorsOverlayFooterCTA.react",["fbt","IGDSBox.react","IGDSTextVariants.react","PolarisConfig","PolarisInvitedCoauthorsCountWithSheet.react","PolarisUserHoverCard.react","PolarisUserLink.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(19),n=e.invitedCoauthorProducers,a=e.mediaId,i=e.user,l=o("PolarisConfig").getViewerIdOrZero(),c=n!=null;if(!c||(i==null?void 0:i.id)!==l||i==null||(i==null?void 0:i.username)==null)return null;var p;t[0]!==n?(p=n==null?void 0:n.map(m),t[0]=n,t[1]=p):p=t[1];var _=p,f;t[2]!==n?(f=n!=null?n:[],t[2]=n,t[3]=f):f=t[3];var g;t[4]!==f?(g=f.map(d),t[4]=f,t[5]=g):g=t[5];var h=g,y;t[6]!==_?(y=s._(/*BTDS*/"{invited_coauthor_username} was invited to be a collaborator but hasn't accepted yet.",[s._param("invited_coauthor_username",_!=null&&_[0])]),t[6]=_,t[7]=y):y=t[7];var C=y,b;t[8]!==_?(b=s._(/*BTDS*/"{invited_coauthor_username_1} and {invited_coauthor_username_2} were invited to be collaborators but haven't accepted yet.",[s._param("invited_coauthor_username_1",_!=null&&_[0]),s._param("invited_coauthor_username_2",_!=null&&_[1])]),t[8]=_,t[9]=b):b=t[9];var v=b,S;t[10]!==h||t[11]!==_||t[12]!==a?(S=s._(/*BTDS*/"{invited_coauthor_username_1} and {=m2} were invited to be collaborators but haven't accepted yet.",[s._param("invited_coauthor_username_1",_!=null&&_[0]),s._implicitParam("=m2",u.jsx(r("PolarisInvitedCoauthorsCountWithSheet.react"),{analyticsContext:"post_invited_coauthors_overlay_footer_cta",coauthors:h,mediaId:a,children:s._(/*BTDS*/"")}))]),t[10]=h,t[11]=_,t[12]=a,t[13]=S):S=t[13];var R=S,L;return t[14]!==n||t[15]!==C||t[16]!==R||t[17]!==v?(L=n!=null&&n.length>0&&r("gkx")("4757")?u.jsx(r("IGDSBox.react"),{alignItems:"center",color:"primaryBackground",direction:"row",justifyContent:"between",paddingX:3,paddingY:2,position:"relative",children:u.jsx(r("IGDSBox.react"),{flex:"shrink",marginEnd:5,marginStart:1,maxWidth:350,overflow:"auto",wrap:!0,children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryText",maxLines:3,zeroMargin:!0,children:n.length===1?C:n.length===2?v:n.length>2?R:null})})}):null,t[14]=n,t[15]=C,t[16]=R,t[17]=v,t[18]=L):L=t[18],L}function d(e){var t,n,r,o;return{user:{fullName:(t=e.fullName)!=null?t:"",id:e.id,isVerified:(n=e.isVerified)!=null?n:!1,profilePictureUrl:(r=e.profilePictureUrl)!=null?r:"",username:(o=e.username)!=null?o:""}}}function m(e,t){var n,o,a;return u.jsx(r("PolarisUserHoverCard.react"),{display:"inline-block",isUserAvailable:!(e!=null&&e.isUnpublished),userId:(n=e==null?void 0:e.id)!=null?n:"",username:(o=e==null?void 0:e.username)!=null?o:"",children:u.jsx(r("PolarisUserLink.react"),{username:(a=e==null?void 0:e.username)!=null?a:""})},t)}m.displayName=m.name+" [from "+i.id+"]",l.default=c}),226);
__d("PolarisPostFastOptionsButton.react",["fbt","IGDSBox.react","IGDSIconButton.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDSMoreVerticalPanoOutline24Icon.react","InstagramAdActionMenuFalcoEvent","PolarisContainerModuleUtils","PolarisPostModalContext.react","PolarisViewpointActionUtils","identityFunction","polarisAdsSelectors.react","polarisLogAction","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisPost","usePolarisViewer"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"More options");function d(e){var t=o("react-compiler-runtime").c(3),n=e.color,a=e.orientation,i=r(a==="horizontal"?"IGDSMoreHorizontalPanoOutlineIcon.react":"IGDSMoreVerticalPanoOutline24Icon.react"),l;return t[0]!==i||t[1]!==n?(l=u.jsx(r("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:u.jsx(i,{alt:c,color:n})}),t[0]=i,t[1]=n,t[2]=l):l=t[2],l}function m(e){var t=o("react-compiler-runtime").c(27),n=e.className,a=e.orientation,i=e.padding,l=e.postId,s=a===void 0?"horizontal":a,c=o("PolarisPostModalContext.react").useSetPostModal(),m=r("usePolarisAnalyticsContext")(),f;t[0]!==m?(f=o("PolarisContainerModuleUtils").getContainerModule(m),t[0]=m,t[1]=f):f=t[1];var g=f,h=o("usePolarisPost").usePost(l,r("identityFunction")),y=!!h.isVideo,C=r("usePolarisViewer")(),b=C==null?void 0:C.id,v=o("polarisAdsSelectors.react").useFeedAdInfo(l,_),S=o("polarisAdsSelectors.react").useFeedAdInfo(l,p),R;t[2]!==h?(R=o("PolarisViewpointActionUtils").getMPKForFeedMedia(h),t[2]=h,t[3]=R):R=t[3];var L=R,E;t[4]!==v||t[5]!==m||t[6]!==g||t[7]!==y||t[8]!==L||t[9]!==h.isSponsored||t[10]!==l||t[11]!==c||t[12]!==S||t[13]!==b?(E=function(){r("polarisLogAction")("postOptionsClick",{mediaId:l,source:m,type:y?"video":"photo"}),h.isSponsored===!0&&b!=null&&r("InstagramAdActionMenuFalcoEvent").log(function(){return{ad_id:v,m_pk:L,pigeon_reserved_keyword_module:g,pk:b,source_of_action:g,tracking_token:S}}),c("options")},t[4]=v,t[5]=m,t[6]=g,t[7]=y,t[8]=L,t[9]=h.isSponsored,t[10]=l,t[11]=c,t[12]=S,t[13]=b,t[14]=E):E=t[14];var k=E,I;t[15]!==s?(I=u.jsx(d,{color:"ig-secondary-text",orientation:s}),t[15]=s,t[16]=I):I=t[16];var T;t[17]!==s?(T=u.jsx(d,{color:"ig-primary-text",orientation:s}),t[17]=s,t[18]=T):T=t[18];var D;t[19]!==k||t[20]!==i||t[21]!==I||t[22]!==T?(D=u.jsx(r("IGDSIconButton.react"),{"data-testid":void 0,hover:I,onClick:k,padding:i,children:T}),t[19]=k,t[20]=i,t[21]=I,t[22]=T,t[23]=D):D=t[23];var x;return t[24]!==n||t[25]!==D?(x=u.jsx("div",{className:n,children:D}),t[24]=n,t[25]=D,t[26]=x):x=t[26],x}function p(e){return e==null?void 0:e.tracking_token}function _(e){return e==null?void 0:e.ad_id}var f=u.memo(m);l.default=f}),226);
__d("PolarisPostOptionsButtonPicker.react",["PolarisPostFastOptionsButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.buttonClassName,a=e.mediaPK,i;t[0]!==a?(i=s.jsx(r("PolarisPostFastOptionsButton.react"),{postId:a}),t[0]=a,t[1]=i):i=t[1];var l;return t[2]!==n||t[3]!==i?(l=s.jsx("div",{className:n,children:i}),t[2]=n,t[3]=i,t[4]=l):l=t[4],l}l.default=u}),98);
__d("PolarisPostPageRouteReferrerContext.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({referrerTracePolicy:null});l.default=u}),98);
__d("PolarisSponsoredPostCTAFooter.react",["InstagramODS","PolarisClickEventLoggerProvider.react","PolarisPostFooterCTA.react","PolarisPostUtils","PolarisTrackingNodeProvider.react","polarisAdsSelectors.react","react","react-compiler-runtime","usePolarisSponsoredPostCTAFooterDominantColor"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t,n=o("react-compiler-runtime").c(17),a=e.isMediaRendered,i=e.post,l=e.sidecarIndex,u=o("polarisAdsSelectors.react").useFeedAdInfo(i.id,d),m=i.isSidecar,p=m===!0?(t=o("PolarisPostUtils").getCurrentSidecarItemFromPost(i,l))==null?void 0:t.id:i.id,_;n[0]!==a||n[1]!==p||n[2]!==i?(_={isMediaRendered:a,mediaId:p,post:i},n[0]=a,n[1]=p,n[2]=i,n[3]=_):_=n[3];var f=r("usePolarisSponsoredPostCTAFooterDominantColor")(_),g=f.ctaDominantColor,h=f.ctaFooterViewpointRef;if(p==null)return null;var y;if(n[4]!==(u==null?void 0:u.ctaItems)||n[5]!==p){var C;y=u==null||(C=u.ctaItems)==null||(C=C.get(p))==null?void 0:C.ctaLinkUrl,n[4]=u==null?void 0:u.ctaItems,n[5]=p,n[6]=y}else y=n[6];var b=y,v;if(n[7]!==(u==null?void 0:u.ctaItems)||n[8]!==p){var S;v=u==null||(S=u.ctaItems)==null||(S=S.get(p))==null?void 0:S.ctaLinkText,n[7]=u==null?void 0:u.ctaItems,n[8]=p,n[9]=v}else v=n[9];var R=v,L=c;if(b!=null&&R!=null){var E;n[10]!==g||n[11]!==R||n[12]!==b?(E=function(t){return s.jsx("div",{ref:t,children:s.jsx(r("PolarisPostFooterCTA.react"),{ctaDominantColor:g,"data-testid":void 0,disableAnimation:!1,externalURL:b,forceBottomBorder:!0,isActive:!0,isForAd:!0,onClick:L,showChevron:!0,text:R})})},n[10]=g,n[11]=R,n[12]=b,n[13]=E):E=n[13];var k;return n[14]!==h||n[15]!==E?(k=s.jsx(r("PolarisClickEventLoggerProvider.react"),{children:s.jsx(r("PolarisTrackingNodeProvider.react"),{ref:h,trackingNode:86,children:E})}),n[14]=h,n[15]=E,n[16]=k):k=n[16],k}return null}function c(){r("InstagramODS").incr("web.ads.feed.link_click")}function d(e){return e}l.default=u}),98);
__d("PolarisUnsaveFromCollectionDialog.react",["fbt","IGCoreDialog.react","PolarisGenericStrings","PolarisUA","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(16),n=e.onClose,r=e.onUnsaveFromAll,a=e.onUnsaveFromCollection,i;t[0]!==a?(i=a?s._(/*BTDS*/"You can remove from this collection or remove it from everything you've saved."):s._(/*BTDS*/"Removing this from saved will also remove it from collections."),t[0]=a,t[1]=i):i=t[1];var l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Remove From Saved and Collections?"),t[2]=l):l=t[2];var c;t[3]!==a?(c=a&&u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:a,children:s._(/*BTDS*/"Remove from collection")}),t[3]=a,t[4]=c):c=t[4];var d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Remove"),t[5]=d):d=t[5];var m;t[6]!==r?(m=u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:o("PolarisUA").isDesktop()?"ig-error-or-destructive":"ig-primary-button",onClick:r,children:d}),t[6]=r,t[7]=m):m=t[7];var p;t[8]!==n?(p=u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:n,children:o("PolarisGenericStrings").CANCEL_TEXT}),t[8]=n,t[9]=p):p=t[9];var _;return t[10]!==n||t[11]!==i||t[12]!==c||t[13]!==m||t[14]!==p?(_=u.jsxs(o("IGCoreDialog.react").IGCoreDialog,{body:i,onModalClose:n,title:l,children:[c,m,p]}),t[10]=n,t[11]=i,t[12]=c,t[13]=m,t[14]=p,t[15]=_):_=t[15],_}l.default=c}),226);
__d("PolarisPost.react",["cx","fbt","CometErrorBoundary.react","CometRouteURL","IGDSBox.react","PolarisContainerModuleUtils","PolarisHeroPageletLogger","PolarisHotKeys.react","PolarisIGCoreConstants","PolarisIGTheme.react","PolarisInsightsUtils","PolarisInteractionsLogger","PolarisMediaContainer.react","PolarisOrganicImpressionAction","PolarisPanavisionQEHelpers","PolarisPostActionLikePost","PolarisPostActionRemovePostFromCollection","PolarisPostActionSavePost","PolarisPostActionUnlikePost","PolarisPostActionUnsavePost","PolarisPostCoauthorReviewOverlayFooterCTA.react","PolarisPostConstants","PolarisPostDetailsSection.react","PolarisPostFeatures.react","PolarisPostHeader.react","PolarisPostHeaderFavoritedIconButton.react","PolarisPostInvitedCoauthorsOverlayFooterCTA.react","PolarisPostModalContext.react","PolarisPostModalRenderingContext.react","PolarisPostOptionsButtonPicker.react","PolarisPostOverlayInfoFooterCTA.react","PolarisPostPageRouteReferrerContext.react","PolarisPostSuggestedHeader.react","PolarisPostToast.react","PolarisPostToastProvider.react","PolarisPostUtils","PolarisPostVariants","PolarisReactRedux.react","PolarisSavedPostsActionEditCollection","PolarisSavedPostsTypes","PolarisSponsoredPostCTAFooter.react","PolarisTrackingNodeProvider.react","PolarisUA","PolarisUnsaveFromCollectionDialog.react","PolarisViewpointActionUtils","PolarisViewpointReact.react","PolarisVpvdImpressionAction","URI","hero-tracing","joinClasses","nullthrows","polarisAdsSelectors.react","polarisDeveloperSettings","polarisLogAction","polarisPostModalHelpers","polarisPostSelectors","polarisRelationshipSelectors.react","polarisUserSelectors","polarisWithPPRLogging","qex","react","react-compiler-runtime","useMergeRefs","usePolarisDisplayProperties","usePolarisIsOnFeedPage","usePolarisPostSetURLSidecarIndex","usePolarisShowFooterCTA","usePolarisViewer","usePrevious"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=c||(c=o("react")),m=c,p=m.useContext,_=m.useEffect,f=m.useRef,g=m.useState;function h(t){var n,a,i,l,s,c,m,h=t.adImpressionRefs,y=t.analyticsContext,C=t.autoplay,b=t.className,v=t.communityNoteComponent,S=v===void 0?null:v,R=t.enableTruncation,L=t.id,E=t.imageMediaActsAsCta,k=t.initialCarouselIndex,I=t.initialCommentsQuery,T=t.isSponsored,D=T===void 0?!1:T,x=t.isVisible,$=t.lightLetterbox,P=t.onMediaRendered,N=t.permalinkedCommentId,M=t.permalinkedReplyId,w=t.position,A=t.shortcode,F=t.shouldIncreaseCommentPreviews,O=t.testid,B=O===void 0?"post":O,W=t.variant,q=W===void 0?o("PolarisPostVariants").VARIANTS.flexible:W,U=t.viewpointActionsForSponsoredPost,V=t.visiblePosition,H=t.willScrollTo,G=o("PolarisReactRedux.react").useDispatch(),z=o("CometRouteURL").useRouteURL(),j=new(e||(e=r("URI")))(z).getPath(),K=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisPostSelectors").getPostById(e,L)}),Q=r("nullthrows")(K.owner).id,X=(n=K.group)==null?void 0:n.id,Y=X!=null?X:Q,J=p(r("PolarisPostPageRouteReferrerContext.react")),Z=J.referrerTracePolicy,ee=K.invitedCoauthorProducers,te=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisUserSelectors").getUserByIdOrThrows(e,Q)}),ne=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisUserSelectors").getUserByIdOrThrows(e,Y)}),re=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisRelationshipSelectors.react").getRelationship(e.relationships,Y)}),oe=r("usePolarisViewer")(),ae=!!(oe!=null&&oe.canSeeOrganicInsights),ie=!!K.canSeeInsightsAsBrand,le=o("polarisAdsSelectors.react").useFeedAdInfo(K==null?void 0:K.id,function(e){return e}),se=r("usePolarisDisplayProperties")(),ue=se.viewportHeight,ce=se.viewportWidth,de=o("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext(),me=de.isInModal,pe=(a=k!=null?k:o("PolarisPostUtils").getInitialSidecarIndexFromPost(K))!=null?a:0;K.isSidecar===!0&&(pe<0||K.sidecarChildren!=null&&pe>=K.sidecarChildren.length)&&(pe=0);var _e=g(pe),fe=_e[0],ge=_e[1],he=g({}),ye=he[0],Ce=he[1],be=g(!1),ve=be[0],Se=be[1],Re=g({}),Le=Re[0],Ee=Re[1],ke=g(!1),Ie=ke[0],Te=ke[1],De=g(!1),xe=De[0],$e=De[1],Pe=g(null),Ne=Pe[0],Me=Pe[1],we=f(null),Ae=r("usePolarisPostSetURLSidecarIndex")();_(function(){H==="top"&&window.setTimeout(function(){window.scrollTo(0,0)})},[H]);var Fe=r("usePrevious")(K);_(function(){Fe!=null&&K.id!==Fe.id&&(Ce({}),Ee({}))},[K,Fe]),_(function(){A!=null&&K.isSidecar===!0&&Ae(fe+1)},[fe,K.isSidecar,Ae,A]);var Oe=function(t){Se(!0),P!=null&&P(K.id,t)},Be=function(t){ge(t)},We=function(t,n){var e,r={containerModule:o("PolarisContainerModuleUtils").getContainerModule(y),inventorySource:K.inventorySource,mediaAuthorId:(e=K.owner)==null?void 0:e.id,mediaId:K.id,rankingInfoToken:K.loggingInfoToken,source:y,sourceOfLike:n,trackingToken:K.trackingToken},a=null;(le==null?void 0:le.ad_id)!=null&&(le==null?void 0:le.tracking_token)!=null&&kt!=null&&(a={adId:le==null?void 0:le.ad_id,adTrackingToken:le==null?void 0:le.tracking_token,viewerId:kt}),t?K.likedByViewer!==!0&&G(o("PolarisPostActionLikePost").likePost(K.id,r,a)):G(o("PolarisPostActionUnlikePost").unlikePost(K.id,r,a))},qe=function(){We(!0,"double_tap_media")},Ue=function(t){var e={source:y},n=null;if((le==null?void 0:le.ad_id)!=null&&(le==null?void 0:le.tracking_token)!=null&&kt!=null){var a;n={adId:le==null?void 0:le.ad_id,adTrackingToken:le==null?void 0:le.tracking_token,analyticsContext:y,followStatus:o("PolarisViewpointActionUtils").getFollowStatus(re),mediaPk:o("PolarisViewpointActionUtils").getMPKForFeedMedia(K),mediaType:o("PolarisInteractionsLogger").getMediaTypeFromPost(K),ownerId:(a=K.owner)==null?void 0:a.id,viewerId:kt}}t?K.savedByViewer!==!0&&G(o("PolarisPostActionSavePost").savePost(K.id,e,n)):K.savedByViewer===!0&&(K.savedByViewerToCollection===!0?(r("polarisLogAction")("removeSavedItemFromCollectionDialogShown"),Te(!0)):G(o("PolarisPostActionUnsavePost").unsavePost(K.id,e,n)))},Ve=function(){r("polarisLogAction")("removeSavedItemFromCollectionDialogCancelled"),Te(!1)},He=function(){Te(!1),G(o("PolarisPostActionUnsavePost").unsavePost(K.id,{source:y})),r("polarisLogAction")("removeSavedItemFromCollectionDialogAccepted")},Ge=function(){var e={source:y};Te(!1);var t=o("polarisPostModalHelpers").getCollectionIdFromPath(j);t!=null&&oe!=null&&(G(o("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:t,postId:K.id})),G(o("PolarisSavedPostsActionEditCollection").editCollection({collectionId:t,postIdsToRemove:[K.id],source:e.source,userId:r("nullthrows")(oe==null?void 0:oe.id)})))},ze=function(t){Ke(t)&&Xe(t.id)},je=function(t){Ye(t)},Ke=function(t){return ye[t.id]===!0},Qe=function(t){return Le[t]===!0},Xe=function(t){var e=babelHelpers.extends({},ye);e[t]=!0,Ce(e)},Ye=function(t){var e=babelHelpers.extends({},Le);e[t]=!0,Ee(e)},Je=function(t){$e(!0),Me(t)},Ze=function(){$e(!1)},et=o("PolarisPostFeatures.react").usePolarisPostFeatures({owner:ne,path:j,post:K,variant:q}),tt=et.commentsAreStacked,nt=et.hasPhotosOfYouOption,rt=et.hasThreadedSidebarComments,ot=et.isFavorited,at=et.isSidecar,it=et.isStackedScreenSize,lt=et.showFollowButton,st=o("polarisPostModalHelpers").getCollectionIdFromPath(j),ut=st!=null&&st!==o("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION,ct=!!lt&&(!K.coauthorProducers||K.coauthorProducers.length===0)&&!D,dt=ce>=o("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,mt=dt&&me===!0,pt=!dt&&me===!0,_t=me===!0?dt:!tt,ft=r("usePolarisIsOnFeedPage")(),gt=y==="adsActivityFeed",ht=r("qex")._("34")===!0,yt=(ft||gt)&&me!==!0&&o("PolarisUA").isDesktop(),Ct=(ft||gt)&&me!==!0&&o("PolarisUA").isDesktop(),bt=o("PolarisPostUtils").getCurrentSidecarItemFromPost(K,fe),vt=o("PolarisIGTheme.react").useTheme().getTheme()===o("PolarisIGTheme.react").IGTheme.Dark,St=d.jsxs("div",{className:"_aasi"+(yt?" _aasj":"")+(pt?" _aask":"")+(Ct?" _ai9a":"")+(vt?" _at8n":""),children:[K.inventorySource==="mixed_unconnected"&&ft&&!me&&!ht&&d.jsx(r("PolarisPostSuggestedHeader.react"),{postId:K.id,rankingInfoToken:K.loggingInfoToken,title:(i=K.explore)==null?void 0:i.title}),d.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",position:"relative",children:[d.jsx(r("PolarisPostHeader.react"),{adTitle:le==null?void 0:le.ad_title,analyticsContext:y,clipsAttributionInfo:K.clipsAttributionInfo,clipsAudioAttributionInfo:K.clipsMusicAttributionInfo,coauthorProducers:K.coauthorProducers,displayFBPageName:le==null?void 0:le.display_fb_page_name,followHashtagInfo:K.followHashtagInfo,headerAvatarSize:r("PolarisIGCoreConstants").AVATAR_SIZES.small,inModal:me,isAffiliate:K.isAffiliate===!0,isPaidPartnership:K.isPaidPartnership===!0,isSharedFromEdits:K.isSharedFromBasel===!0,isSharedToCloseFriends:K.audience==="MediaAudience.BESTIES",isSponsored:K.isSponsored===!0,location:K.location,mediaAttributionsData:K.mediaAttributionData,mediaId:K.id,mediaProductType:K.productType,onDisabledClipsAudioAttributionClick:Je,originalMedia:(l=K.clipsMetadata)==null||(l=l.originality_info)==null?void 0:l.original_media,owner:ne,postedAt:K.postedAt,shouldEllipsisText:!0,shouldShowFollowButton:ct,showVerifiedBadge:!0,sidebarVariantOptionsButton:rt,sponsoredLabel:le==null?void 0:le.label,sponsors:K.sponsors,suggestionText:K.inventorySource==="mixed_unconnected"&&ft&&!me&&ht?(s=(c=K.explore)==null?void 0:c.title)!=null?s:u._(/*BTDS*/"Suggested for you"):null,transparencyLabelOwner:K.owner,wearablesAttributionInfo:K.wearableAttributionInfo},K.id),d.jsx(r("PolarisPostHeaderFavoritedIconButton.react"),{isFavorited:ot}),d.jsx(r("PolarisPostOptionsButtonPicker.react"),{buttonClassName:"_aasm"+(yt||o("PolarisPanavisionQEHelpers").hasDenserMobileWebFeed()?" _aasn":"")+(Ct?" _agh1":""),mediaPK:K.id})]})]}),Rt=o("PolarisInsightsUtils").getViewInsightsInfo(oe,Q,K,ie,ae),Lt=Rt.bloksAppId,Et=Rt.hasViewInsights,kt=oe==null?void 0:oe.id,It=D&&U!=null?U:[o("PolarisOrganicImpressionAction").makePostImpressionAction(K,y,Z,w),o("PolarisVpvdImpressionAction").makePostVpvdImpressionAction(K,y)],Tt=o("PolarisViewpointReact.react").useViewpoint({action:It,id:"viewpoint"+K.id}),Dt=[Tt].concat(h!=null?h:[]),xt=r("useMergeRefs").apply(void 0,Dt),$t=oe?{l:function(){We(!K.likedByViewer,"button")},s:function(){Ue(!K.savedByViewer)}}:{},Pt=r("usePolarisShowFooterCTA")(K,fe,ye,D),Nt=null;D?Nt=d.jsx(r("PolarisSponsoredPostCTAFooter.react"),{isMediaRendered:ve,post:K,sidecarIndex:fe}):Pt||!me?Nt=d.jsx(o("PolarisPostOverlayInfoFooterCTA.react").PolarisPostOverlayInfoFooterCTA,{analyticsContext:y,currentSidecarIndex:fe,dynamicFooterRef:we,idsWithClearedBlurOverlays:ye,idsWithDisabledMediaOverlayInfoImpressionLogging:Le,onLogOverlayImpression:function(t){return je(t)},rootPost:K}):ee!=null&&ee.length>0&&(Nt=d.jsxs("div",{children:[d.jsx(r("PolarisPostCoauthorReviewOverlayFooterCTA.react"),{invitedCoauthorProducers:ee,mediaId:K.id,mediaShortcode:K.code,productType:K.productType,user:K.owner}),d.jsx(r("PolarisPostInvitedCoauthorsOverlayFooterCTA.react"),{invitedCoauthorProducers:ee,mediaId:K.id,user:K.owner})]}));var Mt=Nt!=null,wt=o("polarisPostModalHelpers").getMediaContainerProps({dimensions:K.dimensions,footerHeight:Mt?(m=we.current)==null?void 0:m.offsetHeight:void 0,hasFooter:Mt,hasSidebarInRedesign:dt,viewportHeight:ue,viewportWidth:ce}),At=!1,Ft={border:K.isSeen===!0?"2px solid green":"2px solid red"};return d.jsx(o("PolarisPostToastProvider.react").PostToastProvider,{children:function(t){return d.jsx(o("PolarisPostModalContext.react").PostModalContext,{post:K,children:d.jsx(o("hero-tracing").HeroPagelet,{name:o("PolarisHeroPageletLogger").getHeroPageletLogName(o("PolarisHeroPageletLogger").PageletLogName.POST,w),ref:xt,children:function(n,a){return d.jsx(r("PolarisHotKeys.react"),{keyMap:$t,children:function(i,l,s){return d.jsx(r("PolarisTrackingNodeProvider.react"),{ref:n,trackingNode:301,children:function(n){return d.jsxs("article",{className:r("joinClasses")(b,"_aatb"+(q===o("PolarisPostVariants").VARIANTS.feed?" _aatc":"")+(it?" _aatd":"")+(it?"":" _aate")+(tt?" _aatf":"")+(_t?" _aatg":"")+(at?" _aath":"")+(rt?" _aati":"")+(Et?" _aatj":"")),"data-testid":void 0,onKeyUp:i,ref:n,role:l,style:At?Ft:{},tabIndex:s,children:[d.jsxs(r("IGDSBox.react"),{alignSelf:pt?"center":void 0,direction:(me===!0?dt:!tt)?"row":"column",display:"flex",justifyContent:"center",maxHeight:"inherit",maxWidth:pt&&(wt==null?void 0:wt.style)!=null?wt.style.maxWidth:"inherit",position:"relative",children:[(me===!0?!dt:tt)?St:null,d.jsx("div",babelHelpers.extends({},me===!0?wt:{},{className:"_aatk"+(me===!0?" _aatl":"")+(mt&&K.dimensions!=null&&K.dimensions.width>=K.dimensions.height?" _aatm":"")+($===!0?" _aatn":"")+(Ct?" _aiao":""),children:d.jsx(r("PolarisMediaContainer.react"),{accessibilityCaption:K.accessibilityCaption,adInfo:le,analyticsContext:y,autoplay:C,checkIsSensitivityOverlayDisabledCallback:function(t){return Ke(t)},className:"_aato",commentsAreStacked:tt,hasPhotosOfYouOption:nt,hasViewInsights:Et,id:K.id,initialCarouselIndex:pe,inModal:me,isVisible:x,mediaFooter:Nt,onLike:oe?qe:null,onPostMediaRendered:Oe,onPostSidecarChildIndexChange:Be,onSensitivityOverlayCleared:ze,onToastClose:Ze,position:w,post:K,relationship:re,sensitivityOverlayMediaOverlayInfoLoggingProps:{checkIfMediaOverlayInfoImpressionLoggingDisabled:function(t){return Qe(t)},onLoggedMediaOverlayInfoImpression:function(t){return je(t)}},showToast:xe,toastString:Ne,viewer:oe,visiblePosition:V})})),d.jsx(r("PolarisPostDetailsSection.react"),{analyticsContext:y,bloksAppId:Lt,communityNoteComponent:S,currSidecarIndex:fe,currSidecarItem:bt,enableTruncation:R,handleLikeChange:We,handleSaveChange:Ue,hasDenserFeedRedesign:yt,hasSidebarInRedesign:dt,hasViewInsights:Et,initialCommentsQuery:I,owner:ne,permalinkedCommentId:N,permalinkedReplyId:M,post:K,postAuthorId:Q,postAuthorUsername:te==null?void 0:te.username,postFeedbackControlsRef:t,postHeader:St,redesignWithoutSidebar:pt,redesignWithSidebar:mt,shouldIncreaseCommentPreviews:F,showDetailsAsSidebar:_t,variant:q,viewer:oe}),Ie&&d.jsx(r("PolarisUnsaveFromCollectionDialog.react"),{onClose:Ve,onUnsaveFromAll:He,onUnsaveFromCollection:ut&&o("PolarisUA").isDesktop()?Ge:null}),d.jsx(r("PolarisPostToast.react"),{isFeedVariant:q===o("PolarisPostVariants").VARIANTS.feed,isModal:me!=null?me:!1})]}),d.jsx(a,{})]})}})}})}})},K.id)}})}h.displayName=h.name+" [from "+i.id+"]";var y=r("polarisWithPPRLogging")(h);function C(){r("polarisLogAction")("feedUnitFailure",{source:"PolarisPost"})}function b(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=d.jsx(r("CometErrorBoundary.react"),{fallback:v,onError:C,type:"warn",children:d.jsx(y,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}function v(e){return null}l.default=b}),226);
__d("PolarisDynamicExplorePostModal.react",["PolarisDynamicExploreMediaHelpers","PolarisDynamicExploreTypes","PolarisInstantPostModal.react","PolarisIsLoggedInDesktop","PolarisLinkBuilder","PolarisPost.react","PolarisReactRedux.react","polarisDynamicExploreSelectors","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(16),n=e.analyticsContext,a=e.exploreGridQuery,i=e.exploreGridType,l=e.modalEntryPath,u=e.onClose,c=e.onOpen,d=e.postId,m;t[0]!==a||t[1]!==i?(m=function(t){return o("polarisDynamicExploreSelectors").getPostModalCompatibleGridItemIds(t,i,a)},t[0]=a,t[1]=i,t[2]=m):m=t[2];var p=o("PolarisReactRedux.react").useSelector(m),_;t[3]!==a||t[4]!==i||t[5]!==d?(_=function(t){return o("polarisDynamicExploreSelectors").getGridItems(t,i,a).find(function(e){return o("PolarisDynamicExploreMediaHelpers").getPostId(e)===d})},t[3]=a,t[4]=i,t[5]=d,t[6]=_):_=t[6];var f=o("PolarisReactRedux.react").useSelector(_),g;return t[7]!==n||t[8]!==p||t[9]!==i||t[10]!==f||t[11]!==l||t[12]!==u||t[13]!==c||t[14]!==d?(g=f!=null&&s.jsx(r("PolarisInstantPostModal.react"),{analyticsContext:n,combinedPostIds:p,dimensions:o("PolarisDynamicExploreMediaHelpers").getPostDimensions(f),mediaLinkBuilder:o("PolarisLinkBuilder").buildMediaLink,modalEntryPath:l,onClose:u,onlyReplaceModalHistory:i===o("PolarisDynamicExploreTypes").DYNAMIC_EXPLORE_GRID_TYPES.keyword_grid,onOpen:c,postCode:o("PolarisDynamicExploreMediaHelpers").getPostCode(f),postId:d,children:s.jsx(r("PolarisPost.react"),{analyticsContext:n+"Modal",autoplay:o("PolarisIsLoggedInDesktop").isLoggedInDesktop(),id:d,isVisible:!0,visiblePosition:0})}),t[7]=n,t[8]=p,t[9]=i,t[10]=f,t[11]=l,t[12]=u,t[13]=c,t[14]=d,t[15]=g):g=t[15],g}l.default=u}),98);
__d("PolarisPostModal.react",["PolarisPostModalInternal.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(r("PolarisPostModalInternal.react"),babelHelpers.extends({},e,{showLoadingShimmer:!0})),t[0]=e,t[1]=n):n=t[1],n}l.default=u}),98);/*FB_PKG_DELIM*/
__d("MAWCommonWebWorkerErrorLogging",["Env","ErrorGuard","ErrorPubSub","ErrorSetup","ErrorTransport","JSErrorLoggingConfig","SiteData","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){(e||(e=r("ErrorGuard"))).skipGuardGlobal((s||(s=r("Env"))).nocatch),r("ErrorSetup").setup({appId:r("JSErrorLoggingConfig").appId,client_revision:r("SiteData").client_revision,extra:r("JSErrorLoggingConfig").extra,loggingFramework:"worker",projectBlocklist:r("JSErrorLoggingConfig").projectBlocklist,report_source:r("JSErrorLoggingConfig").report_source,report_source_ref:r("JSErrorLoggingConfig").report_source_ref,sample_weight:r("JSErrorLoggingConfig").sampleWeight!=null?r("JSErrorLoggingConfig").sampleWeight:0,site_category:"armadillo-worker"},o("ErrorTransport").log),t.addEventListener("unhandledrejection",function(e){var t=e.reason;(u||(u=r("ErrorPubSub"))).reportError(r("getErrorSafe")(t))})}r("ErrorSetup").preSetup(),l.init=c}),98);
__d("WAPREList",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({APP_STATE_SYNC_DAILY:"app_state_sync_daily",DECRYPT_MESSAGE_FINAL:"decrypt_message_final",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",ICDC_ERROR:"icdc_error",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",MEDIA_VALIDATE:"media_validate",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ONE_QUEUE:"one_queue",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RECEIVE_MESSAGE:"receive_message",SEND_MESSAGE:"send_message",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",SYNCD:"syncd",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_KEY_ROTATION:"syncd_key_rotation",WA_DISCONNECT:"wa_disconnect",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",WA_JOB_MANAGER:"wa_job_manager",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key"});i.PRE_METRIC=e}),66);
__d("WAPREMetrics",["WALogger","WAPREList"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=6e4,d=18e4,m=600*1e3,p=0;function _(){var t=[];function n(e){t.push(e)}function r(){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]))),t.length=0}function a(e){t.length===0&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events "," ",""])),e.name,e.stage),t.forEach(function(t){t(e)})}return{subscribe:n,notify:a,clear:r}}var f=_(),g=f.notify,h=f.clear,y=f.subscribe,C;"FinalizationRegistry"in self&&"WeakRef"in self&&(C=new FinalizationRegistry(function(e){var t=e.event,n=e.eventFlow;if(n.isActive())try{o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[PRE][","] EventFlow still active during garbage collection"])),t)}catch(e){}}));var b=new Set([o("WAPREList").PRE_METRIC.SEND_MESSAGE,o("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD]);function v(e,t,n,r){n==null&&p++;var o=n!=null?n:p,a="open";n==null?g({name:e,stage:"START",instanceKey:o,annotations:t,timeoutInMs:r}):g({name:e,stage:"RESUME",instanceKey:o,annotations:t});var i;function l(){if(i!=null){var e=i.deref();if(e!=null){var t;(t=C)==null||t.unregister(e)}}}var s={addPoint:function(n,r){g({name:e,stage:"POINT",reason:n,instanceKey:o,annotations:r})},addAnnotations:function(n){g({name:e,stage:"ANNOTATE",instanceKey:o,annotations:n})},endSuccess:function(n){g({name:e,stage:"SUCCESS",instanceKey:o,annotations:n}),a="closed",l()},endCancel:function(n){g({name:e,stage:"CANCEL",instanceKey:o,annotations:n}),l()},endFail:function(n,r){g({name:e,stage:"FAIL",reason:n,instanceKey:o,annotations:r}),a="closed",l()},getFlowDetails:function(){return{name:e,instanceKey:o}},isActive:function(){return a==="open"}};return C&&!b.has(e)&&n==null&&(C.register(s,{event:e,eventFlow:{endCancel:s.endCancel,isActive:s.isActive}}),i=new WeakRef(s)),s}l.QPL_DEFAULT_TIMEOUT_IN_MS=c,l.QPL_RECEIVE_MESSAGE_TIMEOUT_IN_MS=d,l.QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS=m,l.clear=h,l.subscribe=y,l.startMetric=v}),98);
__d("MAWPREListeners",["MAWODSProxy","MAWQplProxy","SiteData","WALogger","WAMapWithDefault","WAOdsEnums","WAPREList","WAPREMetrics","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f;function g(){o("WAPREMetrics").subscribe(C)}var h=new(o("WAMapWithDefault")).MapWithDefault(function(){return new Map});function y(e){return C(e)}function C(t){switch(t.name){case o("WAPREList").PRE_METRIC.FRANKING_VALIDATION:v(r("qpl")._(25299246,"150"),t);break;case o("WAPREList").PRE_METRIC.QUERY_GROUPS:v(r("qpl")._(741087294,"2028"),t);break;case o("WAPREList").PRE_METRIC.QUERY_GROUP:b(o("WAOdsEnums").Entity.WA_QUERY_GROUP,t);break;case o("WAPREList").PRE_METRIC.OFFLINE_RETRY:v(r("qpl")._(25309990,"124"),t);break;case o("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD:v(r("qpl")._(25312150,"83"),t);break;case o("WAPREList").PRE_METRIC.MEDIA_UPLOAD:v(r("qpl")._(25313100,"131"),t);break;case o("WAPREList").PRE_METRIC.MEDIA_VALIDATE:v(r("qpl")._(25304678,"2352"),t);break;case o("WAPREList").PRE_METRIC.GET_DEVICES:b(o("WAOdsEnums").Entity.GET_DEVICES,t);break;case o("WAPREList").PRE_METRIC.MESSAGE_DECRYPTION:v(r("qpl")._(25306682,"11176"),t),b(o("WAOdsEnums").Entity.DECRYPTION,t);break;case o("WAPREList").PRE_METRIC.DECRYPT_MESSAGE_FINAL:v(r("qpl")._(741087294,"2028"),t);break;case o("WAPREList").PRE_METRIC.MESSAGE_ENCRYPTION:v(r("qpl")._(25299294,"12933"),t),v(r("qpl")._(741087294,"2028"),t);break;case o("WAPREList").PRE_METRIC.OFFLINE_QUEUE:v(r("qpl")._(25306361,"5664"),t);break;case o("WAPREList").PRE_METRIC.SYNCD_FATAL_ERROR:v(r("qpl")._(25310891,"540"),t);break;case o("WAPREList").PRE_METRIC.SEND_MESSAGE:v(r("qpl")._(25313175,"1551"),t);break;case o("WAPREList").PRE_METRIC.RECEIVE_MESSAGE:v(r("qpl")._(1056840931,"814"),t);break;case o("WAPREList").PRE_METRIC.SYNCD_CRITICAL_EVENT:v(r("qpl")._(25311142,"804"),t);break;case o("WAPREList").PRE_METRIC.SYNCD_CRITICAL_BOOTSTRAP_STAGE:v(r("qpl")._(741087294,"2028"),t);break;case o("WAPREList").PRE_METRIC.SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:v(r("qpl")._(741087294,"2028"),t);break;case o("WAPREList").PRE_METRIC.SYNCD_DECRYPT_MUTATIONS:v(r("qpl")._(741087294,"2028"),t);break;case o("WAPREList").PRE_METRIC.SYNCD_BOOTSTRAP_DATA_APPLIED:v(r("qpl")._(741087294,"2028"),t);break;case o("WAPREList").PRE_METRIC.SYNCD:v(r("qpl")._(741087294,"2028"),t);break;case o("WAPREList").PRE_METRIC.APP_STATE_SYNC_DAILY:v(r("qpl")._(25306941,"813"),t);break;case o("WAPREList").PRE_METRIC.ICDC_ERROR:v(r("qpl")._(25313187,"948"),t);break;case o("WAPREList").PRE_METRIC.WA_DISCONNECT:b(o("WAOdsEnums").Entity.WA_DISCONNECT,t);break;case o("WAPREList").PRE_METRIC.WA_FAIL_STANZA_QUEUE_ITEM:b(o("WAOdsEnums").Entity.WA_FAIL_STANZA_QUEUE_ITEM,t);break;case o("WAPREList").PRE_METRIC.WA_JOBS_ORCHESTRATOR:v(r("qpl")._(25311870,"1004"),t);break;case o("WAPREList").PRE_METRIC.WA_JOB_MANAGER:v(r("qpl")._(25308825,"136"),t);break;case o("WAPREList").PRE_METRIC.SYNCD_KEY_ROTATION:v(r("qpl")._(25304909,"1204"),t);break;case o("WAPREList").PRE_METRIC.STANZA_QUEUE_MESSAGE_CONSUMER:break;case o("WAPREList").PRE_METRIC.DOWNLOAD_AND_DECRYPT:o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Event "," not implemented"])),t.name);break;case o("WAPREList").PRE_METRIC.ONE_QUEUE:v(r("qpl")._(25308201,"2007"),t);break;case o("WAPREList").PRE_METRIC.WA_NO_SIGNED_PRE_KEY:b(o("WAOdsEnums").Entity.WA_NO_SIGNED_PRE_KEY,t);break}}function b(e,t){var n,r;switch(t.stage){case"START":break;case"RESUME":case"POINT":case"ANNOTATE":case"CANCEL":break;case"SUCCESS":o("MAWODSProxy").odsBumpEntityKey({entity:e,key:(n=(r=t.annotations)==null||(r=r.string)==null?void 0:r.key)!=null?n:"success"});break;case"FAIL":o("MAWODSProxy").odsBumpEntityKey({entity:e,key:t.reason});break;default:t.stage,o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Received unreachable stage value for the ODS event"])));break}}function v(e,t){var n=babelHelpers.extends({},t.annotations);switch(t.stage){case"START":{if(h.get(e).has(t.instanceKey))return;var a=babelHelpers.extends({},n,{int:babelHelpers.extends({},n.int,{sharedWorkerRev:r("SiteData").client_revision})}),i=o("MAWQplProxy").startQplUserFlow(e,a,{providedTimeoutInMs:t.timeoutInMs});h.get(e).set(t.instanceKey,i);break}case"ANNOTATE":{var l=h.get(e).get(t.instanceKey);if(l==null){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["The QPL event of "," was completed or failed already"])),t.name);return}l.addAnnotations(n);break}case"RESUME":{if(t.instanceKey==null){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Cannot RESUME without instanceKey"])));return}if(S(e,t.instanceKey))return;var s=o("MAWQplProxy").startQplUserFlow(e,n,{providedInstanceKey:t.instanceKey});h.get(e).set(t.instanceKey,s);break}case"POINT":{var g=h.get(e).get(t.instanceKey);if(g==null){o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["The QPL event of "," was completed or failed already"])),t.name);return}g.addPoint(t.reason,n);break}case"SUCCESS":{var y=h.get(e).get(t.instanceKey);if(y==null){o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["The QPL event of "," was processed already"])),t.name);return}y.endSuccess(n),h.get(e).delete(t.instanceKey);break}case"CANCEL":{var C=h.get(e).get(t.instanceKey);if(C==null){o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["The QPL event of "," was processed already"])),t.name);return}C.endCancel(n),h.get(e).delete(t.instanceKey);break}case"FAIL":{var b=h.get(e).get(t.instanceKey);if(b==null){o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["The QPL event of "," was processed already"])),t.name);return}b.endFail(t.reason,n),h.get(e).delete(t.instanceKey);break}default:{o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Received unreachable stage value for the event"])));break}}}function S(e,t){return h.get(e).has(t)||e===r("qpl")._(25313175,"1551")}l.initializeWAPREMetrics=g,l.testOnly_logger=y}),98);
__d("WAAbPropsHelpers",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=86400,m=600,p=604800;function _(e){return e==null?d:Math.max(m,Math.min(p,e))}function f(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n],o=r[0],a=r[1],i=r[2];typeof o=="number"&&t.push({configName:n,configCode:o,configDefault:i})}),t}function g(e,t){var n=e[t][0];return typeof n=="number"?n:null}function h(t,n){switch(typeof n){case"boolean":return t==="1";case"number":return parseFloat(t);case"string":return t;default:return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["parseValue: unsure how to read ",""])),t),null}}function y(e,t){var n=new Map;t.forEach(function(e){var t=e.configCode,r=e.configValue,o=e.configExpoKey;n.set(t,{configValue:r,configExpoKey:o})});var r={},o={};return f(e).forEach(function(e){var t=e.configName,a=e.configCode,i=e.configDefault,l=n.get(a);if(l!=null){var s=l.configValue,u=l.configExpoKey,c=h(s,i);c!=null&&(r[t]=c),o[a]=u!=null?u:null}}),{values:r,expoKeys:o}}function C(e,t,n){var r=babelHelpers.extends({},t,e),a={};return Object.keys(r).forEach(function(e){if(n[e]==null){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdatePropValues: deleting config ",""])),e);return}a[e]=r[e]}),a}function b(e,t,n){var r=babelHelpers.extends({},t,e),a={},i=f(n).map(function(e){return e.configCode}),l=new Set(i),s=new Set;return Object.keys(r).forEach(function(e){var n=parseInt(e,10),i=t?t[n]:null;l.has(n)?(r[n]!==i&&(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdateExpoKeys: config_expo_key "," changed"])),n),i!=null&&i.trim()&&s.add(i)),a[n]=r[n]):(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdateExpoKeys: deleting config_expo_key ",""])),n),i!=null&&i.trim()&&s.add(i))}),{propExpoKeys:a,expoKeysToDelete:s}}function v(e,t){if(t!=null){var n=t;if(e.forEach(function(e){n.delete(e)}),n.size!==0)return{internalExpoKeys:n,expoKeyStr:Array.from(n).join(",")}}}l.maybeUpdateRefresh=_,l.asAbList=f,l.asAbCode=g,l.parseAbProps=y,l.maybeUpdatePropValues=C,l.maybeUpdateExpoKeys=b,l.maybeUpdateInternalExpoKeys=v}),98);
__d("WAAbProps",["WAAbPropsHelpers","err"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(t){if(e)return e;throw r("err")("abProps::"+t+" called before startAbProps")}function u(t,n){e==null&&(e={config:n,db:t})}function c(){return s("getHash").db.getHash()}function d(){return s("getRefreshSecs").db.getRefreshSecs().then(function(e){return o("WAAbPropsHelpers").maybeUpdateRefresh(e)})}function m(){return s("getConfig").config}function p(){return s("getAbProps").db.getAbProps()}function _(e){return s("getAbProps").db.setAbProps(e)}l.startAbProps=u,l.getHash=c,l.getRefreshSecs=d,l.getConfig=m,l.getAbProps=p,l.setAbProps=_}),98);
__d("WAAbPropConverters",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(!e)return{};var t={};return Object.keys(e).forEach(function(n){var r=e[n];r!=null&&(t[n]=r)}),t}i.convertAbPropsToPlainObject=e}),66);
__d("WAAbPropsCache",["WAAbPropConverters"],(function(t,n,r,o,a,i,l){"use strict";var e=86400,s=(function(){function t(e){var t=e.abKey,n=e.abHash,r=e.lastSyncTime,o=e.expoKeyStr,a=e.refresh,i=e.internalExpoKeys,l=e.propExpoKeys,s=e.propValues,u=e.overridePropValues;this.$1=u!=null?u:{},this.$2=s,this.$4=n,this.$3=t,this.$5=r,this.$7=a,this.$6=o,this.$8=i,this.$9=l}var n=t.prototype;return n.getAbProp=function(t){var e;return this.$1[t]!=null?this.$1[t]:(e=this.$2)==null?void 0:e[t]},n.getHash=function(){return this.$4},n.getRefreshSecs=function(){var t;return(t=this.$7)!=null?t:e},n.overrideAbProp=function(t,n){this.$1[t]=n},n.readAll=function(){var e={abKey:this.$3,hash:this.getHash(),refresh:this.getRefreshSecs(),lastSyncTime:this.$5||0};if(this.$9!=null&&(e.propExpoKeys=this.$9),this.$8!=null&&(e.internalExpoKeys=this.$8),this.$6!=null&&(e.expoKeyStr=this.$6),this.$2!=null){var t=this.$2;t!=null&&(e.propValues=o("WAAbPropConverters").convertAbPropsToPlainObject(t),this.$1!=null&&(e.propValues=babelHelpers.extends({},e.propValues,o("WAAbPropConverters").convertAbPropsToPlainObject(this.$1))))}return e},n.rewrite=function(t){var e=t.abKey,n=t.abHash,r=t.lastSyncTime,o=t.expoKeyStr,a=t.refresh,i=t.internalExpoKeys,l=t.propExpoKeys,s=t.propValues;this.$2=s,this.$4=n,this.$3=e,this.$5=r,this.$7=a,this.$6=o,this.$8=i,this.$9=l},t})();l.AbPropsCache=s}),98);
__d("WAAbPropsTypes",[],(function(t,n,r,o,a,i){"use strict";var e={noyb_opt_out_flag:[3488,"bool",!1,!1],service_improvement_opt_out_flag:[3664,"bool",!1,!1],msgrw_test_bool:[704,"bool",!1,!1],msgrw_test_int:[705,"int",0,0],msgrw_test_string:[706,"string","test_string","test_string"],msgrw_test_float:[707,"float",1,1],msgrw_icdc_alert_trigger_failure_count:[1233,"int",8,8],msgrw_icdc_cooldown_interval_in_minutes:[1234,"int",35,35],msgrw_icdc_interval_in_minutes:[1236,"int",1500,1500],msgrw_logger_entries:[1298,"int",0,0],msgrw_max_keys:[2453,"int",812,812],msgrw_job_manager_conf:[2667,"string",'{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}','{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}'],client_group_participants_limit:[618,"int",257,257],client_group_name_length_limit:[1200,"int",25,25]};i.ABPropConfigs=e}),66);
__d("WAAbPropsConverters",["WAAbPropsTypes","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n={expoKeyStr:t.expoKeyStr,internalExpoKeys:t.internalExpoKeys?Array.from(t.internalExpoKeys):[],lastSyncTime:t.lastSyncTime,refresh:t.refresh};if(t.abHash!=null&&(n.abHash=t.abHash),t.abKey!=null&&(n.abKey=t.abKey),t.propExpoKeys){var r=t.propExpoKeys,a=[];Object.keys(r).forEach(function(e){var t=Number(e),n={expoKey:t};r[t]!=null&&(n.value=r[t]),a.push(n)}),n.propExpoKeys=a}if(t.propValues){var i=t.propValues,l=[];Object.keys(i).forEach(function(t){var n={name:t,value:{}};switch(typeof i[t]){case"boolean":n.value.boolValue=i[t];break;case"number":n.value.intValue=i[t];break;case"string":n.value.strValue=i[t];break;default:o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["convertAbPropsParsedToDbEntity: unsure how to read ",""])),i[t]);return}l.push(n)}),n.propValues=l}return n}function c(e){var t={expoKeyStr:e.expoKeyStr,internalExpoKeys:e.internalExpoKeys,lastSyncTime:e.lastSyncTime,propExpoKeys:e.propExpoKeys,refresh:e.refresh};if(e.hash!=null&&(t.abHash=e.hash),e.abKey!=null&&(t.abKey=e.abKey),e.propValues){var n=e.propValues,r={};Object.keys(n).forEach(function(e){n[e]!=null&&(r[e]=n[e])}),t.propValues=r}return t}function d(e){var t=e.abHash,n=e.abKey,r=e.expoKeyStr,a=e.internalExpoKeys,i=e.lastSyncTime,l=e.propExpoKeys,u=e.propValues,c=e.refresh,d={abHash:t,abKey:n,expoKeyStr:r,lastSyncTime:i,refresh:c};if(a!=null&&(d.internalExpoKeys=new Set(a)),l!=null){var m={};l.forEach(function(e){e.expoKey!=null&&(m[e.expoKey]=e.value)}),d.propExpoKeys=m}if(u!=null){var p={};u.forEach(function(e){var t=e.name,n=o("WAAbPropsTypes").ABPropConfigs[t];if(!(n==null||n.length<3)){var r=n[2];switch(typeof r){case"boolean":p[t]=e.value.boolValue;return;case"number":p[t]=e.value.intValue;return;case"string":p[t]=e.value.strValue;return;default:o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["convertDbAbPropsToParsed: unsure how to read ",""])),r);return}}}),d.propValues=p}return d}l.convertAbPropsParsedToDbEntity=u,l.convertAbPropsDataToParsed=c,l.convertDbAbPropsToParsed=d}),98);
__d("WAAbPropsToUI",["WAAbPropsTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=["client_group_participants_limit","client_group_name_length_limit"];function s(t){var n=t!=null?t:{},r={};return e.forEach(function(e){n[e]!=null?r[e]=n[e]:r[e]=o("WAAbPropsTypes").ABPropConfigs[e][2]}),r}l.prepareAbPropsForUI=s}),98);
__d("WAHandleFailureUtils",["FBLogger","MAWODSProxy","Promise","WABridge","WAOdsEnums","asyncToGeneratorRuntime","getErrorSafe","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MAWClearSignalAndTempStores").__setRef("WAHandleFailureUtils"),u={GENERIC_FAILURE:"400",NOT_AUTHORIZED:"401",TEMP_BANNED:"402",BANNED:"403",CAT_EXPIRED:"413",CAT_INVALID:"414",NOT_FOUND:"415",CAT_SESSION_INVALID:"418",INTERNAL_ERROR:"500",SERVER_UNAVAILABLE:"503"};function c(){return new(e||(e=n("Promise")))(function(e,t){s.onReady(function(n){r("promiseDone")(n.clearSignalAndTempStores(),function(){return e()},function(e){var n=r("getErrorSafe")(e);r("FBLogger")("wmi").catching(n).mustfix("Failed to clear signal and temp stores"),t(n)})})})}function d(){return c().then(function(){o("WABridge").getBridge().fireAndForget("event","logout",{})})}function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c(),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.WA_REREGISTRATION,key:"reregister_phone"}),o("WABridge").getBridge().fireAndForget("event","reregisterDevice",{})}),p.apply(this,arguments)}l.FAILURE_CODES=u,l.clearRegistrationAndTempData=c,l.deregisterPhone=d,l.reregisterPhone=m}),98);
__d("WASignalDB",["BrowserLockManager","QPLFlow","WAHandleFailureUtils","WAHex","WAIDBTypes","WALogger","WAResolvable","Worm","WormEAR","WormIDbDriver","WormIDbUtils","asyncToGeneratorRuntime","err","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s={identity:{primaryKey:"deviceJid",indexes:{userJid:{fields:["userJid"],unique:!1}}},contacts:{primaryKey:"contactJid",indexes:{}},session:{indexes:{},primaryKey:"id"},senderKeySessions:{primaryKey:"id",indexes:{groupJid:{fields:["groupJid"],unique:!1},userJid:{fields:["userJid"],unique:!1}}},prekey:{indexes:{},primaryKey:"keyId"},prekeyGeneration:{indexes:{},primaryKey:"generationId"},signedPrekey:{indexes:{},primaryKey:"keyId"},meta:{indexes:{},primaryKey:"key"},plaintextMeta:{indexes:{},primaryKey:"key",secure:!1},icdcFails:{indexes:{},primaryKey:"contactJid"},personalSenderKeyStatuses:{indexes:{},primaryKey:"groupJid"}},u,c=new(o("WAResolvable")).Resolvable;function d(e,t,n,r,o,a){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,d,m){var p=m!=null?o("QPLFlow").startQPLFlow(m,{timeoutInMs:r("justknobx")._("3415"),annotations:{string:{operationType:"initDb"}}}):null;try{yield g(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=o("WAHex").parseHex(a),n="signalDb",r=new(o("WormEAR")).WormEAR(s,n,e),_=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(t,n,s,r,d,{blockingErrorThreshold:i,onBlockingError:l,safeToDeleteStores:new Set(["stanzaQueue","danglingQueue","migration"]),onTransactionError:function(n){if(n instanceof o("WormEAR").DecryptionError){var e=n;if(e.store==="icdcFails")return;o("WormIDbUtils").promisifyIDbRequest(o("WAIDBTypes").idb().deleteDatabase(t)).then(function(){return o("WAHandleFailureUtils").reregisterPhone()})}}}),m);u=_,yield _.init({eventFlow:p}),c.resolve(_),p==null||p.endSuccess()}))}catch(t){throw p==null||p.endFail("error"),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[WORM] Error performing initDb: ",""])),t),t}}),m.apply(this,arguments)}function p(){if(u==null)throw r("err")("Signal Db v3 is not initialized");return u}function _(){return c.promise}function f(e){return"Signal - "+e}function g(e){return r("BrowserLockManager")!=null?r("BrowserLockManager").request("wajs_make_signal_v3_db",e):e()}l.makeSignalDb=d,l.getDb=p,l.getDbPromise=_,l.signalOp=f}),98);
__d("WAGetMetaApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return o("WASignalDB").getDb().runInTransaction(["meta"],"readonly",function(e){return e.stores.meta.bulkGet(["certificateChain","deviceId","identityKeyPair","abProps","edgeInfo","clockSkew","authKeyPair"]).then(function(e){var t,n,r,o,a,i,l,s=e[0],u=e[1],c=e[2],d=e[3],m=e[4],p=e[5],_=e[6];return{abProps:d==null||(t=d.value)==null?void 0:t.abProps,authKeyPair:_==null||(n=_.value)==null?void 0:n.authKeyPair,certificateChain:s==null||(r=s.value)==null?void 0:r.certificateChain,clockSkew:p==null||(o=p.value)==null?void 0:o.clockSkew,deviceId:u==null||(a=u.value)==null?void 0:a.deviceId,edgeInfo:m==null||(i=m.value)==null?void 0:i.edgeInfo,identityKeyPair:c==null||(l=c.value)==null?void 0:l.identityKeyPair}})},o("WASignalDB").signalOp("getMeta"))};l.getMeta=e}),98);
__d("WAGetAbPropsApi",["WAGetMetaApi"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return o("WAGetMetaApi").getMeta().then(function(e){var t=e.abProps;return t})};l.getAbProps=e}),98);
__d("WASetMetaApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",function(e){return e.stores.meta.bulkPut(Object.entries(t).map(function(e){var t,n=e[0],r=e[1];return{key:n,value:(t={},t[n]=r,t)}}))},o("WASignalDB").signalOp("setMeta")).then(function(){})};l.setMeta=e}),98);
__d("WASetAbPropsApi",["WASetMetaApi"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASetMetaApi").setMeta({abProps:t})};l.setAbProps=e}),98);
__d("WAAbPropsInit",["Promise","WAAbProps","WAAbPropsCache","WAAbPropsConverters","WAAbPropsToUI","WAAbPropsTypes","WABridge","WAGetAbPropsApi","WALogger","WASetAbPropsApi","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(){if(!c)throw r("err")("Trying to get hash before AbProps gets initialized");return(u||(u=n("Promise"))).resolve(c.getHash())}function m(){if(!c)throw r("err")("Trying to get refresh secs before AbProps gets initialized");return(u||(u=n("Promise"))).resolve(c.getRefreshSecs())}var p={getAbProps:function(){if(!c)throw r("err")("Trying to read ABProps before they gets initialized");return(u||(u=n("Promise"))).resolve(c.readAll())},getHash:d,getRefreshSecs:m,setAbProps:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=o("WAAbPropsConverters").convertAbPropsDataToParsed(e);(t=c)==null||t.rewrite(n),yield o("WASetAbPropsApi").setAbProps(o("WAAbPropsConverters").convertAbPropsParsedToDbEntity(n)),_(n)});function t(t){return e.apply(this,arguments)}return t})()};function _(e){if(e.propValues){var t=o("WAAbPropsToUI").prepareAbPropsForUI(e.propValues);o("WABridge").getBridge().fireAndForget("event","abPropsUpdated",{abProps:t})}}function f(){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Starting ABProps store"])));var t=yield o("WAGetAbPropsApi").getAbProps(),n={};t&&(n=o("WAAbPropsConverters").convertDbAbPropsToParsed(t)),c=new(o("WAAbPropsCache")).AbPropsCache(n),o("WAAbProps").startAbProps(p,o("WAAbPropsTypes").ABPropConfigs),_(n),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ABProps inited"])))}),g.apply(this,arguments)}function h(e,t){if(c==null)throw r("err")("Trying to override ABProp before they get initialized");var n=c;n.overrideAbProp(e,t),_(o("WAAbPropsConverters").convertAbPropsDataToParsed(n.readAll()))}function y(e){return o("WAAbPropsTypes").ABPropConfigs[e][2]}function C(){if(!c)throw r("err")("Trying to read ABProps before they get initialized");return c.readAll()}function b(e){if(!c)throw r("err")("Trying to read ABProp "+e+" before AbProps gets initialized");var t=c.getAbProp(e);return t!=null?t:y(e)}l.getHash=d,l.getRefreshSecs=m,l.initAbProps=f,l.overrideAbProp=h,l.getAbDefault=y,l.getAbProps=C,l.getAbProp=b}),98);
__d("MAWWebWorkerLogger",["MAWBridge","MAWConsoleLogger","MAWLeakDetection","MAWLoggingSwitches","MAWSaveLogToDisk","WAAbPropsInit","WAJids","WATagsLogger","asyncToGeneratorRuntime","err","fb-error","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=2;function s(){o("WATagsLogger").initializeWaLogger(c)}function u(){return r("gkx")("19609")}var c={count:function(t,n){m("count",t,n),o("MAWConsoleLogger").logToConsole("count",t,n)},debug:function(t,n,r){o("MAWConsoleLogger").logToConsole("log",t,n,r)},devConsole:function(t,n,r,a){for(var e=arguments.length,i=new Array(e>4?e-4:0),l=4;l<e;l++)i[l-4]=arguments[l];switch(t){case"COUNT":o("MAWConsoleLogger").logToConsole.apply(void 0,["count",n,r,a].concat(i));break;case"DEV":o("MAWConsoleLogger").logToConsole.apply(void 0,["log",n,r,a].concat(i));break;case"DEV_XMPP":o("MAWConsoleLogger").logToConsole.apply(void 0,["log",n,r,a].concat(i));break;case"LOG":o("MAWConsoleLogger").logToConsole.apply(void 0,["info",n,r,a].concat(i));break;case"WARN":o("MAWConsoleLogger").logToConsole.apply(void 0,["warn",n,r,a].concat(i));break;case"ERROR":o("MAWConsoleLogger").logToConsole.apply(void 0,["error",n,r,a].concat(i));break;case"CATCHING":o("MAWConsoleLogger").logToConsole.apply(void 0,["error",n,r,a].concat(i));break}},error:function(t,n,a){var e=o("MAWLeakDetection").maybeReplaceVaultedString(t);a?f(e,n,a):f("webworker",n,r("err")(o("WAJids").maybeSanitizeLogLineText(e))),o("MAWConsoleLogger").logToConsole("error",e,n)},info:function(t,n){m("log",t,n),o("MAWConsoleLogger").logToConsole("info",t,n)},logRestricted:function(t,n){m("logRestricted",t,n),o("MAWConsoleLogger").logToConsole("log",t,n)},warn:function(t,n){m("warn",t,n),o("MAWConsoleLogger").logToConsole("warn",t,n)}};function d(){try{return o("WAAbPropsInit").getAbProp("msgrw_logger_entries")}catch(e){return o("WAAbPropsInit").getAbDefault("msgrw_logger_entries")}}function m(e,t,n){if(o("MAWLoggingSwitches").removeLoggingFromBridge){if(o("MAWSaveLogToDisk").saveLogEntry("worker",o("MAWSaveLogToDisk").formatLog({date:Date.now(),logLevel:e,logString:t,tags:n})),!u()){e==="count"&&o("MAWBridge").getBridge().fireAndForget("event","log",{logLevel:e,logString:t,tags:n},!0);return}e!=="debug"&&o("MAWBridge").getBridge().fireAndForget("event","log",{logLevel:e,logString:t,tags:n},!0)}}function p(){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("MAWSaveLogToDisk").forceCachedLogEntryPersist()}),_.apply(this,arguments)}function f(t,n,a){var i=0;if(a.taalOpcodes!=null){var l;(l=a.taalOpcodes)==null||l.forEach(function(e){e===r("fb-error").TAALOpcode.PREVIOUS_FRAME&&i++})}else i=e;o("MAWLoggingSwitches").removeLoggingFromBridge&&o("MAWSaveLogToDisk").saveLogEntry("worker",o("MAWSaveLogToDisk").formatErrorForLogging(t,n,a,i,d(),a.stack)),u()||o("MAWBridge").getBridge().fireAndForget("event","logError",{entriesToReport:d(),framesToPop:i,logString:t,message:a.message,stack:a.stack,tags:n},!0)}l.setupWebWorkerWaLogger=s,l.flushLogs=p}),98);
__d("EARInitType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["EB_INIT","LS_INIT","MAW_INIT","MAW_RP_INIT","MAW_IN_UI_INIT"]),l=e;i.default=l}),66);
__d("IndexedDbPolyfills",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.emit=function(t){for(var e=this.$1.get(t),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(e!==void 0)for(var a of e)a.apply(void 0,r);var i=this["on"+t];i!=null&&i.apply(void 0,r)},t.addEventListener=function(t,n,r){var e=this;r===void 0&&(r={});var o=r,a=o.signal,i=this.$1.get(t);i===void 0&&(i=new Set,this.$1.set(t,i)),i.add(n),a!=null&&(a.onabort=function(){e.removeEventListener(t,n)})},t.removeEventListener=function(t,n){var e=this.$1.get(t);e!==void 0&&e.delete(n)},e})(),l=function(){return function(t,n){var r=this.openCursor(t!=null?t:null),o=[],a=new e;return r.onsuccess=function(e){var t=e.target.result;if(t!=null&&(n===void 0||o.length<n))o.push(t.value),t.continue();else{a.result=o,a.onsuccess==null||a.onsuccess({target:{readyState:"done",result:o}});return}},r.onerror=function(e){a.onerror==null||a.onerror(e)},a}},s=typeof window!="undefined"?window:self;typeof s.IDBObjectStore!="undefined"&&s.IDBObjectStore.prototype.getAll===void 0&&(s.IDBObjectStore.prototype.getAll=l()),i.IDBRequest=e,i.getAll=l}),66);
__d("MAWIndexedDBDeletion",["CurrentMessengerUser","FBLogger","MAWIndexedDbMetadata","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o){return indexedDB==null||t==null?(e||(e=n("Promise"))).resolve():new(e||(e=n("Promise")))(function(e,n){var a=indexedDB.deleteDatabase(t);a.onsuccess=function(){r("FBLogger")("maw_db").warn("%s db was deleted",o),e()},a.onblocked=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db: blocked. Make sure DB is closed.",o)},a.onerror=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db",o),n(a.error)}})}function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=o("CurrentMessengerUser").getID();yield(e||(e=n("Promise"))).all([s(o("MAWIndexedDbMetadata").dbName(t),"maw_v1"),s(o("MAWIndexedDbMetadata").restoreDbName2(t),"maw_v3"),s(o("MAWIndexedDbMetadata").jobsDbName(t),"signal"),s(o("MAWIndexedDbMetadata").logDbName(t),"logDb")])}),c.apply(this,arguments)}l.deleteDB=s,l.deleteMAWPersistence=u}),98);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e,t=o("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),n=(yield(e=o("MAWKeychainCrypto")).getAccountKeys(t))[0],a=e.genBrowserEncryptionKeyString(),i=e.genDatabaseEncryptionSeed(),l=yield e.encryptDataToStringBuffer(n,i),s=o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+o("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:yield e.generateHashString(o("MAWWebInitDataHelpers").getAccountKeysString(t)[0]),appIdOrigin:r("MessengerWebInitData").appId,expiration:s,formatVersion:t,key:a,seed:l,userKeyBaseString:yield e.generateHashString(r("MessengerWebInitData").userKeyBase)}}catch(e){var u=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(u).mustfixThrow("Failed to generateNewKey")}}),s.apply(this,arguments)}l.default=e}),98);
__d("MAWEARKeychainDecryptionError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="MAWEARKeychainDecryptionError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("MAWWorkerSetupArgs",[],(function(t,n,r,o,a,i){"use strict";var e=null;function l(t){e=t}function s(){return e}function u(){e=null}i.setWorkerSetupArgs=l,i.getWorkerSetupArgs=s,i.resetWorkerSetupArgs=u}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData","Promise","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n,r,o,a,i){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,u,c,d){l===void 0&&(l=1);try{var m=yield o("MAWKeychainCrypto").getAccountKeys(l),p=yield(s||(s=n("Promise"))).all([o("MAWKeychainCrypto").importBrowserEncryptionKey(t),s.all(m.map(function(e){return o("MAWKeychainCrypto").decryptDataToArrayBuffer(e,a).catch(function(){return null})}))]),_=p[0],f=p[1],g=yield s.all(f.filter(Boolean).map(function(e){return o("MAWKeychainCrypto").genDatabaseEncryptionKey(_,e).catch(function(){return null})})),h=g.filter(Boolean);if(h.length===0)throw new(r("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:h,version:i}}catch(t){var y=null,C=null,b=o("MAWWorkerSetupArgs").getWorkerSetupArgs();(e||(e=r("ExecutionEnvironment"))).isInWorker&&b!=null&&(y=b.userKeyBase===r("MessengerWebInitData").userKeyBase,C=b.fbId===o("MAWCurrentUser").getID());var v=o("MAWWebInitDataHelpers").getAccountKeysString(l),S=v&&v[0]!=null?yield o("MAWKeychainCrypto").generateHashString(v[0]):null;throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",u!=null,v!=null,u===S,c!=null,r("MessengerWebInitData").userKeyBase!=null,c===(yield o("MAWKeychainCrypto").generateHashString(r("MessengerWebInitData").userKeyBase)),d,r("MessengerWebInitData").appId,o("MAWCurrentUser").getID()===String(r("MessengerWebInitData").userId),(e||(e=r("ExecutionEnvironment"))).isInWorker,y,C,l),t}}),c.apply(this,arguments)}l.default=u}),98);
__d("MWEARKeychainV3Errors",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="EARKeychainNotFoundError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.EARKeychainNotFoundError=e}),66);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:3449")&&n("cr:3449").clearLocalStorageBigValues()}l.onQuotaExceeded=e}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){o("WALogger").LOG([e])}function u(e){o("WALogger").ERROR([e])}function c(){return o("LocalStorageWrapper").getStorage(s)}function d(){return o("LocalStorageWrapper").isLocalStorageAvailable(s)}function m(e,t,n){return o("LocalStorageWrapper").setItemGuarded(e,t,n,u,o("MWLocalStorageErrorHandler").onQuotaExceeded)}function p(t,n){t==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]))):t.removeItem(n)}l.getStorage=c,l.isLocalStorageAvailable=d,l.setItemGuarded=m,l.removeItemGuarded=p}),98);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof window!="undefined"?window:self;function s(e){var t=o("MAWLocalStorage").getStorage(),n=function(r){o("MAWLocalStorage").setItemGuarded(t,e,JSON.stringify(r))},r=function(r){window.removeEventListener("storage",r),o("MAWLocalStorage").removeItemGuarded(t,e)},a=function(t){window.addEventListener("storage",t)},i=function(n){return n!=null&&n.key===e&&typeof n.newValue=="string"?JSON.parse(n.newValue):null};return{getMessage:i,onRequestReceived:function(t){var e=function(n){var e=i(n);e!=null&&t(e)};return a(e),{release:function(){r(e)}}},sendMessage:n,stopWaitingForReply:r,waitForReply:a}}function u(t){var n=new e.BroadcastChannel(t),r=new Set;n.addEventListener("message",function(e){r.forEach(function(t){t(e)})});var o=function(t){r.add(t)},a=function(t){r.delete(t)},i=function(t){n.postMessage(JSON.stringify(t))},l=function(t){return t!=null&&typeof t.data=="string"?JSON.parse(t.data):null};return{getMessage:l,onRequestReceived:function(t){var e=function(n){var e=l(n);e!=null&&t(e)};return o(e),{release:function(){a(e)}}},sendMessage:i,stopWaitingForReply:a,waitForReply:o}}function c(t){return e.BroadcastChannel!=null?u(t):s(t)}l.getChannel=c}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t){var n=this;this.$2=null,this.$5=function(e){var t=n.$4.getMessage(e);t!=null&&t.a==="sb"&&t.t!==n.tabID()&&t.r===n.tabID()&&t.k!=null&&(n.$2&&n.$2(t.k),n.$4.stopWaitingForReply(n.$5),n.$2=null)},this.$1=e,this.$3=t!=null?t:500,this.$4=o("MWTabCommunicationChannel").getChannel(e)}var a=t.prototype;return a.tabID=function(){return r("pageID")},a.$6=function(){var e={a:"r",t:this.tabID()};this.$4.sendMessage(e)},a.listenToRequest=function(r){return this.listenToRequestAsync(function(){return(e||(e=n("Promise"))).resolve(r())})},a.listenToRequestAsync=function(t){var e=this,n=function(o){o.a==="r"&&o.t!==e.tabID()&&r("promiseDone")(t().then(function(t){var n={a:"sb",k:t,r:o.t,t:e.tabID()};e.$4.sendMessage(n)}))};return this.$4.onRequestReceived(n)},a.$7=function(){var t=this;return new(e||(e=n("Promise")))(function(e){t.$2=e,t.$4.waitForReply(t.$5),t.$6()})},a.request=function(o,a){var t=this,i,l=function(){i!=null&&r("clearTimeout")(i)};return(e||(e=n("Promise"))).race([this.$7().then(function(e){return t.$4.stopWaitingForReply(t.$5),o(e)}),new e(function(e){i=r("setTimeout")(function(){e(a()),t.$4.stopWaitingForReply(t.$5)},t.$3)})]).then(function(e){return l(),e})},t})();l.MWTabCommunication=s}),98);
__d("MWBroadcastChannelPolyfill",["FBLogger","LocalStorageWrapper","MessengerLogHistory","Random","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MessengerLogHistory").getInstance("client_init");function s(t){e.debug("[MWBroadcastChannelPolyfill] "+t)}function u(e){r("FBLogger")("messenger_web").mustfix(e)}var c={},d=o("LocalStorageWrapper").getStorage(s);function m(e){var t="$BroadcastChannel$"+e+"$",n=!1,a=function(n){var e,r;if(n.storageArea===d){var o=n.newValue;if(!(o==null||o==="")&&((e=n.key)==null?void 0:e.substring(0,t.length))===t){var a=JSON.parse(o);(r=c[t])==null||r.forEach(function(e){e({data:a})})}}};return window.addEventListener("storage",a),{addEventListener:function(n,r){c[t]=c[t]||new Set,c[t].add(r)},close:function(){n||(n=!0,c={},window.removeEventListener("storage",a))},postMessage:function(a){if(n){r("FBLogger")("ls_web_init").mustfix("Broadcast channel is closed");return}var e=JSON.stringify(a),i=t+String(Date.now())+"$"+String(r("Random").uint32());o("LocalStorageWrapper").setItemGuarded(d,i,e,u),r("setTimeout")(function(){o("LocalStorageWrapper").removeItemGuarded(d,i,u)},500)},removeEventListener:function(n,r){var e;(e=c[t])==null||e.delete(r)}}}l.default=m}),98);
__d("MWBroadcastChannel",["MWBroadcastChannelPolyfill"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return self.BroadcastChannel!=null?new self.BroadcastChannel(e):r("MWBroadcastChannelPolyfill")(e)}l.MWBroadcastChannel=e}),98);
__d("MWLSDatabaseNames",[],(function(t,n,r,o,a,i){"use strict";var e="LightSpeed",l=e+"V3";i.name=e,i.lightspeedPrefix=l}),66);
__d("MWLSIndexedDBName",["MAWCurrentUser","MWLSDatabaseNames"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWCurrentUser").getID();return o("MWLSDatabaseNames").lightspeedPrefix+e}l.dbName=e}),98);
__d("ReStoreTabNotifier",["CurrentMessengerUser","FBLogger","MWBroadcastChannel","MWLSIndexedDBName","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=o("CurrentMessengerUser").getIDorEIMU();function s(t){var n=o("MWBroadcastChannel").MWBroadcastChannel(t==="restore-table-"+e+"-"+o("MWLSIndexedDBName").dbName()?"mwChat-"+e:t);function a(e,t){try{n.postMessage([e,t])}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).warn("Failed to broadcast changes")}}function i(e,t){n.addEventListener("message",function(n){var r=n.data,o=r[0];o===e&&t(r[1])})}return{onEventReceive:i,postMessage:a}}l.default=s}),98);
__d("MWEARKeychainV3",["$InternalEnum","Deferred","ExecutionEnvironment","FBLogger","LSPlatformLsInitLog","MAWCryptoConsts","MAWCurrentUser","MAWEARGenNewKeychainCryptoKey","MAWGenKeychainCryptoKeyWithVersion","MAWQplProxy","MAWReliabilityMonitor","MWEARKeychainV3Errors","MWTabCommunication","Promise","QPLUserFlow","Random","ReStoreTabNotifier","WAArrayBufferUtils","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe","gkx","memoizeOneWithArgs","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(){return{accountKey:null,databaseEncryptionKeys:new Map,dbReady:new(r("Deferred")),latestVersion:o("MAWCryptoConsts").VERSION}},c={global_ear:u(),maw_ear:u()},d=null,m=(function(){var e=Object.keys(c).reduce(function(e,t){return e[t]="none",e},{});return{get:function(n){return e[n]},is:function(n,r){return e[n]===r},set:function(n,r){var t;e[n]=r,(t=d)==null||t.updateState()}}})();function p(e){c[e]=u(),m.set(e,"none")}function _(e,t){m.set(e,t)}function f(e){for(var t=o("Random").uint32();e.some(function(e){return e.randomisedVersion===t});)t=o("Random").uint32();return t}var g={global_ear:function(){return null},maw_ear:function(){return null}},h=function(t){return g[t]()},y=function(t,n){g[t]=function(){return n}},C=function(t,n){y(t,n),k(t).dbReady.resolve()},b={global_ear:"browserEncryptionMetaV2",maw_ear:"encryptionMetaV3"},v=r("memoizeOneWithArgs")(function(e,t){return new(o("MWTabCommunication")).MWTabCommunication("ear_keys_"+t+"_"+e)});function S(e,t,n){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a;if(n===void 0&&(n=U),r("gkx")("9396")&&r("FBLogger")("messenger_web").info("Initialise EAR keychain: %s",e),d=B(e),m.is(e,"success")&&k(e).databaseEncryptionKeys.size!==0)return o("WAResultOrError").makeResult(E(e));var i=o("MAWCurrentUser").getID(),l=r("ReStoreTabNotifier")("channel-ear-keychain-v3-"+i);l.onEventReceive("notifyEarKeychainV2",w);var u=(s||(s=r("ExecutionEnvironment"))).isInWorker?"Worker":"UI";n(e+"_ear_init_start",{string:(a={},a["initFlow_"+e+"_"+u]=t,a)});try{var c,p=yield W(l,e,void 0,n);n(e+"_ear_import_end");for(var _ of p)k(e).databaseEncryptionKeys.set(_.result.version,{dbEntry:_.entry,keys:_.result.keys});return M(e),v(e,i).listenToRequest(function(){return JSON.stringify(Array.from(k(e).databaseEncryptionKeys.entries()).map(function(e){var t=e[0],n=e[1],r=n.dbEntry,a=n.keys;return[t,{dbEntry:r,keys:a.map(function(e){return o("WAArrayBufferUtils").arrayBufferToString(e)})}]}))}),n(e+"_ear_init_end",{string_array:(c={},c[e+"_randomisedVersionKeys"+u]=L(e).map(function(e){var t=e[0],n=e[1].dbEntry;return String(n.randomisedVersion)}),c)}),m.set(e,"success"),o("WAResultOrError").makeResult(E(e))}catch(t){return m.set(e,"failure"),n(e+"_ear_init_error"),r("gkx")("9396")&&r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to setup EAR Keychain V3. Namespace: %s",e),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",r("getErrorSafe")(t))}}),R.apply(this,arguments)}function L(e){return Array.from(k(e).databaseEncryptionKeys.entries())}function E(e){return k(e).latestVersion}function k(e){return c[e]}function I(e,t){var n=t!=null?t:E(e),a=k(e).databaseEncryptionKeys.get(n);if(a==null){r("promiseDone")($(e).then(function(e){var t=e.map(function(e){return e.version}).includes(n);r("FBLogger")("messenger_web").info("EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s",t,n,e.length)}));var i=E(e),l=Array.from(k(e).databaseEncryptionKeys.keys());throw r("FBLogger")("messenger_web").mustfix("EAR Key v%s was null. Latest version: %s has key: %s, keychain length: %s, currentLatestVersion: %s, init status %s, in worker %s",n,i,k(e).databaseEncryptionKeys.get(i)==null,k(e).databaseEncryptionKeys.size,Math.max.apply(Math,l),m.get(e),(s||(s=r("ExecutionEnvironment"))).isInWorker),new(o("MWEARKeychainV3Errors")).EARKeychainNotFoundError("EAR Key "+n+" was null.")}return{dbEntry:a.dbEntry,keys:a.keys,randomisedVersion:a.dbEntry.randomisedVersion,version:n}}function T(e){return r("MAWGenKeychainCryptoKeyWithVersion")(e.key,e.seed,e.version,e.formatVersion,e.accountKeyString,e.userKeyBaseString,e.appIdOrigin)}var D=n("$InternalEnum")({UNKNOWN:-1,NO_KEY:0,EBSM_EARV2_UPGRADE:1,RANDOMISED_VERSION_UPGRADE:2,EXPIRED_KEY:3,FORCE_KEY_ROTATION:4});function x(e){if(e.length===0)return{reason:D.NO_KEY,result:!0};var t=e[e.length-1];return o("WATimeUtils").isInFuture(t.expiration)?{result:!1}:{reason:D.EXPIRED_KEY,result:!0}}function $(t){var r=N(t,"readonly");return new(e||(e=n("Promise")))(function(e,n){r.onabort=function(){return n(r.error)},r.onerror=function(){return n(r.error)};var o=r.objectStore(b[t]).getAll();o.onsuccess=function(){return e(o.result)},o.onerror=function(){return n(o.error)}}).then(P)}function P(e){var t=e.find(function(e){return e.version==null});t!=null&&r("FBLogger")("messenger_web").mustfix("EAR Keychain Rotation null version: fields nonnull: %s %s %s %s %s %s",t.id==null,t.key==null,t.seed==null,t.formatVersion==null,t.accountKeyString==null,t.userKeyBaseString==null);var n=e.filter(function(e){return e.version!=null});return n.sort(function(e,t){return e.version-t.version})}function N(e,t){var n=h(e);if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Encryption IndexDB should've been initialized. Namespace: %s",e);return n.transaction(b[e],t,{durability:"strict"})}var M=function(t){var e=Array.from(k(t).databaseEncryptionKeys.keys());e.length>0?k(t).latestVersion=Math.max.apply(Math,e):r("FBLogger")("messenger_web").mustfix("EAR latest version does not exist")},w=function(t){var e=t.namespace,o=t.version;r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{r("FBLogger")("messenger_web").info("Received key rotation notification. Namespace: %s",e),yield k(e).dbReady.getPromise();var t=(yield $(e)).find(function(e){return e.version===o});if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Notified new Ear Key but missing in DB");var n=yield T(t);k(e).databaseEncryptionKeys.set(n.version,{dbEntry:t,keys:n.keys}),M(e),r("FBLogger")("messenger_web").info("Rotated key successfully. Namespace: %s",e)}catch(t){return r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to handleNewVersion. In worker %s. Namespace: %s.",(s||(s=r("ExecutionEnvironment"))).isInWorker,e)}})())};function A(e){return m.get(e)!=="none"}function F(e){return m.get(e)}function O(e){return m.is(e,"success")?(k(e).databaseEncryptionKeys.size===0&&r("FBLogger")("messenger_web").mustfix("Keychain initialised but no keys present"),!0):!1}function B(e){return o("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("EARv3",function(){return{extra:{isKeychainInitialised:O(e).toString(),latestVersion:E(e).toString()},reason:m.get(e),state:(function(){switch(m.get(e)){case"none":return o("MAWReliabilityMonitor").HealthReportState.PENDING;case"success":return o("MAWReliabilityMonitor").HealthReportState.OK;case"failure":return o("MAWReliabilityMonitor").HealthReportState.ERROR;default:return o("MAWReliabilityMonitor").HealthReportState.UNKNOWN}})()}})}function W(e,t,n,r){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,o,a,i){var l=yield r("MAWEARGenNewKeychainCryptoKey")();i(o+"_ear_raw_key_generated");var u=yield new(e||(e=n("Promise")))(function(e,n){var u=N(o,"readwrite");u.onerror=function(){return n(u.error)},u.onabort=function(){return n(u.error)};var c=u.objectStore(b[o]).getAll();c.onerror=function(){return n(c.error)},c.onsuccess=function(){var d;i(o+"_ear_keys_fetched");var m=P(c.result),p=x(m),_=p.reason,g=p.result;if((a==null?void 0:a.forceKeyRotation)!==!0&&!g)return e(m);var h=(a==null?void 0:a.forceKeyRotation)===!0?D.FORCE_KEY_ROTATION:_!=null?_:D.UNKNOWN,y=m.map(function(e){return e.version}),C=(d=y[y.length-1])!=null?d:0;r("FBLogger")("messenger_web").info("Key rotation. EAR versions: %s. Latest version: %s. Namespace: %s, Worker: %s",y.toString(),C,o,(s||(s=r("ExecutionEnvironment"))).isInWorker);var v=babelHelpers.extends({},l,{randomisedVersion:f(m),source:h,version:C+1});i(o+"_ear_adding_new_key"),u.oncomplete=function(){m.push(babelHelpers.extends({},v,{id:v.version})),t.postMessage("notifyEarKeychainV2",{namespace:o,version:v.version}),i(o+"_ear_gen_key_end"),e(m)};var S=u.objectStore(b[o]).add(v);S.onerror=function(){return n(r("FBLogger")("messenger_web").catching(S.error).mustfixThrow("Failed to rotate EAR key"))}}});i(o+"_ear_import_start");var c=yield e.allSettled(u.map(function(e){return T(e).then(function(t){return{entry:e,result:t}})})),d=c[c.length-1];if(d.status==="rejected"){var m,p=(m=a==null?void 0:a.corruptedEARRetryCount)!=null?m:0;if(p>=1)throw d.reason;return W(t,o,{corruptedEARRetryCount:p+1,forceKeyRotation:!0},i)}return c.map(function(e){if(e.status==="fulfilled")return e.value}).filter(Boolean)}),q.apply(this,arguments)}var U=function(t,n){o("LSPlatformLsInitLog").addPoint(t,n),V(t,n)},V=function(t,n){var e=r("qpl")._(25310776,"6155");(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(e,"backend_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(e,"ui_"+t),n!=null&&r("QPLUserFlow").addAnnotations(e,n))},H=function(t,n){return v(t,n).request(function(e){var n=JSON.parse(e);return n.forEach(function(e){var n=e[0],r=e[1],a=r.keys.map(o("WAArrayBufferUtils").stringToArrayBuffer);k(t).databaseEncryptionKeys.set(n,{dbEntry:r.dbEntry,keys:a})}),M(t),m.set(t,"success"),!0},function(){return!1})};l.InitStatus=m,l.resetKeychain__TEST_ONLY_DO_NOT_USE=p,l.setInitStatus__TEST_ONLY_DO_NOT_USE=_,l.generateNewRandomisedVersionNumber=f,l.setNamespaceSourceDbWithoutMarkingDbReady=y,l.setNamespaceSourceDbAndMarkAsReady=C,l.getEncryptionKeysTabCommunication=v,l.init=S,l.getLatestVersion=E,l.getKeychain=k,l.getDbEncryptionKey=I,l.isKeychainSettled=A,l.getKeychainInitStatus=F,l.isKeychainInitialised=O,l.logMawInitPoint=V,l.importKeysFromOtherTab=H}),98);
__d("WAWorkerGlobalScope",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){return typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:self})();i.workerGlobalScope=e}),66);
__d("MAWEncryptionIndexedDbV2",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","IndexedDbPolyfills","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MWEARKeychainV3","Promise","QPLUserFlow","WALogger","WAWorkerGlobalScope","err","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;n("IndexedDbPolyfills");var c="browserEncryptionMetaV2",d="version",m=1,p=6e4,_=null,f=null,g=null;function h(){return _}function y(){return _!=null}var C=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function b(e,t){t===void 0&&(t=0);var a=o("MAWCurrentUser").getID();return t>m?(L(e,"ear_idb_retry_failed_max_reached"),(u||(u=n("Promise"))).reject(new C)):_!=null?(L(e,"ear_db_exists"),(u||(u=n("Promise"))).resolve()):indexedDB==null?(L(e,"ear_idb_unavailable"),(u||(u=n("Promise"))).reject(r("err")("IndexedDB API not available"))):(L(e,"ear_db_open_start",{bool:{browserLockEnabled:r("BrowserLockManager")!=null}}),new(u||(u=n("Promise")))(function(n,i){var l=function(o){b(e,t+1).then(n).catch(function(e){if(e instanceof C)return i(o);i(e)})};try{g=o("MAWIndexedDbMetadata").encryptionDbName(a);var u=indexedDB.open(g),m=o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("IndexedDB initialisation timeout in %s flow, isInWorker: %s, openRequest: %s",String(e),(s||(s=r("ExecutionEnvironment"))).isInWorker?"true":"false",u.readyState))},p);u.onupgradeneeded=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),L(e,"ear_db_upgrade_start");var n=t.target.result;if(!n.objectStoreNames.contains(c)){var r=n.createObjectStore(c,{autoIncrement:!0,keyPath:"id"});r.createIndex(d,d,{unique:!0})}L(e,"ear_db_upgrade_end")},u.onblocked=function(){L(e,"ear_db_open_blocked"),o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("EAR Open timed out while blocked"))},2e3)},u.onsuccess=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);var a=t.target.result;if(!a.objectStoreNames.contains(c)){var s=u.result.objectStoreNames.contains(c);return r("FBLogger")("messenger_web").warn("Missing encryption meta table. Is store present: %s",s),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),S(a,"missing_encryption_meta_table").then(function(){l(r("err")("Malformed encryption DB"))}).catch(function(t){return L(e,"ear_idb_retry_failed_delete_failed"),i(r("err")("Failed to delete malformed encryption DB: "+t.message))})}a.onversionchange=function(){a.close(),r("FBLogger")("messenger_web").info("EAR onversionchange triggered"),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),f==null||f()},L(e,"ear_db_open_end"),_=a,o("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("global_ear",_),n()},u.onerror=function(){if(o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),u.error.name==="UnknownError")return L(e,"ear_db_open_error_unknown_error"),l(u.error);L(e,"ear_db_open_error"),i(u.error)}}catch(t){L(e,"ear_db_error"),i(t)}}))}function v(e){f=f==null?e:f}function S(e,t){return e===void 0&&(e=_),r("FBLogger")("messenger_web").warn("EAR DB deletion triggered: %s",t),e!=null&&e.close(),o("MAWIndexedDBDeletion").deleteDB(g,"ear")}function R(t){switch(t){case r("EARInitType").EB_INIT:return r("qpl")._(521477507,"1406");case r("EARInitType").MAW_INIT:return r("qpl")._(25310776,"6155");case r("EARInitType").MAW_RP_INIT:return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Armadillo Web Remote Presence] MAW RP Initialising EAR"]))),r("qpl")._(25310776,"6155");case r("EARInitType").LS_INIT:return r("qpl")._(25305590,"1127");case r("EARInitType").MAW_IN_UI_INIT:return null}}function L(e,t,n){var a=R(e);a!=null&&((s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(a,"worker_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(a,t),n!=null&&r("QPLUserFlow").addAnnotations(a,n)))}l.storeName=c,l.ENCRYPTION_MAW_STORES_INDEX=d,l.getEncryptionDB=h,l.isEncryptionDBInited=y,l.makeEncryptionDB=b,l.maybeSetEncryptionDbOnVersionChange=v,l.deleteEncryptionDB_UNSAFE=S}),98);
__d("MAWKeychain",["MWEARKeychainV3"],(function(t,n,r,o,a,i,l){"use strict";var e={getDbEncryptionKey:o("MWEARKeychainV3").getDbEncryptionKey,getLatestVersion:o("MWEARKeychainV3").getLatestVersion,init:o("MWEARKeychainV3").init};l.default=e}),98);
__d("MWSetupDBEncryption",["BrowserLockManager","ExecutionEnvironment","FBLogger","MAWEncryptionIndexedDbV2","MAWKeychain","MWEARKeychainV3","Promise","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(t,n){return n()};function c(e){u=e}var d="mw_ear_db";function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{return yield o("MAWEncryptionIndexedDbV2").makeEncryptionDB(e),yield u("init_setup_keychain",function(){return r("MAWKeychain").init("global_ear",e)})}catch(n){var t=n instanceof Error?n:r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(t).mustfix("[%s] EAR setup error",String(e)),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",t)}}),p.apply(this,arguments)}function _(e){return o("MAWEncryptionIndexedDbV2").getEncryptionDB()!=null&&o("MWEARKeychainV3").isKeychainInitialised("global_ear")?(s||(s=n("Promise"))).resolve(o("WAResultOrError").makeResult(o("MWEARKeychainV3").getLatestVersion("global_ear"))):r("BrowserLockManager")!=null?new(s||(s=n("Promise")))(function(t,o){r("promiseDone")(r("BrowserLockManager").request(d,n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var n=yield m(e);t(n)}catch(e){o(e)}})),function(e){},function(e){o(e)})}):m(e)}function f(e,t){t===void 0&&(t=function(t){return!0});var r=null;return function(a){return r==null&&(r=e(a).then(function(e){return r=t(e)?(s||(s=n("Promise"))).resolve(e):null,e}).catch(function(e){throw r=null,e})),r}}var g=f(function(t){return _(t)},function(e){return(e==null?void 0:e.success)===!0}),h=(e||(e=r("ExecutionEnvironment"))).isInWorker?g:_;l.setPerformanceMeasurementTool=c,l.init=h}),98);
__d("WAQPLProxy",["WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,i,l){if(l===void 0&&(l=!0),d==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["WAQPLProxy: Proxy implementation is not provided for ",""])),t),r("err")("WAQPLProxy: Proxy implementation is not provided");return d.start(t,n,a,i,l)}function c(e,t){if(d==null)throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["WAQPLProxy: Proxy implementation is not provided for ",""])),e),r("err")("WAQPLProxy: Proxy implementation is not provided");return d.resume(e,t)}var d=null;function m(e){d=e}l.waQPLProxyStart=u,l.waQPLProxyStartResume=c,l.provideProxyImplementationForWAQPLProxy=m}),98);
__d("BackendInitLoggingUtils",["ErrorMetadata","MAWCommonWebWorkerErrorLogging","MAWLoggerUtils","MAWPREListeners","MAWQplProxy","MAWWebWorkerLogger","MWSetupDBEncryption","WAQPLProxy","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){return o("MAWQplProxy").measurePerfInQPL_USE_WITH_CARE(r("qpl")._(25310776,"6155"),"backend_"+t,n)},s=function(t){return o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25310776,"6155"),t)},u=function(t){return o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(1056839232,"112"),t)};function c(){o("MAWWebWorkerLogger").setupWebWorkerWaLogger(),o("MAWCommonWebWorkerErrorLogging").init(),r("ErrorMetadata").addGlobalMetadata("MESSENGER_E2EE_WEB","ENVIRONMENT","worker"),o("MAWLoggerUtils").initMessengerWebLogging(),o("WAQPLProxy").provideProxyImplementationForWAQPLProxy({resume:o("MAWQplProxy").makeQplUserFlowFromExistedInstance,start:function(t,n,r,a,i){return o("MAWQplProxy").startQplUserFlow(t,n,{callBridgeWithTimestamp:i,providedInstanceKey:r,providedTimeoutInMs:a})}}),o("MAWPREListeners").initializeWAPREMetrics(),o("MWSetupDBEncryption").setPerformanceMeasurementTool(e)}l.measureMawInit=e,l.MAWInitPoint=s,l.MAWMICPoint=u,l.initializeBackendLogging=c}),98);
__d("BinarySearch",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e={GREATEST_LOWER_BOUND:"GREATEST_LOWER_BOUND",GREATEST_STRICT_LOWER_BOUND:"GREATEST_STRICT_LOWER_BOUND",LEAST_STRICT_UPPER_BOUND:"LEAST_STRICT_UPPER_BOUND",LEAST_UPPER_BOUND:"LEAST_UPPER_BOUND",NEAREST:"NEAREST"},s=function(t,n){if(typeof t!="number"||typeof n!="number")throw r("FBLogger")("comet_infra").mustfixThrow("The default comparator can only be used with sequences of numbers.");return t-n},u=e.GREATEST_LOWER_BOUND,c=e.GREATEST_STRICT_LOWER_BOUND,d=e.LEAST_STRICT_UPPER_BOUND,m=e.LEAST_UPPER_BOUND,p=e.NEAREST;function _(e,t,n,r,o){o===void 0&&(o=s);var a=m,i=g(e,t,n,r,o,a);if(n<=i&&i<r){var l=e(i);return o(l,t)===0?l:void 0}else return}function f(e,t,n,r,o){o===void 0&&(o=s);var a=m,i=g(e,t,n,r,o,a);return n<=i&&i<r&&o(e(i),t)===0?i:-1}function g(e,t,n,o,a,i){switch(i){case m:return h(e,t,n,o,a);case u:return y(e,t,n,o,a);case d:return C(e,t,n,o,a);case c:return b(e,t,n,o,a);case p:return v(e,t,n,o,a);default:throw r("FBLogger")("comet_infra").mustfixThrow("Invalid mode %s",i)}}function h(e,t,n,r,o){for(var a=n,i=r;a+1<i;){var l=a+Math.floor((i-a)/2);o(e(l),t)>=0?i=l:a=l}return a<i&&o(e(a),t)>=0?a:i}function y(e,t,n,r,o){return C(e,t,n,r,o)-1}function C(e,t,n,r,o){for(var a=n,i=r;a+1<i;){var l=a+Math.floor((i-a)/2);o(e(l),t)>0?i=l:a=l}return a<i&&o(e(a),t)>0?a:i}function b(e,t,n,r,o){return h(e,t,n,r,o)-1}function v(e,t,n,r,o){var a=y(e,t,n,r,o),i=Math.abs(o(e(a),t)),l=Math.abs(o(e(a+1),t));return i<l?Math.max(a,n):Math.min(a+1,r-1)}function S(e,t,n){return _(function(t){return e[t]},t,0,e.length,n)}function R(e,t,n){return f(function(t){return e[t]},t,0,e.length,n)}function L(e,t,n,r){return g(function(t){return e[t]},t,0,e.length,n,r)}l.GREATEST_LOWER_BOUND=u,l.GREATEST_STRICT_LOWER_BOUND=c,l.LEAST_STRICT_UPPER_BOUND=d,l.LEAST_UPPER_BOUND=m,l.NEAREST=p,l.find=_,l.findIndex=f,l.findBound=g,l.leastUpperBound=h,l.greatestLowerBound=y,l.leastStrictUpperBound=C,l.greatestStrictLowerBound=b,l.nearest=v,l.findInArray=S,l.findIndexInArray=R,l.findBoundInArray=L}),98);
__d("EBLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("wmi_eb",t)};l.EBLogger=e}),98);
__d("EBMinosCheckWasmFeatureSupport",["asyncToGeneratorRuntime","gkx","wasm-feature-detect"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(e!=null)return e;var t=yield o("wasm-feature-detect").bulkMemory(),n=yield o("wasm-feature-detect").bigInt(),r=yield o("wasm-feature-detect").referenceTypes();return e=t&&n&&r,e}),u.apply(this,arguments)}function c(){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield s();if(!e)return!1;var t=r("gkx")("20911");return t}),d.apply(this,arguments)}l.checkWasmFeatureSupport=s,l.checkWasmFeatureSupportAndGK=c}),98);
__d("MWEBUseLocalStorage",["WALogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=t,i=n!=null?n:"true";if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var l;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Encrypted Backups key "," written to local storage"])),a),(l=(s||(s=r("WebStorage"))).getLocalStorage())==null||l.setItem(a,i)}}function c(e){var t=e;if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var n;(n=(s||(s=r("WebStorage"))).getLocalStorage())==null||n.removeItem(t)}}function d(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return(t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n)}return null}function m(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return((t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n))!=null}return!0}l.mwEBCreateLocalStorageEntry=u,l.mwEBDeleteLocalStorageEntry=c,l.mwEBGetLocalStorageEntryValue=d,l.mwEBGetIsLocalStorageEntryValuePresent=m}),98);
__d("EBReenrollmentTriggerHandler",["EBLogger","LSIntEnum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("EBLogger").EBLogger().tags(["DefaultEBReenrollmentTriggerHandler"]),u=(function(){function t(){}var n=t.prototype;return n.handle=function(n){s.debug("Running default reenrollment trigger handler for reason: "+(e||(e=o("LSIntEnum"))).toNumber(n.deviceReenrollmentReason));for(var t of r("MWEncryptedBackupsLocalStorageEntryEnum").members())s.debug("Clearing local storage key: "+t),t!==r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE&&o("MWEBUseLocalStorage").mwEBDeleteLocalStorageEntry(t)},t})();l.DefaultEBReenrollmentTriggerHandler=u}),98);
__d("MWEBODSCategory",[],(function(t,n,r,o,a,i){"use strict";var e=7319;i.default=e}),66);
__d("MWEBODSEntityName.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({MW_EB_PIN_RESTORE_AUTH:"mw_eb_pin_restore_auth",MW_EB_RC_RESTORE_AUTH:"mw_eb_rc_restore_auth",MW_EB_AUTO_RESTORE_AUTH:"mw_eb_auto_restore_auth",MW_EB_OTC_AUTH:"mw_eb_otc_auth",MW_EB_ONBOARDING_AUTH:"mw_eb_onboarding_auth",MW_EBSM_HYDRATION:"mw_ebsm_hydration",MW_EBSM_IDB:"mw_eb_ebsm_idb",MW_EBSM_CORRUPTION:"mw_ebsm_corruption",MW_EBSM_CORRUPTION_RELOAD:"mw_ebsm_corruption_reload",MW_EBSM_RESTORE_PERSISTENCE_ERROR:"mw_ebsm_restore_persistence",MW_EBSM_IDB_TABLE_DELETION:"mw_ebsm_idb_table_deletion",MW_EBSM_WORKER_SUFFIX:"_worker",MW_EBSM_COUNTERS:"mw_ebsm_counters",MW_EBSM_FETCH_BACKUP_IDS:"mw_ebsm_fetch_backup_ids",MW_EB_SWITCH_CONSISTENCY:"mw_eb_switch_consistency",MAW_EB_UPLOAD_TRACKING:"maw_eb_upload_tracking",MAW_EB_UPLOAD_COUNTER:"maw_eb_upload_counter",MAW_EB_RESTORE_COUNTER:"maw_eb_restore_counter",EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST:"eb_symmetric_encryption_js_rust_shadow_test",MAW_EB_FRONTEND_QPL_IN_WORKER:"maw_eb_frontend_qpl_in_worker",MW_EB_RETROACTIVE_BACKUP:"mw_eb_retroactive_backup"}),l=e;i.default=l}),66);
__d("EBReenrollmentTriggerListener",["EBReenrollmentTriggerHandler","LSIntEnum","MWEBODSCategory","MWEBODSEntityName.enum","ODS","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){this.$1=new Map,this.$4=new(o("EBReenrollmentTriggerHandler")).DefaultEBReenrollmentTriggerHandler,this.$2=e,this.$5()}var n=t.prototype;return n.$5=function(){var t=this;return this.$3==null&&(this.$3=o("ReQL").fromTableAscending(this.$2.tables.encrypted_backups_reenrollment_trigger).take(1).subscribe(function(n,a){if(a.operation==="add"||a.operation==="put"){(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_COUNTERS,"reenrollment_trigger");var l=t.getDefaultHandler();if(a.value.deviceReenrollmentReason!=null){var u;l=(u=t.$1.get((s||(s=o("LSIntEnum"))).unwrapIntEnum(a.value.deviceReenrollmentReason)))!=null?u:l}l.handle(a.value),r("promiseDone")(t.$2.runInTransaction(function(e){return e.encrypted_backups_reenrollment_trigger.delete(a.value.pk)},"readwrite",void 0,void 0,i.id+":77"))}})),this.$3},n.attachHandler=function(t,n){this.$1.set(t,n)},n.getDefaultHandler=function(){return this.$4},t})(),c;function d(e){return c!=null||(c=new u(e)),c}function m(e){return c==null&&d(e),c}l.initEBReenrollmentTriggerListener=d,l.getEBReenrollmentTriggerListener_TESTING_ONLY=m}),98);
__d("EmoticonsList",[],(function(t,n,r,o,a,i){a.exports={emotes:{"O:)":"angel","O:-)":"angel","0:)":"angel","0:-)":"angel","'-_-":"coldsweat",":3":"colonthree","o.O":"confused",O_O:"confused",o_o:"confused","0_0":"confused","O.o":"confused_rev",":'(":"cry",":'-(":"cry","3:)":"devil","3:-)":"devil",":dog:":"dog","-3-":"flushkiss",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",")=":"frown",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp","=D":"grin",":-D":"grin",":D":"grin",">:(":"grumpy",">:-(":"grumpy","<3":"heart","&lt;3":"heart","^_^":"kiki","^~^":"kiki",":*":"kiss",":-*":"kiss","(y)":"like",":like:":"like","(Y)":"like",T_T:"loudly_crying","T-T":"loudly_crying",ToT:"loudly_crying","T.T":"loudly_crying",":-|":"neutral",":|":"neutral",":v":"pacman",":V":"pacman",'<(")':"penguin",">_<":"persevere",">.<":"persevere",":poop:":"poop",":|]":"robot","(^^^)":"shark",":)":"smile",":-)":"smile",":]":"smile","(:":"smile","=)":"smilingface","(=":"smilingface","-_-":"squint","B|":"sunglasses","8-|":"sunglasses","8|":"sunglasses","B-|":"sunglasses","B-)":"sunglasses","8-)":"sunglasses","8)":"sunglasses","(n)":"thumbsdown","(N)":"thumbsdown",":+1:":"thumbsup",":thumbsup:":"thumbsup",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue",":trans:":"transflag",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",";)":"wink",";-)":"wink",";*":"winkkiss",";-*":"winkkiss",";-P":"winktongue",";P":"winktongue",";-p":"winktongue",";p":"winktongue",":cheese:":"cheesewedge",":eyes:":"eyes",":peek:":"eyes",":clown:":"clown"},symbols:{angel:"O:)",coldsweat:"'-_-",colonthree:":3",confused:"o.O",confused_rev:"O.o",cry:":'(",devil:"3:)",dog:":dog:",flushkiss:"-3-",frown:":(",gasp:":o",grin:"=D",grumpy:">:(",heart:"<3",kiki:"^_^",kiss:":*",like:"(y)",loudly_crying:"T_T",neutral:":-|",pacman:":v",penguin:'<(")',persevere:">_<",poop:":poop:",robot:":|]",shark:"(^^^)",smile:":)",smilingface:"=)",squint:"-_-",sunglasses:"B|",thumbsdown:"(n)",thumbsup:":+1:",tongue:":P",transflag:":trans:",unsure:":/",upset:">:o",wink:";)",winkkiss:";*",winktongue:";-P",cheesewedge:":cheese:",eyes:":eyes:",clown:":clown:"},emoji:{angel:"1f607",coldsweat:"1f613",colonthree:"FACE_WITH_COLON_THREE",confused:"1f633",confused_rev:"1f633",cry:"1f622",devil:"1f608",dog:"1f436",flushkiss:"1f61a",frown:"1f641",gasp:"1f62e",grin:"1f603",grumpy:"1f620",heart:"2764",kiki:"1f60a",kiss:"1f618",like:"LIKE",loudly_crying:"1f62d",neutral:"1f610",pacman:"PACMAN",penguin:"1f427",persevere:"1f623",poop:"1f4a9",robot:"1f916",shark:"1f988",smile:"1f642",smilingface:"1f60a",squint:"1f611",sunglasses:"1f60e",thumbsdown:"1f44e",thumbsup:"1f44d",tongue:"1f61b",transflag:"1f3f3_fe0f_200d_26a7_fe0f",unsure:"1f615",upset:"1f620",wink:"1f609",winkkiss:"1f618",winktongue:"1f61c",cheesewedge:"1f9c0",eyes:"1f440",clown:"1f921"},regexp:/(^|[\s\'\".\(])(O:\)(?!\))|O:\-\)(?!\))|0:\)(?!\))|0:\-\)(?!\))|\'\-_\-|:3|o\.O|O_O|o_o|0_0|O\.o|:\'\(|:\'\-\(|3:\)(?!\))|3:\-\)(?!\))|:dog:|\-3\-|:\(|:\-\(|:\[|=\(|\)=|:o|:\-O|:O|:\-o|=D|:\-D|:D|>:\(|>:\-\(|<3|&lt;3|\^_\^|\^~\^|:\*|:\-\*|\(y\)(?!\))|:like:|\(Y\)(?!\))|T_T|T\-T|ToT|T\.T|:\-\||:\||:v|:V|<\(\"\)(?!\))|>_<|>\.<|:poop:|:\|\]|\(\^\^\^\)(?!\))|:\)(?!\))|:\-\)(?!\))|:\]|\(:|=\)(?!\))|\(=|\-_\-|B\||8\-\||8\||B\-\||B\-\)(?!\))|8\-\)(?!\))|8\)(?!\))|\(n\)(?!\))|\(N\)(?!\))|:\+1:|:thumbsup:|:P|:\-P|:\-p|:p|=P|:trans:|:\/|:\-\/|:\\|:\-\\|=\/|=\\|>:o|>:O|>:\-O|>:\-o|;\)(?!\))|;\-\)(?!\))|;\*|;\-\*|;\-P|;P|;\-p|;p|:cheese:|:eyes:|:peek:|:clown:)([\s\'\".,!?\)]|<br>|$)/,noncapturingRegexp:/(?:^|[\s\'\".\(])(O:\)(?!\))|O:\-\)(?!\))|0:\)(?!\))|0:\-\)(?!\))|\'\-_\-|:3|o\.O|O_O|o_o|0_0|O\.o|:\'\(|:\'\-\(|3:\)(?!\))|3:\-\)(?!\))|:dog:|\-3\-|:\(|:\-\(|:\[|=\(|\)=|:o|:\-O|:O|:\-o|=D|:\-D|:D|>:\(|>:\-\(|<3|&lt;3|\^_\^|\^~\^|:\*|:\-\*|\(y\)(?!\))|:like:|\(Y\)(?!\))|T_T|T\-T|ToT|T\.T|:\-\||:\||:v|:V|<\(\"\)(?!\))|>_<|>\.<|:poop:|:\|\]|\(\^\^\^\)(?!\))|:\)(?!\))|:\-\)(?!\))|:\]|\(:|=\)(?!\))|\(=|\-_\-|B\||8\-\||8\||B\-\||B\-\)(?!\))|8\-\)(?!\))|8\)(?!\))|\(n\)(?!\))|\(N\)(?!\))|:\+1:|:thumbsup:|:P|:\-P|:\-p|:p|=P|:trans:|:\/|:\-\/|:\\|:\-\\|=\/|=\\|>:o|>:O|>:\-O|>:\-o|;\)(?!\))|;\-\)(?!\))|;\*|;\-\*|;\-P|;P|;\-p|;p|:cheese:|:eyes:|:peek:|:clown:)(?:[\s\'\".,!?\)]|<br>|$)/}}),null);
__d("EmoticonRenderer",["EmoticonsList"],(function(t,n,r,o,a,i,l){"use strict";var e=["LIKE","PACMAN","FACE_WITH_COLON_THREE"];function s(t){for(var n=[],r=new RegExp(o("EmoticonsList").regexp),a=0,i=t.match(r);i!==null;){var l=i[1],s=i[2].split(""),u=o("EmoticonsList").emotes[i[2]],c=o("EmoticonsList").emoji[u];n.push({chars:s,isCustom:e.includes(c),key:c,offset:a+i.index+l.length}),a+=i.index+i[0].length,i=t.slice(a).match(r)}return n}function u(e,t,n){var r=s(e),o=[],a=0;return r.forEach(function(r){var i=r.offset;i>a&&o.push(e.substr(a,i-a)),r.isCustom?o.push(n(r.key,r.chars)):o.push(t(r.key)),a=i+r.chars.length}),o.push(e.substr(a,e.length-a)),o}l.parse=s,l.render=u}),98);
__d("EphemeralMediaViewMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});i.default=e}),66);
__d("LSDataTraceTag",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=4,d=5,m=6,p=7,_=20,f=21,g=22,h=23,y=24,C=25,b=26,v=27,S=28,R=29,L=30,E=31,k=32,I=33,T=34,D=35,x=36,$=37,P=38,N=39,M=40,w=41,A=42;i.none=e,i.sticker=l,i.image=s,i.animatedImage=u,i.video=c,i.audio=d,i.file=m,i.xma=p,i.messageTypeNone=_,i.messageTypeText=f,i.messageTypeFutureproof=g,i.messageTypeCiphertext=h,i.messageTypeUnavailable=y,i.messageTypeImage=C,i.messageTypeVideo=b,i.messageTypePtt=v,i.messageTypeAdmin=S,i.messageTypeRevoked=R,i.messageTypeGif=L,i.messageTypeSticker=E,i.messageTypeExpiredEphemeral=k,i.messageTypeEphemeralSettingAdmin=I,i.messageTypeEphemeralSyncResponse=T,i.messageTypeEphemeralScreenshotAction=D,i.messageTypeDeleteForMe=x,i.messageTypeEphemeralSettingChangeFromCurrentDevice=$,i.messageTypeAlertICDC=P,i.messageTypeGroupInvite=N,i.messageTypeXMA=M,i.messageTypeReaction=w,i.messageTypeSenderKeyDistribution=A}),66);
__d("LSMEBTaskCreationSource",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,MEM_RECEIVE_PROTOBUF_ONLY_FBN:16,MEM_SEND_PROTOBUF_ONLY_FBN:17,MEM_PEER_SYNC_PROTOBUF_ONLY_FBN:18,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,MESSENGER_MESSAGE_LIST_PAGINATION:45,DELTA_GENERIC_MESSAGE_SYNC:55,MEDIA_GALLERY_RESTORE:57,EB_PROTOBUF_RESTORE_NO_OP:58,NEW_MEMBER_EXPORT:59,THREAD_POINT_QUERY:76,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,IGD_DYI:42,FTS_INDEX_EB_MESSAGES_WEB:43,BULK_QUERY_FOR_SEARCH_RESULT:44,MSGR_DYI:46,EB_RESTORE_ON_REGISTRATION:47,EB_RESTORE_ON_OFFLINE_QUEUE_COUNT_LIMIT:48,EB_POINT_QUERY_RESTORE_ON_ACK_DROP:49,EB_POINT_QUERY_RESTORE_ON_DECRYPTION_FAILURE:50,EB_POINT_QUERY_RESTORE_ON_UNAVAILABLE_DEVICE:51,EB_RANGE_QUERY_RESTORE_ON_THREAD_SESSION_ACTIVATE:52,EB_POINT_QUERY_PINNED_MESSAGES:53,EB_POINT_QUERY_RESTORE_PROTOBUF:54,EB_POINT_QUERY_IN_ACT_REACTIONS:56,EB_POINT_QUERY_BUMP_MESSAGES:60,EB_POINT_QUERY_IN_ACT_FOR_INCOMING_RETRY_RECEIPT:61,EB_POINT_QUERY_IN_ACT_FOR_REPORTING:62,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_STATUS_UPDATE:63,EB_POINT_QUERY_IN_ACT_FOR_REPL_TEST:64,EB_POINT_QUERY_IN_ACT_FOR_FACEBOOK_APP_NSE_NOTIFICATION_RENDERING:65,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_EXPORT_HANDLING:66,EB_POINT_QUERY_IN_ACT_FOR_TAM_ACT_PROXY:67,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_MESSAGE:68,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_AI_BOT_MESSAGE:69,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_PERSISTENCE:70,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_INDEXING:71,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_NEW_MEMBER_HYDRATION:72,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_ECHO_TO_PROTO_CONVERSION:73,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_HISTORICAL_FUTURE_PROOF:74,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_REALTIME_BLOCKED:75,EB_POINT_QUERY_TO_FETCH_SENDER_DEVICE_KEYS:77,RESONANCE_UTILS:80,MPS_RESTORE_REVERB_RESTORE:81,REPORTING:82,CLIENT_MESSAGE_TRUNCATION:83,CALLING_XMA:84,EB_ACT_ATTACHMENT_RESTORE:85,EB_MEB_ATTACHMENT_ACCESS_CONTROL_RESTORE:86,FORCE_CLIENT_MESSAGE_TRUNCATION:87,ACT_EDIT_MESSAGE_VALIDATION:88,ACT_REVOKE_MESSAGE_VALIDATION:89,REVERB_CLEANUP_HANDLER_SINGLE_MESSAGE_POINT_QUERY:90,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_BEFORE_QUERY:91,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_AFTER_QUERY:92,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_SURROUNDING_QUERY:93,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_LOCAL_BACKUP_RESTORE:94,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_ENCRYPTED_BACKUP_RESTORE:95,FILE_GALLERY_RESTORE:96});i.default=e}),66);
__d("LSThreadMediaGalleryGroup",[],(function(t,n,r,o,a,i){var e=Object.freeze({PHOTOS_AND_VIDEOS:0,FILES_ONLY:1,LINKS:2});i.default=e}),66);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function u(e){return e>0}function c(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(0);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(1);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(2);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(5);default:return(e||(e=o("LSIntEnum"))).ofNumber(4)}}function d(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NONE);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SENDING_TO_SERVER);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SERVER_RECEIVED);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").RETRIABLE_ERROR);default:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}l.ACK=s,l.isMsgAuthoritative=u,l.levelToMessagingSendStatusV2=c,l.levelToMessagingSendStatus=d}),98);
__d("MAWAdminAddParticipantMsg",["MAWLocalizationType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS}}}function u(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS}}}function c(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER};case 2:return{adminMsgContent:[t,n,r],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER}}return{adminMsgContent:[t,n,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER}}function d(e,t){switch(e){case 1:return{adminMsgContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU};case 2:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER}}return{adminMsgContent:[(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER}}function m(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER}}return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER}}function p(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r=t[0],a=t[1],i=o("WAJids").userIdFromJid(r),l=a!=null?o("WAJids").userIdFromJid(a):"";if(e==null)return t.includes(n)?d(t.length,r===n?l:i):m(t.length,i,l);if(e===n)return u(t.length,i,l);var p=o("WAJids").userIdFromJid(e);return t.includes(n)?s(t.length,p,r===n?l:i):c(t.length,p,i,l)}function _(t,n){return babelHelpers.extends({},p(t,n),{version:e})}l.createAddParticipantsAdminMessage=_}),98);
__d("WAAckLevel",[],(function(t,n,r,o,a,i){"use strict";var e={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};i.ACK=e}),66);
__d("MAWAdminMsgHelpers",["MAWCreateParticipantAdminMsg","MAWExternalId","MAWRemoveParticipantAdminMsg","WAAckLevel","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e="Facebook User",s=1;function u(t){return t==null||t===""?e:t}function c(t){return t!=null?o("WAJids").userIdFromJid(t):e}function d(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWCreateParticipantAdminMsg").createParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function m(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWRemoveParticipantAdminMsg").removeParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function p(e,t){return babelHelpers.extends({},_(e,t),{version:s})}function _(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n={adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserPromotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotPromoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotPromoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantPromotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:"participantPromotedParticipant"}}return n}function f(e,t,n,r){var a=_(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function g(e,t){return babelHelpers.extends({},h(e,t),{version:s})}function h(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n=e===r?{adminMsgContent:[],adminType:"currentUserSelfDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserDemotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotDemoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantDemotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:a===e?"participantSelfDemoted":"participantDemotedParticipant"}}return n}function y(e,t,n,r){var a=h(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function C(e,t,n,r){var a,i=[],l=t.subject.content;if(l!=null)return t.subject.user===o("WAGlobals").getMyUserJid()?(a="currentUserNamedGroup",i.push(l)):n==null?(a="unkonwnUserNamedGroup",i.push(l)):(a="participantNamedGroup",i.push(n,l)),{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:i,adminType:a},serverTs:r,ts:r,type:"Admin"}}function b(e,t){var n=v(e,t);if(n!=null)return babelHelpers.extends({},n,{version:s})}function v(e,t){var n,r=[];if(e===o("WAGlobals").getMyUserJid())switch(t){case"all_member_add":n="currentUserSetAddModeAllMembers";break;case"admin_add":n="currentUserSetAddModeAdminOnly";break}else if(e!=null)switch(r.push(o("WAJids").userIdFromJid(e)),t){case"all_member_add":n="participantSetAddModeAllMembers";break;case"admin_add":n="participantSetAddModeAdminOnly";break}else switch(t){case"all_member_add":n="serverSetAddModeAllMembers";break;case"admin_add":n="serverSetAddModeAdminOnly";break}if(n!=null)return{adminMsgContent:r,adminType:n}}function S(e,t,n,r){var a=v(n,t);if(a!=null)return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}l.UNKNOWN_USER=e,l.maybeUnknownParticipantName=u,l.createAdminMsgContactId=c,l.createParticipantAddAdminMessage=d,l.createParticipantRemoveAdminMsg=m,l.createParticipantPromoteAdminMessage=p,l.createParticipantPromoteAdminMsg=f,l.createParticipantDemoteAdminMessage=g,l.createParticipantDemoteAdminMsg=y,l.createGroupNameChangeAdminMsg=C,l.createMemberAddModeChangeAdminMessage=b,l.createMemberAddModeChangeAdminMsg=S}),98);
__d("MAWCreateParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantAddedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantAddedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantAddedYouAndMoreThanOneUsers"}}}function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"currentUserAddedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserAddedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserAddedMoreThanTwoParticipant"}}}function u(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:"participantAddedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantAddedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantAddedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c)):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(d),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c))}l.createParticipantAdminMessage=c}),98);
__d("MAWRemoveParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantRemovedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantRemovedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantRemovedYouAndMoreThanOneUsers"}}}function s(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:"currentUserLeftGroup"}:{adminMsgContent:[t],adminType:"currentUserRemovedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserRemovedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserRemovedMoreThanTwoParticipant"}}}function u(e,t,n,r,o){switch(e){case 1:return o?{adminMsgContent:[t],adminType:"participantLeftGroup"}:{adminMsgContent:[t,n],adminType:"participantRemovedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantRemovedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantRemovedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===o("WAGlobals").getMyUserJid()):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===t)}l.removeParticipantAdminMessage=c}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return{contactIds:t,contents:[]};case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:{var n=t[0],r=t[1];return{contactIds:[n],contents:[r]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:{var a=t[0],i=t[1],l=t[2];return{contactIds:[a,i],contents:[l]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:{var s=t[0],u=t[1],c=t[2];return{contactIds:[s],contents:[u,c]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:{var d=t[0],m=t[1],p=t[2];return{contactIds:[d],contents:[m]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:{var _=t[0],f=t[1],g=t[2],h=t[3];return{contactIds:[_],contents:[f,g]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:t}}}l.deconstructContactIdsFromAdminContent=e}),98);
__d("MAWAdminMsgTypesGrouped",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e=o("MAWLocalizationType")).LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE],u=[e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN],c=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE],d=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS],m=[e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER],p=[e.LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS],_=[e.LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP],f=[e.LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME],g=[e.LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME,e.LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME],h=[e.LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE],y=[e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED],C=[e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED,e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT],b=[e.LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK],v=[e.LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK,e.LOCALIZATION_TYPE.RTC_XMA_FALLBACK],S=[e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE],R=[e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE],L=[e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET],E=[e.LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE],k=[e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL],I=[e.LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED],T=[e.LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_POST,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG,e.LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE],D=[e.LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP,e.LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_POST,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT],x=[e.LOCALIZATION_TYPE.EMPTY_SNIPPET];l.cutoverAdminMsgs=s,l.dualThreadCutoverAdminMsgs=u,l.deviceChanges=c,l.currentUserAddRemoveParticipant=d,l.otherUserAddRemoveParticipant=m,l.groupPermissionsChanged=p,l.participantLeftGroup=_,l.chatCustomizedByCurrentUser=f,l.chatCustomizedByOtherUser=g,l.pinnedMessageUpdate=h,l.limitSharingUpdate=y,l.twoUsersConnected=C,l.fallbackMsgFromCurrentUser=b,l.fallbackMsgFromOtherUser=v,l.currentUserBumpsMessage=S,l.otherUserBumpsMessage=R,l.ephemeralSettingChanges=L,l.icdcAlerts=E,l.callActionToNotifyAbout=k,l.callActionNotToNotifyAbout=I,l.otherNonAdminMsgToBeBumped=T,l.otherNonAdminMsgToBeMarkedAsUnread=D,l.otherNonAdminMsgToNotTriggerUpdate=x}),98);
__d("MAWAdminRemoveParticipantMsg",["MAWAdminMsgType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU};case 2:return{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS}}}function u(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LEFT_GROUP}:{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS}}}function c(e,t,n,r,a){switch(e){case 1:return a?{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LEFT_GROUP}:{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_ONE_USER};case 2:return{adminMsgContent:[t,n,r],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_TWO_USER}}return{adminMsgContent:[t,n,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER}}function d(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r=t[0],a=t[1],i=o("WAJids").userIdFromJid(r),l=a!=null?o("WAJids").userIdFromJid(a):"";if(e==null)return t.includes(n)?{adminMsgContent:[],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_REMOVED_YOU}:{adminMsgContent:[i],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_REMOVED_ONE_USER};if(e===n)return u(t.length,i,l,r===n);var d=o("WAJids").userIdFromJid(e);return t.includes(n)?s(t.length,d,r===n?l:i):c(t.length,d,i,l,r===e)}function m(t,n){return babelHelpers.extends({},d(t,n),{version:e})}l.createRemoveParticipantsAdminMessage=m}),98);
__d("MAWAdminWriteGroupNameChangeAdminMsgContent",["MAWAdminMsgType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r,a=[];return e===n?(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_NAMED_GROUP,a.push(t)):e==null?(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_NAMED_GROUP,a.push(t)):(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_NAMED_GROUP,a.push(o("WAJids").userIdFromJid(e),t)),{adminMsgContent:a,adminType:r,version:1}}l.getAdminMsgContent=e}),98);
__d("MsgrWebGating",["MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15418")||o("MAWMpsGating").isMpsMessageRendering()}l.isQuotedMessagesInLsEnabled=e}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a=e.author,i=e.msgId,l=o("WAJids").authorToUserId(a,t),s=(n=e.quote)==null||(n=n.content.msgContent)==null?void 0:n.content,u=(r=e.quote)==null?void 0:r.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:u!=null?u*1e3:void 0,replyMessageText:s,replySourceId:i,replyToUserId:l}}l.default=e}),98);
__d("MAWBridgeMsg",["FBLogger","LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","MsgrWebGating","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){if(e.isForwarded===!0&&e.type!==o("MAWMsgType").MSG_TYPE.STICKER)return{replyType:"FORWARD"};if(o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))return{replyToMsgId:e.msgId,replyToUserId:o("WAJids").authorToUserId(e.author,t),replyType:"HIGHLIGHTS_TAB_POST_REPLY",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null};if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var r=e.threadJid,a=o("WAJids").interpretAsUserJid(r),i;return a!=null&&(i=o("WAJids").userIdFromJid(a)),o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)?{mentionedUserId:i!=null?i:t,replyType:"FB_POST_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}:{mentionedUserId:i!=null?i:t,replyType:"FB_STORY_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}}if(!(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))){var l=(n=e.quote)==null?void 0:n.content;if(l!=null){var s=l.author,u=l.expirationTs,c=l.mediaId,d=l.msgContent,m=l.msgId,p=l.plaintextHash,_=l.sourceId,f=l.ts,g=l.type,h=l.xmaMessageType,y=o("WAJids").authorToUserId(s,t);if(g===o("WAMsgType").NOTE_REPLY)return{noteContent:d==null?void 0:d.content,replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(u*1e3):void 0,replyToMsgId:e.msgId,replyToUserId:y,replyType:"LIGHTWEIGHT_STATUS"};if(g===o("MAWMsgType").MSG_TYPE.XMA&&o("MAWXMAUtils").isXMAStoryReply(h)){if(_==null)return;var C=o("MAWXMAUtils").isXMAStoryProducerReply(h);return C?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:c!=null?c:void 0,storyMediaPlaintextHash:p,storyMsgType:c!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}:{replyType:"STORY",storyMediaPlaintextHash:p,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}}if(m!=null)return{isBumpMsg:e.type===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,replyToMsgId:m,replyType:"MESSAGE"}}}}}function c(e,t,n){var a,i,l,s=((a=e.quote)==null?void 0:a.content.type)===o("WAMsgType").NOTE_REPLY;if(s)return r("getReplyContentForNoteReply")(e,n);var u=(i=e.quote)==null?void 0:i.content;if(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var c,d=e.author,m=e.mediaId,p=e.msgId,_=o("WAJids").authorToUserId(d,n);if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var f=e.threadJid,g;f!=null&&(g=o("WAJids").interpretAsUserJid(f)),g!=null&&(_=o("WAJids").userIdFromJid(g))}return m!=null&&e.plaintextHash==null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content"),{isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(e.xmaMessageType),isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(e.xmaMessageType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(e.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType),replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:m,replyPlaintextHash:(c=e.plaintextHash)!=null?c:void 0,replySenderIsMe:d===o("WAJids").AUTHOR_ME||_===n,replySourceId:p,replySourceTimestampMs:e.sortOrderMs,replyStatusType:m!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:_}}if(!(u==null||(u==null?void 0:u.msgId)==null&&(u==null?void 0:u.sourceId)==null)){var h=u||{},y=h.author,C=h.mediaId,b=h.msgId,v=h.plaintextHash,S=h.sourceId,R=h.specialTextSize,L=h.ts,E=h.type,k=h.xmaMessageType,I=L!=null?L*1e3:void 0,T=u.type===o("MAWMsgType").MSG_TYPE.TEXT||o("MAWXMAUtils").isXMAExternalLinkShare(k)?(l=u.msgContent)==null?void 0:l.content:void 0,D=o("WAJids").authorToUserId(y,n),x=u.type===o("MAWMsgType").MSG_TYPE.TEXT?u.msgContent.mentionedJids:void 0,$=y===o("WAJids").AUTHOR_ME||D===n,P=t||{},N=P.replyMediaId,M=P.replyMediaPreviewHeight,w=P.replyMediaPreviewWidth,A=P.replyMediaUrlFallback,F=P.replyPlaintextHash,O=P.replyXMAId;if(o("MAWXMAUtils").isXMAStoryReply(k)){var B;return{isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(k),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(k),isStoryReply:!0,replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:C,replyPlaintextHash:(B=F!=null?o("WAHashUtils").stringToPlaintextHash(F):v)!=null?B:void 0,replySenderIsMe:$,replySourceId:S,replySourceTimestampMs:I,replyStatusType:C!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:D}}var W=o("MAWImageUtils").boundHeightWidth(M,w,96*.8),q=W.height,U=W.width;return{isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(k),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(k),isStoryReply:!1,replyMediaId:N,replyMediaPreviewHeight:E===o("MAWMsgType").MSG_TYPE.STICKER?q:M,replyMediaPreviewWidth:E===o("MAWMsgType").MSG_TYPE.STICKER?U:w,replyMediaUrlFallback:A,replyMentionedJids:x,replyMessageText:T,replyPlaintextHash:F!=null?o("WAHashUtils").stringToPlaintextHash(F):void 0,replySenderIsMe:$,replySourceId:b,replySourceTimestampMs:I,replyStatusType:R===1||R===2||R===3?o("MAWMsgType").MSG_TYPE.STICKER:E,replyToUserId:D,replyXMAId:O}}}function d(e){var t=e.specialTextSize;switch(t){case 1:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").SMALL);case 2:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").MEDIUM);case 3:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").LARGE);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").NONE)}}function m(e){if(r("justknobx")._("3424")&&e==="media_restore")return"EncryptedBackupsMedia";switch(e){case"eb_restore":return"EncryptedBackups";case"media_restore":return"EncryptedBackupsMedia";case"whatsapp":return"WhatsApp";default:return}}function p(t,n,a){var i,l,s,d,p=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),_=((i=t.isForwarded)!=null?i:!1)&&t.type!==o("MAWMsgType").MSG_TYPE.STICKER,f=(l=t.forwardingScore)!=null?l:0,g=o("MAWDbMsg").getCanonicalTsFromMsg(t),h=c(t,n,p),y=u(t,p),C=o("MAWXMAUtils").isXMAStoryShare(t.xmaMessageType),b=o("MAWXMAUtils").isXMAStoryReaction(t.xmaMessageType),v=o("MAWXMAUtils").isXMAExternalLinkShare(t.xmaMessageType),S=o("MAWXMAUtils").isIGXMAStoryMention(t.xmaMessageType),R=o("MAWXMAUtils").isFBXMAStoryMention(t.xmaMessageType),L=o("MAWXMAUtils").isXMAStoryHighlightShare(t.xmaMessageType),E=o("MAWXMAUtils").isXMAPostPrivateReply(t.xmaMessageType),k=o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(t.xmaMessageType),I=t.messageExpirationTs!=null&&t.messageExpirationTs<=o("WATimeUtils").unixTime(),T=o("MAWDbMsg").getSortOrderWithFallback(t),D=t.externalId,x=m(t.source);(n==null?void 0:n.replyPlaintextHash)!==(h==null?void 0:h.replyPlaintextHash)&&r("FBLogger")("messenger_web").warn("replyPlaintextHash mismatch. From replyMeta is null: %s, from replyContent is null: %s. Message type: %s",(n==null?void 0:n.replyPlaintextHash)==null,(h==null?void 0:h.replyPlaintextHash)==null,t.type);var $=(n==null?void 0:n.replyPlaintextHash)!=null?o("WAHashUtils").stringToPlaintextHash(n==null?void 0:n.replyPlaintextHash):(s=h==null?void 0:h.replyPlaintextHash)!=null?s:void 0;switch(t.type){case o("MAWMsgType").MSG_TYPE.TEXT:{var P,N=o("MAWVault").isVaulted(t.msgContent.content)?t.msgContent.content:o("MAWVault").vault(t.msgContent.content);return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:t.msgContent.commands,content:N,editCount:t.editCount,ephemeralDurationInSec:(P=t.ephemeralSetting)==null?void 0:P.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,mentionedJids:t.msgContent.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,specialTextSize:t.specialTextSize,transportKey:x,ts:g,type_:t.type})}case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,ephemeralDurationInSec:(d=t.ephemeralSetting)==null?void 0:d.ephemeralExpirationInSec,externalId:D,forwardingScore:f,groupId:t.groupId,groupIndex:t.groupIndex,groupSize:t.groupSize,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,unsupportedType:t.msgContent.subtype});case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:[t.msgContent.authorName],adminType:t.msgContent.adminType,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:{var M,w,A;return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:(M=t.msgContent)==null||(M=M.adminMsgContent)==null?void 0:M.map(function(e){return e==="Facebook User"?"0":e}),adminType:(w=t.msgContent)==null?void 0:w.adminType,adminVersion:(A=t.msgContent)==null?void 0:A.version,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type}}case o("MAWMsgType").MSG_TYPE.REVOKED:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,originalTs:t.originalTs,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.XMA:{var F,O,B,W,q,U=(F=t.msgContent)==null?void 0:F.content,V=U!=null?o("MAWVault").isVaulted(U)?(O=t.msgContent)==null?void 0:O.content:o("MAWVault").vault(U):void 0;v&&V==null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"])));var H=V;return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:(B=t.msgContent)==null?void 0:B.commands,content:H,ephemeralDurationInSec:(W=t.ephemeralSetting)==null?void 0:W.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isCollapsed:t.isCollapsed,isExpiredMsg:I,isExpiredXmaMsg:t.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(t.xmaMessageType),isFBStoryMention:R,isForwarded:_,isIGStoryMention:S,isMsgHighlightsTabFriendUpdatesReply:k,isPostPrivateReply:E,isStoryHighlightShare:L,isStoryReaction:b,isStoryShare:C,mentionedJids:(q=t.msgContent)==null?void 0:q.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,xmaMessageType:t.xmaMessageType})}default:return r("WAAssertUnreachable")(t.type)}}l.getSpecialTextSize=d,l.convertDbMsgSourceToLSTransportKey=m,l.createBridgeMsg=p}),98);
__d("MAWBridgeTraceEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ReceivedReceipt","ReceivedSent","FlowEndForFailure","FlowEndForSuccess"]),l=e;i.default=l}),66);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{return(e||(e=o("I64"))).of_string(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).mustfix("Cannot convert string to i64: %s",t)}}l.stringToI64Opt=s}),98);
__d("MAWConvertExtendedContentTypeToLSXmaContentType",["LSXmaContentType","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return null;switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return r("LSXmaContentType").FB_FEED_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return r("LSXmaContentType").FB_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return r("LSXmaContentType").FB_STORY_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return r("LSXmaContentType").FB_STORY_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return r("LSXmaContentType").FB_FEED_VIDEO_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return r("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return r("LSXmaContentType").FB_PRODUCER_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return r("LSXmaContentType").FB_EVENT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:return r("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return r("LSXmaContentType").MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return r("LSXmaContentType").FB_SHORT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return r("LSXmaContentType").MSG_LOCATION_SHARING;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return r("LSXmaContentType").MSG_LOCATION_SHARING_V2;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return r("LSXmaContentType").FB_POST_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY:return r("LSXmaContentType").FB_FEED_POST_REACTION_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return r("LSXmaContentType").MSG_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return r("LSXmaContentType").MSG_AI_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return r("LSXmaContentType").MSG_MEMORIES_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return r("LSXmaContentType").MSG_EXTERNAL_LINK_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return r("LSXmaContentType").RTC_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return r("LSXmaContentType").RTC_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return r("LSXmaContentType").RTC_MISSED_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return r("LSXmaContentType").RTC_MISSED_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return r("LSXmaContentType").FB_PROFILE_DIRECTORY_ITEM;default:return null}}l.convertExtendedContentTypeToLSXmaContentType=e}),98);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWMpsGating","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Promise","Random","ReQL","WAArmadilloXMA.pb","WAJids","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t,n,r,o,a){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i,l,s){var c=r.ctas,d=r.defaultCTA,m=p(r.targetId,r.targetType),f=(u||(u=o("I64"))).of_int32(o("Random").uint32());if(d!=null){var C=g(d,f,i,a,l,m,r.targetType);yield y(t,C,f,s.defaultCta)}var b=o("MAWXMAUtils").isFBXMAPostMention(r.targetType)&&r.author===o("WAJids").AUTHOR_ME,v=[];return c!=null&&!b&&(v=yield(e||(e=n("Promise"))).all(c.map(function(e,n){var r=_(f,n),o=h(e,r,i,a,l,m),u=n===0?s.attachmentCta1:n===1?s.attachmentCta2:n===2?s.attachmentCta3:void 0;return y(t,o,r,u)}))),{attachmentCta1Id:v.length>0?v[0]:void 0,attachmentCta2Id:v.length>1?v[1]:void 0,attachmentCta3Id:v.length>2?v[2]:void 0,defaultCtaId:d==null?void 0:f}}),d.apply(this,arguments)}function m(e){var t="xma_web_url";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:t="xma_rtc_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:t="xma_rtc_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:t="xma_rtc_missed_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:t="xma_rtc_missed_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:t="igd_web_post_share";break}return t}function p(e,t){if(!o("MAWXMAUtils").isFBXMAPostMention(t))return e!=null?o("MAWBridgeUIEventDataValidation").stringToI64Opt(e):void 0}function _(e,t){return(u||(u=o("I64"))).add(e,u.of_int32(t+1))}function f(e,t,n,r,a,i,l){var s;l===void 0&&(l="xma_web_url");var c=e.actionUrl,d=e.nativeUrl;return{actionContentBlob:void 0,actionUrl:c!=null?c:d,attachmentFbid:a,attachmentIndex:(u||(u=o("I64"))).zero,ctaId:t,enableExtensions:!1,extensionHeightType:void 0,messageId:n,nativeUrl:d!=null?d:c,platformToken:void 0,targetId:i!=null?i:void 0,threadKey:r,title:(s=e.title)!=null?s:"Tap to view status update",type_:l!=null?l:"xma_web_url",urlWebviewType:void 0}}function g(e,t,n,r,o,a,i){var l=m(i);return f(e,t,n,r,o,a,l)}function h(e,t,n,r,o,a){var i;switch(e.ctaType){case"contact_sharing_profile":i="contact_sharing_profile";break;case"contact_sharing_message":i="contact_sharing_message";break}return f(e,t,n,r,o,a,i)}function y(e,t,n,r){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){return r!=null?yield e.attachment_ctas.upsert([r.ctaId],t):yield e.attachment_ctas.add(t),n}),C.apply(this,arguments)}function b(e,t,n){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=null,a={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};return r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(t,n)),r!=null&&(a.defaultCta=yield S(e,r.defaultCtaId),a.attachmentCta1=yield S(e,r.attachmentCta1Id),a.attachmentCta2=yield S(e,r.attachmentCta2Id),a.attachmentCta3=yield S(e,r.attachmentCta3Id)),[r,a]}),v.apply(this,arguments)}function S(t,r){return r==null?(e||(e=n("Promise"))).resolve(void 0):o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachment_ctas).getKeyRange(r))}function R(e,t,n,a,i,l,c,d,m){var p,_,f,g,h,y,C,b,v=(u||(u=o("I64"))).zero,S=L(e),R=o("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(e.targetType),D=R!=null?(u||(u=o("I64"))).of_int32(R):void 0,x=(p=e==null||(_=e.defaultCTA)==null?void 0:_.actionUrl)!=null?p:e==null||(f=e.defaultCTA)==null?void 0:f.nativeUrl;e.defaultPreviewMediaId!=null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+m+"."+e.targetType+"."+(e.defaultPreviewMediaPlaintextHash!=null?"true":"false"));var $=o("MAWMpsGating").isMpsMessageRendering();return{accessibilitySummaryText:void 0,actionUrl:x!=null?x:void 0,attachmentCta1Id:i,attachmentCta2Id:l,attachmentCta3Id:c,attachmentFbid:n,attachmentIndex:u.zero,attachmentLoggingType:void 0,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:u.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:k(e.ctas,1),cta1Type:E(e.ctas,1),cta2Title:k(e.ctas,2),cta2Type:E(e.ctas,2),cta3Title:k(e.ctas,3),cta3Type:E(e.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:d,defaultCtaTitle:(g=e.defaultCTA)==null?void 0:g.title,defaultCtaType:S.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:e.filesize!=null?(u||(u=o("I64"))).of_int32(e.filesize):void 0,gatingTitle:e.overlayTitle,gatingType:e.overlayIconGlyph!=null?String(e.overlayIconGlyph):void 0,hasMedia:e.hasMedia!=null?e.hasMedia:!1,hasXma:!0,hasXmaFavicon:$?e.faviconPlaintextHash!=null:e.faviconMediaId!=null,hasXmaHeaderImage:$?e.headerMediaPlaintextHash!=null:e.headerMediaId!=null,hasXmaPreview:$?e.defaultPreviewMediaPlaintextHash!=null:e.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:e.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:e.maxSubtitleNumOfLines!=null?(u||(u=o("I64"))).of_int32(e.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:e.maxTitleNumOfLines!=null?(u||(u=o("I64"))).of_int32(e.maxTitleNumOfLines):void 0,messageId:a,miniPreview:void 0,offlineAttachmentId:(h=e.offlineAttachmentId)!=null?h:n,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:S.height,previewHeightLarge:e.previewHeightLarge!=null?(u||(u=o("I64"))).of_int32(e.previewHeightLarge):void 0,previewImageDecorationType:T(e.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:S.width,previewWidthLarge:e.previewWidthLarge!=null?(u||(u=o("I64"))).of_int32(e.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:e.subtitleText,targetId:void 0,threadKey:t,timestampMs:v,titleText:e.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:D,xmaDataclass:e.xmaDataclass,xmaFaviconFbid:$?e.faviconPlaintextHash:(y=e.faviconMediaId)==null?void 0:y.toString(),xmaHeaderImageFbid:$?e.headerMediaPlaintextHash:(C=e.headerMediaId)==null?void 0:C.toString(),xmaLayoutType:e.xmaLayoutType!=null?I(e.xmaLayoutType):void 0,xmaPreviewFbid:$?e.defaultPreviewMediaPlaintextHash:(b=e.defaultPreviewMediaId)==null?void 0:b.toString(),xmasTemplateType:e.xmaLayoutType!=null?I(e.xmaLayoutType):void 0}}function L(e){var t;switch(e.targetType){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:t={height:(u||(u=o("I64"))).of_int32(108),width:(u||(u=o("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:t={xmaContentType:"xma_rtc_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:t={xmaContentType:"xma_rtc_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:t={xmaContentType:"xma_rtc_missed_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:t={xmaContentType:"xma_rtc_missed_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:t={xmaContentType:"xma_rtc_missed_group_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:t={xmaContentType:"xma_rtc_missed_group_video"};break;default:t={height:e.previewHeight!=null?(u||(u=o("I64"))).of_int32(e.previewHeight):void 0,width:e.previewWidth!=null?(u||(u=o("I64"))).of_int32(e.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return t}function E(e,t){if(e!=null){var n=e[t-1];if(n!=null){var r=n.buttonType,a=n.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return r===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}}}function k(e,t){if(e!=null){var n=e[t-1];if(n!=null)return n.title}}function I(e){return e===0||e!==3?(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").SINGLE):(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").PORTRAIT)}function T(e){switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").COLLAGE);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").REEL);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").DEFAULT)}}l.addAttachmentCtas=c,l.maybeBridgeToLSTargetId=p,l.getCtaIdFromDefaultCtaId=_,l.composeDefaultAttachmentCta=g,l.composeAttachmentCta=h,l.getExistingAttachmentAndAttachmentCtas=b,l.composeAttachmentXMA=R}),98);
__d("MAWBridgeXMA",["MAWBridgeXMAUtils","MAWDbMedia","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){if(e!=null)switch(e){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function u(t,n,r){var a,i,l,u,c=n.author,d=n.contentRef,m=n.ctas,p=n.defaultCTA,_=n.defaultPreviewMediaId,f=n.defaultPreviewMediaPlaintextHash,g=n.faviconMediaId,h=n.faviconPlaintextHash,y=n.headerMediaId,C=n.headerMediaPlaintextHash,b=n.headerTitle,v=n.maxSubtitleNumOfLines,S=n.maxTitleNumOfLines,R=n.msgId,L=n.offlineAttachmentId,E=n.overlayIconGlyph,k=n.overlayTitle,I=n.subtitleText,T=n.targetId,D=n.targetType,x=n.targetUsername,$=n.threadJid,P=n.titleText,N=n.xmaDataclass,M=n.xmaId,w=n.xmaLayoutType;t!=null&&t.mediaType!==o("MAWDbMedia").MEDIA_TYPE.IMAGE&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""])),t.mediaType),T!=null&&o("MAWBridgeXMAUtils").maybeBridgeToLSTargetId(T,D);var A=r.hasMedia,F=r.hasXmaFaviconMedia,O=r.hasXmaHeaderMedia;return{author:c,contentRef:d,ctas:m==null?void 0:m.filter(function(e){return e.ctaType!=null}),defaultCTA:p,defaultPreviewMediaId:_,defaultPreviewMediaPlaintextHash:f,duration:null,faviconMediaId:g,faviconPlaintextHash:h,filesize:t==null?void 0:t.size,hasMedia:A,hasXmaFaviconMedia:F,hasXmaHeaderMedia:O,headerMediaId:y,headerMediaPlaintextHash:C,headerTitle:b,maxSubtitleNumOfLines:v,maxTitleNumOfLines:S,mediaType:t==null?void 0:t.mediaType,msgId:R,offlineAttachmentId:L,overlayIconGlyph:E,overlayTitle:k,playableUrlMimeType:s(t==null?void 0:t.mediaType),previewHeight:t==null||(a=t.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,previewHeightLarge:t==null||(i=t.validatedImageInfo)==null?void 0:i.height,previewUrlMimeType:s(t==null?void 0:t.mediaType),previewWidth:t==null||(l=t.validatedImageInfo)==null?void 0:l.jpegThumbnailWidth,previewWidthLarge:t==null||(u=t.validatedImageInfo)==null?void 0:u.width,subtitleText:I,targetId:T,targetType:D,targetUsername:x,threadJid:$,titleText:P,ts:t==null?void 0:t.ts,xmaDataclass:N,xmaId:M,xmaLayoutType:w}}function c(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}function d(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}l.mediaTypeToMimeType=s,l.createBridgeXMA=u,l.createBridgeXMAShareExpired=c,l.createBridgeXMAShareTombstoned=d}),98);
__d("MAWCacheServiceDB",["FBLogger","MAWCurrentUser","MAWIndexedDbMetadata","MAWWormOdsLogger","MessengerWebInitData","Promise","WAHex","Worm","WormDump","WormEAR","WormIDbDriver","asyncToGeneratorRuntime","getErrorSafe","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s={autoIncrement:!0,indexes:{key:{fields:["key"],unique:!0}},primaryKey:"id",secure:!0},u={snippets:s},c=null,d=function(t,n,a){var e="maw_cache_service",i=new(o("WormEAR")).WormEAR(a,e,n),l=new(o("WormIDbDriver")).WormIDbDriver(t,e,a,i,o("MAWWormOdsLogger").wormOdsWorkerLogger,{onTransactionError:p});return new(o("Worm")).WormDatabase(l,r("qpl")._(1056840657,"2716"))};function m(){return c!==null||(c=new(e||(e=n("Promise")))((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{var n=d(o("MAWIndexedDbMetadata").MAWcacheServiceDbName(o("MAWCurrentUser").getID()),o("WAHex").parseHex(r("MessengerWebInitData").accountKeyV2),u);yield n.init(),e(n)}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(a).mustfix("Failed to create cache service DB"),c=null,t(a)}});return function(t,n){return e.apply(this,arguments)}})())),c}function p(e){if(e instanceof o("WormEAR").DecryptionError){var t=e;r("FBLogger")("MAWCacheService").mustfix("EAR decryption error in store: %s. Attempting to delete the store:",t.store),r("promiseDone")(m().then(function(e){return e.runInTransaction([t.store],"readwrite",function(e){return e.stores[t.store].clear()},"delete-corrupted-entity")}).then(function(){r("FBLogger")("MAWCacheService").info("Successfully deleted corrupted store %s",t.store)}).catch(function(e){var n=r("getErrorSafe")(e);r("FBLogger")("MAWCacheService").catching(n).mustfix("Failed to delete corrupted store %s, err: %s",t.store,n.message)}))}}function _(e){return e.map(function(e){var t=e[0],n=e[1];return n})}function f(){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield m();return e.dump({snippets:{customFields:{id:o("WormDump").wormNonSensitiveField,key:o("WormDump").wormNonSensitiveField,timestamp:o("WormDump").wormNonSensitiveField,value:function(t){var e;return{snippet:(e=o("WormDump")).wormRedact(t.snippet),snippetMsgAckLevel:e.wormNonSensitiveField(t.snippetMsgAckLevel),snippetMsgId:e.wormNonSensitiveField(t.snippetMsgId),snippetNewestIncomingMsgs:e.wormNonSensitiveField(t.snippetNewestIncomingMsgs),snippetReactionId:e.wormRedact(t.snippetReactionId)}}}}})}),g.apply(this,arguments)}l.getOrSetupMAWCacheDB=m,l.convertCacheValueToDBRawValue=_,l.getDbDump=f}),98);
__d("MAWConstants",[],(function(t,n,r,o,a,i){"use strict";var e=5,l="Facebook user",s="Instagram user",u=3;i.MESSAGE_RETRY_COUNT_LIMIT=e,i.FB_UNKNOWN_USER=l,i.INS_UNKNOWN_USER=s,i.CURRENT_REGISTRATION_VERSION=u}),66);
__d("MAWDbEditMsgHistory",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(t){return(e||(e=o("I64"))).of_float(t)}function c(t){return(e||(e=o("I64"))).to_float(t)}l.unsafeCoerceToEditMsgHistoryId=s,l.convertToEditMsgHistoryId64=u,l.convertToEditMsgHistoryId=c}),98);
__d("MAWDbPoll",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e,t){var n=(e+t).split("");return Math.abs(n.reduce(function(e,t){var n=t.charCodeAt(0),r=(e<<5)-e+n;return r&=r,r},0))}i.convertStringToOptionHash=e,i.convertOptionHashToString=l,i.generateStableIdFromOptionHash=s}),66);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={dyi:r("justknobx")._("467"),frontloaded:20,initial:20,paginated:r("justknobx")._("3177"),point:1,search:r("justknobx")._("2477")};function c(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"paginated"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function d(t){var n=t.querySource,a=t.runningInWorker,i=t.taskSource,l=t.traceId;l!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:i,traceId:l,triggerType:"initial"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function m(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"dyi"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function p(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"frontloaded"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function _(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"point"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function f(t){var n=t.querySource,a=t.runningInWorker,i=t.traceId;i!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:r("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:i,triggerType:"search"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function g(t,n){t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLSuccessThroughBridge(r("qpl")._(521476165,"2432"),void 0,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endSuccess(r("qpl")._(521476165,"2432"),{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function h(t,n,a,i){a===void 0&&(a="restore_failure"),t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLFailThroughBridge(r("qpl")._(521476165,"2432"),a,i,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endFailure(r("qpl")._(521476165,"2432"),a,{annotations:i,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function y(e){L("protobuf",e)}function C(e){var t=e.querySource,n=e.runningInWorker,a=e.taskSource,i=e.traceId,l=e.triggerType;if(n!=null&&n){var s;o("MAWQplProxy").startQplUserFlow(r("qpl")._(521476165,"2432"),{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(s=u[l])!=null?s:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},{providedInstanceKey:o("WAHashStringToNumber").hashStringToNumber(i),providedTimeoutInMs:r("justknobx")._("2950")})}else{var c;r("QPLUserFlow").start(r("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(c=u[l])!=null?c:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},instanceKey:o("WAHashStringToNumber").hashStringToNumber(i),timeoutInMs:r("justknobx")._("2950")})}}function b(e){var t=e.pointName,n=e.traceId;r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function v(e){var t=e.annotations,n=e.pointName,a=e.traceId;r("QPLUserFlow").addAnnotations(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)}),r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),n,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function S(e){var t=e.annotations,n=e.pointName,a=e.traceId;a!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),n,{annotations:t,instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function R(e){var t=e.pointName,n=e.traceId;o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function L(t,n){var a=n?(s||(s=o("LSIntEnum"))).unwrapIntEnum(n):null;(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+t+"."+E(a))}function E(e){var t;return(t=e==null?void 0:e.toString())!=null?t:"unknown"}l.markEBRestorePaginated=c,l.markEBRestoreInitial=d,l.markEBRestoreDYI=m,l.markEBRestoreFrontloaded=p,l.markEBRestorePoint=_,l.markEBRestoreSearch=f,l.markEBRestoreSuccess=g,l.markEBRestoreFail=h,l.markEBRestoreProtobuf=y,l.addQPLRestorePoint=b,l.addQPLRestorePointWithAnnotations=v,l.addQPLRestorePointWithAnnotationsWorker=S,l.addQPLRestorePointWorker=R}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NONE:0,LQ_4K:1,HQ_4K:2},u={NONE:0,GIPHY:1,TENOR:2},c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4},d={UNKNOWN:0,OPUS:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={};m.name="WAMediaTransport",m.internalSpec={integral:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,g],ancillary:[2,e.TYPES.MESSAGE,p]},p.name="WAMediaTransport$Ancillary",p.internalSpec={fileLength:[1,e.TYPES.UINT64],mimetype:[2,e.TYPES.STRING],thumbnail:[3,e.TYPES.MESSAGE,_],objectId:[4,e.TYPES.STRING]},_.name="WAMediaTransport$Ancillary$Thumbnail",_.internalSpec={jpegThumbnail:[1,e.TYPES.BYTES],downloadableThumbnail:[2,e.TYPES.MESSAGE,f],thumbnailWidth:[3,e.TYPES.UINT32],thumbnailHeight:[4,e.TYPES.UINT32]},f.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail",f.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],thumbnailScansSidecar:[7,e.TYPES.BYTES],thumbnailScanLengths:[8,e.FLAGS.REPEATED|e.TYPES.UINT32]},g.name="WAMediaTransport$Integral",g.internalSpec={fileSha256:[1,e.TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64]},h.name="ImageTransport",h.internalSpec={integral:[1,e.TYPES.MESSAGE,C],ancillary:[2,e.TYPES.MESSAGE,y]},y.name="ImageTransport$Ancillary",y.internalSpec={height:[1,e.TYPES.UINT32],width:[2,e.TYPES.UINT32],scansSidecar:[3,e.TYPES.BYTES],scanLengths:[4,e.FLAGS.REPEATED|e.TYPES.UINT32],midQualityFileSha256:[5,e.TYPES.BYTES],hdType:[6,e.TYPES.ENUM,s],memoriesConceptScores:[7,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.FLOAT],memoriesConceptIds:[8,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.UINT32]},C.name="ImageTransport$Integral",C.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},b.name="VideoTransport",b.internalSpec={integral:[1,e.TYPES.MESSAGE,S],ancillary:[2,e.TYPES.MESSAGE,v]},v.name="VideoTransport$Ancillary",v.internalSpec={seconds:[1,e.TYPES.UINT32],caption:[2,e.TYPES.MESSAGE,o("WACommon.pb").MessageTextSpec],gifPlayback:[3,e.TYPES.BOOL],height:[4,e.TYPES.UINT32],width:[5,e.TYPES.UINT32],sidecar:[6,e.TYPES.BYTES],gifAttribution:[7,e.TYPES.ENUM,u],accessibilityLabel:[8,e.TYPES.STRING],isHd:[9,e.TYPES.BOOL]},S.name="VideoTransport$Integral",S.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},R.name="AudioTransport",R.internalSpec={integral:[1,e.TYPES.MESSAGE,I],ancillary:[2,e.TYPES.MESSAGE,L]},L.name="AudioTransport$Ancillary",L.internalSpec={seconds:[1,e.TYPES.UINT32],avatarAudio:[2,e.TYPES.MESSAGE,E],waveformData:[3,e.TYPES.STRING],waveform:[4,e.TYPES.BYTES]},E.name="AudioTransport$Ancillary$AvatarAudio",E.internalSpec={poseId:[1,e.TYPES.UINT32],avatarAnimations:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,k]},k.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations",k.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],animationsType:[7,e.TYPES.ENUM,c]},I.name="AudioTransport$Integral",I.internalSpec={transport:[1,e.TYPES.MESSAGE,m],audioFormat:[2,e.TYPES.ENUM,d]},T.name="DocumentTransport",T.internalSpec={integral:[1,e.TYPES.MESSAGE,x],ancillary:[2,e.TYPES.MESSAGE,D]},D.name="DocumentTransport$Ancillary",D.internalSpec={pageCount:[1,e.TYPES.UINT32]},x.name="DocumentTransport$Integral",x.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},$.name="StickerTransport",$.internalSpec={integral:[1,e.TYPES.MESSAGE,N],ancillary:[2,e.TYPES.MESSAGE,P]},P.name="StickerTransport$Ancillary",P.internalSpec={pageCount:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],width:[3,e.TYPES.UINT32],firstFrameLength:[4,e.TYPES.UINT32],firstFrameSidecar:[5,e.TYPES.BYTES],mustacheText:[6,e.TYPES.STRING],isThirdParty:[7,e.TYPES.BOOL],receiverFetchId:[8,e.TYPES.STRING],accessibilityLabel:[9,e.TYPES.STRING]},N.name="StickerTransport$Integral",N.internalSpec={transport:[1,e.TYPES.MESSAGE,m],isAnimated:[2,e.TYPES.BOOL],receiverFetchId:[3,e.TYPES.STRING]},M.name="ContactTransport",M.internalSpec={integral:[1,e.TYPES.MESSAGE,A],ancillary:[2,e.TYPES.MESSAGE,w]},w.name="ContactTransport$Ancillary",w.internalSpec={displayName:[1,e.TYPES.STRING]},A.name="ContactTransport$Integral",A.internalSpec={vcard:[1,e.TYPES.STRING],downloadableVcard:[2,e.TYPES.MESSAGE,m],__oneofs__:{contact:["vcard","downloadableVcard"]}},l.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=s,l.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=u,l.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c,l.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=d,l.WAMediaTransportSpec=m,l.WAMediaTransport$AncillarySpec=p,l.WAMediaTransport$Ancillary$ThumbnailSpec=_,l.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=f,l.WAMediaTransport$IntegralSpec=g,l.ImageTransportSpec=h,l.ImageTransport$AncillarySpec=y,l.ImageTransport$IntegralSpec=C,l.VideoTransportSpec=b,l.VideoTransport$AncillarySpec=v,l.VideoTransport$IntegralSpec=S,l.AudioTransportSpec=R,l.AudioTransport$AncillarySpec=L,l.AudioTransport$Ancillary$AvatarAudioSpec=E,l.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=k,l.AudioTransport$IntegralSpec=I,l.DocumentTransportSpec=T,l.DocumentTransport$AncillarySpec=D,l.DocumentTransport$IntegralSpec=x,l.StickerTransportSpec=$,l.StickerTransport$AncillarySpec=P,l.StickerTransport$IntegralSpec=N,l.ContactTransportSpec=M,l.ContactTransport$AncillarySpec=w,l.ContactTransport$IntegralSpec=A}),98);
__d("WAMediaHdType",[],(function(t,n,r,o,a,i,l){"use strict";var e=0,s=1,u=2,c={HD_TYPE_NONE:e,HD_TYPE_LQ_4K:s,HD_TYPE_HQ_4K:u};l.HD_TYPE_NONE=e,l.HD_TYPE_LQ_4K=s,l.HD_TYPE_HQ_4K=u,l.HD_TYPE=c}),98);
__d("MAWEncodeMediaTransportProtocol",["MAWDbMedia","WAMediaHdType","WAMediaTransport.pb","encodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e="image/jpeg",s="image/webp",u="video/mp4",c="audio/wav",d="audio/ogg",m="image/gif",p="application/octet-stream";function _(e){switch(e){case o("WAMediaHdType").HD_TYPE_NONE:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.NONE;case o("WAMediaHdType").HD_TYPE_LQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.LQ_4K;case o("WAMediaHdType").HD_TYPE_HQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.HQ_4K;default:return}}function f(t,n,r){var a,i,l,s,u,c,d,m,p={ancillary:{hdType:_((a=r==null?void 0:r.hdType)!=null?a:(i=t.validatedImageInfo)==null?void 0:i.hdType),height:(l=t.validatedImageInfo)==null?void 0:l.height,scanLengths:((s=n.progressiveJpegDetails)==null?void 0:s.scanLengths)||[],scansSidecar:(u=n.progressiveJpegDetails)==null?void 0:u.sidecar,width:(c=t.validatedImageInfo)==null?void 0:c.width},integral:{transport:{ancillary:{fileLength:t.size,mimetype:e,objectId:n.objectId,thumbnail:{downloadableThumbnail:n.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:(d=t.validatedImageInfo)==null?void 0:d.jpegThumbnailHeight,thumbnailWidth:(m=t.validatedImageInfo)==null?void 0:m.jpegThumbnailWidth}},integral:{directPath:n.directPath,fileEncSha256:n.fileEncSha256,fileSha256:n.fileSha256,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,p).readBuffer()}function g(e,t,n){var r=f(e,t,n);return{payload:{content:{imageMessage:{caption:{mentionedJid:[]},image:{payload:r,version:1}}}}}}function h(e,t){var n,r,a,i,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,height:(n=e.validatedImageInfo)==null?void 0:n.height,width:(r=e.validatedImageInfo)==null?void 0:r.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:s,objectId:t.objectId,thumbnail:{thumbnailHeight:(a=e.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,thumbnailWidth:(i=e.validatedImageInfo)==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,l).readBuffer()}function y(e,t){var n=h(e,t);return{payload:{content:{stickerMessage:{sticker:{payload:n,version:1}}}}}}function C(e,t){var n,r=e.mediaType===o("MAWDbMedia").MEDIA_TYPE.GIF,a=e.isVideoGif===!0,i=r?e.validatedImageInfo:e.validatedVideoInfo,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,gifPlayback:r||a,height:i==null?void 0:i.height,seconds:r||(n=e.validatedVideoInfo)==null?void 0:n.duration,sidecar:t.sidecar,width:i==null?void 0:i.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:r?m:u,objectId:t.objectId,thumbnail:r?{thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}:{downloadableThumbnail:t.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,l).readBuffer()}function b(e,t){var n=C(e,t);return{payload:{content:{videoMessage:{caption:{mentionedJid:[]},video:{payload:n,version:1}}}}}}var v=new ArrayBuffer(0);function S(e,t){var n,a,i={ancillary:{seconds:(n=e.validatedAudioInfo)==null?void 0:n.duration,waveform:(a=e.validatedAudioInfo)==null?void 0:a.waveform},integral:{audioFormat:r("gkx")("3053")?o("WAMediaTransport.pb").AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT.OPUS:void 0,transport:{ancillary:{fileLength:e.size,mimetype:r("gkx")("3053")?d:c,objectId:t.objectId,thumbnail:{jpegThumbnail:v}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,i).readBuffer()}function R(e,t){var n=S(e,t);return{payload:{content:{audioMessage:{audio:{payload:n,version:1},ptt:!0}}}}}function L(e,t){var n={ancillary:{},integral:{transport:{ancillary:{fileLength:e.size,mimetype:p,objectId:t.objectId,thumbnail:{jpegThumbnail:new ArrayBuffer(1),thumbnailHeight:1,thumbnailWidth:1}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,n).readBuffer()}function E(e,t){var n,r=L(e,t);return{payload:{content:{documentMessage:{document:{payload:r,version:1},fileName:(n=e.validatedDocumentFileInfo)==null?void 0:n.filename}}}}}l.IMAGE_MIME_TYPE=e,l.STICKER_MIME_TYPE=s,l.VIDEO_MIME_TYPE=u,l.AUDIO_WAV_MIME_TYPE=c,l.AUDIO_OGG_MIME_TYPE=d,l.GIF_MIME_TYPE=m,l.FILE_MIME_TYPE=p,l.encodeMediaHdType=_,l.encodeValidatedMediaToImageTransport=f,l.encodeValidatedImageMessage=g,l.encodeValidatedMediaToStickerTransport=h,l.encodeValidatedStickerMessage=y,l.encodeValidatedMediaToVideoTransport=C,l.encodeValidatedVideoMessage=b,l.emptyAudioFileArrayBuffer=v,l.encodeValidatedMediaToAudioTransport=S,l.encodeValidatedAudioMessage=R,l.encodeValidatedMediaToDocumentTransport=L,l.encodeValidatedFileMessage=E}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=300,u=600,c=900,d=1800,m=Math.imul((e=o("WATimeUtils")).HOUR_SECONDS,6),p=Math.imul(e.HOUR_SECONDS,12),_=Math.imul(e.DAY_SECONDS,14),f=1e3,g=5,h=10,y=30,C=60,b=m;l.fiveMinutesInSeconds=s,l.tenMinutesInSeconds=u,l.fifteenMinutesInSeconds=c,l.thirtyMinutesInSeconds=d,l.oneHourInSeconds=e.HOUR_SECONDS,l.sixHoursInSeconds=m,l.twelveHoursInSeconds=p,l.oneDayInSeconds=e.DAY_SECONDS,l.ephemeralMaxDelectionWindowForUnseenMessage=_,l.msPerSec=f,l.fiveSeconds=g,l.tenSeconds=h,l.thirtySeconds=y,l.oneMinuteInSeconds=C,l.ephemeralReportingWindowInSeconds=b}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={ES_OPEN:1,ES_CLOSE:2},c={UNKNOWN:0,NUDE:1,NOT_NUDE:2},d={TAKEDOWN:0,RESTORE:1},m={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23},p={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2},_={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2},f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2},g={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={};h.name="Armadillo",h.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,C],metadata:[2,e.TYPES.MESSAGE,y]},y.name="Armadillo$Metadata",y.internalSpec={},C.name="Armadillo$Payload",C.internalSpec={content:[1,e.TYPES.MESSAGE,B],applicationData:[2,e.TYPES.MESSAGE,L],signal:[3,e.TYPES.MESSAGE,v],subProtocol:[4,e.TYPES.MESSAGE,b],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},b.name="Armadillo$SubProtocolPayload",b.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},v.name="Armadillo$Signal",v.internalSpec={encryptedBackupsSecrets:[1,e.TYPES.MESSAGE,S],__oneofs__:{signal:["encryptedBackupsSecrets"]}},S.name="Armadillo$Signal$EncryptedBackupsSecrets",S.internalSpec={backupId:[1,e.TYPES.UINT64],serverDataId:[2,e.TYPES.UINT64],epoch:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,R],tempOcmfClientState:[4,e.TYPES.BYTES],mailboxRootKey:[5,e.TYPES.BYTES],obliviousValidationToken:[6,e.TYPES.BYTES]},R.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch",R.internalSpec={id:[1,e.TYPES.UINT64],anonId:[2,e.TYPES.BYTES],rootKey:[3,e.TYPES.BYTES],status:[4,e.TYPES.ENUM,u]},L.name="Armadillo$ApplicationData",L.internalSpec={metadataSync:[1,e.TYPES.MESSAGE,O],aiBotResponse:[2,e.TYPES.MESSAGE,k],messageHistoryDocumentMessage:[3,e.TYPES.MESSAGE,E],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}},E.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage",E.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},k.name="Armadillo$ApplicationData$AIBotResponseMessage",k.internalSpec={summonToken:[1,e.TYPES.STRING],messageText:[2,e.TYPES.STRING],serializedExtras:[3,e.TYPES.STRING]},I.name="Armadillo$ApplicationData$MetadataSyncAction",I.internalSpec={actionTimestamp:[1,e.TYPES.INT64],chatAction:[101,e.TYPES.MESSAGE,P],messageAction:[102,e.TYPES.MESSAGE,x],spectraAction:[103,e.TYPES.MESSAGE,D],attachmentInterventionAction:[104,e.TYPES.MESSAGE,T],__oneofs__:{actionType:["chatAction","messageAction","spectraAction","attachmentInterventionAction"]}},T.name="Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionAction",T.internalSpec={messageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],interventionType:[2,e.TYPES.ENUM,c]},D.name="Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraAction",D.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionType:[2,e.TYPES.ENUM,d],takedownActionId:[3,e.TYPES.INT64],config:[4,e.TYPES.STRING]},x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction",x.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],messageDelete:[101,e.TYPES.MESSAGE,$],__oneofs__:{action:["messageDelete"]}},$.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete",$.internalSpec={},P.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction",P.internalSpec={chatId:[1,e.TYPES.STRING],chatArchive:[101,e.TYPES.MESSAGE,w],chatDelete:[102,e.TYPES.MESSAGE,M],chatRead:[103,e.TYPES.MESSAGE,N],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}},N.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead",N.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],read:[2,e.TYPES.BOOL]},M.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete",M.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F]},w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive",w.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],archived:[2,e.TYPES.BOOL]},A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage",A.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],timestamp:[2,e.TYPES.INT64]},F.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange",F.internalSpec={lastMessageTimestamp:[1,e.TYPES.INT64],lastSystemMessageTimestamp:[2,e.TYPES.INT64],messages:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,A]},O.name="Armadillo$ApplicationData$MetadataSyncNotification",O.internalSpec={actions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,I]},B.name="Armadillo$Content",B.internalSpec={commonSticker:[1,e.TYPES.MESSAGE,Q],screenshotAction:[3,e.TYPES.MESSAGE,G],extendedContentMessage:[4,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,e.TYPES.MESSAGE,K],ravenActionNotifMessage:[6,e.TYPES.MESSAGE,j],extendedMessageContentWithSear:[7,e.TYPES.MESSAGE,z],imageGalleryMessage:[8,e.TYPES.MESSAGE,H],paymentsTransactionMessage:[10,e.TYPES.MESSAGE,W],bumpExistingMessage:[11,e.TYPES.MESSAGE,V],noteReplyMessage:[13,e.TYPES.MESSAGE,U],ravenMessageMsgr:[14,e.TYPES.MESSAGE,K],networkVerificationMessage:[15,e.TYPES.MESSAGE,q],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}},W.name="Armadillo$Content$PaymentsTransactionMessage",W.internalSpec={transactionId:[1,e.TYPES.UINT64],amount:[2,e.TYPES.STRING],currency:[3,e.TYPES.STRING],paymentStatus:[4,e.TYPES.ENUM,m],extendedContentMessage:[5,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec]},q.name="Armadillo$Content$NetworkVerificationMessage",q.internalSpec={codeText:[1,e.TYPES.STRING]},U.name="Armadillo$Content$NoteReplyMessage",U.internalSpec={noteId:[1,e.TYPES.STRING],noteText:[2,e.TYPES.MESSAGE,s.MessageTextSpec],noteTimestampMs:[3,e.TYPES.INT64],textContent:[4,e.TYPES.MESSAGE,s.MessageTextSpec],stickerContent:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],videoContent:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}},V.name="Armadillo$Content$BumpExistingMessage",V.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},H.name="Armadillo$Content$ImageGalleryMessage",H.internalSpec={images:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s.SubProtocolSpec]},G.name="Armadillo$Content$ScreenshotAction",G.internalSpec={screenshotType:[1,e.TYPES.ENUM,p]},z.name="Armadillo$Content$ExtendedContentMessageWithSear",z.internalSpec={searId:[1,e.TYPES.STRING],payload:[2,e.TYPES.BYTES],nativeUrl:[3,e.TYPES.STRING],searAssociatedMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],searSentWithMessageId:[5,e.TYPES.STRING]},j.name="Armadillo$Content$RavenActionNotifMessage",j.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionTimestamp:[2,e.TYPES.INT64],actionType:[3,e.TYPES.ENUM,_]},K.name="Armadillo$Content$RavenMessage",K.internalSpec={ephemeralType:[1,e.TYPES.ENUM,f],imageMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],videoMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}},Q.name="Armadillo$Content$CommonSticker",Q.internalSpec={stickerType:[1,e.TYPES.ENUM,g]},l.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=u,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_ATTACHMENT_INTERVENTION_ACTION_INTERVENTION_TYPE=c,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_SPECTRA_ACTION_SPECTRA_ACTION_TYPE=d,l.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=m,l.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=p,l.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=_,l.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f,l.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=g,l.ArmadilloSpec=h,l.Armadillo$MetadataSpec=y,l.Armadillo$PayloadSpec=C,l.Armadillo$SubProtocolPayloadSpec=b,l.Armadillo$SignalSpec=v,l.Armadillo$Signal$EncryptedBackupsSecretsSpec=S,l.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=R,l.Armadillo$ApplicationDataSpec=L,l.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=E,l.Armadillo$ApplicationData$AIBotResponseMessageSpec=k,l.Armadillo$ApplicationData$MetadataSyncActionSpec=I,l.Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionActionSpec=T,l.Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraActionSpec=D,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=x,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=$,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=P,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=N,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=M,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=w,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=A,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=F,l.Armadillo$ApplicationData$MetadataSyncNotificationSpec=O,l.Armadillo$ContentSpec=B,l.Armadillo$Content$PaymentsTransactionMessageSpec=W,l.Armadillo$Content$NetworkVerificationMessageSpec=q,l.Armadillo$Content$NoteReplyMessageSpec=U,l.Armadillo$Content$BumpExistingMessageSpec=V,l.Armadillo$Content$ImageGalleryMessageSpec=H,l.Armadillo$Content$ScreenshotActionSpec=G,l.Armadillo$Content$ExtendedContentMessageWithSearSpec=z,l.Armadillo$Content$RavenActionNotifMessageSpec=j,l.Armadillo$Content$RavenMessageSpec=K,l.Armadillo$Content$CommonStickerSpec=Q}),98);
__d("MAWEphemeralUtils",["MAWLocalizationType","MAWUserJidWrapper","WAArmadilloApplication.pb","WAJids","err"],(function(t,n,r,o,a,i,l){"use strict";var e=60,s=60*e,u=24*s;function c(t,n,r,a){var i,l=[],c=n===u,d=t===o("MAWUserJidWrapper").getMyUserJid();if(a)i=o("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET;else if(t==null)n===0?i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:n<e?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,l.push(n.toString())):n<s?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,l.push((n/e).toString())):n<u||c?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,l.push((n/s).toString())):(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,l.push((n/u).toString()));else{var m=o("WAJids").extractUserId(t).toString();n===0?d?i=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF:(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,l.push(m)):n<e?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,l.push(m)),l.push(n.toString())):n<s?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,l.push(m)),l.push((n/e).toString())):n<u||c?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,l.push(m)),l.push((n/s).toString())):(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,l.push(m)),l.push((n/u).toString()))}return{adminMsgContent:l,adminType:i,version:1}}function d(e,t,n){var a,i=[],l=o("WAJids").extractUserId(t).toString();switch(e){case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:n?a=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT:(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,i.push(l));break;case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:n?a=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN:(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,i.push(l));break;default:throw r("err")("Received unexpected screenshot action type")}return{ephemeralScreenshotActionContent:i,ephemeralScreenshotActionType:a}}l.getEphemeralSettingChangeData=c,l.getEphemeralScreenshotActionData=d}),98);
__d("MAWGetUserDeviceChangeAdminType",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case"add":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}l.getUserDeviceAdminType=e}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWDbMsg","MAWJids","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){if(o("WAJids").isAuthorSystem(e)||t==null||n==null){r("FBLogger")("messenger_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",n);return}return{author:e,chat:t,externalId:n}}function c(e){var t;return u(e.author,e.threadJid,(t=e.externalId)!=null?t:e.editExternalId)}function d(e){return o("WAJids").isAuthorMe(e)?o("WAGlobals").getMyUserJid():e}function m(t,n){var r=(e||(e=o("I64"))).to_string(t),a=(s||(s=o("LSIntEnum"))).unwrapIntEnum(n);switch(a){case 15:return o("MAWJids").jidUtils.toUserJid(r);case 16:return o("WAJids").toGroupJid(r);default:return null}}function p(e){return g(e.threadJid,e.externalId)}function _(e){return f(e.threadJid,e.externalId)}function f(e,t){var n=o("MAWDbMsg").toMsgId(g(e,t));if(n==null)throw r("FBLogger")("messenger_e2ee_web").mustfixThrow("formatProtocolMsgIdFromExternalId: Failed to create protocolMsgId with externalId %s for a msg",t);return n}function g(e,t){return e+"."+t}l.maybeToProtocolMsgId=u,l.toProtocolMsgId=c,l.getAuthorJid=d,l.LSJidtoChatJid=m,l.toProtocolMsgIdStringForMAWStorage=p,l.formatProtocolMsgIdFromMsg=_,l.formatProtocolMsgIdFromExternalId=f}),98);
__d("MAWJobDefinitions",["MAWExternalId"],(function(t,n,r,o,a,i,l){"use strict";var e=["s2sInstanceKey","s2sUserFlowQPLEvent"],s=["scheduleConfig"];function u(e){return e}function c(e){return e}var d={acceptGroupInvite:function(t,n,r,o,a,i){var e=_(i);return{args:{chatJid:t,inviteCode:o,invitedParticipantUserId:r,inviteExpirationTs:a,inviterUserId:n},scheduleConfig:e!=null?e:void 0,type:"acceptGroupInvite"}},addGroupParticipants:function(t,n,r,o){var e=_(o);return{args:{group:t,s2sInstanceKey:r,users:n},scheduleConfig:e!=null?e:void 0,type:"addGroupParticipants"}},deleteMsgsForMe:function(t,n){var e=_(n);return{args:{msgIds:t},scheduleConfig:e!=null?e:void 0,type:"deleteMsgsForMe"}},demoteGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"demoteGroupParticipants"}},downloadAndHandleMedia:function(t,n,r,o,a,i,l,s){var e=_(s);return{args:{downloadType:a,hash:n,metricInstanceKeys:l,msgType:o,protocolMsgId:t,qplEntryPoint:r},scheduleConfig:e!=null?e:void 0,type:"downloadAndHandleMedia"}},forwardMsg:function(n,r,a,i,l,s,u){var t=_(u),c=a!=null?a:{},d=c.s2sInstanceKey,m=c.s2sUserFlowQPLEvent,p=babelHelpers.objectWithoutPropertiesLoose(c,e);return{args:{args:p,chatJid:n,ephemeralSetting:i,externalId:l!=null?l:o("MAWExternalId").generateExternalId(),isFirstMsg:s,protocolMsgId:r,s2sInstanceKey:d},scheduleConfig:t!=null?t:void 0,type:"forwardMsg"}},getSpams:function(t){var e=_(t);return{args:void 0,scheduleConfig:e!=null?e:void 0,type:"getSpams"}},handleFutureproofMsg:function(t){var e=_(t);return{args:{},scheduleConfig:e!=null?e:void 0,type:"handleFutureproofMsg"}},handleSpamMsg:function(t){var e=_(t);return{args:void 0,scheduleConfig:e!=null?e:void 0,type:"handleSpamMsg"}},igdReportUserSpam:function(t,n){var e=t.chatJid,r=t.context,o=t.frxParams,a=t.frxTags,i=t.msgs,l=t.reportedMessageId,s=t.spamFlow,u=t.userJid,c=_(n);return{args:{chatJid:e,context:r,frxParams:o,frxTags:a,msgs:i,reportedMessageId:l,spamFlow:s,userJid:u},scheduleConfig:c!=null?c:void 0,type:"igdReportUserSpam"}},igdSendMsg:function(t,n){var e=t.actorID,r=t.taskID,o=_(n);return{args:{actorID:e,taskID:r},scheduleConfig:o!=null?o:void 0,type:"igdSendMsg"}},leaveGroups:function(t,n){var e=_(n);return{args:{groups:t},scheduleConfig:e!=null?e:void 0,type:"leaveGroups"}},markThreadAsRead:function(t,n,r,o,a,i){var e=_(i);return{args:{chatJid:t,isBlocked:r,isReadReceiptsDisabled:a,isRestricted:o,relationship:n},scheduleConfig:e!=null?e:void 0,type:"markThreadAsRead"}},promoteGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"promoteGroupParticipants"}},removeGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"removeGroupParticipants"}},reportUserSpam:function(t,n,r,o,a,i,l,s,u,c){var e=_(u);return{args:{chatJid:r,context:i,frxParams:l,frxTags:a,isIgd:o,openMsgs:c,reportedMessageId:s,spamFlow:n,userJid:t},scheduleConfig:e!=null?e:void 0,type:"reportUserSpam"}},resendWrittenAppData:function(t,n){var e=_(n);return{args:{appDataExternalId:t},scheduleConfig:e!=null?e:void 0,type:"resendWrittenAppData"}},restoreMessagesFromEncryptedBackups:function(t,n,r,o,a,i,l,s,u,c,d,m,p,f,g){var e=_(p);return{args:{deanonApiPayload:f,hasMoreAfter:a,hasMoreBefore:o,instanceKey:c,isMediaGalleryRestore:g,isPointQuery:i,messages:r,minMsgId:l,optimisticMsgs:d,startSortKey:u,taskSource:m,threadId:n,traceId:s,transportKey:t},scheduleConfig:e!=null?e:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreProtobufsFromEncryptedBackups:function(t,n,r,o,a,i,l,s,u,c,d,m,p,f,g,h){var e=_(m);return{args:{chatJid:h,deanonApiPayload:f,echoMessages:t,hasMoreAfter:i,hasMoreBefore:a,instanceKey:d,isMediaGalleryRestore:g,isPointQuery:l,messages:o,minMsgId:s,referenceTimestamp:c,requestId:u,taskSource:p,threadId:r,transportKey:n},scheduleConfig:e!=null?e:void 0,type:"restoreProtobufsFromEncryptedBackups"}},revokeMsgs:function(t,n){var e=_(n);return{args:t,scheduleConfig:e!=null?e:void 0,type:"revokeMsgs"}},sendAppData:function(t,n,r){var e=_(r);return{args:{args:t,externalId:n!=null?n:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendAppData"}},sendBumpMsg:function(t,n,r,a){var e=_(a);return{args:{args:n,chatJid:t,externalId:r!=null?r:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendBumpMsg"}},sendGroupInviteMsg:function(t,n,r){var e=_(r);return{args:{args:t,externalId:n!=null?n:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendGroupInviteMsg"}},sendMediaMsg:function(t,n,r,a,i,l,s,u,c,d,m,p,f,g,h,y,C,b,v,S,R,L){var e=_(C);return{args:{args:{duration:c,ephemeralSetting:m,filename:v,height:l,isFirstMsg:h,isForwarded:g,isPtt:d,jpegThumbnail:a,jpegThumbnailHeight:u,jpegThumbnailWidth:s,mediaGroupMetadata:L,offlineAttachmentId:S,openMessageOtid:f,quote:p,s2sInstanceKey:r,source:b,width:i},attachmentType:R,chatJid:t,externalId:y!=null?y:o("MAWExternalId").generateExternalId(),file:n},scheduleConfig:e!=null?e:void 0,type:"sendMediaMsg"}},sendMediaMsgV2:function(t,n,r,a,i,l,s,u,c,d,m,p,f,g,h,y,C,b,v,S,R,L,E){var e=_(C);return{args:{args:{duration:c,ephemeralSetting:m,filename:v,height:l,isFirstMsg:h,isForwarded:g,isPtt:d,jpegThumbnail:a,jpegThumbnailHeight:u,jpegThumbnailWidth:s,mediaGroupMetadata:E,offlineAttachmentId:S,openMessageOtid:f,quote:p,s2sInstanceKey:R,source:b,width:i},attachmentType:L,chatJid:t,externalId:y!=null?y:o("MAWExternalId").generateExternalId(),mimeType:n,plaintext:r},scheduleConfig:e!=null?e:void 0,type:"sendMediaMsgV2"}},sendWrittenAppData:function(t,n){var e=_(n);return{args:{appDataExternalId:t},scheduleConfig:e!=null?e:void 0,type:"sendWrittenAppData"}},setGroupMemberAddMode:function(t,n,r){var e=_(r);return{args:{groupJid:t,memberAddMode:n},scheduleConfig:e!=null?e:void 0,type:"setGroupMemberAddMode"}},setGroupSubject:function(t,n,r){var e=_(r);return{args:{group:t,subject:n},scheduleConfig:e!=null?e:void 0,type:"setGroupSubject"}},startInstamadilloDYI:function(t,n){var e=_(n);return{args:{qplInstanceKey:t},scheduleConfig:e!=null?e:void 0,type:"startInstamadilloDYI"}},updateBackupEntFbidForMedia:function(t,n,r,o){var e=_(o);return{args:{backupEntFbid:n,deliveryObjectId:t,traceId:r},scheduleConfig:e!=null?e:void 0,type:"updateBackupEntFbidForMedia"}}};function m(e,t){return p(e,t)}function p(e,t){var n=t.scheduleConfig,r=babelHelpers.objectWithoutPropertiesLoose(t,s),a={args:{},scheduleConfig:n,type:e};return t.externalIdJob&&(a.args.externalId=o("MAWExternalId").generateExternalId()),a.args=babelHelpers.extends({},a.args,r),t.uniqueJob&&(a.uniqKey=e),a}function _(e){if(e!=null)return{jobId:e.jobId,maxTimeoutMs:e.maxTimeoutMs,priority:e.priority}}function f(e){return{otid:e.toplevelProtobuf.messageId,supplementalProtobufs:new Map(e.supplementalProtobufs.entries().map(function(e){var t=e[0],n=e[1];return[t,{decryptedProtobuf:n.payload,protobufTimestampMS:n.timestampMs}]})),tags:e.tags,toplevelProtobuf:{decryptedProtobuf:e.toplevelProtobuf.payload,protobufTimestampMS:e.toplevelProtobuf.timestampMs}}}l.toThreadJidPrimaryId=u,l.toEncodedEchoMessage=c,l.jobSerializers=d,l.createStartJobInfo=m,l.createStartJobInfoGeneric=p,l.serializeJobScheduledConfig=_,l.mpsMessageToEncryptedBackupsMessage=f}),98);
__d("MAWMediaDownloadStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["DOWNLOADING","SUCCESS","NOT_MANUAL_RETRYABLE_FAILURE","MANUAL_RETRYABLE_FAILURE","MISSING_FILE","RETRYING","AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE"]),l=e;i.default=l}),66);
__d("MAWMediaGalleryEBTaggingUtils",["LSThreadMediaGalleryGroup","MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("13725")}function s(e){return u(e)!=null}function u(e){return e===r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS?r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS:e===r("LSThreadMediaGalleryGroup").FILES_ONLY&&o("MAWMpsGating").isMpsMediaGalleryEnabled()?r("LSThreadMediaGalleryGroup").FILES_ONLY:void 0}l.isMediaGalleryEBTaggingRestoreEnabled=e,l.isMediaGalleryGroupSupportedForTaggedRestore=s,l.toMediaGalleryGroupForTaggedRestore=u}),98);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","MsgrWebGating","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n,r,a,i,l){return e===o("MAWMsgType").MSG_TYPE.TEXT?t?(u||(u=o("LSIntEnum"))).ofNumber(8192):(u||(u=o("LSIntEnum"))).ofNumber(1):e===o("MAWMsgType").MSG_TYPE.VIDEO&&l===!0?(u||(u=o("LSIntEnum"))).ofNumber(16384):e===o("MAWMsgType").MSG_TYPE.IMAGE||e===o("MAWMsgType").MSG_TYPE.VIDEO||e===o("MAWMsgType").MSG_TYPE.RAVEN?(u||(u=o("LSIntEnum"))).ofNumber(2):e===o("MAWMsgType").MSG_TYPE.PTT?(u||(u=o("LSIntEnum"))).ofNumber(4):e===o("MAWMsgType").MSG_TYPE.FUTUREPROOF?m(a):e===o("MAWMsgType").MSG_TYPE.CIPHERTEXT?(u||(u=o("LSIntEnum"))).ofNumber(65536):e===o("MAWMsgType").MSG_TYPE.UNAVAILABLE?(u||(u=o("LSIntEnum"))).ofNumber(262144):e===o("MAWMsgType").MSG_TYPE.GIF?(u||(u=o("LSIntEnum"))).ofNumber(16384):e===o("MAWMsgType").MSG_TYPE.STICKER?(u||(u=o("LSIntEnum"))).ofNumber(4096):e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE?(u||(u=o("LSIntEnum"))).ofNumber(64):e===o("MAWMsgType").MSG_TYPE.XMA?n!=null&&n?(u||(u=o("LSIntEnum"))).ofNumber(256):i===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(536870912):(u||(u=o("LSIntEnum"))).ofNumber(1024):e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE?r?(u||(u=o("LSIntEnum"))).ofNumber(1):(u||(u=o("LSIntEnum"))).ofNumber(33554432):e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(134217728):(u||(u=o("LSIntEnum"))).ofNumber(1)}function m(e){switch(e){case"liveLocationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(u||(u=o("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(u||(u=o("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(u||(u=o("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(u||(u=o("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(u||(u=o("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(u||(u=o("LSIntEnum"))).ofNumber(17179869184);default:return(u||(u=o("LSIntEnum"))).ofNumber(131072)}}function p(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16384))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(64))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4096))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function _(e,t){var n=e.replyAttachmentType;if(n==null)return!1;var a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t);return a&&e.replyAttachmentId==null&&(!o("MsgrWebGating").isQuotedMessagesInLsEnabled()||e.replyAttachmentPlaintextHash==null)?!1:(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").AUDIO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO))}function f(e){return(c||(c=o("I64"))).equal(e.displayedContentTypes,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function g(e){return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),e.displayedContentTypes)}function h(e){var t=e.displayedContentTypes;return!!(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(32))}function y(e){return(c||(c=o("I64"))).lt(e.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(2))}function C(e){var t=e.displayedContentTypes;return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),t)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),t)}function b(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(65536))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(131072))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(524288))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4294967296))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1048576))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2097152))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4194304))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2147483648))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8388608))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16777216))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1073741824))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8589934592))?!0:(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(262144))}var v=(s=n("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),S=s({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),R=s({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2}),L=s({IMAGE:0,VIDEO:1});l.text=(e=o("MAWMsgType")).MSG_TYPE.TEXT,l.image=e.MSG_TYPE.IMAGE,l.video=e.MSG_TYPE.VIDEO,l.ptt=e.MSG_TYPE.PTT,l.unsent=e.MSG_TYPE.REVOKED,l.gif=e.MSG_TYPE.GIF,l.bumpExistingMessage=e.MSG_TYPE.BUMP_EXISTING_MESSAGE,l.getDisplayedContentTypes=d,l.isMediaMsg=p,l.isMediaReplyAttachmentType=_,l.isReceiverFetchMsg=f,l.isReceiverFetchXMAMsg=g,l.isAdminMsg=h,l.isOptimistic=y,l.isXMAMsg=C,l.isPlaceholder=b,l.MAWRavenActionNotifType=v,l.MAWRavenMsgEphemeralMediaState=S,l.MAWRavenMsgEphemeralType=R,l.MAWRavenMsgMediaType=L}),98);
__d("MWXMAV2IsDataclassLiveLocationXMA",["MSGDataclassTypes.flow","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s(e)!=null}function s(e){if(e!=null){var t=e.content;if(!(t==null||(t==null?void 0:t.__typename)!=="XMSGXmaSingleContent")){var n=t.custom_template_data;if(!(n==null||(n==null?void 0:n.__typename)!=="XMSGXmaLocationTemplateData")){var r=n.location_metadata;if(!(r==null||(r==null?void 0:r.__typename)!=="XMSGXmaLiveLocationMetadata"))return r}}}}var u=1e3;function c(e,t){var n,a=r("justknobx")._("4207"),i=Math.floor(Date.now()/u)-a;return t!=null&&t<i&&((n=s(e))==null?void 0:n.session_state)===o("MSGDataclassTypes.flow").XmsgXmaLiveLocationSessionState.Started}l.isDataclassLiveLocationXMA=e,l.getLiveLocationMetadata=s,l.isExpiredLiveLocationStarted=c}),98);
__d("MAWParseCollapsibleIdFromXMADataClass",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)throw r("FBLogger")("messenger_web").mustfixThrow("xmaDataclass is missing or invalid");var t=o("MWXMAV2IsDataclassLiveLocationXMA").getLiveLocationMetadata(e);if(t!=null)return parseInt(t.session_id,10);if((e==null?void 0:e.layout_config)==null||typeof(e==null?void 0:e.layout_config.collapsible_id)!="number")throw r("FBLogger")("messenger_web").mustfixThrow("Layout config or collapsible_id is missing or invalid");return e.layout_config.collapsible_id}l.parseCollapsibleIdFromXMADataClass=e}),98);
__d("MWXMAV2XmaDataClass",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null)try{return JSON.parse(e)}catch(e){r("FBLogger")("messenger_web_sharing").mustfix("Error parsing xma dataclass")}}l.parseXmaDataClass=e}),98);
__d("MAWParseXMAUnsupportedMessageType",["MWXMAV2IsDataclassLiveLocationXMA","MWXMAV2XmaDataClass","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(n===void 0&&(n=!1),e==null)return null;if(n)return"paymentsTransactionMessage";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(o("MWXMAV2XmaDataClass").parseXmaDataClass(t))?"liveLocationMessage":"locationMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return"contactShareMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return"storyMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return"postMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return"messengerMemory";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return"rtcMessage";default:return null}}l.getXMAUnsupportedMessageType=e}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="Subprotocol",e.internalSpec={payload:[1,o("WAProtoConst").TYPES.BYTES],version:[2,o("WAProtoConst").TYPES.INT32]},l.SubprotocolSpec=e}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.name="BackupMessage",s.internalSpec={metadata:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,u],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}},u.name="BackupMessage$Metadata",u.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32],clientTimestampMs:[8,e.TYPES.INT64]},c.name="BackupMessage$Metadata$FrankingMetadata",c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]},l.BackupMessageSpec=s,l.BackupMessage$MetadataSpec=u,l.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={},s={};e.name="LocallyTransformedMessage",e.internalSpec={pollUpdateMessage:[1,o("WAProtoConst").TYPES.MESSAGE,s],__oneofs__:{content:["pollUpdateMessage"]}},s.name="LocallyTransformedMessage$PollUpdateAdminMessage",s.internalSpec={pollCreationMessageId:[1,o("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,o("WAProtoConst").TYPES.STRING]},l.LocallyTransformedMessageSpec=e,l.LocallyTransformedMessage$PollUpdateAdminMessageSpec=s}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u=(s=n("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2}),c=s({UNSET:0,CHANGED:1,REMOVED:2}),d=s({UNSET:0,PINNED:1,UNPINNED:2}),m=s({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2}),p=s({UNSET:0,ADDED:1,REMOVED:2}),_=s({UNSET:0,ADDED:1,REMOVED:2}),f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={},X={};f.name="MiTransportAdminMessage",f.internalSpec={skipBumpThread:[34,(e=o("WAProtoConst")).TYPES.BOOL],skipSnippetUpdate:[35,e.TYPES.BOOL],chatThemeChanged:[1,e.TYPES.MESSAGE,X],nicknameChanged:[2,e.TYPES.MESSAGE,Q],groupParticipantChanged:[3,e.TYPES.MESSAGE,K],groupAdminChanged:[4,e.TYPES.MESSAGE,j],groupNameChanged:[5,e.TYPES.MESSAGE,z],groupMembershipAddModeChanged:[6,e.TYPES.MESSAGE,G],messagePinned:[7,e.TYPES.MESSAGE,H],groupImageChanged:[8,e.TYPES.MESSAGE,V],quickReactionChanged:[9,e.TYPES.MESSAGE,U],linkCta:[10,e.TYPES.MESSAGE,W],iconChanged:[11,e.TYPES.MESSAGE,B],disappearingSettingChanged:[12,e.TYPES.MESSAGE,O],limitSharingChanged:[13,e.TYPES.MESSAGE,F],xmatDisappearingSetting:[14,e.TYPES.MESSAGE,A],xmatFriendRequestConfirmedEncrypted:[15,e.TYPES.MESSAGE,w],xmatInstantGameEncryptedDynamicCustomUpdate:[16,e.TYPES.MESSAGE,M],xmatLinkCta:[17,e.TYPES.MESSAGE,N],xmatMagicWords:[18,e.TYPES.MESSAGE,P],xmatMessagingLimitSharing:[19,e.TYPES.MESSAGE,$],xmatMessengerQrCodeScanned:[20,e.TYPES.MESSAGE,x],xmatMessengerSharedAlbumAddition:[21,e.TYPES.MESSAGE,D],xmatMessengerSharedAlbumContentRemoval:[22,e.TYPES.MESSAGE,I],xmatMessengerSharedAlbumDeletion:[23,e.TYPES.MESSAGE,k],xmatMessengerSharedAlbumRename:[24,e.TYPES.MESSAGE,E],xmatMessengerSharedAlbum:[25,e.TYPES.MESSAGE,L],xmatThemeColor:[26,e.TYPES.MESSAGE,R],xmatThreadIcon:[27,e.TYPES.MESSAGE,S],xmatThreadNickname:[28,e.TYPES.MESSAGE,v],xmatThreadQuickReaction:[29,e.TYPES.MESSAGE,b],xmatUpdatePayments:[30,e.TYPES.MESSAGE,C],xmatPinMessageV2:[31,e.TYPES.MESSAGE,y],xmatUnpinMessageV2:[32,e.TYPES.MESSAGE,h],xmatGenaiTaskAdd:[33,e.TYPES.MESSAGE,g],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged","xmatDisappearingSetting","xmatFriendRequestConfirmedEncrypted","xmatInstantGameEncryptedDynamicCustomUpdate","xmatLinkCta","xmatMagicWords","xmatMessagingLimitSharing","xmatMessengerQrCodeScanned","xmatMessengerSharedAlbumAddition","xmatMessengerSharedAlbumContentRemoval","xmatMessengerSharedAlbumDeletion","xmatMessengerSharedAlbumRename","xmatMessengerSharedAlbum","xmatThemeColor","xmatThreadIcon","xmatThreadNickname","xmatThreadQuickReaction","xmatUpdatePayments","xmatPinMessageV2","xmatUnpinMessageV2","xmatGenaiTaskAdd"]}},g.name="MiTransportAdminMessage$XmatGenAITaskAdd",g.internalSpec={taskId:[1,e.TYPES.INT64]},h.name="MiTransportAdminMessage$XmatUnpinMessageV2",h.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},y.name="MiTransportAdminMessage$XmatPinMessageV2",y.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},C.name="MiTransportAdminMessage$XmatUpdatePayments",C.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING],amount:[3,e.TYPES.FLOAT],transactionId:[4,e.TYPES.INT64],transactionStatus:[5,e.TYPES.INT32]},b.name="MiTransportAdminMessage$XmatThreadQuickReaction",b.internalSpec={threadQuickReactionEmoji:[1,e.TYPES.STRING],threadQuickReactionInstructionKeyId:[2,e.TYPES.STRING]},v.name="MiTransportAdminMessage$XmatThreadNickname",v.internalSpec={participantId:[1,e.TYPES.INT64],nickname:[2,e.TYPES.STRING]},S.name="MiTransportAdminMessage$XmatThreadIcon",S.internalSpec={threadIcon:[1,e.TYPES.STRING]},R.name="MiTransportAdminMessage$XmatThemeColor",R.internalSpec={themeId:[1,e.TYPES.STRING],themeColor:[2,e.TYPES.STRING],gradient:[3,e.FLAGS.REPEATED|e.TYPES.STRING],shouldShowIcon:[4,e.TYPES.BOOL],themeType:[5,e.TYPES.INT32],accessibilityLabel:[6,e.TYPES.STRING],themeNameWithSubtitle:[7,e.TYPES.STRING],themeEmoji:[8,e.TYPES.STRING]},L.name="MiTransportAdminMessage$XmatMessengerSharedAlbum",L.internalSpec={xmaDataclass:[1,e.TYPES.STRING]},E.name="MiTransportAdminMessage$XmatMessengerSharedAlbumRename",E.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],oldAlbumTitle:[2,e.TYPES.STRING],newAlbumTitle:[3,e.TYPES.STRING]},k.name="MiTransportAdminMessage$XmatMessengerSharedAlbumDeletion",k.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING]},I.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval",I.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],removedContentMap:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,T],removedContentCount:[3,e.TYPES.INT64],albumTitle:[4,e.TYPES.STRING]},T.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTuple",T.internalSpec={key:[1,e.TYPES.INT64],value:[2,e.TYPES.STRING]},D.name="MiTransportAdminMessage$XmatMessengerSharedAlbumAddition",D.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING],numOfAttachments:[3,e.TYPES.INT64],isAlbumCreation:[4,e.TYPES.BOOL]},x.name="MiTransportAdminMessage$XmatMessengerQRCodeScanned",x.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING]},$.name="MiTransportAdminMessage$XmatMessagingLimitSharing",$.internalSpec={senderName:[1,e.TYPES.STRING],senderId:[2,e.TYPES.STRING],limitSharingType:[3,e.TYPES.STRING]},P.name="MiTransportAdminMessage$XmatMagicWords",P.internalSpec={newMagicWordCount:[1,e.TYPES.INT64],removedMagicWordCount:[2,e.TYPES.INT64],magicWord:[3,e.TYPES.STRING],emojiEffect:[4,e.TYPES.STRING],isAllEdited:[5,e.TYPES.BOOL],themeName:[6,e.TYPES.STRING]},N.name="MiTransportAdminMessage$XmatLinkCTA",N.internalSpec={linkCtaXmatPrimaryText:[1,e.TYPES.STRING],linkCtaXmatCtaText:[2,e.TYPES.STRING],linkCtaXmatCtaUrl:[3,e.TYPES.STRING],linkCtaXmatCtaIosUrl:[4,e.TYPES.STRING],androidUri:[5,e.TYPES.STRING],asyncUrl:[6,e.TYPES.STRING],wwwIsAsyncUrl:[7,e.TYPES.BOOL],msiteEnabled:[8,e.TYPES.BOOL],hideUriInFallback:[9,e.TYPES.BOOL],showConfirmationDialog:[10,e.TYPES.BOOL],graphPayload:[11,e.TYPES.STRING],identifierName:[12,e.TYPES.STRING],threadId:[13,e.TYPES.STRING],hideCtaInFallback:[14,e.TYPES.BOOL],ctxAdConversationStarterInfo:[15,e.TYPES.STRING],fbmUri:[16,e.TYPES.STRING],initiatorUserId:[17,e.TYPES.STRING]},M.name="MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdate",M.internalSpec={senderName:[1,e.TYPES.STRING],muteManagementAdminTextType:[2,e.TYPES.STRING],gameName:[3,e.TYPES.STRING]},w.name="MiTransportAdminMessage$XmatFriendRequestConfirmedEncrypted",w.internalSpec={otherUserName:[1,e.TYPES.STRING],isTurnOnCohort:[2,e.TYPES.STRING],userWhoAcceptedFriendRequest:[3,e.TYPES.STRING]},A.name="MiTransportAdminMessage$XmatDisappearingSetting",A.internalSpec={disappearingSettingTime:[1,e.TYPES.INT64],oldDisappearingSettingTime:[2,e.TYPES.INT64],disappearingSettingActorFbid:[3,e.TYPES.INT64],newEphemeralityType:[4,e.TYPES.INT64],oldEphemeralityType:[5,e.TYPES.INT64]},F.name="MiTransportAdminMessage$LimitSharingChanged",F.internalSpec={sharingType:[1,e.TYPES.ENUM,u]},O.name="MiTransportAdminMessage$DisappearingSettingChanged",O.internalSpec={disappearingSettingDurationSeconds:[1,e.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,e.TYPES.INT32]},B.name="MiTransportAdminMessage$IconChanged",B.internalSpec={threadIcon:[1,e.TYPES.STRING]},W.name="MiTransportAdminMessage$LinkCta",W.internalSpec={ukOsaAdminText:[1,e.TYPES.MESSAGE,q],__oneofs__:{content:["ukOsaAdminText"]}},q.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText",q.internalSpec={initiatorUserId:[2,e.TYPES.STRING]},U.name="MiTransportAdminMessage$QuickReactionChanged",U.internalSpec={emojiName:[1,e.TYPES.STRING]},V.name="MiTransportAdminMessage$GroupImageChanged",V.internalSpec={action:[1,e.TYPES.ENUM,c]},H.name="MiTransportAdminMessage$MessagePinned",H.internalSpec={action:[1,e.TYPES.ENUM,d]},G.name="MiTransportAdminMessage$GroupMembershipAddModeChanged",G.internalSpec={mode:[1,e.TYPES.ENUM,m]},z.name="MiTransportAdminMessage$GroupNameChanged",z.internalSpec={groupName:[1,e.TYPES.STRING]},j.name="MiTransportAdminMessage$GroupAdminChanged",j.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,p]},K.name="MiTransportAdminMessage$GroupParticipantChanged",K.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,_]},Q.name="MiTransportAdminMessage$NicknameChanged",Q.internalSpec={targetUserId:[1,e.TYPES.STRING],nickname:[2,e.TYPES.STRING]},X.name="MiTransportAdminMessage$ChatThemeChanged",X.internalSpec={themeName:[1,e.TYPES.STRING],themeEmoji:[2,e.TYPES.STRING],themeType:[3,e.TYPES.INT32]},l.MiTransportAdminMessage$LimitSharingChanged$SharingType=u,l.MiTransportAdminMessage$GroupImageChanged$Action=c,l.MiTransportAdminMessage$MessagePinned$Action=d,l.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=m,l.MiTransportAdminMessage$GroupAdminChanged$Action=p,l.MiTransportAdminMessage$GroupParticipantChanged$Action=_,l.MiTransportAdminMessageSpec=f,l.MiTransportAdminMessage$XmatGenAITaskAddSpec=g,l.MiTransportAdminMessage$XmatUnpinMessageV2Spec=h,l.MiTransportAdminMessage$XmatPinMessageV2Spec=y,l.MiTransportAdminMessage$XmatUpdatePaymentsSpec=C,l.MiTransportAdminMessage$XmatThreadQuickReactionSpec=b,l.MiTransportAdminMessage$XmatThreadNicknameSpec=v,l.MiTransportAdminMessage$XmatThreadIconSpec=S,l.MiTransportAdminMessage$XmatThemeColorSpec=R,l.MiTransportAdminMessage$XmatMessengerSharedAlbumSpec=L,l.MiTransportAdminMessage$XmatMessengerSharedAlbumRenameSpec=E,l.MiTransportAdminMessage$XmatMessengerSharedAlbumDeletionSpec=k,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemovalSpec=I,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTupleSpec=T,l.MiTransportAdminMessage$XmatMessengerSharedAlbumAdditionSpec=D,l.MiTransportAdminMessage$XmatMessengerQRCodeScannedSpec=x,l.MiTransportAdminMessage$XmatMessagingLimitSharingSpec=$,l.MiTransportAdminMessage$XmatMagicWordsSpec=P,l.MiTransportAdminMessage$XmatLinkCTASpec=N,l.MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdateSpec=M,l.MiTransportAdminMessage$XmatFriendRequestConfirmedEncryptedSpec=w,l.MiTransportAdminMessage$XmatDisappearingSettingSpec=A,l.MiTransportAdminMessage$LimitSharingChangedSpec=F,l.MiTransportAdminMessage$DisappearingSettingChangedSpec=O,l.MiTransportAdminMessage$IconChangedSpec=B,l.MiTransportAdminMessage$LinkCtaSpec=W,l.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=q,l.MiTransportAdminMessage$QuickReactionChangedSpec=U,l.MiTransportAdminMessage$GroupImageChangedSpec=V,l.MiTransportAdminMessage$MessagePinnedSpec=H,l.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=G,l.MiTransportAdminMessage$GroupNameChangedSpec=z,l.MiTransportAdminMessage$GroupAdminChangedSpec=j,l.MiTransportAdminMessage$GroupParticipantChangedSpec=K,l.MiTransportAdminMessage$NicknameChangedSpec=Q,l.MiTransportAdminMessage$ChatThemeChangedSpec=X}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2}),u=n("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3}),c=n("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2}),d={},m={},p={},_={},f={};d.name="TransportEvent",d.internalSpec={placeholder:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],event:[2,e.TYPES.MESSAGE,m],__oneofs__:{content:["placeholder","event"]}},m.name="TransportEvent$Event",m.internalSpec={deviceChange:[1,e.TYPES.MESSAGE,_],icdcAlert:[2,e.TYPES.MESSAGE,p],__oneofs__:{event:["deviceChange","icdcAlert"]}},p.name="TransportEvent$Event$IcdcAlert",p.internalSpec={type:[1,e.TYPES.ENUM,s]},_.name="TransportEvent$Event$DeviceChange",_.internalSpec={type:[1,e.TYPES.ENUM,u],deviceName:[2,e.TYPES.STRING],devicePlatform:[3,e.TYPES.STRING],deviceModel:[4,e.TYPES.STRING]},f.name="TransportEvent$Placeholder",f.internalSpec={type:[1,e.TYPES.ENUM,c]},l.TransportEvent$Event$IcdcAlert$Type=s,l.TransportEvent$Event$DeviceChange$Type=u,l.TransportEvent$Placeholder$Type=c,l.TransportEventSpec=d,l.TransportEvent$EventSpec=m,l.TransportEvent$Event$IcdcAlertSpec=p,l.TransportEvent$Event$DeviceChangeSpec=_,l.TransportEvent$PlaceholderSpec=f}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={SMALL:1,MEDIUM:2,LARGE:3},c={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5},d={NONE:0,VIDEO:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={};m.name="ConsumerApplication",m.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,p],metadata:[2,e.TYPES.MESSAGE,f]},p.name="ConsumerApplication$Payload",p.internalSpec={content:[1,e.TYPES.MESSAGE,y],applicationData:[2,e.TYPES.MESSAGE,h],signal:[3,e.TYPES.MESSAGE,g],subProtocol:[4,e.TYPES.MESSAGE,_],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},_.name="ConsumerApplication$SubProtocolPayload",_.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},f.name="ConsumerApplication$Metadata",f.internalSpec={specialTextSize:[1,e.TYPES.ENUM,u]},g.name="ConsumerApplication$Signal",g.internalSpec={},h.name="ConsumerApplication$ApplicationData",h.internalSpec={revoke:[1,e.TYPES.MESSAGE,I],__oneofs__:{applicationContent:["revoke"]}},y.name="ConsumerApplication$Content",y.internalSpec={messageText:[1,e.TYPES.MESSAGE,s.MessageTextSpec],imageMessage:[2,e.TYPES.MESSAGE,W],contactMessage:[3,e.TYPES.MESSAGE,P],locationMessage:[4,e.TYPES.MESSAGE,w],extendedTextMessage:[5,e.TYPES.MESSAGE,M],statusTextMessage:[6,e.TYPES.MESSAGE,N],documentMessage:[7,e.TYPES.MESSAGE,F],audioMessage:[8,e.TYPES.MESSAGE,B],videoMessage:[9,e.TYPES.MESSAGE,O],contactsArrayMessage:[10,e.TYPES.MESSAGE,$],liveLocationMessage:[11,e.TYPES.MESSAGE,x],stickerMessage:[12,e.TYPES.MESSAGE,A],groupInviteMessage:[13,e.TYPES.MESSAGE,D],viewOnceMessage:[14,e.TYPES.MESSAGE,T],reactionMessage:[16,e.TYPES.MESSAGE,k],pollCreationMessage:[17,e.TYPES.MESSAGE,L],pollUpdateMessage:[18,e.TYPES.MESSAGE,R],editMessage:[19,e.TYPES.MESSAGE,C],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}},C.name="ConsumerApplication$EditMessage",C.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],message:[2,e.TYPES.MESSAGE,s.MessageTextSpec],timestampMs:[3,e.TYPES.INT64]},b.name="ConsumerApplication$PollAddOptionMessage",b.internalSpec={pollOption:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E]},v.name="ConsumerApplication$PollVoteMessage",v.internalSpec={selectedOptions:[1,e.FLAGS.REPEATED|e.TYPES.BYTES],senderTimestampMs:[2,e.TYPES.INT64]},S.name="ConsumerApplication$PollEncValue",S.internalSpec={encPayload:[1,e.TYPES.BYTES],encIv:[2,e.TYPES.BYTES]},R.name="ConsumerApplication$PollUpdateMessage",R.internalSpec={pollCreationMessageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],vote:[2,e.TYPES.MESSAGE,S],addOption:[3,e.TYPES.MESSAGE,S]},L.name="ConsumerApplication$PollCreationMessage",L.internalSpec={encKey:[1,e.TYPES.BYTES],name:[2,e.TYPES.STRING],options:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E],selectableOptionsCount:[4,e.TYPES.UINT32]},E.name="ConsumerApplication$Option",E.internalSpec={optionName:[1,e.TYPES.STRING]},k.name="ConsumerApplication$ReactionMessage",k.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],text:[2,e.TYPES.STRING],groupingKey:[3,e.TYPES.STRING],senderTimestampMs:[4,e.TYPES.INT64],reactionMetadataDataclassData:[5,e.TYPES.STRING],style:[6,e.TYPES.INT32]},I.name="ConsumerApplication$RevokeMessage",I.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},T.name="ConsumerApplication$ViewOnceMessage",T.internalSpec={imageMessage:[1,e.TYPES.MESSAGE,W],videoMessage:[2,e.TYPES.MESSAGE,O],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}},D.name="ConsumerApplication$GroupInviteMessage",D.internalSpec={groupJid:[1,e.TYPES.STRING],inviteCode:[2,e.TYPES.STRING],inviteExpiration:[3,e.TYPES.INT64],groupName:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],caption:[6,e.TYPES.MESSAGE,s.MessageTextSpec]},x.name="ConsumerApplication$LiveLocationMessage",x.internalSpec={location:[1,e.TYPES.MESSAGE,V],accuracyInMeters:[2,e.TYPES.UINT32],speedInMps:[3,e.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,e.TYPES.UINT32],caption:[5,e.TYPES.MESSAGE,s.MessageTextSpec],sequenceNumber:[6,e.TYPES.INT64],timeOffset:[7,e.TYPES.UINT32]},$.name="ConsumerApplication$ContactsArrayMessage",$.internalSpec={displayName:[1,e.TYPES.STRING],contacts:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,P]},P.name="ConsumerApplication$ContactMessage",P.internalSpec={contact:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},N.name="ConsumerApplication$StatusTextMesage",N.internalSpec={text:[1,e.TYPES.MESSAGE,M],textArgb:[6,e.TYPES.FIXED32],backgroundArgb:[7,e.TYPES.FIXED32],font:[8,e.TYPES.ENUM,c]},M.name="ConsumerApplication$ExtendedTextMessage",M.internalSpec={text:[1,e.TYPES.MESSAGE,s.MessageTextSpec],matchedText:[2,e.TYPES.STRING],canonicalUrl:[3,e.TYPES.STRING],description:[4,e.TYPES.STRING],title:[5,e.TYPES.STRING],thumbnail:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],previewType:[7,e.TYPES.ENUM,d]},w.name="ConsumerApplication$LocationMessage",w.internalSpec={location:[1,e.TYPES.MESSAGE,V],address:[2,e.TYPES.STRING]},A.name="ConsumerApplication$StickerMessage",A.internalSpec={sticker:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},F.name="ConsumerApplication$DocumentMessage",F.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],fileName:[2,e.TYPES.STRING]},O.name="ConsumerApplication$VideoMessage",O.internalSpec={video:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},B.name="ConsumerApplication$AudioMessage",B.internalSpec={audio:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],ptt:[2,e.TYPES.BOOL]},W.name="ConsumerApplication$ImageMessage",W.internalSpec={image:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},q.name="ConsumerApplication$InteractiveAnnotation",q.internalSpec={polygonVertices:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,U],location:[2,e.TYPES.MESSAGE,V],__oneofs__:{action:["location"]}},U.name="ConsumerApplication$Point",U.internalSpec={x:[1,e.TYPES.DOUBLE],y:[2,e.TYPES.DOUBLE]},V.name="ConsumerApplication$Location",V.internalSpec={degreesLatitude:[1,e.TYPES.DOUBLE],degreesLongitude:[2,e.TYPES.DOUBLE],name:[3,e.TYPES.STRING]},H.name="ConsumerApplication$MediaPayload",H.internalSpec={protocol:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},l.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=u,l.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=c,l.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=d,l.ConsumerApplicationSpec=m,l.ConsumerApplication$PayloadSpec=p,l.ConsumerApplication$SubProtocolPayloadSpec=_,l.ConsumerApplication$MetadataSpec=f,l.ConsumerApplication$SignalSpec=g,l.ConsumerApplication$ApplicationDataSpec=h,l.ConsumerApplication$ContentSpec=y,l.ConsumerApplication$EditMessageSpec=C,l.ConsumerApplication$PollAddOptionMessageSpec=b,l.ConsumerApplication$PollVoteMessageSpec=v,l.ConsumerApplication$PollEncValueSpec=S,l.ConsumerApplication$PollUpdateMessageSpec=R,l.ConsumerApplication$PollCreationMessageSpec=L,l.ConsumerApplication$OptionSpec=E,l.ConsumerApplication$ReactionMessageSpec=k,l.ConsumerApplication$RevokeMessageSpec=I,l.ConsumerApplication$ViewOnceMessageSpec=T,l.ConsumerApplication$GroupInviteMessageSpec=D,l.ConsumerApplication$LiveLocationMessageSpec=x,l.ConsumerApplication$ContactsArrayMessageSpec=$,l.ConsumerApplication$ContactMessageSpec=P,l.ConsumerApplication$StatusTextMesageSpec=N,l.ConsumerApplication$ExtendedTextMessageSpec=M,l.ConsumerApplication$LocationMessageSpec=w,l.ConsumerApplication$StickerMessageSpec=A,l.ConsumerApplication$DocumentMessageSpec=F,l.ConsumerApplication$VideoMessageSpec=O,l.ConsumerApplication$AudioMessageSpec=B,l.ConsumerApplication$ImageMessageSpec=W,l.ConsumerApplication$InteractiveAnnotationSpec=q,l.ConsumerApplication$PointSpec=U,l.ConsumerApplication$LocationSpec=V,l.ConsumerApplication$MediaPayloadSpec=H}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2},c={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={};d.name="MessageApplication",d.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,e.TYPES.MESSAGE,m]},m.name="MessageApplication$Metadata",m.internalSpec={forwardingScore:[5,e.TYPES.UINT32],isForwarded:[6,e.TYPES.BOOL],businessMetadata:[7,e.TYPES.MESSAGE,(s=o("WACommon.pb")).SubProtocolSpec],frankingKey:[8,e.TYPES.BYTES],frankingVersion:[9,e.TYPES.INT32],quotedMessage:[10,e.TYPES.MESSAGE,p],threadType:[11,e.TYPES.ENUM,u],readonlyMetadataDataclass:[12,e.TYPES.STRING],groupId:[13,e.TYPES.STRING],groupSize:[14,e.TYPES.UINT32],groupIndex:[15,e.TYPES.UINT32],botResponseId:[16,e.TYPES.STRING],collapsibleId:[17,e.TYPES.STRING],secondaryOtid:[18,e.TYPES.STRING],chatEphemeralSetting:[1,e.TYPES.MESSAGE,b],ephemeralSettingList:[2,e.TYPES.MESSAGE,_],ephemeralSharedSecret:[3,e.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}},p.name="MessageApplication$Metadata$QuotedMessage",p.internalSpec={stanzaId:[1,e.TYPES.STRING],remoteJid:[2,e.TYPES.STRING],participant:[3,e.TYPES.STRING],payload:[4,e.TYPES.MESSAGE,f]},_.name="MessageApplication$Metadata$EphemeralSettingMap",_.internalSpec={chatJid:[1,e.TYPES.STRING],ephemeralSetting:[2,e.TYPES.MESSAGE,b]},f.name="MessageApplication$Payload",f.internalSpec={coreContent:[1,e.TYPES.MESSAGE,C],signal:[2,e.TYPES.MESSAGE,y],applicationData:[3,e.TYPES.MESSAGE,h],subProtocol:[4,e.TYPES.MESSAGE,g],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}},g.name="MessageApplication$SubProtocolPayload",g.internalSpec={futureProof:[1,e.TYPES.ENUM,s.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],businessMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],paymentMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],multiDevice:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],voip:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],armadillo:[7,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}},h.name="MessageApplication$ApplicationData",h.internalSpec={},y.name="MessageApplication$Signal",y.internalSpec={},C.name="MessageApplication$Content",C.internalSpec={},b.name="MessageApplication$EphemeralSetting",b.internalSpec={ephemeralExpiration:[2,e.TYPES.UINT32],ephemeralSettingTimestamp:[3,e.TYPES.INT64],ephemeralityType:[5,e.TYPES.ENUM,c],isEphemeralSettingReset:[4,e.TYPES.BOOL]},l.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=u,l.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=c,l.MessageApplicationSpec=d,l.MessageApplication$MetadataSpec=m,l.MessageApplication$Metadata$QuotedMessageSpec=p,l.MessageApplication$Metadata$EphemeralSettingMapSpec=_,l.MessageApplication$PayloadSpec=f,l.MessageApplication$SubProtocolPayloadSpec=g,l.MessageApplication$ApplicationDataSpec=h,l.MessageApplication$SignalSpec=y,l.MessageApplication$ContentSpec=C,l.MessageApplication$EphemeralSettingSpec=b}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.payload;if(a==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(o("decodeProtobuf").getUnknownFields(e.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};var i=a.subProtocol;if(i==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(o("decodeProtobuf").getUnknownFields(i)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:i.futureProof};var l=[],s=(t=e.payload)==null||(t=t.subProtocol)==null?void 0:t.consumerMessage,u=(n=e.payload)==null||(n=n.subProtocol)==null?void 0:n.armadillo,c=(r=e.payload)==null||(r=r.subProtocol)==null?void 0:r.multiDevice;if(s!=null){if(s.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};l.push({payload:new Uint8Array(s.payload),type:"success",subprotocolType:"consumerMessage"})}if(u!=null){if(u.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};l.push({payload:new Uint8Array(u.payload),type:"success",subprotocolType:"armadillo"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};l.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"multiDevice"})}return l.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+l.length}:l[0]}l.parseMessageApplication=e}),98);
__d("lastx",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){var t=null;if(Array.isArray(e))e.length&&(t={value:e[e.length-1]});else for(var n of e)t=t||{},t.value=n;if(t)return t.value;s(0,1145)}l.default=e}),98);
__d("MultiKeyMap",["invariant","lastx"],(function(t,n,r,o,a,i,l,s){"use strict";var e=typeof WeakMap=="function",u=(function(){function t(){this.$1=this.$2(),this.$3=null}var n=t.prototype;return n.set=function(t,n){this.$4(t);for(var e=this.$1,r=0;r<t.length-1;r++){var o=t[r],a=this.$5(e,o).get(o);a==null&&(a=this.$2(),this.$5(e,o).set(o,a)),a.type==="map"||s(0,1732),e=a}var i=t[t.length-1];this.$5(e,i).set(i,{type:"value",value:n})},n.get=function(t){this.$4(t);var e=this.$6(t),n=e&&e.get(r("lastx")(t));return n==null||n.type!=="value"?void 0:n.value},n.delete=function(t){this.$4(t);var e=this.$6(t);return e?e.delete(r("lastx")(t)):!1},n.$5=function(t,n){return c(n)?t.cache:t.weakCache},n.$6=function(t){for(var e=this.$1,n=0;n<t.length-1;n++){var o,a=t[n];if(((o=e)==null?void 0:o.type)==="map")e=this.$5(e,a).get(a);else return}var i=r("lastx")(t),l=e&&this.$5(e,i);return l},n.$2=function(){return{type:"map",cache:new Map,weakCache:e?new WeakMap:new Map}},n.$4=function(t){if(this.$3==null&&(this.$3=t.length),this.$3!==t.length)throw new Error("MultiKeyMap called with different number of keys");if(t.length<1)throw new Error("MultiKeyMap called with empty array of keys")},t})();function c(e){var t=typeof e;return t==="bigint"||t==="boolean"||t==="number"||t==="string"||e==null}l.default=u}),98);
__d("memoizeWithArgsWeak",["MultiKeyMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t="");var n=new(r("MultiKeyMap"));return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=n.get(r);if(a!==void 0)return a;var i=e.apply(void 0,r);return n.set(r,i),i}}l.default=e}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}function s(e){return e instanceof ArrayBuffer?e:o("WAByteArray").uint8ArrayToBuffer(e)}var u=function(t){var e;this.kind="imageTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(e=t.image)==null?void 0:e.payload)},c=function(t){var e;this.kind="audioTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(e=t.audio)==null?void 0:e.payload),this.ptt=t.ptt},d=function(t){var e;this.kind="videoTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(e=t.video)==null?void 0:e.payload),this.caption=t.caption},m=function(t){var e;this.kind="documentTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(e=t.document)==null?void 0:e.payload),this.fileName=t.fileName},p=function(t){var e;this.kind="stickerTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(e=t.sticker)==null?void 0:e.payload)},_=function(t){var e=this,n;this.kind="extendedContentMessage",this.favicon=(n=r("memoize"))(function(){var t,n;return((t=e.payload)==null||(t=t.favicon)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.favicon)==null?void 0:n.payload)}),this.headerImage=n(function(){var t,n;return((t=e.payload)==null||(t=t.headerImage)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.headerImage)==null?void 0:n.payload)}),this.previews=n(function(){var t,n;return(t=(n=e.payload)==null||(n=n.previews)==null?void 0:n.map(function(e){return o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,e.payload)}))!=null?t:[]}),this.associatedMessage=n(function(){var t=e.payload.associatedMessage;return(t==null?void 0:t.payload)==null?null:new y(t.payload)}),this.payload=t},f=function(t){var e=this;this.stickerContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.stickerContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,n.payload)}),this.videoContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.videoContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,n.payload)}),this.payload=t},g=(function(){function e(e){this.kind="armadillo",this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloApplication.pb").ArmadilloSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.extendedContentMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},t.noteReply=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.noteReplyMessage;return t==null?null:new f(t)},t.paymentsTransactionMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null||(e=e.paymentsTransactionMessage)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},e})(),h=(function(){function e(e){var t=this,n;this.kind="consumerApplication",this.imageMessage=(n=r("memoize"))(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.imageMessage;if(n!=null)return new u(n)}),this.audioMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.audioMessage;if(n!=null)return new c(n)}),this.videoMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.videoMessage;if(n!=null)return new d(n)}),this.documentMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.documentMessage;if(n!=null)return new m(n)}),this.stickerMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.stickerMessage;if(n!=null)return new p(n)}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.attachmentMessage=function(){var e,t,n,r;return(e=(t=(n=(r=this.imageMessage())!=null?r:this.audioMessage())!=null?n:this.videoMessage())!=null?t:this.documentMessage())!=null?e:this.stickerMessage()},e})(),y=(function(){function e(e){var t=this;this.kind="messageApplication",this.subProtocol=r("memoize")(function(){var e=o("WAParseMessageApplication").parseMessageApplication(t.proto);if(e.payload!=null){var n=e.payload;switch(e.subprotocolType){case"consumerMessage":return new h(n);case"armadillo":return new g(n);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:e.subprotocolType}}}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e)}var t=e.prototype;return t.consumerMessage=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="consumerApplication"?null:e},t.armadillo=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="armadillo"?null:e},e})(),C=function(t){this.kind="transportEvent",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,t)},b=function(t){this.kind="locallyTransformedMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,t)},v=function(t){this.kind="adminMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,t)},S="SKIP_CACHE",R=(function(){function e(e,t){var n=this;this.payload=r("memoize")(function(){if(n.proto.encryptedTransportEvent!=null)return new C(r("nullthrows")(n.proto.encryptedTransportEvent.payload));if(n.proto.encryptedTransportLocallyTransformedMessage!=null)return new b(r("nullthrows")(n.proto.encryptedTransportLocallyTransformedMessage.payload));if(n.proto.encryptedTransportMessage!=null)return new y(r("nullthrows")(n.proto.encryptedTransportMessage));if(n.proto.miTransportAdminMessage!=null)return new v(r("nullthrows")(n.proto.miTransportAdminMessage.payload));throw r("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")}),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e)}var t=e.prototype;return t.encryptedTransportMessage=function(){var e=this.payload();if(e.kind==="messageApplication")return e},t.encryptedTransportEvent=function(){var e=this.payload();if(e.kind==="transportEvent")return e},t.locallyTransformedMessage=function(){var e=this.payload();if(e.kind==="locallyTransformedMessage")return e},t.adminMessage=function(){var e=this.payload();if(e.kind==="adminMessage")return e},e})();R.create=r("memoizeWithArgsWeak")(function(e){return new R(e,S)}),l.DeserializedImageMessage=u,l.DeserializedAudioMessage=c,l.DeserializedVideoMessage=d,l.DeserializedDocumentMessage=m,l.DeserializedStickerMessage=p,l.DeserializedExtendedContentMessage=_,l.DeserializedNoteReply=f,l.DeserializedArmadilloApplication=g,l.DeserializedConsumerApplication=h,l.DeserializedMessageApplication=y,l.DeserializedTransportEvent=C,l.DeserializedLocallyTransformedMessage=b,l.DeserializedAdminMessage=v,l.DeserializedBackupMessage=R}),98);
__d("MAWProtobufValidator",["FBLogger","MAWProtobufDeserializers","decodeProtobuf","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{var n=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(t),a=n.encryptedTransportMessage();return a!=null?u(a):!0}catch(t){var i=r("getErrorSafe")(t);return r("FBLogger")("messenger_web").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unknown error when trying to validate Protobuf: ",""])),i.message),!1}}function u(e){var t=e.consumerMessage();if(t!=null)return c(t);var n=e.armadillo();return n!=null?d(n):!0}function c(e){var t=e.imageMessage();if(t!=null)return m(t.payload);var n=e.videoMessage();if(n!=null)return m(n.payload);var r=e.audioMessage();if(r!=null)return m(r.payload);var o=e.stickerMessage();if(o!=null)return m(o.payload);var a=e.documentMessage();return a!=null?m(a.payload):!0}function d(e){var t=e.extendedContentMessage();if(t!=null){var n=t.previews();for(var r of n)if(!m(r))return!1;return!0}return!0}function m(e){var t,n,r,a,i,l,s,u;if(!(e!=null&&(t=e.integral)!=null&&t.transport))return!1;var c=(n=e.integral)==null?void 0:n.transport;return!(o("decodeProtobuf").getUnknownFields(c.integral)!=null||((r=c.integral)==null?void 0:r.fileSha256)==null||((a=c.integral)==null?void 0:a.fileEncSha256)==null||((i=c.integral)==null?void 0:i.mediaKey)==null||((l=c.integral)==null?void 0:l.directPath)==null||((s=c.integral)==null?void 0:s.mediaKeyTimestamp)==null||((u=c.ancillary)==null?void 0:u.objectId)==null)}l.isProtobufValid=s,l.isAttachmentValid=m}),98);
__d("RavenMessagingState",[],(function(t,n,r,o,a,i){var e=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});i.default=e}),66);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){switch(t){case o("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return r("RavenMessagingState").PERMANENT;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return r("RavenMessagingState").UNSEEN;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return r("RavenMessagingState").SEEN;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return r("RavenMessagingState").REPLAYED;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return r("RavenMessagingState").EXPIRED}},s=function(t){switch(t){case o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return r("EphemeralMediaViewMode").PERMANENT;case o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return r("EphemeralMediaViewMode").REPLAYABLE;case o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return r("EphemeralMediaViewMode").READ_ONCE}},u=function(t,n){return{ephemeralMediaState:n,ephemeralMediaViewMode:s(t)}};function c(t,n){switch(n){case o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?r("RavenMessagingState").SEEN:e(t);case o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?r("RavenMessagingState").SEEN:t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN?r("RavenMessagingState").REPLAYED:e(t);case o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return e(t)}}l.getEphemeralMediaState=e,l.getEphemeralMediaViewMode=s,l.deriveRavenSettings=u,l.getNextRavenMessageEphemeralState=c}),98);
__d("MAWVaultMaterialsStorage",["MAWVaultMaterials","MWFBLogger","Promise","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="mw_exchange_vm";function u(){var t=o("MAWVaultMaterials").generateNewVaultMaterials(),a="newly-generated";return new(e||(e=n("Promise")))(function(e){r("WebAsyncStorage").getOrSetItem(s,t,function(n,r){if(n!=null){var i=o("MWFBLogger").MWLogger();if(n instanceof Error)throw i.catching(n).mustfixThrow("Failed to store Vaulting Materials. %s",n.toString());i.mustfix("Failed to store Vaulting Materials.")}r!==null&&(t=r,a="storage"),e(o("MAWVaultMaterials").initializeVaultMaterials(t,a))})})}function c(){return o("MAWVaultMaterials").hasVaultBeenSetup()?(e||(e=n("Promise"))).resolve(o("MAWVaultMaterials").getVaultMaterials()):u()}l.setupVaultMaterials=c}),98);
__d("WormMemoryIndex",["BinarySearch"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=new Map,this.$2=e}var t=e.prototype;return t.initialize=function(t){var e=this.$2.indexes;if(e!=null){for(var n of Object.keys(e))this.$1.set(n,[]);for(var r of t){var o=r[0],a=r[1];this.add(o,a)}}},t.buildKey=function(t,n){var e,r=(e=this.$2.indexes)==null?void 0:e[n];return r==null?[]:r.fields.map(function(e){return t[e]})},t.compareKeys=function(t,n){for(var e=Math.min(t.length,n.length),r=0;r<e;r++){var o=t[r],a=n[r];if(o!==a){if(typeof o=="number"&&typeof a=="number")return o-a;if(typeof o=="bigint"&&typeof a=="bigint"){if(o<a)return-1;if(o>a)return 1;continue}var i=String(o),l=String(a);if(i<l)return-1;if(i>l)return 1}}return 0},t.add=function(t,n){var e=this,r=this.$2.indexes;if(r!=null)for(var a of Object.keys(r)){var i=this.$1.get(a);if(i!=null){var l=this.buildKey(n,a),s=o("BinarySearch").findBoundInArray(i,l,function(t,n){return e.compareKeys(t.key,n)},o("BinarySearch").LEAST_STRICT_UPPER_BOUND);i.splice(s,0,{key:l,pk:t})}}},t.remove=function(t,n){var e=this,r=this.$2.indexes;if(r!=null)for(var a of Object.keys(r)){var i=this.$1.get(a);if(i!=null){for(var l=this.buildKey(n,a),s=o("BinarySearch").findBoundInArray(i,l,function(t,n){return e.compareKeys(t.key,n)},o("BinarySearch").LEAST_UPPER_BOUND),u=s;u<i.length&&this.compareKeys(i[u].key,l)===0;u++)if(i[u].pk===t){i.splice(u,1);break}}}},t.getSortedArray=function(t){return this.$1.get(t)},t.clear=function(){for(var e of this.$1.keys())this.$1.set(e,[])},t.findRange=function(t,n){var e,r,a,i,l=this,s=this.$1.get(t);if(s==null)return[0,0];var u=(e=(r=n==null?void 0:n.greaterThan)!=null?r:n==null?void 0:n.greaterThanOrEqual)!=null?e:n==null?void 0:n.only,c=(a=(i=n==null?void 0:n.lessThan)!=null?i:n==null?void 0:n.lessThanOrEqual)!=null?a:n==null?void 0:n.only,d=u==null?0:o("BinarySearch").findBoundInArray(s,u,function(e,t){return l.compareKeys(e.key,t)},(n==null?void 0:n.greaterThan)!=null?o("BinarySearch").LEAST_STRICT_UPPER_BOUND:o("BinarySearch").LEAST_UPPER_BOUND),m=c==null?s.length:(n==null?void 0:n.lessThan)!=null?o("BinarySearch").findBoundInArray(s,c,function(e,t){return l.compareKeys(e.key,t)},o("BinarySearch").LEAST_UPPER_BOUND):o("BinarySearch").findBoundInArray(s,c,function(e,t){return l.compareKeys(e.key,t)},o("BinarySearch").GREATEST_LOWER_BOUND)+1;return[d,m]},t.findExact=function(t,n){var e=this,r=this.$1.get(t);if(r==null)return-1;var a=o("BinarySearch").findBoundInArray(r,n,function(t,n){return e.compareKeys(t.key,n)},o("BinarySearch").LEAST_UPPER_BOUND);return a<r.length&&this.compareKeys(r[a].key,n)===0?a:-1},e})();l.WormMemoryIndex=e}),98);
__d("WormMemoryDriver",["BinarySearch","FBLogger","Promise","WAResolvable","WormMemoryIndex","WormStoreFunctions","asyncToGeneratorRuntime","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=0;function u(){return s+=1,s}function c(){s=0}var d=(function(){function t(t,r,o,a){var i,l;this.$3={},this.$4=(e||(e=n("Promise"))).resolve(),this.$5=[],this.$2=t,this.$1=r,this.$9=o,this.$6=a==null?void 0:a.blockingErrorThreshold,this.$7=(i=a==null?void 0:a.onBlockingError)!=null?i:function(){},this.$8=(l=a==null?void 0:a.onTransactionError)!=null?l:function(){};for(var s of Object.keys(r))this.$3[s]=new Map}var a=t.prototype;return a.getSchema=function(){return this.$1},a.getDbAlias=function(){return this.$2},a.$10=function(t){var e,n,o;if(this.$6!=null){var a=this.$6,i=(e=(n=(o=t==null?void 0:t.name)!=null?o:t==null?void 0:t.message)!=null?n:t==null?void 0:t.toString())!=null?e:"unknown";if(this.$5.push(i),!(this.$5.length<Math.max(a,1))){var l=this.$5[this.$5.length-1],s=this.$5.every(function(e){return e===l})?l:"mixed";r("FBLogger")("worm").mustfix("Unrecoverable error (%s): %s",this.$2,s),this.$9.log(this.$2+".error.unrecoverable."+s),this.$7(s),this.$5=[]}}},a.runInTransaction=function(t,a,i,l){var e,s=this,u=new(o("WAResolvable")).Resolvable;return(e=l.eventFlow)==null||e.addPoint("memory_txn_start"),this.$4=this.$4.then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e,n;(e=l.eventFlow)==null||e.addPoint("memory_txn_execute");var r={};for(var o of t)r[o]=new Map(s.$3[o]);var c=t.reduce(function(e,t){var n;return babelHelpers.extends({},e,(n={},n[t]=new m(r[t],s.$1[t]),n))},{}),d={abort:function(){},commit:function(){return u.promise.then(function(){})},stores:c},p=yield i(d);if(a==="readwrite")for(var _ of t)s.$3[_]=r[_];(n=l.eventFlow)==null||n.addPoint("memory_txn_commit"),u.resolve(p)})).catch(function(e){var t,n=r("getErrorSafe")(e);(t=l.eventFlow)==null||t.addPoint("memory_txn_error",{string:{error_message:n.message,error_name:n.name}}),s.$9.log(s.$2+".error.txn_error"),s.$8(n),s.$10(n),u.reject(n)}),u.promise},a.close=function(){},a.init=function(r){var t,o;return r==null||(t=r.eventFlow)==null||t.addPoint("memory_init_start"),this.$9.log(this.$2+".init"),r==null||(o=r.eventFlow)==null||o.addPoint("memory_init_end"),(e||(e=n("Promise"))).resolve({isNewDb:!0,isUpgraded:!1})},t})(),m=(function(){function t(t,a){var i=this;this.readIndexRange=function(t,o,a){var l=i.$2.indexes;if(l==null)throw r("err")("No indexes found");var s=l[t];if(s==null)throw r("err")("Index not found");var u=i.$3.getSortedArray(t);if(u!=null&&u.length>0&&(a==null?void 0:a.order)!=null)return(e||(e=n("Promise"))).resolve(i.$6(u,o,a));var c=Array.from(i.$1.values());if(o!=null){var d,m,p,f;c=_(c,(d=(m=o.lessThan)!=null?m:o.lessThanOrEqual)!=null?d:o.only,o.lessThanOrEqual!=null||o.only!=null,(p=(f=o.greaterThan)!=null?f:o.greaterThanOrEqual)!=null?p:o.only,o.greaterThanOrEqual!=null||o.only!=null,s)}return(e||(e=n("Promise"))).resolve(i.$5(c,a,t))},this.$1=t,this.$2=a,this.$3=new(o("WormMemoryIndex")).WormMemoryIndex(a),this.$3.initialize(this.$1.entries())}var a=t.prototype;return a.bulkAdd=function(o){var t=this;for(var a of o){if(this.$2.autoIncrement===!0&&a[this.$2.primaryKey]===void 0&&(a[this.$2.primaryKey]=u()),this.$1.has(a[this.$2.primaryKey]))throw r("err")("Item with key already exists");this.$4(a);var i=a[this.$2.primaryKey];this.$1.set(i,a),this.$3.add(i,a)}return(e||(e=n("Promise"))).resolve(o.map(function(e){return e[t.$2.primaryKey]}))},a.bulkPut=function(r){var t=this;for(var o of r){this.$4(o),this.$2.autoIncrement===!0&&o[this.$2.primaryKey]===void 0&&(o[this.$2.primaryKey]=u());var a=o[this.$2.primaryKey],i=this.$1.get(a);i!=null&&this.$3.remove(a,i),this.$1.set(a,o),this.$3.add(a,o)}return(e||(e=n("Promise"))).resolve(r.map(function(e){return e[t.$2.primaryKey]}))},a.$4=function(t){var e=this,n=this.$2.indexes;if(n!=null)for(var a of Object.entries(n)){var i=a[0],l=a[1];if(!(typeof l!="object"||l==null)){var s=l.unique;if(s!==!1){var u=this.$3.getSortedArray(i);if(u!=null){var c=this.$3.buildKey(t,i),d=o("BinarySearch").findBoundInArray(u,c,function(t,n){return e.$3.compareKeys(t.key,n)},o("BinarySearch").LEAST_UPPER_BOUND);if(d<u.length&&this.$3.compareKeys(u[d].key,c)===0){var m=t[this.$2.primaryKey];if(u[d].pk!==m)throw r("err")("ConstraintError")}}}}}},a.bulkGet=function(r){var t=this;return(e||(e=n("Promise"))).resolve(r.map(function(e){return t.$1.get(e)}))},a.get=function(r){return(e||(e=n("Promise"))).resolve(this.$1.get(r))},a.getByIndex=function(t,n,r){return o("WormStoreFunctions").getByIndex(this,t,n,r)},a.readByKeyRange=function(r,o){var t,a,i=p(Array.from(this.$1.values()),(t=r.lessThan)!=null?t:r.lessThanOrEqual,r.lessThanOrEqual!=null,(a=r.greaterThan)!=null?a:r.greaterThanOrEqual,r.greaterThanOrEqual!=null,this.$2.primaryKey);return(e||(e=n("Promise"))).resolve(this.$5(i,o))},a.bulkDelete=function(r){for(var t of r){var o=this.$1.get(t);o!=null&&(this.$3.remove(t,o),this.$1.delete(t))}return(e||(e=n("Promise"))).resolve()},a.delete=function(r){var t=this.$1.get(r);return t!=null&&(this.$3.remove(r,t),this.$1.delete(r)),(e||(e=n("Promise"))).resolve()},a.bulkUpsert=function(t,n){return o("WormStoreFunctions").bulkUpsert(this,this.$2,t,n)},a.$6=function(t,n,r){for(var e,o=this.$7(t,n),a=o[0],i=o[1],l=[],s=a;s<i;s++){var u=this.$1.get(t[s].pk);u!=null&&l.push(u)}return this.$8(l,r,(e=r.order)!=null?e:"asc")},a.$7=function(t,n){var e,r,a,i,l=this,s=(e=(r=n==null?void 0:n.greaterThan)!=null?r:n==null?void 0:n.greaterThanOrEqual)!=null?e:n==null?void 0:n.only,u=(a=(i=n==null?void 0:n.lessThan)!=null?i:n==null?void 0:n.lessThanOrEqual)!=null?a:n==null?void 0:n.only,c=s==null?0:o("BinarySearch").findBoundInArray(t,s,function(e,t){return l.$3.compareKeys(e.key,t)},(n==null?void 0:n.greaterThan)!=null?o("BinarySearch").LEAST_STRICT_UPPER_BOUND:o("BinarySearch").LEAST_UPPER_BOUND),d=u==null?t.length:(n==null?void 0:n.lessThan)!=null?o("BinarySearch").findBoundInArray(t,u,function(e,t){return l.$3.compareKeys(e.key,t)},o("BinarySearch").LEAST_UPPER_BOUND):o("BinarySearch").findBoundInArray(t,u,function(e,t){return l.$3.compareKeys(e.key,t)},o("BinarySearch").GREATEST_LOWER_BOUND)+1;return[c,d]},a.$8=function(t,n,r){var e=t;return n.filter!=null&&(e=e.filter(n.filter)),r==="desc"&&(e=e.reverse()),n.limit!=null&&(e=e.slice(0,n.limit)),e},a.readKeysByIndexRange=function(t,n,r){var e=this;return this.readIndexRange(t,n,r).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},a.getIndexRangeIterator=function(t,n,r,a){return o("WormStoreFunctions").getIndexRangeIterator(this.readIndexRange,this.$2,t,n,r,a)},a.$5=function(t,n,r){var e=t;if((n==null?void 0:n.filter)!=null&&(e=e.filter(n.filter)),(n==null?void 0:n.order)!=null&&r!=null){var o,a,i=(o=(a=this.$2.indexes)==null||(a=a[r])==null?void 0:a.fields)!=null?o:[];e=e.sort(function(e,t){for(var r of i)if(e[r]!==t[r])return n.order==="desc"?t[r]>e[r]?1:-1:e[r]>t[r]?1:-1;return 0})}return(n==null?void 0:n.limit)!=null&&(e=e.slice(0,n.limit)),e},a.readIndex=function(a,i,l){var t=this,s=this.$2.indexes;if(s==null)throw r("err")("No indexes found");var u=s[a];if(u==null)throw r("err")("Index not found");if(i==null)return(e||(e=n("Promise"))).resolve(this.$5(Array.from(this.$1.values()),l,a));var c=this.$3.getSortedArray(a);if(c==null)return(e||(e=n("Promise"))).resolve([]);for(var d=[].concat(i),m=o("BinarySearch").findBoundInArray(c,d,function(e,n){return t.$3.compareKeys(e.key,n)},o("BinarySearch").LEAST_UPPER_BOUND),p=[],_=m;_<c.length&&this.$3.compareKeys(c[_].key,d)===0;_++){var f=this.$1.get(c[_].pk);f!=null&&p.push(f)}return(e||(e=n("Promise"))).resolve(this.$5(p,l,a))},a.readIndexAnyOf=function(o,a,i){var t=this.$2.indexes;if(t==null)throw r("err")("No indexes found");var l=t[o];if(l==null)throw r("err")("Index not found");if(a.length===0)return(e||(e=n("Promise"))).resolve([]);var s=Array.from(this.$1.values());return s=s.filter(function(e){return a.some(function(t){for(var n=0;n<l.fields.length;n++)if(t[n]!==void 0&&e[l.fields[n]]!==t[n])return!1;return!0})}),(e||(e=n("Promise"))).resolve(this.$5(s,i,o))},a.readIndexKeys=function(t,n,r){var e=this;return this.readIndex(t,n,r).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},a.readAll=function(r){var t=this,o=Array.from(this.$1.values());return(r==null?void 0:r.filter)!=null&&(o=o.filter(r.filter)),(r==null?void 0:r.order)!=null&&(o=o.sort(function(e,n){var o=e[t.$2.primaryKey],a=n[t.$2.primaryKey];return o===a?0:r.order==="desc"?a>o?1:-1:o>a?1:-1})),(r==null?void 0:r.limit)!=null&&(o=o.slice(0,r.limit)),(e||(e=n("Promise"))).resolve(o)},a.readKeys=function(t){var e=this;return this.readAll(t).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},a.clear=function(){return this.$1.clear(),this.$3.clear(),(e||(e=n("Promise"))).resolve()},a.count=function(){return(e||(e=n("Promise"))).resolve(this.$1.size)},t})();function p(e,t,n,r,o,a){return e.filter(function(e){return!(r!=null&&r>e[a]||t!=null&&t<e[a]||t!=null&&n===!1&&e[a]===t||r!=null&&o===!1&&e[a]===r)})}function _(e,t,n,r,o,a){return e.filter(function(e){for(var i=0;i<a.fields.length;i++)if(r!=null&&r[i]>e[a.fields[i]]||t!=null&&t[i]<e[a.fields[i]]||i===a.fields.length-1&&(t!=null&&n===!1&&e[a.fields[i]]===t[i]||r!=null&&o===!1&&e[a.fields[i]]===r[i]))return!1;return!0})}l.TEST_ONLY_resetPK=c,l.WormMemoryDriver=d,l.WormMemoryStore=m}),98);
__d("WormMaintenanceSchema",["MAWWormOdsLogger","WAHex","Worm","WormEAR","WormIDbDriver","WormMemoryDriver"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{name:{fields:["name"],unique:!0}},nonEncryptedFields:["name","startedAtMs","finishedAtMs"],primaryKey:"pk",secure:!0},s={migrations:e};function u(e,t,n,r,a,i){var l=o("WAHex").parseHex(t),u="worm_maintenance",c=new(o("WormEAR")).WormEAR(s,u,l);return new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(e,u,s,c,o("MAWWormOdsLogger").wormOdsWorkerLogger,{blockingErrorThreshold:n,onBlockingError:r,onTransactionError:a}),i)}function c(e){return new(o("Worm")).WormDatabase(new(o("WormMemoryDriver")).WormMemoryDriver("worm_maintenance_test",s,o("MAWWormOdsLogger").wormOdsWorkerLogger),e)}l.makeWormMaintenanceSchema=u,l.makeWormMaintenanceSchema_TEST_ONLY=c}),98);
__d("WormMaintenanceDb",["FBLogger","Promise","WAResolvable","WormEAR","WormMaintenanceSchema","asyncToGeneratorRuntime","err","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new(o("WAResolvable")).Resolvable;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.blockingErrorThreshold,i=t.dbName,l=t.onBlockingError,c=t.qplEvent,d=t.strEncKey;try{var m=o("WormMaintenanceSchema").makeWormMaintenanceSchema(i,d,a,l,function(t){if(t instanceof o("WormEAR").DecryptionError){var a,i,l=t;r("FBLogger")("messenger_web").mustfix("EAR decryption error in store: %s. Dropping corrupted entity",l.store),r("promiseDone")((a=(i=s)==null?void 0:i.runInTransaction([l.store],"readwrite",function(e){var t=e.stores[l.store];return l.maybeHashedPk!=null?t.delete(l.maybeHashedPk):t.clear()},"delete-corrupted-entity"))!=null?a:(e||(e=n("Promise"))).resolve())}},c);return s=m,yield m.init(),u.resolve(m),m}catch(e){throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Error performing WORM PersistedQueue init"),e}}),d.apply(this,arguments)}function m(){if(s==null)throw r("err")("WormMaintenanceDb is not initialized");return s}function p(){return u.promise}l.makeWormMaintenanceDb=c,l.getWormMaintenanceDb=m,l.getWormMaintenanceDbPromise=p}),98);
__d("MAWWormMaintenanceDbSetup",["BackendInitLoggingUtils","MAWCurrentUser","MAWIndexedDbMetadata","MAWODSProxy","MessengerWebInitData","WAOdsEnums","WormMaintenanceDb","asyncToGeneratorRuntime","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("BackendInitLoggingUtils").measureMawInit("worm_maintenance_db_init",n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("WormMaintenanceDb").makeWormMaintenanceDb({blockingErrorThreshold:r("justknobx")._("3218"),dbName:o("MAWIndexedDbMetadata").wormMaintenanceDbName(o("MAWCurrentUser").getID()),onBlockingError:function(t){o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.WORM,key:"reverb.unrecoverable."+t})},qplEvent:r("qpl")._(1056840657,"2716"),strEncKey:r("MessengerWebInitData").accountKeyV2})}))}),s.apply(this,arguments)}l.mawWormDbMaintenanceDbSetup=e}),98);
__d("MAWWriteLimitSharingAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r;return t?(n=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,r=n===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED?[e]:[]):(n=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED,r=n===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED?[e]:[]),{adminMsgContent:r,adminType:n,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWritePinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_PINNED_MESSAGE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadHotlikeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e===o("MAWCurrentUser").getID(),r=n?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,a=[];return r===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE?a.push(t):a.push(e,t),{adminMsgContent:a,adminType:r,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadNicknameCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=o("MAWCurrentUser").getID(),a=e===r&&e!==t,i=t===r&&t!==e,l=t===e&&r===t,s=t===e&&r!==t,u;l&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:l&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:s&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:s&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:a&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:a&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:i&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:i&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME;var c=[];switch(u){case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:c.push(t,n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:c.push(e,n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:c.push(n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:c.push(t);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:c.push(e);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:c.push(e,t,n);break;default:break}return{adminMsgContent:c,adminType:u,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadPhotoCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MessengerThreadThemeType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({COLOR_GRADIENT:1,THEME:2,THIRD_PARTY:3,INTERACTIVE:4,IGD_CHANNEL_CUSTOMIZED_THEME:5,AI_AGENT:6,AI_GENERATED_THEME:7,AI_STUDIO_GENERATED_THEME:8,AI_INTERACTIVE_THEME:9,AI_INTERACTIVE_THEME_GENERATED:10,MSGR_CUSTOM_THEME:11,AI_SCROLLABLE_THEME:12}),l=e;i.default=l}),66);
__d("MAWWriteThreadThemeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser","MessengerThreadThemeType","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r){var a=e===o("MAWCurrentUser").getID(),i=u(a,r),l=[];return i===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME||i===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME?l.push(n):l.push(e,n),t!=null&&l.push(t),{adminMsgContent:l,adminType:i,version:1}}function u(t,n){if(n!=null)try{var a=r("MessengerThreadThemeType").cast(parseInt(n,10))===7;if(a)return t?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to convert theme type to integer: ",""])),t)}return t?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_THEME}l.getAdminMsgContent=s}),98);
__d("MAWWriteUKOSAAdminMsgContent",["MAWAdminMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("MAWAdminMsgType").ADMIN_MSG_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE,n=[e];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteUnpinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_UNPINNED_MESSAGE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MWChatEncryptedBackupsQPLEvents",["qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("qpl"))._(521476140,"378"),u=e._(521472542,"295"),c=e._(521484256,"3212"),d=e._(521473384,"31"),m=e._(521482085,"409"),p=e._(521485406,"272"),_=e._(521482763,"296"),f=e._(521484295,"1460"),g=e._(521482969,"1519"),h=e._(521479124,"1939"),y=e._(521474385,"263"),C=e._(521476098,"504"),b=e._(521482858,"1290"),v=e._(521473194,"1331"),S=e._(521471024,"2275");l.pinCodeChangeQplEvent=s,l.optOutQplEvent=u,l.resetBackupQplEvent=c,l.ebResetObserverQplEvent=d,l.backupSetupQplEvent=m,l.mobileOnboardingQplEvent=p,l.restoreQplEvent=_,l.restoreDeviceAuthQplEvent=f,l.messageRestoreQplEvent=g,l.restoreWithAutoRestoreConsentQplEvent=h,l.hsmFleetMigrationQplEvent=y,l.virtualDeviceRevocationQplEvent=C,l.onboardingAuthQplEvent=b,l.processBackupIdsQPLEvent=v,l.fetchBackupIdsQPLEvent=S}),98);
__d("MWXMAV2IsCollapsibleXMA",["MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;return!(e==null||((t=e.layout_config)==null?void 0:t.collapsible_id)==null&&!o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(e))}l.isCollapsibleXMA=e}),98);
__d("MessagesRangesV2ExternalIds",[],(function(t,n,r,o,a,i){"use strict";var e="",l="9999999999999999";i.MIN_EXTERNAL_ID=e,i.MAX_EXTERNAL_ID=l}),66);
__d("MpsAdminMsgToBridge",["FBLogger","MAWAckLevel","MAWAdminAddParticipantMsg","MAWAdminMsgHelpers","MAWAdminRemoveParticipantMsg","MAWAdminWriteGroupNameChangeAdminMsgContent","MAWEphemeralUtils","MAWJids","MAWWriteLimitSharingAdminMsgContent","MAWWritePinMessageAdminMsgContent","MAWWriteThreadHotlikeCustomizationAdminMsgContent","MAWWriteThreadNicknameCustomizationAdminMsgContent","MAWWriteThreadPhotoCustomizationAdminMsgContent","MAWWriteThreadThemeCustomizationAdminMsgContent","MAWWriteUKOSAAdminMsgContent","MAWWriteUnpinMessageAdminMsgContent","WAArmadilloMiTransportAdminMessage.pb","WAMsgType","err","getErrorSafe","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["$$unknownFieldCount","skipBumpThread","skipSnippetUpdate"],s=["type"],u=["type"],c=["type"],d=["type"],m=["type"],p=["type"],_=["type"],f=["type"],g=["type"],h=["type"],y=["type"],C=["type"],b=["type"],v=["type"],S=["type"],R=["type"],L=["type"],E=["type"],k=["type"],I=["type"];function T(e,t){return o("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.emojiName,"emojiName is null"))}function D(e,t){return o("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.threadIcon,"threadIcon is null"))}function x(e,t){var n;return o("MAWWriteThreadThemeCustomizationAdminMsgContent").getAdminMsgContent(e,t.themeEmoji,r("nullthrows")(t.themeName,"themeName is null"),""+((n=t.themeType)!=null?n:""))}function $(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED?o("MAWWritePinMessageAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNPINNED?o("MAWWriteUnpinMessageAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNSET||t.action===null||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function P(e,t){return o("MAWWriteThreadNicknameCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.targetUserId,"targetUserId is null"),r("nullthrows")(t.nickname,"nickname is null"))}function N(e){var t;return o("MAWWriteUKOSAAdminMsgContent").getAdminMsgContent(r("nullthrows")((t=e.ukOsaAdminText)==null?void 0:t.initiatorUserId,"initiatorUserId is null"))}function M(e,t){var n,r;return o("MAWEphemeralUtils").getEphemeralSettingChangeData(o("MAWJids").toUserJid(e),(n=t.disappearingSettingDurationSeconds)!=null?n:0,((r=t.oldDisappearingSettingDurationSeconds)!=null?r:0)===0,!1)}function w(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.CHANGED||t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.REMOVED?o("MAWWriteThreadPhotoCustomizationAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function A(e,t){return t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.ENABLED?o("MAWWriteLimitSharingAdminMsgContent").getAdminMsgContent(e,!0):t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.DISABLED?o("MAWWriteLimitSharingAdminMsgContent").getAdminMsgContent(e,!1):t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.UNSET||t.sharingType===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.sharingType)})()}function F(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.ADDED?o("MAWAdminAddParticipantMsg").createAddParticipantsAdminMessage(o("MAWJids").toUserJid(e),(t.targetUserId||[]).map(function(e){return o("MAWJids").toUserJid(e)})):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.REMOVED?o("MAWAdminRemoveParticipantMsg").createRemoveParticipantsAdminMessage(o("MAWJids").toUserJid(e),(t.targetUserId||[]).map(function(e){return o("MAWJids").toUserJid(e)})):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function O(e,t){return o("MAWAdminWriteGroupNameChangeAdminMsgContent").getAdminMsgContent(o("MAWJids").toUserJid(e),r("nullthrows")(t.groupName))}function B(e,t){var n,a;return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.ADDED?o("MAWAdminMsgHelpers").createParticipantPromoteAdminMessage(o("MAWJids").toUserJid(r("nullthrows")((n=t.targetUserId)==null?void 0:n[0])),o("MAWJids").toUserJid(e)):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.REMOVED?o("MAWAdminMsgHelpers").createParticipantDemoteAdminMessage(o("MAWJids").toUserJid(r("nullthrows")((a=t.targetUserId)==null?void 0:a[0])),o("MAWJids").toUserJid(e)):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function W(e,t){return t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.ADMINS_ONLY?o("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMessage(o("MAWJids").toUserJid(e),"admin_add"):t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.ALL_MEMBERS?o("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMessage(o("MAWJids").toUserJid(e),"all_member_add"):t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.UNSET||t.mode===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.mode)})()}function q(e,t){return M(e,{disappearingSettingDurationSeconds:t.disappearingSettingTime!=null?Number(t.disappearingSettingTime):0,oldDisappearingSettingDurationSeconds:t.oldDisappearingSettingTime!=null?Number(t.oldDisappearingSettingTime):0})}function U(e){return e.initiatorUserId!=null?N({ukOsaAdminText:{initiatorUserId:e.initiatorUserId}}):null}function V(e,t){return A(e,{sharingType:t.limitSharingType==="disabled"?o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.DISABLED:t.limitSharingType==="enabled"?o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.ENABLED:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.UNSET})}function H(e){return $(e,{action:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED})}function G(e){return $(e,{action:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNPINNED})}function z(e,t){return x(e,{themeEmoji:t.themeEmoji,themeName:t.themeNameWithSubtitle,themeType:t.themeType})}function j(e,t){return t.threadIcon!=null?D(e,{threadIcon:t.threadIcon}):null}function K(e,t){return t.participantId!=null&&t.nickname!=null?P(e,{nickname:t.nickname,targetUserId:""+t.participantId}):null}function Q(e,t){return t.threadQuickReactionEmoji!=null?T(e,{emojiName:t.threadQuickReactionEmoji}):null}function X(e){var t=Object.keys(e);if(t.length!==1)throw r("err")("Expected exactly one key");var n=t[0];return babelHelpers.extends({type:n},e[n])}function Y(t,n){var r=n.$$unknownFieldCount,o=n.skipBumpThread,a=n.skipSnippetUpdate,i=babelHelpers.objectWithoutPropertiesLoose(n,e),l=X(i);return(function(e){if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="quickReactionChanged"){var n=e.type,r=babelHelpers.objectWithoutPropertiesLoose(e,s);return T(t,r)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="iconChanged"){var o=e.type,a=babelHelpers.objectWithoutPropertiesLoose(e,u);return D(t,a)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="chatThemeChanged"){var i=e.type,l=babelHelpers.objectWithoutPropertiesLoose(e,c);return x(t,l)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="messagePinned"){var X=e.type,Y=babelHelpers.objectWithoutPropertiesLoose(e,d);return $(t,Y)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="nicknameChanged"){var J=e.type,Z=babelHelpers.objectWithoutPropertiesLoose(e,m);return P(t,Z)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="linkCta"){var ee=e.type,te=babelHelpers.objectWithoutPropertiesLoose(e,p);return N(te)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="disappearingSettingChanged"){var ne=e.type,re=babelHelpers.objectWithoutPropertiesLoose(e,_);return M(t,re)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupImageChanged"){var oe=e.type,ae=babelHelpers.objectWithoutPropertiesLoose(e,f);return w(t,ae)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="limitSharingChanged"){var ie=e.type,le=babelHelpers.objectWithoutPropertiesLoose(e,g);return A(t,le)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupParticipantChanged"){var se=e.type,ue=babelHelpers.objectWithoutPropertiesLoose(e,h);return F(t,ue)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupNameChanged"){var ce=e.type,de=babelHelpers.objectWithoutPropertiesLoose(e,y);return O(t,de)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupAdminChanged"){var me=e.type,pe=babelHelpers.objectWithoutPropertiesLoose(e,C);return B(t,pe)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupMembershipAddModeChanged"){var _e=e.type,fe=babelHelpers.objectWithoutPropertiesLoose(e,b);return W(t,fe)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatDisappearingSetting"){var ge=e.type,he=babelHelpers.objectWithoutPropertiesLoose(e,v);return q(t,he)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatLinkCta"){var ye=e.type,Ce=babelHelpers.objectWithoutPropertiesLoose(e,S);return U(Ce)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessagingLimitSharing"){var be=e.type,ve=babelHelpers.objectWithoutPropertiesLoose(e,R);return V(t,ve)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatPinMessageV2")return H(t);if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatUnpinMessageV2")return G(t);if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThemeColor"){var Se=e.type,Re=babelHelpers.objectWithoutPropertiesLoose(e,L);return z(t,Re)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadIcon"){var Le=e.type,Ee=babelHelpers.objectWithoutPropertiesLoose(e,E);return j(t,Ee)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadNickname"){var ke=e.type,Ie=babelHelpers.objectWithoutPropertiesLoose(e,k);return K(t,Ie)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadQuickReaction"){var Te=e.type,De=babelHelpers.objectWithoutPropertiesLoose(e,I);return Q(t,De)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatFriendRequestConfirmedEncrypted"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatInstantGameEncryptedDynamicCustomUpdate"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMagicWords"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerQrCodeScanned"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumAddition"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumContentRemoval"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumDeletion"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumRename"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbum"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatGenaiTaskAdd"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatUpdatePayments")return null;throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})(l)}function J(e){var t,n,a,i,l=(t=e.deserialize().adminMessage())==null?void 0:t.proto;if(l!=null){var s;try{s=Y(e.message.senderId,l)}catch(e){r("FBLogger")("mps").catching(r("getErrorSafe")(e)).warn("Failed to get admin message content")}var u={ack:o("MAWAckLevel").ACK.received,adminContent:(n=s)==null?void 0:n.adminMsgContent,adminType:(a=s)==null?void 0:a.adminType,adminVersion:(i=s)==null?void 0:i.version,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:u}}}l.getMessageContent=Y,l.adminMsgToBridgeMsg=J}),98);
__d("MpsToBridgeMessageId",["MAWJidUtils","MpsTypes","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWJidUtils").formatProtocolMsgIdFromExternalId(o("WAJids").unsafeCoerceToChatJid(e),o("WAStanzaUtils").toStanzaId(t))}function s(e){var t=e.lastIndexOf("."),n=e.substring(0,t),r=e.substring(t+1);return{messageId:o("MpsTypes").toMessageId(r),threadId:o("MpsTypes").toThreadId(n)}}l.mpsToBridgeMsgId=e,l.bridgeMsgIdToMps=s}),98);
__d("MpsBumpMessageToBridgeMsg",["MAWAckLevel","MAWMsgType","MpsToBridgeMessageId","MpsTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.deserialize().encryptedTransportMessage(),i=a==null||(t=a.armadillo())==null||(t=t.proto.payload)==null||(t=t.content)==null?void 0:t.bumpExistingMessage;if(i==null||((n=i.key)==null?void 0:n.id)==null||a==null)return null;var l=o("MpsTypes").toMessageId(i.key.id),s={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),replyContent:{isBumpMsg:!0,replyToMsgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(e.message.threadId,l),replyType:"MESSAGE"},replySourceId:(r=i.key)==null?void 0:r.id,sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return{kind:"bridgeMsg",value:s}}l.bumpMessageToBridgeMsg=e}),98);
__d("MpsEditToBridge",["LSMessageSendStatus","MAWDbEditMsgHistory","MAWMpsGating","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWDbEditMsgHistory").convertToEditMsgHistoryId64(o("MAWDbEditMsgHistory").unsafeCoerceToEditMsgHistoryId(Number(e.getExternalId()))),a=e.topLevelMetadata(),i={author:e.getAuthor(),editExternalId:o("WAStanzaUtils").toStanzaId(e.getExternalId()),editMsgHistoryId:n,editTs:e.getUnixTs(),msgContent:t,originalMsgExternalId:o("WAStanzaUtils").toStanzaId(a.getExternalId()),originalMsgId:a.getMsgId(),sendStatus:r("LSMessageSendStatus").SENDING_TO_SERVER,threadJid:e.getChatJid()};return{kind:"bridgeEditHistoryMsg",value:i}}function s(t){var n,r,a=(n=t.deserialize().encryptedTransportMessage())==null||(n=n.consumerMessage())==null||(n=n.payload)==null||(n=n.content)==null||(n=n.editMessage)==null?void 0:n.message;if(a!=null)return e(t,{commands:a==null?void 0:a.commands,content:((r=a==null?void 0:a.text)!=null?r:"")+(o("MAWMpsGating").isFullMpsEnabled()?" *":""),mentionedJids:a==null?void 0:a.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean)})}function u(t){var n,r,o,a,i=t.supplementals,l=t.topLevel;if(l.kind!=="bridgeMsg")return t;var s=i.map(function(e){return e.kind==="bridgeEditHistoryMsg"?e.value:null}).filter(Boolean).sort(function(e,t){return t.editTs-e.editTs});if(s.length===0)return t;i.push(e(t.message,{commands:l.value.commands&&[].concat(l.value.commands),content:(n=l.value.content)!=null?n:"",mentionedJids:l.value.mentionedJids&&[].concat(l.value.mentionedJids)}));var u=s[0].msgContent;return l.value=babelHelpers.extends({},l.value,{commands:(r=u.commands)!=null?r:l.value.commands,content:(o=u.content)!=null?o:l.value.content,editCount:s.length,mentionedJids:(a=u.mentionedJids)!=null?a:l.value.mentionedJids}),babelHelpers.extends({},t,{supplementals:i,topLevel:l})}l.editMessageToBridgeMsg=s,l.processEditedMessage=u}),98);
__d("MpsEphemeralMessageToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.supplementals,r=e.topLevel,a=(t=e.message.deserialize().encryptedTransportMessage())==null||(t=t.proto.metadata)==null||(t=t.chatEphemeralSetting)==null?void 0:t.ephemeralExpiration;if(a==null||a===0)return e;var i=o("WATimeUtils").castToUnixTime(e.message.getUnixTs()+a),l=o("WATimeUtils").cappedMillisecondsUntil(i);return l<=0?e:(r.kind==="bridgeMsg"&&(r.value=babelHelpers.extends({},r.value,{ephemeralDurationInSec:a})),e.supplementals.push({kind:"bridgeMsgsStartCountdown",value:{msgs:[{countdownTs:i,millisecondsUntilCountdownTs:l,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),babelHelpers.extends({},e,{supplementals:n,topLevel:r}))}l.processEphemeralMessage=e}),98);
__d("MpsForwardToBridge",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t,n,r,o,a,i=e.message,l=e.topLevel,s=i.deserialize().encryptedTransportMessage();return s==null||l.kind!=="bridgeMsg"||((t=s.proto.metadata)==null?void 0:t.isForwarded)!==!0||(l.value=babelHelpers.extends({},l.value,{forwardingScore:(n=(r=s.proto.metadata)==null?void 0:r.forwardingScore)!=null?n:0,isForwarded:(o=(a=s.proto.metadata)==null?void 0:a.isForwarded)!=null?o:!1,replyContent:{replyType:"FORWARD"}})),e}i.processForwarding=e}),66);
__d("MpsFutureproofToBridge",["MAWAckLevel","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.FUTUREPROOF};return{kind:"bridgeMsg",value:t}}l.futureproofBridgeMsg=e}),98);
__d("MpsLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("mps",t)};l.MpsLogger=e}),98);
__d("MpsReceiverFetchInfoToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a,i,l=e.ancillary,s=e.integral,u=(n=s==null?void 0:s.receiverFetchId)!=null?n:l==null?void 0:l.receiverFetchId,c=s==null||(r=s.transport)==null||(r=r.ancillary)==null?void 0:r.mimetype;if(!(u==null||c==null)){var d=(a=l==null?void 0:l.width)!=null?a:0,m=(i=l==null?void 0:l.height)!=null?i:0;return{accessibilitySummaryText:l==null?void 0:l.accessibilityLabel,mimetype:c,msgId:t.getMsgId(),previewHeight:m,previewWidth:d,receiverFetchId:u,sortOrderMs:o("WATimeUtils").castLongIntToMillisTime(t.message.timestampMs),threadJid:t.getChatJid(),transportKey:"WhatsApp",type:"sticker"}}}function s(t,n){var r,o=(r=t.stickerMessage())==null?void 0:r.payload;if(o!=null)return e(o,n)}function u(e){var t,n=(t=e.message.deserialize().encryptedTransportMessage())==null?void 0:t.consumerMessage();if(n==null)return e;var r=s(n,e.message);return r==null||e.supplementals.push({kind:"bridgeReceiverFetchInfo",value:r}),e}l.getReceiverFetchInfoForAttachmentTransport=e,l.getReceiverFetchInfoFromConsumerMessage=s,l.processReceiverFetchInfo=u}),98);
__d("getMediaTypeFromConsumerMessage",["MAWEncodeMediaTransportProtocol","WAMediaTransport.pb","decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=((t=e.ancillary)==null?void 0:t.gifPlayback)===!0||((n=e.ancillary)==null?void 0:n.gifAttribution)!=null,i=(r=e.integral)==null||(r=r.transport)==null||(r=r.ancillary)==null?void 0:r.mimetype;return a&&i===o("MAWEncodeMediaTransportProtocol").GIF_MIME_TYPE?"gif":"video"}function s(t){var n,r=t==null||(n=t.payload)==null?void 0:n.content;if((r==null?void 0:r.audioMessage)!=null)return"ptt";if((r==null?void 0:r.videoMessage)!=null){var a,i=r==null||(a=r.videoMessage)==null||(a=a.video)==null?void 0:a.payload,l=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,i);return e(l)}if((r==null?void 0:r.documentMessage)!=null)return"document";if((r==null?void 0:r.stickerMessage)!=null)return"sticker";if((r==null?void 0:r.imageMessage)!=null)return"image";if((r==null?void 0:r.extendedContentMessage)!=null)return"xma-image"}l.getMediaTypeForVideo=e,l.getMediaTypeFromConsumerMessage=s}),98);
__d("MpsMediaToBridge",["FBLogger","MAWAckLevel","MAWAudioUtils","MAWDbMedia","MAWImageUtils","MAWMsgType","MAWProtobufValidator","MpsReceiverFetchInfoToBridge","WAHashUtils","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("getMediaTypeFromConsumerMessage").getMediaTypeFromConsumerMessage(e.proto);if(t!=null)return s(t)}function s(e){return e==="ptt"?o("MAWMsgType").MSG_TYPE.PTT:e==="image"?o("MAWMsgType").MSG_TYPE.IMAGE:e==="video"?o("MAWMsgType").MSG_TYPE.VIDEO:e==="gif"?o("MAWMsgType").MSG_TYPE.GIF:e==="sticker"?o("MAWMsgType").MSG_TYPE.STICKER:e==="document"?o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:e==="xma-image"?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function u(t){var n,r,a,i,l=t.deserialize().encryptedTransportMessage(),s=l==null?void 0:l.consumerMessage();if(!(l==null||s==null)){var u=e(s);if(u!=null){var c=u;if(u===o("MAWMsgType").MSG_TYPE.STICKER){var d,m,p,_=(d=s.stickerMessage())==null?void 0:d.payload;if(_==null)return;var f=((m=_.integral)==null?void 0:m.receiverFetchId)!=null||((p=_.ancillary)==null?void 0:p.receiverFetchId)!=null;if(f){var g=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoForAttachmentTransport(_,t);if(g==null)return;c=o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH}}var h=(n=s.attachmentMessage())==null||(n=n.payload)==null||(n=n.ancillary)==null?void 0:n.gifPlayback,y={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),externalId:t.getExternalId(),forwardingScore:0,gifPlayback:h,groupId:(r=l.proto.metadata)==null?void 0:r.groupId,groupIndex:(a=l.proto.metadata)==null?void 0:a.groupIndex,groupSize:(i=l.proto.metadata)==null?void 0:i.groupSize,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,msgId:t.getMsgId(),sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:c};return{kind:"bridgeMsg",value:y}}}}function c(e,t,n){var r,a,i={height:n==null||(r=n.transport)==null||(r=r.ancillary)==null||(r=r.thumbnail)==null?void 0:r.thumbnailHeight,width:n==null||(a=n.transport)==null||(a=a.ancillary)==null||(a=a.thumbnail)==null?void 0:a.thumbnailWidth},l={height:t==null?void 0:t.height,width:t==null?void 0:t.width};if(e==="Sticker"){var s;i=(s=o("MAWImageUtils")).boundHeightWidth(i.height,i.width,s.STICKER_THUMBNAIL_MAX_SIZE),l=s.boundHeightWidth(l.height,l.width,s.STICKER_THUMBNAIL_MAX_SIZE)}return{previewHeight:i.height,previewHeightLarge:l.height,previewWidth:i.width,previewWidthLarge:l.width}}function d(e,t,n,r){var a,i,l,s,u,d,m,p,_,f=e.ancillary,g=e.integral;if(!(f==null||g==null)&&!(f.receiverFetchId!=null||(g==null?void 0:g.receiverFetchId)!=null)){var h=n.getMsgId(),y=g==null||(a=g.transport)==null||(a=a.integral)==null?void 0:a.mediaKeyTimestamp,C=g==null||(i=g.transport)==null||(i=i.integral)==null?void 0:i.fileSha256,b=C!=null?o("WAHashUtils").toPlaintextHash(C):void 0,v=f.waveform!=null?o("MAWAudioUtils").serializeWaveform(f.waveform):void 0;return babelHelpers.extends({accessibilitySummaryText:f.accessibilityLabel,defaultFilename:r,duration:((l=f.seconds)!=null?l:0)*1e3,filenames:r!=null?(s={},s[h]=r,s):void 0,filesize:o("WALongInt").numberOrThrowIfTooLarge((u=g==null||(d=g.transport)==null||(d=d.ancillary)==null?void 0:d.fileLength)!=null?u:0),gifPlayback:f.gifPlayback,hasMedia:!0,hasPreviewMedia:(g==null||(m=g.transport)==null||(m=m.ancillary)==null?void 0:m.thumbnail)!=null},f.hdType!=null?{hdTypes:(p={},p[h]=f.hdType,p)}:{},{mediaId:o("MAWDbMedia").convertNumberToMediaId(0),mediaType:t,messagesSortOrderMs:(_={},_[h]=n.topLevel.timestampMs,_),msgIds:[h],offlineAttachmentId:b,plaintextHash:b},c(t,f,g),{sortOrderMs:y!=null?o("WATimeUtils").castLongIntToMillisTime(y):void 0,threadJid:n.getChatJid(),transportKey:"WhatsApp",ts:n.getUnixTs(),waveformData:v})}}function m(t,n){var a,i,l=(a=t.documentMessage())==null?void 0:a.fileName,s=(i=t.attachmentMessage())==null?void 0:i.payload;if(s!=null){var u=e(t);if(u==null){r("FBLogger")("mps").mustfix("media type is null for attachment message");return}if(!o("MAWProtobufValidator").isAttachmentValid(s)){r("FBLogger")("mps").debug("attachment is not valid, mediatype: %s",u);return}return d(s,u,n,l)}}function p(e){var t,n=(t=e.message.deserialize().encryptedTransportMessage())==null?void 0:t.consumerMessage();if(n==null)return e;var r=m(n,e.message);return r==null||e.supplementals.push({kind:"bridgeMedia",value:r}),e}l.getMediaTypeForMessage=e,l.getMediaTypeForServerMediaType=s,l.mediaToBridge=u,l.getBridgeFromAttachmentTransport=d,l.getBridgeMediaFromConsumerMessage=m,l.processAttachment=p}),98);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(t,n,r,o,a,i,l){function e(e){if(e==null||e.text==null||e.mentions==null||e.mentions.length===0)return e;var t=e.text,n=[],r=[],a=0;for(var i of e.mentions){var l=i.offset,s=i.length,u=i.mentionedJid,c=i.mentionType;c!==o("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||l==null||s==null||u==null||(r.push(u+"@msgr"),n.push(t.substring(a,l)),n.push("@"+u+"@msgr"),a=l+s)}return r.length===0?e:(n.push(t.substring(a)),babelHelpers.extends({},e,{text:n.join(""),mentionedJid:r,mentions:[]}))}l.default=e}),98);
__d("mwv2MessageIsEmojiOnly",["EmojiRenderer","EmoticonRenderer","ReStoreVaulting"],(function(t,n,r,o,a,i,l){"use strict";var e=/^[ \r\n\s]*$/;function s(t,n){if(t==null)return!1;var r=o("ReStoreVaulting").maybeUnvault(t),a=o("EmojiRenderer").parse(r).map(function(e){return{length:e.length,offset:e.offset}}),i=n?o("EmoticonRenderer").parse(r).map(function(e){return{length:e.chars.length,offset:e.offset}}):[],l=a.concat(i);if(l.length===0)return!1;var s=l.sort(function(e,t){return e.offset-t.offset|0}),u={contents:0},c={contents:0},d=s.some(function(t){u.contents===t.offset?(u.contents=u.contents+t.length|0,c.contents=u.contents):c.contents=t.offset;var n=r.substring(u.contents,c.contents);return u.contents=t.offset+t.length|0,e.test(n)===!1}),m=u.contents!==r.length&&!e.test(r.substring(c.contents));return d?!1:!m}l.default=s}),98);
__d("MpsMessageTextToBridge",["MAWAckLevel","MAWMpsGating","MAWVault","WAJids","WAMsgType","maybeConvertMessageTextMentionsV2ToV1","mwv2MessageIsEmojiOnly"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l,s=e.deserialize().encryptedTransportMessage(),u=s==null?void 0:s.consumerMessage(),c=(u==null||(t=u.payload)==null||(t=t.content)==null?void 0:t.messageText)&&r("maybeConvertMessageTextMentionsV2ToV1")(u==null||(n=u.payload)==null||(n=n.content)==null?void 0:n.messageText);if(!(u==null||c==null||s==null)){var d=(a=c.text)!=null?a:"";o("MAWMpsGating").isFullMpsEnabled()&&!r("mwv2MessageIsEmojiOnly")(d,!0)&&(d+="*"),d=o("MAWVault").vault(d);var m={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),commands:c.commands,content:d,externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,mentionedJids:c.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,specialTextSize:(i=(l=u.metadata)==null?void 0:l.specialTextSize)!=null?i:void 0,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.TEXT};return{kind:"bridgeMsg",value:m}}}l.messageTextToBridgeMsg=e}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WAJids").createJidUtils({platform:"msgr"}),s=(function(){function t(e,t){this.message=e,this.topLevel=t}t.fromTopLevel=function(n){return new t(n,n)},t.fromSupplemental=function(n,a){var e,i=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(n.payload),l={messageId:n.messageId,payload:n.payload,senderId:r("nullthrows")((e=i.proto.metadata)==null?void 0:e.senderId),threadId:a.threadId,timestampMs:n.timestampMs};return new t(l,a)};var n=t.prototype;return n.getChatJid=function(){return o("WAJids").unsafeCoerceToChatJid(this.message.threadId)},n.getExternalId=function(){return this.message.messageId},n.getMsgId=function(){return o("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)},n.getSenderJid=function(){return e.toUserJid(this.message.senderId)},n.topLevelMetadata=function(){return t.fromTopLevel(this.topLevel)},n.isAuthorMe=function(){return o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())===this.message.senderId},n.getAuthor=function(){return this.isAuthorMe()?o("WAJids").AUTHOR_ME:this.getSenderJid()},n.getUnixTs=function(){return o("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)},n.deserialize=function(){return o("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)},t})();l.MpsMessageToBridgeWrapper=s}),98);
__d("WAMedia",[],(function(t,n,r,o,a,i){"use strict";var e="Image",l="Video",s="Ptt",u="Gif",c="Sticker",d="DocumentFile",m={IMAGE:e,VIDEO:l,PTT:s,GIF:u,STICKER:c,DOCUMENT_FILE:d};i.IMAGE=e,i.VIDEO=l,i.PTT=s,i.GIF=u,i.STICKER=c,i.DOCUMENT_FILE=d,i.MEDIA_TYPE=m}),66);
__d("MpsXmaToBridge",["MAWAckLevel","MAWBridgeXMA","MAWDbMedia","MAWDbXMA","MAWParseCollapsibleIdFromXMADataClass","MAWXMAUtils","MWXMAV2IsCollapsibleXMA","MWXMAV2XmaDataClass","MpsMediaToBridge","MpsReceiverFetchInfoToBridge","WAArmadilloXMA.pb","WAHashUtils","WAJids","WALongInt","WAMedia","WATimeUtils","maybeConvertMessageTextMentionsV2ToV1","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["actionContentBlob"];function s(e){var t,n,o;if(((t=(n=e.payload.messageText)==null?void 0:n.length)!=null?t:0)>0)return r("maybeConvertMessageTextMentionsV2ToV1")({commands:e.payload.commands,mentionedJid:e.payload.mentionedJid,mentions:e.payload.mentions,text:e.payload.messageText});var a=(o=e.associatedMessage())==null||(o=o.consumerMessage())==null||(o=o.payload)==null||(o=o.content)==null?void 0:o.messageText;if(a!=null&&a.text!=null)return r("maybeConvertMessageTextMentionsV2ToV1")(a)}function u(e){if(e!=null){var t=o("WATimeUtils").castLongIntToUnixTime(e);if(t!=null){var n=o("WATimeUtils").cappedMillisecondsUntil(t);if(n!=null){var r=n<=0;return{countdownTs:t,isExpiredXmaMsg:r,millisecondsUntilCountdownTs:n}}}}}function c(e){var t,n=e.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage();if(!(n==null||r==null||o("MAWXMAUtils").isXMAStoryReply(r.payload.targetType))){var a,i=o("MWXMAV2XmaDataClass").parseXmaDataClass(r.payload.xmaDataclass);o("MWXMAV2IsCollapsibleXMA").isCollapsibleXMA(i)&&(a=o("MAWParseCollapsibleIdFromXMADataClass").parseCollapsibleIdFromXMADataClass(i));var l=s(r),c=u(r==null?void 0:r.payload.targetExpiringAtSec),d=babelHelpers.extends({ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid()},a!=null?{collapsibleId:a}:{},{commands:l==null?void 0:l.commands,content:l==null?void 0:l.text,externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isExpiredXmaMsg:c==null?void 0:c.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(r.payload.targetType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(r.payload.targetType),isForwarded:!1,isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(r.payload.targetType),isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(r.payload.targetType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(r.payload.targetType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(r.payload.targetType),isPostPrivateReply:o("MAWXMAUtils").isXMAPostPrivateReply(r.payload.targetType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(r.payload.targetType),isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(r.payload.targetType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(r.payload.targetType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(r.payload.targetType),isStoryShare:o("MAWXMAUtils").isXMAStoryShare(r.payload.targetType),mentionedJids:l==null?void 0:l.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:"XMA",xmaMessageType:r.payload.targetType});return{kind:"bridgeMsg",value:d}}}function d(t){var n,a,i,l,s,u,c,d,m,p,_=t.message,f=t.topLevel;if(f.value.type_!=="XMA")return t;var g=_.deserialize().encryptedTransportMessage(),h=g==null||(n=g.armadillo())==null?void 0:n.extendedContentMessage();if(g==null||h==null)return t;var y=h.payload.ctas.map(function(t){var n=t.actionContentBlob,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return r}),C=r("nullthrows")(h.payload.targetType),b=C===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT,v=b?[null,h.previews().at(0)]:[h.previews().at(0),h.favicon()],S=v[0],R=v[1],L=S==null||(a=S.integral)==null||(a=a.transport)==null||(a=a.integral)==null?void 0:a.fileSha256,E=L!=null?o("WAHashUtils").toPlaintextHash(L):void 0,k=R==null||(i=R.integral)==null||(i=i.transport)==null||(i=i.integral)==null?void 0:i.fileSha256,I=k!=null?o("WAHashUtils").toPlaintextHash(k):void 0,T=(l=h.headerImage())==null||(l=l.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.fileSha256,D=T!=null?o("WAHashUtils").toPlaintextHash(T):void 0,x=o("WAMedia").MEDIA_TYPE.IMAGE,$=o("MAWBridgeXMA").mediaTypeToMimeType(x),P={author:_.getAuthor(),contentRef:h.payload.contentRef,ctas:y.slice(1),defaultCTA:y.at(0),defaultPreviewMediaId:o("MAWDbMedia").convertNumberToMediaId(0),defaultPreviewMediaPlaintextHash:E,duration:null,faviconMediaId:o("MAWDbMedia").convertNumberToMediaId(0),faviconPlaintextHash:I,filesize:o("WALongInt").numberOrThrowIfTooLarge((s=S==null||(u=S.integral)==null||(u=u.transport)==null||(u=u.ancillary)==null?void 0:u.fileLength)!=null?s:0),hasMedia:E!=null,hasXmaFaviconMedia:k!=null,hasXmaHeaderMedia:T!=null,headerMediaId:o("MAWDbMedia").convertNumberToMediaId(0),headerMediaPlaintextHash:D,headerTitle:h.payload.headerTitle,maxSubtitleNumOfLines:h.payload.maxSubtitleNumOfLines,maxTitleNumOfLines:h.payload.maxTitleNumOfLines,mediaType:x,msgId:t.message.getMsgId(),offlineAttachmentId:E,overlayIconGlyph:h.payload.overlayIconGlyph,overlayTitle:h.payload.overlayTitle,playableUrlMimeType:$,previewHeight:S==null||(c=S.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.thumbnailHeight,previewHeightLarge:S==null||(d=S.ancillary)==null?void 0:d.height,previewUrlMimeType:$,previewWidth:S==null||(m=S.integral)==null||(m=m.transport)==null||(m=m.ancillary)==null||(m=m.thumbnail)==null?void 0:m.thumbnailWidth,previewWidthLarge:S==null||(p=S.ancillary)==null?void 0:p.width,subtitleText:h.payload.subtitleText,targetId:h.payload.targetId,targetType:C,targetUsername:h.payload.targetUsername,threadJid:t.message.getChatJid(),titleText:h.payload.titleText,ts:t.message.getUnixTs(),xmaDataclass:h.payload.xmaDataclass,xmaId:o("MAWDbXMA").convertNumberToXMAId(0),xmaLayoutType:h.payload.xmaLayoutType};return t.supplementals.push({kind:"bridgeXMA",value:P}),t}function m(e){var t,n,r=e.message.deserialize().encryptedTransportMessage(),a=r==null||(t=r.armadillo())==null?void 0:t.extendedContentMessage(),i=a==null||(n=a.associatedMessage())==null?void 0:n.consumerMessage();if(i==null)return e;var l=o("MpsMediaToBridge").getBridgeMediaFromConsumerMessage(i,e.message);l!=null&&e.supplementals.push({kind:"bridgeMedia",value:l});var s=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoFromConsumerMessage(i,e.message);return s!=null&&e.supplementals.push({kind:"bridgeReceiverFetchInfo",value:s}),e}function p(e){var t,n=e.message.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage(),o=u(r==null?void 0:r.payload.targetExpiringAtSec);if(o==null)return e;var a=o.countdownTs,i=o.millisecondsUntilCountdownTs;return e.supplementals.push({kind:"bridgeXMAStartCountdown",value:{msgs:[{countdownTs:a,millisecondsUntilCountdownTs:i,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),e}l.computeXmaContent=s,l.getExpiredXMAParams=u,l.xmaToBridge=c,l.processXmaAttachment=d,l.processXmaAssociatedMessageAttachment=m,l.processXmaExpiration=p}),98);
__d("MpsNoteReplyToBridge",["MAWAckLevel","MAWVault","MpsMediaToBridge","MpsReceiverFetchInfoToBridge","MpsXmaToBridge","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e==null?void 0:e.videoContent(),n=e==null?void 0:e.stickerContent(),a=t!=null?t:n;if(a!=null){var i=t!=null?o("getMediaTypeFromConsumerMessage").getMediaTypeForVideo(t):void 0,l=n!=null?"sticker":void 0,s=r("nullthrows")(i!=null?i:l);return o("MpsMediaToBridge").getMediaTypeForServerMediaType(s)}}function s(t){var n,r,a=t.deserialize().encryptedTransportMessage(),i=a==null||(n=a.armadillo())==null?void 0:n.noteReply();if(!(a==null||i==null)){var l=i.payload,s=l.noteText,u=l.noteTimestampMs,c=l.textContent,d=i.payload.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(i.payload.noteTimestampMs)):void 0,m=o("MpsXmaToBridge").getExpiredXMAParams(d),p=t.message.senderId,_=e(i),f={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),content:(c==null?void 0:c.text)==null?void 0:o("MAWVault").vault(c.text),editCount:0,externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isExpiredMsg:!1,isForwarded:!1,isNoteReply:!0,msgId:t.getMsgId(),replyContent:{noteContent:m!=null&&m.isExpiredXmaMsg?void 0:o("MAWVault").vault((r=s==null?void 0:s.text)!=null?r:""),replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(o("WALongInt").numberOrThrowIfTooLarge(u)):void 0,replyToMsgId:t.getMsgId(),replyToUserId:p,replyType:"LIGHTWEIGHT_STATUS"},sender:p,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:_!=null?_:"Text"};return{kind:"bridgeMsg",value:f}}}function u(e){var t,n=e.message.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.noteReplyMessage;if(n==null||r==null)return e;var a=r.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(r.noteTimestampMs)):void 0,i=o("MpsXmaToBridge").getExpiredXMAParams(a);if(i==null)return e;var l=i.countdownTs,s=i.millisecondsUntilCountdownTs;return e.supplementals.push({kind:"bridgeNoteReplyStartCountdown",value:{msgs:[{countdownTs:l,millisecondsUntilCountdownTs:s,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),e}function c(t){var n,r=t.message,a=r.deserialize().encryptedTransportMessage(),i=a==null||(n=a.armadillo())==null?void 0:n.noteReply(),l=i==null?void 0:i.videoContent(),s=i==null?void 0:i.stickerContent(),u=l!=null?l:s,c=e(i);if(u==null||c==null)return t;var d=o("MpsMediaToBridge").getBridgeFromAttachmentTransport(u,c,r);if(d!=null&&t.supplementals.push({kind:"bridgeMedia",value:d}),s!=null){var m=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoForAttachmentTransport(s,r);m!=null&&t.supplementals.push({kind:"bridgeReceiverFetchInfo",value:m})}return t}l.noteReplyToBridge=s,l.processNoteReply=u,l.processNoteReplyAttachment=c}),98);
__d("MpsRavenToBridge",["EphemeralMediaViewMode","FBLogger","MAWAckLevel","MAWDbMedia","MAWProtobufDeserializers","RavenMessagingState","WAArmadilloApplication.pb","WAHashUtils","WAMsgType","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content,o=(n=r==null?void 0:r.ravenMessage)!=null?n:r==null?void 0:r.ravenMessageMsgr;return!!o}function s(t){if(e(t)){var n={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),content:"",externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,msgId:t.getMsgId(),sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.RAVEN};return{kind:"bridgeMsg",value:n}}}function u(e){var t,n,a,i=e.message,l=(t=i.deserialize().encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content,s=(n=l==null?void 0:l.ravenMessage)!=null?n:l==null?void 0:l.ravenMessageMsgr;if(s==null)return e;var u,c;e.supplementalMessages.forEach(function(e){var t,n,r=(t=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(e.payload).encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content;u=(n=r==null?void 0:r.ravenMessage)!=null?n:r==null?void 0:r.ravenMessageMsgr,c=r==null?void 0:r.ravenActionNotifMessage});var d=(typeof u=="object"&&u!==null||typeof u=="function")&&(typeof u.videoMessage=="object"&&u.videoMessage!==null||typeof u.videoMessage=="function")?o("WAMsgType").MSG_TYPE.VIDEO:(typeof u=="object"&&u!==null||typeof u=="function")&&(typeof u.imageMessage=="object"&&u.imageMessage!==null||typeof u.imageMessage=="function")?o("WAMsgType").MSG_TYPE.IMAGE:null;if(d==null&&c==null)return r("FBLogger")("mps").mustfix("Unsupported Raven type"),e;var m=e.message.getMsgId(),p=s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.VIEW_ONCE?r("EphemeralMediaViewMode").READ_ONCE:s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.ALLOW_REPLAY?r("EphemeralMediaViewMode").REPLAYABLE:s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.KEEP_IN_CHAT?r("EphemeralMediaViewMode").PERMANENT:s.ephemeralType===void 0?void 0:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s.ephemeralType)})(),_={duration:null,ephemeralMediaState:c==null?r("RavenMessagingState").UNSEEN:r("RavenMessagingState").SEEN,ephemeralMediaViewMode:p,filesize:100,hasMedia:!1,hasPreviewMedia:!1,mediaId:o("MAWDbMedia").convertNumberToMediaId(0),mediaType:d||o("WAMsgType").MSG_TYPE.IMAGE,messagesSortOrderMs:(a={},a[m]=e.message.topLevel.timestampMs,a),msgIds:[e.message.getMsgId()],plaintextHash:o("WAHashUtils").stringToPlaintextHash("aaa"),previewHeight:1,previewHeightLarge:1,previewWidth:1,previewWidthLarge:1,sortOrderMs:o("WATimeUtils").castLongIntToMillisTime(e.message.topLevel.timestampMs),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()};return e.supplementals.push({kind:"bridgeMedia",value:_}),e}l.isRavenMsg=e,l.ravenToBridge=s,l.processRavenAttachment=u}),98);
__d("MpsReactionToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null||(t=t.consumerMessage())==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.reactionMessage;if(r!=null){var a=r.senderTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WATimeUtils").castLongIntToMillisTime(r.senderTimestampMs)):e.getUnixTs(),i=(n=r.text)!=null?n:"",l=i===""?{reaction:{actorId:e.message.senderId,chatJid:e.getChatJid(),messageId:e.topLevelMetadata().getMsgId()},type:"delete"}:{reaction:{actorId:e.message.senderId,chatJid:e.getChatJid(),messageId:e.topLevelMetadata().getMsgId(),reaction:i,ts:a},type:"upsert"};return{kind:"bridgeReactionAction",value:l}}}l.reactionMessageToBridgeMsg=e}),98);
__d("MpsReplyToBridge",["MpsToBridgeMessageId","MpsTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.message,r=e.topLevel,a=n.deserialize().encryptedTransportMessage();if(r.kind!=="bridgeMsg"||a==null)return e;var i=(t=a.proto.metadata)==null?void 0:t.quotedMessage;if(i==null||i.stanzaId==null||r.value.replyContent!=null)return e;var l=o("MpsTypes").toMessageId(i.stanzaId);return r.value=babelHelpers.extends({},r.value,{replyContent:{isBumpMsg:!1,replyToMsgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(n.message.threadId,l),replyType:"MESSAGE"}}),babelHelpers.extends({},e,{topLevel:r})}l.processReplyMessage=e}),98);
__d("MpsRevokeMessageToBridgeMsg",["MAWAckLevel","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.deserialize().encryptedTransportMessage(),r=n==null||(t=n.consumerMessage())==null||(t=t.payload)==null||(t=t.applicationData)==null?void 0:t.revoke;if(!(n==null||r==null))return{kind:"bridgeMsg",value:{ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.REVOKED}}}l.revokeMessageToBridgeMsg=e}),98);
__d("MpsScreenshotActionToBridgeMsg",["MAWAckLevel","MAWEphemeralUtils","WAArmadilloApplication.pb","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=e.deserialize().encryptedTransportMessage(),a=r==null||(t=r.armadillo())==null||(t=t.proto.payload)==null||(t=t.content)==null?void 0:t.screenshotAction;if(!(a==null||r==null)){var i=o("MAWEphemeralUtils").getEphemeralScreenshotActionData((n=a.screenshotType)!=null?n:o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE,e.getSenderJid(),e.isAuthorMe()),l={ack:o("MAWAckLevel").ACK.received,adminContent:i.ephemeralScreenshotActionContent,adminType:i.ephemeralScreenshotActionType,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:l}}}l.screenshotActionToBridgeMsg=e}),98);
__d("WAParseReadOnlyMetadataDataclassUtils",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if((e==null?void 0:e.readonlyMetadataDataclass)!=null)try{var t=JSON.parse(e==null?void 0:e.readonlyMetadataDataclass);return t}catch(e){throw r("err")("Failed to parse readonly metadata dataclass JSON")}return null}function s(t){var n,r=e(t);return(r==null||(n=r.power_up)==null?void 0:n.power_up_style)!=null}function u(t){var n,r=e(t);return(r==null||(n=r.note_metadata)==null?void 0:n.message_type)==="MENTION"}l.isPowerUp=s,l.isNoteMention=u}),98);
__d("MpsUnsupportedMessagesToBridge",["MAWAckLevel","MAWParseXMAFBConfig","MAWParseXMAUnsupportedMessageType","WACommon.pb","WAMsgType","WAParseReadOnlyMetadataDataclassUtils","gkx","maybeConvertMessageTextMentionsV2ToV1"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l,s,u=e.deserialize().encryptedTransportMessage();if(u!=null){var c=u==null?void 0:u.consumerMessage(),d={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.FUTUREPROOF},m=(c==null||(t=c.payload)==null||(t=t.content)==null?void 0:t.messageText)&&r("maybeConvertMessageTextMentionsV2ToV1")(c==null||(n=c.payload)==null||(n=n.content)==null?void 0:n.messageText);if(m!=null){var p,_=((p=m.commands)==null?void 0:p.some(function(e){return e.commandType===o("WACommon.pb").COMMAND_COMMAND_TYPE.AI}))===!0;if(_&&!r("gkx")("12661"))return{kind:"bridgeMsg",value:babelHelpers.extends({},d,{unsupportedType:"metaAiMessage"})}}var f=u==null||(a=u.armadillo())==null?void 0:a.paymentsTransactionMessage(),g=f!=null?f:u==null||(i=u.armadillo())==null?void 0:i.extendedContentMessage();if(g!=null){var h=g.payload,y=h.targetType,C=h.xmaDataclass;if(y==null||!o("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:y,xmaDataclass:C})){var b=f!=null;return{kind:"bridgeMsg",value:babelHelpers.extends({},d,{unsupportedType:o("MAWParseXMAUnsupportedMessageType").getXMAUnsupportedMessageType(y,C,b)})}}}var v=c==null||(l=c.documentMessage())==null?void 0:l.payload;if(v!=null&&r("gkx")("23924"))return{kind:"bridgeMsg",value:babelHelpers.extends({},d)};if(o("WAParseReadOnlyMetadataDataclassUtils").isNoteMention(u.proto.metadata))return{kind:"bridgeMsg",value:babelHelpers.extends({},d,{unsupportedType:"noteMention"})};var S=c==null||(s=c.payload)==null||(s=s.content)==null?void 0:s.pollCreationMessage;if(S!=null)return{kind:"bridgeMsg",value:babelHelpers.extends({},d,{unsupportedType:"pollCreationMessage"})}}}l.unsupportedMessagesBridgeMsg=e}),98);
__d("MpsWaAdminMsgToBridge",["MAWAckLevel","MAWGetUserDeviceChangeAdminType","MAWJids","MAWLocalizationType","MAWUserJidWrapper","WAArmadilloTransportEvent.pb","WAJids","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.deserialize(),i=(t=a.encryptedTransportEvent())==null?void 0:t.proto.event;if(i){var l=i.deviceChange,s=i.icdcAlert;if(((n=a.proto.metadata)==null?void 0:n.senderId)!=null){var u=o("WAJids").unsafeCoerceToUserJid((r=a.proto.metadata)==null?void 0:r.senderId),c=o("MAWJids").toUserJid(u),d=c===o("MAWUserJidWrapper").getMyUserJid()?[]:[o("WAJids").userIdFromJid(c)];if(s)return{kind:"bridgeMsg",value:{ack:o("MAWAckLevel").ACK.received,adminContent:d,adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ICDC_ALERT}};if(l){var m,p,_=(typeof l=="object"&&l!==null||typeof l=="function")&&"type"in l&&l.type===o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.ADDED?"add":(typeof l=="object"&&l!==null||typeof l=="function")&&"type"in l&&l.type===o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REMOVED?"remove":typeof l=="object"&&l!==null||typeof l=="function"?"update":(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+l)})();if(((m=a.proto.metadata)==null?void 0:m.senderId)==null)return;var f=o("WAJids").unsafeCoerceToUserJid((p=a.proto.metadata)==null?void 0:p.senderId),g=o("MAWJids").toUserJid(f),h=o("MAWGetUserDeviceChangeAdminType").getUserDeviceAdminType(_,g===o("MAWUserJidWrapper").getMyUserJid()),y={ack:o("MAWAckLevel").ACK.received,adminContent:d,adminType:h,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:y}}}}}l.waAdminMsgToBridgeMsg=e}),98);
__d("MpsWaPlaceholderToBridge",["MAWAckLevel","WAArmadilloTransportEvent.pb","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.deserialize().encryptedTransportEvent(),r=n==null||(t=n.proto.placeholder)==null?void 0:t.type;if(!(n==null||r==null)){var a={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:r===o("WAArmadilloTransportEvent.pb").TransportEvent$Placeholder$Type.UNAVAILABLE_MESSAGE?o("WAMsgType").MSG_TYPE.UNAVAILABLE:o("WAMsgType").MSG_TYPE.CIPHERTEXT};return{kind:"bridgeMsg",value:a}}}l.waPlaceholderToBridgeMsg=e}),98);
__d("MpsXmaMentionToBridge",["MAWUserJidWrapper","MAWXMAUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.message,r=e.topLevel,a=n.deserialize().encryptedTransportMessage(),i=a==null||(t=a.armadillo())==null?void 0:t.extendedContentMessage(),l=i==null?void 0:i.payload.targetType,s=o("MAWXMAUtils").isXMAStoryMention(l)||o("MAWXMAUtils").isFBXMAPostMention(l);if(a==null||i==null||!s||r.kind!=="bridgeMsg")return e;var u=o("MAWXMAUtils").isFBXMAPostMention(l),c=o("WAJids").interpretAsUserJid(n.getChatJid()),d=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),m=c==null?d:o("WAJids").userIdFromJid(c),p={mentionedUserId:m!=null?m:d,timestampMs:o("WATimeUtils").castToMillisTime(n.message.timestampMs)},_=u?babelHelpers.extends({},p,{replyType:"FB_POST_MENTION"}):babelHelpers.extends({},p,{replyType:"FB_STORY_MENTION"});return r.value=babelHelpers.extends({},r.value,{replyContent:_}),e}l.processXmaMention=e}),98);
__d("MpsXmaStoryReplyToBridge",["MAWAckLevel","MAWDbMedia","MAWMsgType","MAWUserJidWrapper","MAWXMAUtils","MpsMediaToBridge","MpsXmaToBridge","WAHashUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=(n=o("WAJids").interpretAsUserJid(t.getChatJid()))!=null?n:t.getSenderJid(),a=o("MAWUserJidWrapper").getMyUserJid();return o("MAWXMAUtils").isXMAStoryProducerReply(e.targetType)?t.isAuthorMe()?a:r:t.isAuthorMe()?r:a}function s(t){var n,r,a,i,l=t.deserialize().encryptedTransportMessage(),s=l==null||(n=l.armadillo())==null?void 0:n.extendedContentMessage();if(!(l==null||s==null||!o("MAWXMAUtils").isXMAStoryReply(s.payload.targetType))){var u=o("MpsXmaToBridge").computeXmaContent(s),c=s.previews().at(0),d=c==null||(r=c.integral)==null||(r=r.transport)==null||(r=r.integral)==null?void 0:r.fileSha256,m=d!=null?o("WAHashUtils").toPlaintextHash(d):void 0,p=(a=s.payload.ctas.at(0))==null?void 0:a.nativeUrl,_=e(s.payload,t),f=o("MAWXMAUtils").isXMAStoryProducerReply(s.payload.targetType),g=(i=s.associatedMessage())==null?void 0:i.consumerMessage(),h=g!=null?o("MpsMediaToBridge").getMediaTypeForMessage(g):null,y=o("MpsXmaToBridge").getExpiredXMAParams(s==null?void 0:s.payload.targetExpiringAtSec),C=f?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:o("MAWDbMedia").convertNumberToMediaId(1),storyMediaPlaintextHash:y!=null&&y.isExpiredXmaMsg?void 0:m,storyMsgType:o("MAWMsgType").MSG_TYPE.IMAGE,storyOwnerId:o("WAJids").extractUserId(_),storyUrl:p!=null?p:"",timestampMs:o("WATimeUtils").castToMillisTime(t.message.timestampMs)}:{replyType:"STORY",storyMediaPlaintextHash:y!=null&&y.isExpiredXmaMsg?void 0:m,storyOwnerId:o("WAJids").extractUserId(_),storyUrl:p!=null?p:"",timestampMs:o("WATimeUtils").castToMillisTime(t.message.timestampMs)},b={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),commands:u==null?void 0:u.commands,content:u==null?void 0:u.text,externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,isStoryReply:!0,mentionedJids:u==null?void 0:u.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:t.getMsgId(),replyContent:C,sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:h!=null?h:"Text"};return{kind:"bridgeMsg",value:b}}}l.storyReplyToBridge=s}),98);
__d("WAGetPlatformFromStanzaId",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{if(t.startsWith("3EB0"))return"web";var n=31,r=BigInt(n<<17),a=BigInt(0),i=BigInt(1<<17),l=BigInt(t)&r;return l===a?"web":l===i?"mobile":"unknown"}catch(n){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""])),t,n),"error"}}l.getPlatformFromStanzaId=s}),98);
__d("MpsMessageToBridge",["FBLogger","MAWMsgType","MpsAdminMsgToBridge","MpsBumpMessageToBridgeMsg","MpsEditToBridge","MpsEphemeralMessageToBridge","MpsForwardToBridge","MpsFutureproofToBridge","MpsMediaToBridge","MpsMessageTextToBridge","MpsMessageToBridgeWrapper","MpsNoteReplyToBridge","MpsRavenToBridge","MpsReactionToBridge","MpsReceiverFetchInfoToBridge","MpsReplyToBridge","MpsRevokeMessageToBridgeMsg","MpsScreenshotActionToBridgeMsg","MpsUnsupportedMessagesToBridge","MpsWaAdminMsgToBridge","MpsWaPlaceholderToBridge","MpsXmaMentionToBridge","MpsXmaStoryReplyToBridge","MpsXmaToBridge","WAGetPlatformFromStanzaId","WAJids","WAStanzaUtils","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[o("MpsUnsupportedMessagesToBridge").unsupportedMessagesBridgeMsg,o("MpsMessageTextToBridge").messageTextToBridgeMsg,o("MpsMediaToBridge").mediaToBridge,o("MpsAdminMsgToBridge").adminMsgToBridgeMsg,o("MpsScreenshotActionToBridgeMsg").screenshotActionToBridgeMsg,o("MpsRevokeMessageToBridgeMsg").revokeMessageToBridgeMsg,o("MpsBumpMessageToBridgeMsg").bumpMessageToBridgeMsg,o("MpsWaAdminMsgToBridge").waAdminMsgToBridgeMsg,(e=o("MpsXmaToBridge")).xmaToBridge,o("MpsXmaStoryReplyToBridge").storyReplyToBridge,o("MpsRavenToBridge").ravenToBridge,o("MpsNoteReplyToBridge").noteReplyToBridge,o("MpsWaPlaceholderToBridge").waPlaceholderToBridgeMsg,o("MpsFutureproofToBridge").futureproofBridgeMsg],u=[o("MpsEditToBridge").editMessageToBridgeMsg,o("MpsReactionToBridge").reactionMessageToBridgeMsg],c=[o("MpsEditToBridge").processEditedMessage,o("MpsReplyToBridge").processReplyMessage,o("MpsMediaToBridge").processAttachment,o("MpsEphemeralMessageToBridge").processEphemeralMessage,o("MpsReceiverFetchInfoToBridge").processReceiverFetchInfo,e.processXmaAttachment,e.processXmaAssociatedMessageAttachment,o("MpsXmaMentionToBridge").processXmaMention,o("MpsRavenToBridge").processRavenAttachment,o("MpsForwardToBridge").processForwarding,o("MpsNoteReplyToBridge").processNoteReply,o("MpsNoteReplyToBridge").processNoteReplyAttachment,e.processXmaExpiration];function d(e,t){for(var n of e)try{var a=n(t);if(a!=null)return a}catch(e){var i=o("WAStanzaUtils").toStanzaId(t.getExternalId()),l=o("WAJids").interpretAsGroupJid(t.getChatJid())!=null;throw r("FBLogger")("mps").catching(r("getErrorSafe")(e)).mustfixThrow("mpsMessagetoBridge failed to create a bridge object for message from platform: %s, is_group: %s",o("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(i),l)}}function m(e){var t=o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromTopLevel(e.toplevelProtobuf),n=d(s,t);if(n!=null&&!(n.kind==="bridgeMsg"&&n.value.type_===o("MAWMsgType").MSG_TYPE.ADMIN&&n.value.adminType==null)){if(n.kind==="bridgeMsg"&&n.value.type_===o("MAWMsgType").MSG_TYPE.FUTUREPROOF)return{supplementals:[],topLevel:n};var r=e.supplementalProtobufs.values().toArray().map(function(t){return d(u,o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromSupplemental(t,e.toplevelProtobuf))}).filter(Boolean),a=c.reduce(function(e,t){return t(e)},{message:t,supplementalMessages:e.supplementalProtobufs,supplementals:r,topLevel:n});return{supplementals:a.supplementals,topLevel:a.topLevel}}}l.mpsFullMessagetoBridge=m}),98);
__d("MpsTags",["FBLogger","MAWProtobufDeserializers","MSGDataclassTypes.flow","getErrorSafe","getMediaTypeFromConsumerMessage"],(function(t,n,r,o,a,i,l){"use strict";function e(e){try{var t,n=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(e),a=(t=n.encryptedTransportMessage())==null||(t=t.consumerMessage())==null?void 0:t.proto,i=o("getMediaTypeFromConsumerMessage").getMediaTypeFromConsumerMessage(a);return s(i)}catch(e){var l=r("getErrorSafe")(e);return r("FBLogger")("wmi").tags(["mps","mps-tags"]).catching(l).mustfix("Failed to get the tag from the protobuf"),null}}function s(e){return e==="image"?o("MSGDataclassTypes.flow").MpsMessageTag.Photo:e==="video"?o("MSGDataclassTypes.flow").MpsMessageTag.Video:e==="gif"?o("MSGDataclassTypes.flow").MpsMessageTag.Gif:e==="ptt"?o("MSGDataclassTypes.flow").MpsMessageTag.Audio:e==="document"?o("MSGDataclassTypes.flow").MpsMessageTag.File:e==="sticker"||e==="md-app-state"||e==="xma-image"||e===void 0||e===null?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}l.getTagFromProto=e,l.getMpsMessageTagFromMediaType=s}),98);
__d("WebMpsReverbWrites",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";function e(e,t,r,o,a,i,l){var s=[a,o,r];return l((function(){var l=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var l,u=yield n.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",s);if(!(((l=u==null?void 0:u.timestampMs)!=null?l:0)>=i)){var c={messageId:e,payload:t,supplementalKey:r,threadId:a,timestampMs:i,topLevelMessageId:o};yield n.stores.supplemental.bulkUpsert("[threadId+topLevelMessageId+supplementalKey]",[{item:c,selector:s}])}});return function(e){return l.apply(this,arguments)}})())}function l(e,t,r){var o=e.messageId,a=e.threadId;return r((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r,i=yield n.stores.message.getByIndex("[threadId+messageId]",[a,o]);if(!(i!=null&&!i.isTransportErrorPlaceholder)&&!(i!=null&&i.isTransportErrorPlaceholder&&t.isTransportErrorPlaceholder)){var l=yield n.stores.deleted.getByIndex("[threadId+deletedMessageId]",[e.threadId,e.messageId]),s=babelHelpers.extends({},e,{debugFlags:t.debugFlags,expiryTimestampMs:t.expiryTimestampMs,isLocalOnlyMessage:t.isLocalOnly,isTransportErrorPlaceholder:t.isTransportErrorPlaceholder,timestampMs:(r=i==null?void 0:i.timestampMs)!=null?r:e.timestampMs});if(l)l.payload=s.payload,yield n.stores.deleted.bulkPut([l]),i!=null&&(i.timestampMs=e.timestampMs,yield n.stores.message.bulkPut([i]));else{var u=yield n.stores.message.bulkUpsert("[threadId+messageId]",[{item:s,selector:[a,o]}]),c=u[0],d=yield n.stores.tags.readIndexRange("[threadId+messageId+tag]",{only:[a,o]});d.length>0&&(yield n.stores.tags.bulkDelete(d.map(function(e){return e.pk}))),t.tags.length>0&&(yield n.stores.tags.bulkAdd(t.tags.map(function(e){return{messageId:s.messageId,messagePk:c,tag:e,threadId:s.threadId,timestampMs:s.timestampMs}})))}}});return function(e){return r.apply(this,arguments)}})())}i.upsertSupplementalToReverb=e,i.upsertTopLevelToReverb=l}),66);
__d("WebReverbSchema",["FBLogger","MAWWormOdsLogger","WAHex","Worm","WormEAR","WormIDbDriver","WormMemoryDriver"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{"[threadId+messageId]":{fields:["threadId","messageId"],unique:!0},"[threadId+timestampMs+messageId]":{fields:["threadId","timestampMs","messageId"],unique:!1},expiryTimestampMs:{fields:["expiryTimestampMs"],unique:!1},messageId:{fields:["messageId"],unique:!1},timestampMs:{fields:["timestampMs"],unique:!1}},nonEncryptedFields:["timestampMs","expiryTimestampMs","messageId","debugFlags"],primaryKey:"pk",secure:!0},s={autoIncrement:!0,indexes:{"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!0}},nonEncryptedFields:["topLevelMessageId"],primaryKey:"pk",secure:!0},u={autoIncrement:!0,indexes:{"[threadId+deletedMessageId]":{fields:["threadId","deletedMessageId"],unique:!0},"[threadId+timestampMs+deletedMessageId]":{fields:["threadId","timestampMs","deletedMessageId"],unique:!0},"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!1},deletionTimestampMs:{fields:["deletionTimestampMs"],unique:!1}},nonEncryptedFields:["topLevelMessageId","deletionTimestampMs"],primaryKey:"pk",secure:!0},c={autoIncrement:!0,indexes:{"[threadId+messageId+tag]":{fields:["threadId","messageId","tag"],unique:!0},"[threadId+tag+timestampMs]":{fields:["threadId","tag","timestampMs"],unique:!1}},nonEncryptedFields:["messageId","timestampMs","messagePk","tag"],primaryKey:"pk",secure:!0},d={autoIncrement:!1,indexes:{},primaryKey:"pk",secure:!0},m={dbMetadata:d,deleted:u,message:e,supplemental:s,tags:c};function p(e,t,n,a,i){var l=o("WAHex").parseHex(t),s="reverb",u=new(o("WormEAR")).WormEAR(m,s,l),c=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(e,s,m,u,o("MAWWormOdsLogger").wormOdsWorkerLogger,{blockingErrorThreshold:n,onBlockingError:a,onTransactionError:function(t){if(t instanceof o("WormEAR").DecryptionError){var e=t;r("FBLogger")("mps").mustfix("EAR decryption error in store: %s. Dropping corrupted entity %s",e.store,e.maybeHashedPk),c.runInTransaction([e.store],"readwrite",function(t){var n=t.stores[e.store];return e.maybeHashedPk!=null?n.delete(e.maybeHashedPk):n.clear()},"delete-corrupted-entity")}}}),i);return c}function _(e){return new(o("Worm")).WormDatabase(new(o("WormMemoryDriver")).WormMemoryDriver("reverb_test",m,o("MAWWormOdsLogger").wormOdsWorkerLogger),e)}l.schema=m,l.makeWebReverbSchema=p,l.makeInMemoryReverbSchema_TEST_ONLY=_}),98);
__d("WebReverbDB",["MpsLogger","WAResolvable","WebReverbSchema","asyncToGeneratorRuntime","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;function u(e,t,n,r,o){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i,l){var u;try{var c=o("WebReverbSchema").makeWebReverbSchema(t,n,a,i,l);return e=c,u=yield c.init(),s.resolve(c),u}catch(e){throw o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("Error performing WebReverb init"),e}}),c.apply(this,arguments)}function d(){if(e==null)throw r("err")("Reverb DB is not initialized");return e}function m(){return s.promise}function p(e){return"WebReverb - "+e}l.makeWebReverb=u,l.getWebReverbDB=d,l.getDbPromise=m,l.mpsOp=p}),98);
__d("WebMpsMigrationReverbTxns",["FBLogger","MpsTags","MpsTypes","Promise","WebMpsReverbWrites","WebReverbDB","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return r("FBLogger")("mps").tags(["mps_migration"])};function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){try{yield o("WebReverbDB").getWebReverbDB().runInTransaction(["message","supplemental","deleted","tags","dbMetadata"],"readwrite",function(r){var o=function(t){return t(r)};return(e||(e=n("Promise"))).all(t.map(function(e){return d(e,o)}))},"mps-persist-messages-migrated-from-maw-db")}catch(e){throw r.endFail("reverb_write_failure"),e}}),c.apply(this,arguments)}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=[],i=[],l=o("MpsTags").getTagFromProto(t.toplevelProtobuf.payload);a.push(o("WebMpsReverbWrites").upsertTopLevelToReverb(t.toplevelProtobuf,{actionType:o("MpsTypes").ActionType.UpsertTopLevel,debugFlags:["MAW_Migration"],isLocalOnly:!0,isTransportErrorPlaceholder:!1,tags:l!=null?[l]:[],targetMessageId:t.toplevelProtobuf.messageId},r));for(var u of t.supplementalsToInsert.entries()){var c=u[0],d=u[1];a.push(o("WebMpsReverbWrites").upsertSupplementalToReverb(d.messageId,d.payload,c,t.toplevelProtobuf.messageId,t.toplevelProtobuf.threadId,d.timestampMs,r))}var m=yield(e||(e=n("Promise"))).allSettled(a),p=m.filter(function(e){return e.status==="rejected"});for(var _ of p)s().mustfix("Failed to upsert a row into Reverb: %s",_.reason);if(p.length>0)throw s().mustfixThrow("Reverb upsert failed");var f=function*(){var e=g[0],o=g[1];i.push(r((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=[t.toplevelProtobuf.threadId,t.toplevelProtobuf.messageId,e],o=yield n.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",r);o!=null&&(yield n.stores.supplemental.bulkDelete([o.pk]))});return function(e){return r.apply(this,arguments)}})()))};for(var g of t.supplementalsToDelete.entries())yield*f();var h=yield e.allSettled(i),y=h.filter(function(e){return e.status==="rejected"});for(var C of y)s().mustfix("Failed to delete a row from Reverb: %s",C.reason);if(y.length>0)throw s().mustfixThrow("Reverb delete failed")}),m.apply(this,arguments)}function p(){return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readonly",function(e){return e.stores.dbMetadata.get("db-info")},"mps-get-db-metadata")}function _(e,t){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield t.stores.dbMetadata.bulkAdd([babelHelpers.extends({},e,{pk:"db-info"})])});return function(e){return t.apply(this,arguments)}})(),"mps-set-db-metadata")}catch(e){throw t.endFail("migration_state_write_failure"),e}}function f(e,t){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n,r,o,a,i=yield t.stores.dbMetadata.get("db-info");if(i==null)throw s().mustfixThrow("DB Metadata row does not exist, cannot update the cursor");var l=i,u=babelHelpers.extends({},l,{mawDBMigrationCurrentMessageId:(n=e.mawDBMigrationCurrentMessageId)!=null?n:l.mawDBMigrationCurrentMessageId,mawDBMigrationCurrentThread:(r=e.mawDBMigrationCurrentThread)!=null?r:l.mawDBMigrationCurrentThread,mawDBMigrationStartMs:(o=e.mawDBMigrationStartMs)!=null?o:l.mawDBMigrationStartMs,mawDBMigrationState:(a=e.mawDBMigrationState)!=null?a:l.mawDBMigrationState});yield t.stores.dbMetadata.bulkPut([u])});return function(e){return t.apply(this,arguments)}})(),"mps-update-db-metadata")}catch(e){throw t.endFail("migration_state_write_failure"),e}}l.persistMigratedMessagesFromMawDb=u,l.getMawMpsMigrationState=p,l.setInitialMawMpsMigrationState=_,l.setMawMpsMigrationState=f}),98);
__d("WAWaitForUserUnblocked",["WAResolvable","WorkerScheduler"],(function(t,n,r,o,a,i,l){"use strict";var e=12e4,s=new(o("WAResolvable")).Resolvable,u=o("WorkerScheduler").makeScheduler("offline-queue",{concurrency:1,maxTaskLimit:1,defaultSamplingRate:1e3,timeoutMs:e});function c(){s.resolveWasCalled()&&(s=new(o("WAResolvable")).Resolvable,d())}function d(){u.runTask({name:"offline-queue",fn:function(){return s.promise},priority:o("WorkerScheduler").BLOCKING_PRIORITY})}function m(){return s.promise}function p(){s.resolve()}function _(){return!s.resolveWasCalled()}l.maybeResetWaitForUserUnblocked=c,l.markOfflineQueueAsStarted=d,l.waitForUserUnblocked=m,l.unblockUser=p,l.isStillWaitingForUserUnblocked=_}),98);
__d("WebMpsPopulateMediaTagsDBMigration",["MpsTags","MpsTypes","WebReverbDB","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=20,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=t!=null?o("MpsTypes").toTimestamp(parseInt(t,10)):null,a=yield o("WebReverbDB").getWebReverbDB().runInTransaction(["message"],"readonly",function(t){return t.stores.message.readIndexRange("timestampMs",{greaterThan:[r!=null?r:o("MpsTypes").toTimestamp(0)]},{limit:e,order:"asc"})},"get-message-batch-after-timestamp");if(n.addPoint("messages_fetched_from_reverb",{int:{messageCount:a.length}}),a.length===0)return{hasMore:!1};var i=a.map(function(e){var t=o("MpsTags").getTagFromProto(e.payload);if(t==null)return null;var n=t;return{item:{messageId:e.messageId,messagePk:e.pk,tag:n,threadId:e.threadId,timestampMs:e.timestampMs},selector:[e.threadId,e.messageId,n]}}).filter(Boolean);return n.addPoint("tags_generated",{int:{tagCount:i.length}}),yield o("WebReverbDB").getWebReverbDB().runInTransaction(["tags"],"readwrite",function(e){return e.stores.tags.bulkUpsert("[threadId+messageId+tag]",i)},"upsert-tags"),n.addPoint("tags_updated"),{hasMore:!0,nextCursor:a[a.length-1].timestampMs.toString()}});return function(n,r){return t.apply(this,arguments)}})();l.WebMpsPopulateMediaTagsMigrationTask=s}),98);
__d("WormDbMigrationScheduler",["FBLogger","MpsTypes","ODS","QPLFlow","WAWaitForUserUnblocked","WebMpsPopulateMediaTagsDBMigration","WorkerScheduler","WormMaintenanceDb","asyncToGeneratorRuntime","getErrorSafe","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=function(){return r("FBLogger")("wmi").tags(["worm_db_migration"])},d=null,m={concurrency:1,maxTaskLimit:1,maxThrottleMs:r("justknobx")._("3546"),timeoutMs:r("justknobx")._("3614")},p={"reverb-populate-media-tags":o("WebMpsPopulateMediaTagsDBMigration").WebMpsPopulateMediaTagsMigrationTask},_=new Map;function f(e,t){return e+":"+(t!=null?t:"null")}function g(e){var t;return(t=_.get(e))!=null?t:0}function h(e){_.set(e,g(e)+1)}function y(){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield o("WAWaitForUserUnblocked").waitForUserUnblocked(),b(p)}),C.apply(this,arguments)}function b(e){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!r("justknobx")._("3720")){c().info("DB Migrations are disabled");return}if(d!=null){c().info("DB Migrations are already running");return}var t=!1,n=!1,o;try{for(var a=babelHelpers.asyncIterator(Object.entries(e)),i;t=!(i=yield a.next()).done;t=!1){var l=i.value,s=l[0],u=l[1];yield S(s,u)}}catch(e){n=!0,o=e}finally{try{t&&a.return!=null&&(yield a.return())}finally{if(n)throw o}}}),v.apply(this,arguments)}function S(e,t){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a=o("QPLFlow").startQPLFlow(r("qpl")._(767107656,"1154"),{annotations:{string:{migrationName:t}}}),i=yield L(t),l;if(i==null?(a.addPoint("migration_state_not_found"),l=yield E(t),(u||(u=o("ODS"))).bumpEntityKey(9819,"worm.db_migration",t+".started"),a.addPoint("initial_migration_state_set")):(a.addPoint("migration_state_retrieved"),l=i),l.finishedAtMs!=null){c().info("Migration "+t+" is already complete"),(u||(u=o("ODS"))).bumpEntityKey(9819,"worm.db_migration",t+".skipped"),a.addPoint("migration_already_complete"),a.endSuccess();return}var p=f(t,l.currentCursor),_=g(p);if(_>r("justknobx")._("2141")){c().INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Migration "," has exceeded the max retry count"])),t),(u||(u=o("ODS"))).bumpEntityKey(9819,"worm.db_migration",t+".stuck"),a.addPoint("retry_count_exceeded"),a.endSuccess();return}d=o("WorkerScheduler").makeScheduler("WormDbMigrations",m).task({fn:function(){return n(l.currentCursor,a)},name:"worm_db_migration_"+t,priority:o("WorkerScheduler").BACKGROUND_PRIORITY});try{var y=yield d.run();a.addPoint("migration_task_complete"),d=null,y.hasMore?(yield k(babelHelpers.extends({},l,{currentCursor:y.nextCursor})),a.addPoint("migration_state_updated"),S(t,n)):(yield k(babelHelpers.extends({},l,{currentCursor:void 0,finishedAtMs:o("MpsTypes").toTimestamp(Date.now())})),(u||(u=o("ODS"))).bumpEntityKey(9819,"worm.db_migration",t+".complete"),a.addPoint("migration_complete")),a.endSuccess()}catch(e){d=null;var C=r("getErrorSafe")(e);c().FATAL(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Runtime error when running migration ",": ",""])),t,C.message),a.endFail("runtime_error",{string:{errorMessage:C.message}}),h(p),S(t,n)}}),R.apply(this,arguments)}function L(e){return o("WormMaintenanceDb").getWormMaintenanceDb().runInTransaction(["migrations"],"readonly",function(t){return t.stores.migrations.getByIndex("name",[e])},"mps-get-migration-by-name")}function E(e){return o("WormMaintenanceDb").getWormMaintenanceDb().runInTransaction(["migrations"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n={name:e,startedAtMs:o("MpsTypes").toTimestamp(Date.now())},r=yield t.stores.migrations.bulkAdd([n]),a=r[0];return babelHelpers.extends({},n,{pk:a})});return function(e){return t.apply(this,arguments)}})(),"mps-add-initial-migration-state")}function k(e){return o("WormMaintenanceDb").getWormMaintenanceDb().runInTransaction(["migrations"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield t.stores.migrations.bulkPut([e])});return function(e){return t.apply(this,arguments)}})(),"mps-set-migration-state")}l.runAllDbMigrations=y,l.getDbMigrationStateByName=L}),98);
__d("MpsReverbInit",["BrowserLockManager","MAWMpsMigrationStatus","MAWWormMaintenanceDbSetup","MpsTypes","Promise","WebMpsMigrationReverbTxns","WebReverbDB","WormDbMigrationScheduler","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s="wmi_mps_m4_non_migrated_status_lock",u="wmi_mps_new_db_status_lock",c,d=["reverb-populate-media-tags"],m=new Map(d.map(function(e){return[e,null]}));function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=yield o("WebReverbDB").makeWebReverb(t.name,t.strEncKey,t.blockingErrorThreshold,t.onBlockingError,t.qplEvent),i=a.isNewDb;yield o("MAWWormMaintenanceDbSetup").mawWormDbMaintenanceDbSetup();var l,p=[];if(i)l=!0,p=d.map(function(e){return{migrationName:e,ready:!0}});else{var _=yield o("WebMpsMigrationReverbTxns").getMawMpsMigrationState();l=(_==null?void 0:_.mawDBMigrationState)===o("MpsTypes").MawDBMigrationState.Completed,p=yield(e||(e=n("Promise"))).all(d.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WormDbMigrationScheduler").getDbMigrationStateByName(e);return{migrationName:e,ready:(t==null?void 0:t.finishedAtMs)!=null}});return function(t){return e.apply(this,arguments)}})()))}if(r("BrowserLockManager")==null){o("MAWMpsMigrationStatus").setStatus(l),p.forEach(function(e){o("MAWMpsMigrationStatus").setDbMigrationState(e.migrationName,e.ready)});return}var f=yield r("BrowserLockManager").query(),g=f.held.some(function(e){return e.name===u});if(g){o("MAWMpsMigrationStatus").setStatus(!0),d.forEach(function(e){o("MAWMpsMigrationStatus").setDbMigrationState(e,!0)});return}if(l===!0){var h=f.held.some(function(e){return e.name===s})||f.pending.some(function(e){return e.name===s});h?l=!1:i===!0&&(c=r("BrowserLockManager").request(u,function(){return new(e||(e=n("Promise")))(function(){})}))}l||(c=r("BrowserLockManager").request(s,function(){return new(e||(e=n("Promise")))(function(){})})),o("MAWMpsMigrationStatus").setStatus(l),p.forEach(function(t){var a="LOCK_NOT_READY_MIGRATION-"+t.migrationName;if(t.ready){var i=f.held.some(function(e){return e.name===a})||f.pending.some(function(e){return e.name===a});i?o("MAWMpsMigrationStatus").setDbMigrationState(t.migrationName,!1):o("MAWMpsMigrationStatus").setDbMigrationState(t.migrationName,!0)}else o("MAWMpsMigrationStatus").setDbMigrationState(t.migrationName,!1),m.set(t.migrationName,r("BrowserLockManager").request(a,function(){return new(e||(e=n("Promise")))(function(){})}))})}),_.apply(this,arguments)}l.initReverb=p}),98);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"}),l=1,s=e.LOW,u=10*1e3;i.JOB_PRIORITY=e,i.DEFAULT_CONCURRENCY=l,i.DEFAULT_JOB_PRIORITY=s,i.DEFAULT_JOB_TIMEOUT_MS=u}),66);
__d("WAMediaQplHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e==null||e<0||e>1e3*1024*1024?"invalid_size":e===0?"size equal to 0KB":e<=1*1024?"size lower than 1 KB":e<=50*1024?"size between 1 KB and 50 KB":e<=100*1024?"size between 50 KB and 100 KB":e<=500*1024?"size between 100 KB and 500 KB":e<=1*1024*1024?"size between 500 KB and 1 MB":e<=2*1024*1024?"size between 1 MB and 2 MB":e<=5*1024*1024?"size between 2 MB and 5 MB":e<=10*1024*1024?"size between 5 MB and 10 MB":e<=20*1024*1024?"size between 10 MB and 20 MB":e<=25*1024*1024?"size between 20 MB and 25 MB":e<=30*1024*1024?"size between 25 MB and 30 MB":e<=50*1024*1024?"size between 30 MB and 50 MB":e<=75*1024*1024?"size between 50 MB and 75 MB":e<=100*1024*1024?"size between 75 MB and 100 MB":"size above 100 MB"}i.convertIntegerSizeToStringBucket=e}),66);
__d("WAOfflineUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["INIT","OFFLINE_RESUME","ONLINE"]),l=n("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});i.ServerRPCMode=e,i.WAClientInfraOfflineProgress=l}),66);
__d("groupBy",[],(function(t,n,r,o,a,i){function e(e,t){return e.reduce(function(e,n){return(e[t(n)]=e[t(n)]||[]).push(n),e},{})}i.default=e}),66);
__d("isGroupInvitesEnabled",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("125")===!0}l.default=e}),98);/*FB_PKG_DELIM*/
__d("MultiwaySharedTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum"))({UNKNOWN:0,SFU:1,P2P:2}),s=e({UNKNOWN:0,IGVIDEOCALL:9,ROOM:15,CRUCIBLE:20,MBS_WA:21,BOT:22,HORIZON:23,ULLC:24}),u=e({OFFER:0,PRANSWER:1,ANSWER:2,PROFFER:3}),c=e({LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4}),d=e({E2EE_NOT_MANDATED:0,DEPRECATED_NO_REQUIREMENT:1,E2EE_MANDATED:2,E2EE_BYPASSED_USER_CONSENTED:3}),m=e({NOT_SET:0,CONTROL:1,TEST:2}),p=e({NOT_SET:0,CONTROL:1,TEST:2}),_=e({NotPaused:0,Paused:1}),f=e({AUDIO:0,VIDEO:1,DATA:2}),g=e({UNKNOWN:0,COMPOSITING_SERVICE:1,MEDIA_SERVER:2,CATHODE_AMBISONIC:3,CATHODE_CAPTIONS:4,CATHODE_MEETING_SUMMARIZER:5,CATHODE_REALTIME_SHARED_STATE:6,RP_GENAI_SERVICE:7,SMART_GLASSES_ASSISTANT:8}),h=e({CNAME:0,TRACK:1,DOMINANT_SPEAKER:2}),y=e({UNKNOWN:0,DEFAULT:1,SCREEN_SHARE:2}),C=e({UNSPECIFIED:0,FNA:1,FNA_PREFERRED:2}),b=e({NONE:0,EXTENSION_SELF_PARTICIPANT:1}),v=e({IntValue:"intValue",StringValue:"stringValue"});a.exports={ConferenceType:s,CustomMediaRoutingType:b,E2eeInfraMandatedExpStatus:m,E2eeMode:d,EdgerayType:C,EndpointServiceType:g,MediaPath:l,MediaPauseStatus:_,MediaType:f,P2PSFrameExpStatus:p,QuickExperimentValue$Types:v,RenderedStreamType:y,SdpType:u,SubscriptionType:h,VideoQuality:c}}),null);
__d("WebrtcSignalingCommonTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum"))({DEFAULT_AUDIO:0,DEFAULT_VIDEO:1,SCREEN_AUDIO:2,SCREEN_VIDEO:3,CUSTOM_VIDEO:4,CUSTOM_AUDIO:5}),s=e({OLD_CLIENT_PLATFORM_STACK:0,RSYS_X:1,IG_OLD_STACK:2,MLITE_OLD_STACK:3,SCOTCH:4,ZENON:5}),u=e({NONE:0,AVATAR:1,AUGMENTED_CALLING:2,SCENE_COMPOSITION:3,STEREO_VIDEO:4,SHARED_STATE:5,CODEC_AVATAR_2D:6,CODEC_AVATAR_2D_IMU:7}),c=e({NONE:0,AMBISONIC:1,CONVERSATION_BOT:2,MONOMIX:3,MONOSTREAM:4});a.exports={ClientStack:s,CustomAudioContentType:c,CustomVideoContentType:u,TrackLabel:l}}),null);
__d("MultiwaySharedSerializers",["MultiwaySharedTypes","ThriftTypes","WebrtcSignalingCommonTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{cluster:"",nonce:""}}function u(){return{cluster:"",conferenceName:"",nonce:"",userId:"",clientSessionId:""}}function c(){return{userId:"",deviceId:"",appId:"",appVersion:"",appBuildNumber:""}}function d(){return{mode:o("MultiwaySharedTypes").E2eeMode.cast(0),preventSfuMode:!1,infraMandatedExpStatus:o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0),p2pSFrameExpStatus:o("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0)}}function m(){return{semantics:"",ssrcs:[]}}function p(){return{type:o("MultiwaySharedTypes").MediaType.cast(0),id:"",ssrcs:[],enabled:!1,customVideoContentType:o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0),customAudioContentType:o("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)}}function _(){return{parameters:{},conditionFbid:"0",exposureHasBeenLogged:!1,canExposureLog:!1,universeShortName:"",userFbid:"0",unitId:""}}function f(){return{experiments:{},userFbid:"0"}}function g(){return{conditionFbid:"0",userFbid:"0",universeName:"",unitId:""}}function h(){return{enabled:!1,customVideoContentType:o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0),customAudioContentType:o("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)}}function y(){return{tracks:{}}}function C(){return{videoQuality:o("MultiwaySharedTypes").VideoQuality.cast(0)}}function b(){return{cname:"",type:o("MultiwaySharedTypes").SubscriptionType.cast(0)}}function v(){return{restrictiveLogging:!0,verboseLogging:!1}}function S(){return{userId:"",streamId:"",streamType:0,renderWidth:0,renderHeight:0}}function R(){return{}}function L(){return{}}function E(){return{}}function k(){return{host:Uint8Array.of(),port:0}}function I(){return{}}function T(t,n){if(n.writeStructBegin("ServerInfo"),n.writeFieldBegin({fname:"cluster",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.cluster!=null)n.writeString(t.cluster);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),t.conferenceName_deprecated!=null&&(n.writeFieldBegin({fname:"conferenceName_deprecated",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.conferenceName_deprecated),n.writeFieldEnd()),n.writeFieldBegin({fname:"nonce",ftype:e.STRING,fid:3}),t.nonce!=null)n.writeString(t.nonce);else{var a="";n.writeString(a)}n.writeFieldEnd(),t.conferenceId!=null&&(n.writeFieldBegin({fname:"conferenceId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:4}),n.writeI64(BigInt(t.conferenceId)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function D(t,n){if(n.writeStructBegin("ClientSessionInfo"),n.writeFieldBegin({fname:"cluster",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.cluster!=null)n.writeString(t.cluster);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"conferenceName",ftype:e.STRING,fid:2}),t.conferenceName!=null)n.writeString(t.conferenceName);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"nonce",ftype:e.STRING,fid:3}),t.nonce!=null)n.writeString(t.nonce);else{var i="";n.writeString(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"userId",ftype:e.STRING,fid:4}),t.userId!=null)n.writeString(t.userId);else{var l="";n.writeString(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"clientSessionId",ftype:e.STRING,fid:5}),t.clientSessionId!=null)n.writeString(t.clientSessionId);else{var s="";n.writeString(s)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function x(t,n){if(n.writeStructBegin("Endpoint"),n.writeFieldBegin({fname:"userId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.userId!=null)n.writeString(t.userId);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"deviceId",ftype:e.STRING,fid:2}),t.deviceId!=null)n.writeString(t.deviceId);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"appId",ftype:e.STRING,fid:3}),t.appId!=null)n.writeString(t.appId);else{var i="";n.writeString(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"appVersion",ftype:e.STRING,fid:4}),t.appVersion!=null)n.writeString(t.appVersion);else{var l="";n.writeString(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"appBuildNumber",ftype:e.STRING,fid:5}),t.appBuildNumber!=null)n.writeString(t.appBuildNumber);else{var s="";n.writeString(s)}n.writeFieldEnd(),t.clientStackInfo!=null&&(n.writeFieldBegin({fname:"clientStackInfo",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeString(t.clientStackInfo),n.writeFieldEnd()),t.familyDeviceId!=null&&(n.writeFieldBegin({fname:"familyDeviceId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.familyDeviceId),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function $(t,n){if(n.writeStructBegin("E2eeEnforcement"),n.writeFieldBegin({fname:"mode",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.mode!=null){var a;n.writeI32((a=t.mode)!=null?a:0)}else{var i=o("MultiwaySharedTypes").E2eeMode.cast(0);n.writeI32(i!=null?i:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"preventSfuMode",ftype:e.BOOL,fid:2}),t.preventSfuMode!=null)n.writeBool(t.preventSfuMode);else{var l=!1;n.writeBool(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"infraMandatedExpStatus",ftype:e.I32,fid:3}),t.infraMandatedExpStatus!=null){var s;n.writeI32((s=t.infraMandatedExpStatus)!=null?s:0)}else{var u=o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0);n.writeI32(u!=null?u:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"p2pSFrameExpStatus",ftype:e.I32,fid:4}),t.p2pSFrameExpStatus!=null){var c;n.writeI32((c=t.p2pSFrameExpStatus)!=null?c:0)}else{var d=o("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0);n.writeI32(d!=null?d:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function P(t,n){if(n.writeStructBegin("SsrcGroup"),n.writeFieldBegin({fname:"semantics",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.semantics!=null)n.writeString(t.semantics);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"ssrcs",ftype:e.LIST,fid:2}),t.ssrcs!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I64,size:t.ssrcs.length});for(var a of t.ssrcs)n.writeI64(BigInt(a));n.writeListEnd()}else{var i=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I64,size:i.length});for(var l of i)n.writeI64(BigInt(l));n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function N(t,n){if(n.writeStructBegin("Media"),n.writeFieldBegin({fname:"type",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.type!=null){var a;n.writeI32((a=t.type)!=null?a:0)}else{var i=o("MultiwaySharedTypes").MediaType.cast(0);n.writeI32(i!=null?i:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"id",ftype:e.STRING,fid:2}),t.id!=null)n.writeString(t.id);else{var l="";n.writeString(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"ssrcs",ftype:e.LIST,fid:3}),t.ssrcs!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I64,size:t.ssrcs.length});for(var s of t.ssrcs)n.writeI64(BigInt(s));n.writeListEnd()}else{var u=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I64,size:u.length});for(var c of u)n.writeI64(BigInt(c));n.writeListEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"enabled",ftype:e.BOOL,fid:4}),t.enabled!=null)n.writeBool(t.enabled);else{var d=!1;n.writeBool(d)}if(n.writeFieldEnd(),t.pausedDownlink!=null){var m;n.writeFieldBegin({fname:"pausedDownlink",ftype:(e||(e=r("ThriftTypes"))).I32,fid:5}),n.writeI32((m=t.pausedDownlink)!=null?m:0),n.writeFieldEnd()}if(t.pausedUplink!=null){var p;n.writeFieldBegin({fname:"pausedUplink",ftype:(e||(e=r("ThriftTypes"))).I32,fid:6}),n.writeI32((p=t.pausedUplink)!=null?p:0),n.writeFieldEnd()}if(t.owner!=null&&(n.writeFieldBegin({fname:"owner",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.owner),n.writeFieldEnd()),t.label!=null){var _;n.writeFieldBegin({fname:"label",ftype:(e||(e=r("ThriftTypes"))).I32,fid:8}),n.writeI32((_=t.label)!=null?_:0),n.writeFieldEnd()}if(n.writeFieldBegin({fname:"customVideoContentType",ftype:e.I32,fid:9}),t.customVideoContentType!=null){var f;n.writeI32((f=t.customVideoContentType)!=null?f:0)}else{var g=o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0);n.writeI32(g!=null?g:0)}if(n.writeFieldEnd(),t.name!=null&&(n.writeFieldBegin({fname:"name",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:10}),n.writeString(t.name),n.writeFieldEnd()),n.writeFieldBegin({fname:"customAudioContentType",ftype:e.I32,fid:11}),t.customAudioContentType!=null){var h;n.writeI32((h=t.customAudioContentType)!=null?h:0)}else{var y=o("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0);n.writeI32(y!=null?y:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function M(t,n){if(n.writeStructBegin("QuickExperiment"),n.writeFieldBegin({fname:"parameters",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),t.parameters!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(t.parameters).length});for(var o of Object.entries(t.parameters)){var a=o[0],i=o[1];n.writeString(a),j(i,n)}n.writeMapEnd()}else{var l={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(l).length});for(var s of Object.entries(l)){var u=s[0],c=s[1];n.writeString(u),j(c,n)}n.writeMapEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"conditionFbid",ftype:e.I64,fid:2}),t.conditionFbid!=null)n.writeI64(BigInt(t.conditionFbid));else{var d="0";n.writeI64(BigInt(d))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"exposureHasBeenLogged",ftype:e.BOOL,fid:3}),t.exposureHasBeenLogged!=null)n.writeBool(t.exposureHasBeenLogged);else{var m=!1;n.writeBool(m)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"canExposureLog",ftype:e.BOOL,fid:4}),t.canExposureLog!=null)n.writeBool(t.canExposureLog);else{var p=!1;n.writeBool(p)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"universeShortName",ftype:e.STRING,fid:5}),t.universeShortName!=null)n.writeString(t.universeShortName);else{var _="";n.writeString(_)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"userFbid",ftype:e.I64,fid:6}),t.userFbid!=null)n.writeI64(BigInt(t.userFbid));else{var f="0";n.writeI64(BigInt(f))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"unitId",ftype:e.STRING,fid:7}),t.unitId!=null)n.writeString(t.unitId);else{var g="";n.writeString(g)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function w(t,n){if(n.writeStructBegin("QuickExperimentResult"),n.writeFieldBegin({fname:"experiments",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),t.experiments!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(t.experiments).length});for(var o of Object.entries(t.experiments)){var a=o[0],i=o[1];n.writeString(a),M(i,n)}n.writeMapEnd()}else{var l={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(l).length});for(var s of Object.entries(l)){var u=s[0],c=s[1];n.writeString(u),M(c,n)}n.writeMapEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"userFbid",ftype:e.I64,fid:2}),t.userFbid!=null)n.writeI64(BigInt(t.userFbid));else{var d="0";n.writeI64(BigInt(d))}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function A(t,n){if(n.writeStructBegin("QuickExperimentExposureLoggingEvent"),n.writeFieldBegin({fname:"conditionFbid",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.conditionFbid!=null)n.writeI64(BigInt(t.conditionFbid));else{var o="0";n.writeI64(BigInt(o))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"userFbid",ftype:e.I64,fid:2}),t.userFbid!=null)n.writeI64(BigInt(t.userFbid));else{var a="0";n.writeI64(BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"universeName",ftype:e.STRING,fid:3}),t.universeName!=null)n.writeString(t.universeName);else{var i="";n.writeString(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"unitId",ftype:e.STRING,fid:4}),t.unitId!=null)n.writeString(t.unitId);else{var l="";n.writeString(l)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function F(t,n){if(n.writeStructBegin("ClientTrackInfo"),n.writeFieldBegin({fname:"enabled",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:1}),t.enabled!=null)n.writeBool(t.enabled);else{var a=!1;n.writeBool(a)}if(n.writeFieldEnd(),t.pausedUplink!=null){var i;n.writeFieldBegin({fname:"pausedUplink",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),n.writeI32((i=t.pausedUplink)!=null?i:0),n.writeFieldEnd()}if(t.pausedDownlink!=null){var l;n.writeFieldBegin({fname:"pausedDownlink",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32((l=t.pausedDownlink)!=null?l:0),n.writeFieldEnd()}if(t.owner!=null&&(n.writeFieldBegin({fname:"owner",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.owner),n.writeFieldEnd()),t.label!=null){var s;n.writeFieldBegin({fname:"label",ftype:(e||(e=r("ThriftTypes"))).I32,fid:5}),n.writeI32((s=t.label)!=null?s:0),n.writeFieldEnd()}if(n.writeFieldBegin({fname:"customVideoContentType",ftype:e.I32,fid:6}),t.customVideoContentType!=null){var u;n.writeI32((u=t.customVideoContentType)!=null?u:0)}else{var c=o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0);n.writeI32(c!=null?c:0)}if(n.writeFieldEnd(),t.name!=null&&(n.writeFieldBegin({fname:"name",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.name),n.writeFieldEnd()),n.writeFieldBegin({fname:"customAudioContentType",ftype:e.I32,fid:8}),t.customAudioContentType!=null){var d;n.writeI32((d=t.customAudioContentType)!=null?d:0)}else{var m=o("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0);n.writeI32(m!=null?m:0)}n.writeFieldEnd(),t.nodeId!=null&&(n.writeFieldBegin({fname:"nodeId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:9}),n.writeI64(BigInt(t.nodeId)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function O(t,n){if(n.writeStructBegin("ClientMediaStatus"),n.writeFieldBegin({fname:"tracks",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),t.tracks!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(t.tracks).length});for(var o of Object.entries(t.tracks)){var a=o[0],i=o[1];n.writeString(a),F(i,n)}n.writeMapEnd()}else{var l={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(l).length});for(var s of Object.entries(l)){var u=s[0],c=s[1];n.writeString(u),F(c,n)}n.writeMapEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function B(t,n){if(n.writeStructBegin("SubscriptionOptions"),n.writeFieldBegin({fname:"videoQuality",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.videoQuality!=null){var a;n.writeI32((a=t.videoQuality)!=null?a:0)}else{var i=o("MultiwaySharedTypes").VideoQuality.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.qualityIndex!=null&&(n.writeFieldBegin({fname:"qualityIndex",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),n.writeI32(t.qualityIndex),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function W(t,n){if(n.writeStructBegin("Subscription"),n.writeFieldBegin({fname:"cname",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.cname!=null)n.writeString(t.cname);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),t.options!=null&&(n.writeFieldBegin({fname:"options",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),B(t.options,n),n.writeFieldEnd()),n.writeFieldBegin({fname:"type",ftype:e.I32,fid:3}),t.type!=null){var i;n.writeI32((i=t.type)!=null?i:0)}else{var l=o("MultiwaySharedTypes").SubscriptionType.cast(0);n.writeI32(l!=null?l:0)}n.writeFieldEnd(),t.trackId!=null&&(n.writeFieldBegin({fname:"trackId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.trackId),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function q(t,n){if(n.writeStructBegin("LoggingOptions"),n.writeFieldBegin({fname:"restrictiveLogging",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:1}),t.restrictiveLogging!=null)n.writeBool(t.restrictiveLogging);else{var o=!0;n.writeBool(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"verboseLogging",ftype:e.BOOL,fid:2}),t.verboseLogging!=null)n.writeBool(t.verboseLogging);else{var a=!1;n.writeBool(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function U(t,n){if(n.writeStructBegin("ResolutionData"),n.writeFieldBegin({fname:"userId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.userId!=null)n.writeString(t.userId);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"streamId",ftype:e.STRING,fid:2}),t.streamId!=null)n.writeString(t.streamId);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"streamType",ftype:e.I32,fid:3}),t.streamType!=null)n.writeI32(t.streamType);else{var i=0;n.writeI32(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"renderWidth",ftype:e.I32,fid:4}),t.renderWidth!=null)n.writeI32(t.renderWidth);else{var l=0;n.writeI32(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"renderHeight",ftype:e.I32,fid:5}),t.renderHeight!=null)n.writeI32(t.renderHeight);else{var s=0;n.writeI32(s)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function V(t,n){n.writeStructBegin("TurnInfo"),t.ipv4!=null&&(n.writeFieldBegin({fname:"ipv4",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeBinary(t.ipv4),n.writeFieldEnd()),t.ipv6!=null&&(n.writeFieldBegin({fname:"ipv6",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.ipv6),n.writeFieldEnd()),t.udpPort!=null&&(n.writeFieldBegin({fname:"udpPort",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32(t.udpPort),n.writeFieldEnd()),t.tcpPort!=null&&(n.writeFieldBegin({fname:"tcpPort",ftype:(e||(e=r("ThriftTypes"))).I32,fid:4}),n.writeI32(t.tcpPort),n.writeFieldEnd()),t.sslTcpPort!=null&&(n.writeFieldBegin({fname:"sslTcpPort",ftype:(e||(e=r("ThriftTypes"))).I32,fid:5}),n.writeI32(t.sslTcpPort),n.writeFieldEnd()),t.portInfoIdx!=null&&(n.writeFieldBegin({fname:"portInfoIdx",ftype:(e||(e=r("ThriftTypes"))).I32,fid:6}),n.writeI32(t.portInfoIdx),n.writeFieldEnd()),t.tlsPort!=null&&(n.writeFieldBegin({fname:"tlsPort",ftype:(e||(e=r("ThriftTypes"))).I32,fid:7}),n.writeI32(t.tlsPort),n.writeFieldEnd()),t.credentialIdx!=null&&(n.writeFieldBegin({fname:"credentialIdx",ftype:(e||(e=r("ThriftTypes"))).I32,fid:8}),n.writeI32(t.credentialIdx),n.writeFieldEnd()),t.turnUsername!=null&&(n.writeFieldBegin({fname:"turnUsername",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:9}),n.writeString(t.turnUsername),n.writeFieldEnd()),t.turnPassword!=null&&(n.writeFieldBegin({fname:"turnPassword",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:10}),n.writeString(t.turnPassword),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function H(t,n){if(n.writeStructBegin("EdgerayInfo"),t.edgerayType!=null){var o;n.writeFieldBegin({fname:"edgerayType",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32((o=t.edgerayType)!=null?o:0),n.writeFieldEnd()}t.ipv4!=null&&(n.writeFieldBegin({fname:"ipv4",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.ipv4),n.writeFieldEnd()),t.ipv6!=null&&(n.writeFieldBegin({fname:"ipv6",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.ipv6),n.writeFieldEnd()),t.token!=null&&(n.writeFieldBegin({fname:"token",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.token),n.writeFieldEnd()),t.tokenIdx!=null&&(n.writeFieldBegin({fname:"tokenIdx",ftype:(e||(e=r("ThriftTypes"))).I32,fid:5}),n.writeI32(t.tokenIdx),n.writeFieldEnd()),t.secret!=null&&(n.writeFieldBegin({fname:"secret",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeBinary(t.secret),n.writeFieldEnd()),t.secretIdx!=null&&(n.writeFieldBegin({fname:"secretIdx",ftype:(e||(e=r("ThriftTypes"))).I32,fid:7}),n.writeI32(t.secretIdx),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function G(t,n){if(n.writeStructBegin("RelayInfo"),t.turns!=null){n.writeFieldBegin({fname:"turns",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRUCT,size:t.turns.length});for(var o of t.turns)V(o,n);n.writeListEnd(),n.writeFieldEnd()}if(t.edgerays!=null){n.writeFieldBegin({fname:"edgerays",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.edgerays.length});for(var a of t.edgerays)H(a,n);n.writeListEnd(),n.writeFieldEnd()}t.turnUsername!=null&&(n.writeFieldBegin({fname:"turnUsername",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.turnUsername),n.writeFieldEnd()),t.turnPassword!=null&&(n.writeFieldBegin({fname:"turnPassword",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.turnPassword),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function z(t,n){if(n.writeStructBegin("TSocketAddress"),n.writeFieldBegin({fname:"host",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.host!=null)n.writeBinary(t.host);else{var o=Uint8Array.of();n.writeBinary(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"port",ftype:e.I16,fid:2}),t.port!=null)n.writeI16(t.port);else{var a=0;n.writeI16(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function j(t,n){if(n.writeStructBegin("QuickExperimentValue"),t.intValue!=null){n.writeFieldBegin({fname:"intValue",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(BigInt(t.intValue)),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.stringValue!=null){n.writeFieldBegin({fname:"stringValue",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.stringValue),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function K(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.cluster=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.conferenceName_deprecated=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.nonce=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).I64?n.conferenceId=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.cluster===void 0&&(n.cluster=""),n.nonce===void 0&&(n.nonce=""),n}function Q(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.cluster=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.conferenceName=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.nonce=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.userId=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.clientSessionId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.cluster===void 0&&(n.cluster=""),n.conferenceName===void 0&&(n.conferenceName=""),n.nonce===void 0&&(n.nonce=""),n.userId===void 0&&(n.userId=""),n.clientSessionId===void 0&&(n.clientSessionId=""),n}function X(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.userId=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.deviceId=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.appId=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.appVersion=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.appBuildNumber=t.readString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRING?n.clientStackInfo=t.readString():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).STRING?n.familyDeviceId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.userId===void 0&&(n.userId=""),n.deviceId===void 0&&(n.deviceId=""),n.appId===void 0&&(n.appId=""),n.appVersion===void 0&&(n.appVersion=""),n.appBuildNumber===void 0&&(n.appBuildNumber=""),n}function Y(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.mode=o("MultiwaySharedTypes").E2eeMode.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).BOOL?n.preventSfuMode=t.readBool():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.infraMandatedExpStatus=o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.p2pSFrameExpStatus=o("MultiwaySharedTypes").P2PSFrameExpStatus.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.mode===void 0&&(n.mode=o("MultiwaySharedTypes").E2eeMode.cast(0)),n.preventSfuMode===void 0&&(n.preventSfuMode=!1),n.infraMandatedExpStatus===void 0&&(n.infraMandatedExpStatus=o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0)),n.p2pSFrameExpStatus===void 0&&(n.p2pSFrameExpStatus=o("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0)),n}function J(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.semantics=t.readString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.ssrcs=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readI64().toString();n.ssrcs.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.semantics===void 0&&(n.semantics=""),n.ssrcs===void 0&&(n.ssrcs=[]),n}function Z(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.type=o("MultiwaySharedTypes").MediaType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.id=t.readString():t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).LIST){n.ssrcs=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=t.readI64().toString();n.ssrcs.push(c)}}else t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).BOOL?n.enabled=t.readBool():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).I32?n.pausedDownlink=o("MultiwaySharedTypes").MediaPauseStatus.cast(t.readI32()):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I32?n.pausedUplink=o("MultiwaySharedTypes").MediaPauseStatus.cast(t.readI32()):t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRING?n.owner=t.readString():t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).I32?n.label=o("WebrtcSignalingCommonTypes").TrackLabel.cast(t.readI32()):t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).I32?n.customVideoContentType=o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(t.readI32()):t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).STRING?n.name=t.readString():t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).I32?n.customAudioContentType=o("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.type===void 0&&(n.type=o("MultiwaySharedTypes").MediaType.cast(0)),n.id===void 0&&(n.id=""),n.ssrcs===void 0&&(n.ssrcs=[]),n.enabled===void 0&&(n.enabled=!1),n.customVideoContentType===void 0&&(n.customVideoContentType=o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0)),n.customAudioContentType===void 0&&(n.customAudioContentType=o("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)),n}function ee(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).MAP){n.parameters={};for(var l=t.readMapBegin(),s=0;s<l.size;s++){var u=t.readString(),c=pe(t);n.parameters[u]=c}}else t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.conditionFbid=t.readI64().toString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.exposureHasBeenLogged=t.readBool():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).BOOL?n.canExposureLog=t.readBool():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.universeShortName=t.readString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).I64?n.userFbid=t.readI64().toString():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).STRING?n.unitId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.parameters===void 0&&(n.parameters={}),n.conditionFbid===void 0&&(n.conditionFbid="0"),n.exposureHasBeenLogged===void 0&&(n.exposureHasBeenLogged=!1),n.canExposureLog===void 0&&(n.canExposureLog=!1),n.universeShortName===void 0&&(n.universeShortName=""),n.userFbid===void 0&&(n.userFbid="0"),n.unitId===void 0&&(n.unitId=""),n}function te(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).MAP){n.experiments={};for(var l=t.readMapBegin(),s=0;s<l.size;s++){var u=t.readString(),c=ee(t);n.experiments[u]=c}}else t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.userFbid=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.experiments===void 0&&(n.experiments={}),n.userFbid===void 0&&(n.userFbid="0"),n}function ne(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.conditionFbid=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.userFbid=t.readI64().toString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.universeName=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.unitId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.conditionFbid===void 0&&(n.conditionFbid="0"),n.userFbid===void 0&&(n.userFbid="0"),n.universeName===void 0&&(n.universeName=""),n.unitId===void 0&&(n.unitId=""),n}function re(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).BOOL?n.enabled=t.readBool():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.pausedUplink=o("MultiwaySharedTypes").MediaPauseStatus.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.pausedDownlink=o("MultiwaySharedTypes").MediaPauseStatus.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.owner=t.readString():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).I32?n.label=o("WebrtcSignalingCommonTypes").TrackLabel.cast(t.readI32()):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I32?n.customVideoContentType=o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(t.readI32()):t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRING?n.name=t.readString():t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).I32?n.customAudioContentType=o("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(t.readI32()):t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).I64?n.nodeId=t.readI64().toString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.enabled===void 0&&(n.enabled=!1),n.customVideoContentType===void 0&&(n.customVideoContentType=o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0)),n.customAudioContentType===void 0&&(n.customAudioContentType=o("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)),n}function oe(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).MAP){n.tracks={};for(var l=t.readMapBegin(),s=0;s<l.size;s++){var u=t.readString(),c=re(t);n.tracks[u]=c}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.tracks===void 0&&(n.tracks={}),n}function ae(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.videoQuality=o("MultiwaySharedTypes").VideoQuality.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.qualityIndex=t.readI32():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.videoQuality===void 0&&(n.videoQuality=o("MultiwaySharedTypes").VideoQuality.cast(0)),n}function ie(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.cname=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.options=ae(t):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.type=o("MultiwaySharedTypes").SubscriptionType.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.trackId=t.readString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.cname===void 0&&(n.cname=""),n.type===void 0&&(n.type=o("MultiwaySharedTypes").SubscriptionType.cast(0)),n}function le(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).BOOL?n.restrictiveLogging=t.readBool():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).BOOL?n.verboseLogging=t.readBool():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.restrictiveLogging===void 0&&(n.restrictiveLogging=!0),n.verboseLogging===void 0&&(n.verboseLogging=!1),n}function se(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.userId=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.streamId=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I32?n.streamType=t.readI32():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).I32?n.renderWidth=t.readI32():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).I32?n.renderHeight=t.readI32():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.userId===void 0&&(n.userId=""),n.streamId===void 0&&(n.streamId=""),n.streamType===void 0&&(n.streamType=0),n.renderWidth===void 0&&(n.renderWidth=0),n.renderHeight===void 0&&(n.renderHeight=0),n}function ue(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.ipv4=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.ipv6=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I32?n.udpPort=t.readI32():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).I32?n.tcpPort=t.readI32():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).I32?n.sslTcpPort=t.readI32():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).I32?n.portInfoIdx=t.readI32():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).I32?n.tlsPort=t.readI32():t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).I32?n.credentialIdx=t.readI32():t.skip(a);break;case 9:a===(e||(e=r("ThriftTypes"))).STRING?n.turnUsername=t.readString():t.skip(a);break;case 10:a===(e||(e=r("ThriftTypes"))).STRING?n.turnPassword=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function ce(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.edgerayType=o("MultiwaySharedTypes").EdgerayType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.ipv4=t.readBinary():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.ipv6=t.readBinary():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.token=t.readBinary():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).I32?n.tokenIdx=t.readI32():t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).STRING?n.secret=t.readBinary():t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).I32?n.secretIdx=t.readI32():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function de(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.turns=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=ue(t);n.turns.push(u)}}else t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.edgerays=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=ce(t);n.edgerays.push(m)}}else t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.turnUsername=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.turnPassword=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function me(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.host=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I16?n.port=t.readI16():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.host===void 0&&(n.host=Uint8Array.of()),n.port===void 0&&(n.port=0),n}function pe(t){var n,o={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).I64)if(n==null)o.intValue=t.readI64().toString(),n="intValue";else throw new Error("more than one field have been deserialized in union type: QuickExperimentValue; current field: intValue, previous deserialized field: "+n);else t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).STRING)if(n==null)o.stringValue=t.readString(),n="stringValue";else throw new Error("more than one field have been deserialized in union type: QuickExperimentValue; current field: stringValue, previous deserialized field: "+n);else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),o}l.ServerInfo$DefaultConstructor=s,l.ClientSessionInfo$DefaultConstructor=u,l.Endpoint$DefaultConstructor=c,l.E2eeEnforcement$DefaultConstructor=d,l.SsrcGroup$DefaultConstructor=m,l.Media$DefaultConstructor=p,l.QuickExperiment$DefaultConstructor=_,l.QuickExperimentResult$DefaultConstructor=f,l.QuickExperimentExposureLoggingEvent$DefaultConstructor=g,l.ClientTrackInfo$DefaultConstructor=h,l.ClientMediaStatus$DefaultConstructor=y,l.SubscriptionOptions$DefaultConstructor=C,l.Subscription$DefaultConstructor=b,l.LoggingOptions$DefaultConstructor=v,l.ResolutionData$DefaultConstructor=S,l.TurnInfo$DefaultConstructor=R,l.EdgerayInfo$DefaultConstructor=L,l.RelayInfo$DefaultConstructor=E,l.TSocketAddress$DefaultConstructor=k,l.QuickExperimentValue$DefaultConstructor=I,l.serializeServerInfo=T,l.serializeClientSessionInfo=D,l.serializeEndpoint=x,l.serializeE2eeEnforcement=$,l.serializeSsrcGroup=P,l.serializeMedia=N,l.serializeQuickExperiment=M,l.serializeQuickExperimentResult=w,l.serializeQuickExperimentExposureLoggingEvent=A,l.serializeClientTrackInfo=F,l.serializeClientMediaStatus=O,l.serializeSubscriptionOptions=B,l.serializeSubscription=W,l.serializeLoggingOptions=q,l.serializeResolutionData=U,l.serializeTurnInfo=V,l.serializeEdgerayInfo=H,l.serializeRelayInfo=G,l.serializeTSocketAddress=z,l.serializeQuickExperimentValue=j,l.deserializeServerInfo=K,l.deserializeClientSessionInfo=Q,l.deserializeEndpoint=X,l.deserializeE2eeEnforcement=Y,l.deserializeSsrcGroup=J,l.deserializeMedia=Z,l.deserializeQuickExperiment=ee,l.deserializeQuickExperimentResult=te,l.deserializeQuickExperimentExposureLoggingEvent=ne,l.deserializeClientTrackInfo=re,l.deserializeClientMediaStatus=oe,l.deserializeSubscriptionOptions=ae,l.deserializeSubscription=ie,l.deserializeLoggingOptions=le,l.deserializeResolutionData=se,l.deserializeTurnInfo=ue,l.deserializeEdgerayInfo=ce,l.deserializeRelayInfo=de,l.deserializeTSocketAddress=me,l.deserializeQuickExperimentValue=pe}),98);
__d("WebrtcSignalingCommonSerializers",["ThriftTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{topic:"",data:Uint8Array.of()}}function u(t,n){if(n.writeStructBegin("GenericDataMessage"),n.writeFieldBegin({fname:"topic",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.topic!=null)n.writeString(t.topic);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"data",ftype:e.STRING,fid:2}),t.data!=null)n.writeBinary(t.data);else{var a=Uint8Array.of();n.writeBinary(a)}n.writeFieldEnd(),t.e2eEncryptedData!=null&&(n.writeFieldBegin({fname:"e2eEncryptedData",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.e2eEncryptedData),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function c(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.topic=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.data=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.e2eEncryptedData=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.topic===void 0&&(n.topic=""),n.data===void 0&&(n.data=Uint8Array.of()),n}l.GenericDataMessage$DefaultConstructor=s,l.serializeGenericDataMessage=u,l.deserializeGenericDataMessage=c}),98);
__d("DataMessageSerializers",["MultiwaySharedSerializers","MultiwaySharedTypes","ThriftTypes","WebrtcSignalingCommonSerializers"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{topic_DEPRECATED:""}}function u(){return{userId:""}}function c(){return{userId:"",cname:"",trackIds:[],transactionId:"0"}}function d(){return{cname:"",quality_DEPRECATED:o("MultiwaySharedTypes").VideoQuality.cast(0)}}function m(){return{userId:"",bottleneckBps:0}}function p(){return{bottleneckUplinksByLayer:{}}}function _(){return{duplicationAmount:0,delayMs:0}}function f(){return{}}function g(){return{}}function h(){return{primarySpeakerUserId:"",transactionId:"0"}}function y(){return{}}function C(){return{signalingMessagePayload:Uint8Array.of()}}function b(){return{signalingMessagePayload:Uint8Array.of()}}function v(){return{subscriptionMessagePayload:[]}}function S(){return{}}function R(){return{}}function L(){return{nodeIdToUserIdMap:{},nodeIdToServiceTypeMap:{}}}function E(){return{}}function k(){return{header:s()}}function I(t,n){if(n.writeStructBegin("DataHeader"),t.sender!=null&&(n.writeFieldBegin({fname:"sender",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.sender),n.writeFieldEnd()),n.writeFieldBegin({fname:"topic_DEPRECATED",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),t.topic_DEPRECATED!=null)n.writeString(t.topic_DEPRECATED);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),t.recipients!=null){n.writeFieldBegin({fname:"recipients",ftype:(e||(e=r("ThriftTypes"))).SET,fid:3}),n.writeSetBegin({etype:e.STRING,size:t.recipients.size});for(var a of t.recipients)n.writeString(a);n.writeSetEnd(),n.writeFieldEnd()}if(t.serviceSender!=null){var i;n.writeFieldBegin({fname:"serviceSender",ftype:(e||(e=r("ThriftTypes"))).I32,fid:4}),n.writeI32((i=t.serviceSender)!=null?i:0),n.writeFieldEnd()}if(t.serviceRecipients!=null){n.writeFieldBegin({fname:"serviceRecipients",ftype:(e||(e=r("ThriftTypes"))).SET,fid:5}),n.writeSetBegin({etype:e.I32,size:t.serviceRecipients.size});for(var l of t.serviceRecipients)n.writeI32(l!=null?l:0);n.writeSetEnd(),n.writeFieldEnd()}t.shouldSendToAllUsers!=null&&(n.writeFieldBegin({fname:"shouldSendToAllUsers",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:6}),n.writeBool(t.shouldSendToAllUsers),n.writeFieldEnd()),t.senderE2eeId!=null&&(n.writeFieldBegin({fname:"senderE2eeId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeBinary(t.senderE2eeId),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function T(t,n){if(n.writeStructBegin("SpeakerDetail"),n.writeFieldBegin({fname:"userId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.userId!=null)n.writeString(t.userId);else{var o="";n.writeString(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function D(t,n){if(n.writeStructBegin("DominantSpeakerNotification"),n.writeFieldBegin({fname:"userId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.userId!=null)n.writeString(t.userId);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"cname",ftype:e.STRING,fid:2}),t.cname!=null)n.writeString(t.cname);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"trackIds",ftype:e.LIST,fid:4}),t.trackIds!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:t.trackIds.length});for(var i of t.trackIds)n.writeString(i);n.writeListEnd()}else{var l=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:l.length});for(var s of l)n.writeString(s);n.writeListEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"transactionId",ftype:e.I64,fid:5}),t.transactionId!=null)n.writeI64(BigInt(t.transactionId));else{var u="0";n.writeI64(BigInt(u))}if(n.writeFieldEnd(),t.dominantSpeakers!=null){n.writeFieldBegin({fname:"dominantSpeakers",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:6}),n.writeListBegin({etype:e.STRUCT,size:t.dominantSpeakers.length});for(var c of t.dominantSpeakers)T(c,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function x(t,n){if(n.writeStructBegin("VideoUploadRequest"),n.writeFieldBegin({fname:"cname",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.cname!=null)n.writeString(t.cname);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"quality_DEPRECATED",ftype:e.I32,fid:2}),t.quality_DEPRECATED!=null){var i;n.writeI32((i=t.quality_DEPRECATED)!=null?i:0)}else{var l=o("MultiwaySharedTypes").VideoQuality.cast(0);n.writeI32(l!=null?l:0)}if(n.writeFieldEnd(),t.qualityMask!=null&&(n.writeFieldBegin({fname:"qualityMask",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32(t.qualityMask),n.writeFieldEnd()),t.perSsrcTargetBitrateBpsMap!=null){n.writeFieldBegin({fname:"perSsrcTargetBitrateBpsMap",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:4}),n.writeMapBegin({ktype:e.I64,vtype:e.I64,size:Object.keys(t.perSsrcTargetBitrateBpsMap).length});for(var s of Object.entries(t.perSsrcTargetBitrateBpsMap)){var u=s[0],c=s[1];n.writeI64(BigInt(u)),n.writeI64(BigInt(c))}n.writeMapEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function $(t,n){if(n.writeStructBegin("ReceiverBottleneck"),n.writeFieldBegin({fname:"userId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.userId!=null)n.writeString(t.userId);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"bottleneckBps",ftype:e.I32,fid:2}),t.bottleneckBps!=null)n.writeI32(t.bottleneckBps);else{var a=0;n.writeI32(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function P(t,n){if(n.writeStructBegin("BweDebugInfo"),n.writeFieldBegin({fname:"bottleneckUplinksByLayer",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),t.bottleneckUplinksByLayer!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(t.bottleneckUplinksByLayer).length});for(var o of Object.entries(t.bottleneckUplinksByLayer)){var a=o[0],i=o[1];n.writeI32(Number(a)),$(i,n)}n.writeMapEnd()}else{var l={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(l).length});for(var s of Object.entries(l)){var u=s[0],c=s[1];n.writeI32(Number(u)),$(c,n)}n.writeMapEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function N(t,n){if(n.writeStructBegin("AudioDuplicationDebugInfo"),n.writeFieldBegin({fname:"duplicationAmount",ftype:(e||(e=r("ThriftTypes"))).I16,fid:1}),t.duplicationAmount!=null)n.writeI16(t.duplicationAmount);else{var o=0;n.writeI16(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"delayMs",ftype:e.I16,fid:2}),t.delayMs!=null)n.writeI16(t.delayMs);else{var a=0;n.writeI16(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function M(t,n){n.writeStructBegin("ReceiveTrackDebugInfo"),t.trackId!=null&&(n.writeFieldBegin({fname:"trackId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.trackId),n.writeFieldEnd()),t.numSimulcastLayersSupported!=null&&(n.writeFieldBegin({fname:"numSimulcastLayersSupported",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),n.writeI32(t.numSimulcastLayersSupported),n.writeFieldEnd()),t.numSimulcastLayersAllocated!=null&&(n.writeFieldBegin({fname:"numSimulcastLayersAllocated",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32(t.numSimulcastLayersAllocated),n.writeFieldEnd()),t.spatialLayerIndex!=null&&(n.writeFieldBegin({fname:"spatialLayerIndex",ftype:(e||(e=r("ThriftTypes"))).I32,fid:4}),n.writeI32(t.spatialLayerIndex),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function w(t,n){if(n.writeStructBegin("DebugInfo"),t.audioDuplicationDebugInfo!=null&&(n.writeFieldBegin({fname:"audioDuplicationDebugInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),N(t.audioDuplicationDebugInfo,n),n.writeFieldEnd()),t.receiveTrackDebugInfo!=null){n.writeFieldBegin({fname:"receiveTrackDebugInfo",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.receiveTrackDebugInfo.length});for(var o of t.receiveTrackDebugInfo)M(o,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function A(t,n){if(n.writeStructBegin("DominantSpeakerInfo"),n.writeFieldBegin({fname:"primarySpeakerUserId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.primarySpeakerUserId!=null)n.writeString(t.primarySpeakerUserId);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"transactionId",ftype:e.I64,fid:2}),t.transactionId!=null)n.writeI64(BigInt(t.transactionId));else{var a="0";n.writeI64(BigInt(a))}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function F(t,n){if(n.writeStructBegin("VideoUploadInfo"),t.qualityMask!=null&&(n.writeFieldBegin({fname:"qualityMask",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32(t.qualityMask),n.writeFieldEnd()),t.perSsrcTargetBitrateBpsMap!=null){n.writeFieldBegin({fname:"perSsrcTargetBitrateBpsMap",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:2}),n.writeMapBegin({ktype:e.I64,vtype:e.I64,size:Object.keys(t.perSsrcTargetBitrateBpsMap).length});for(var o of Object.entries(t.perSsrcTargetBitrateBpsMap)){var a=o[0],i=o[1];n.writeI64(BigInt(a)),n.writeI64(BigInt(i))}n.writeMapEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function O(t,n){if(n.writeStructBegin("SignalingMessageToClient"),n.writeFieldBegin({fname:"signalingMessagePayload",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.signalingMessagePayload!=null)n.writeBinary(t.signalingMessagePayload);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.version!=null&&(n.writeFieldBegin({fname:"version",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),n.writeI64(BigInt(t.version)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function B(t,n){if(n.writeStructBegin("SignalingMessageFromClient"),n.writeFieldBegin({fname:"signalingMessagePayload",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.signalingMessagePayload!=null)n.writeBinary(t.signalingMessagePayload);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.version!=null&&(n.writeFieldBegin({fname:"version",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),n.writeI64(BigInt(t.version)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function W(t,n){if(n.writeStructBegin("SubscriptionMessageFromClient"),n.writeFieldBegin({fname:"subscriptionMessagePayload",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),t.subscriptionMessagePayload!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.subscriptionMessagePayload.length});for(var a of t.subscriptionMessagePayload)o("MultiwaySharedSerializers").serializeSubscription(a,n);n.writeListEnd()}else{var i=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:i.length});for(var l of i)o("MultiwaySharedSerializers").serializeSubscription(l,n);n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function q(t,n){if(n.writeStructBegin("RenderResolutionMessageFromClient"),t.renderResolutionMap!=null){n.writeFieldBegin({fname:"renderResolutionMap",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),n.writeMapBegin({ktype:e.STRING,vtype:e.MAP,size:Object.keys(t.renderResolutionMap).length});for(var a of Object.entries(t.renderResolutionMap)){var i=a[0],l=a[1];n.writeString(i),n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(l).length});for(var s of Object.entries(l)){var u,c=s[0],d=s[1];n.writeI32((u=Number(c))!=null?u:0),o("MultiwaySharedSerializers").serializeResolutionData(d,n)}n.writeMapEnd()}n.writeMapEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function U(t,n){if(n.writeStructBegin("RenderResolutionMessageToClient"),t.renderResolutionMap!=null){n.writeFieldBegin({fname:"renderResolutionMap",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),n.writeMapBegin({ktype:e.STRING,vtype:e.MAP,size:Object.keys(t.renderResolutionMap).length});for(var a of Object.entries(t.renderResolutionMap)){var i=a[0],l=a[1];n.writeString(i),n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(l).length});for(var s of Object.entries(l)){var u,c=s[0],d=s[1];n.writeI32((u=Number(c))!=null?u:0),o("MultiwaySharedSerializers").serializeResolutionData(d,n)}n.writeMapEnd()}n.writeMapEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function V(t,n){if(n.writeStructBegin("NodeIdNotification"),n.writeFieldBegin({fname:"nodeIdToUserIdMap",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),t.nodeIdToUserIdMap!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I64,vtype:e.I64,size:Object.keys(t.nodeIdToUserIdMap).length});for(var o of Object.entries(t.nodeIdToUserIdMap)){var a=o[0],i=o[1];n.writeI64(BigInt(a)),n.writeI64(BigInt(i))}n.writeMapEnd()}else{var l={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I64,vtype:e.I64,size:Object.keys(l).length});for(var s of Object.entries(l)){var u=s[0],c=s[1];n.writeI64(BigInt(u)),n.writeI64(BigInt(c))}n.writeMapEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"nodeIdToServiceTypeMap",ftype:e.MAP,fid:2}),t.nodeIdToServiceTypeMap!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I64,vtype:e.I32,size:Object.keys(t.nodeIdToServiceTypeMap).length});for(var d of Object.entries(t.nodeIdToServiceTypeMap)){var m=d[0],p=d[1];n.writeI64(BigInt(m)),n.writeI32(p!=null?p:0)}n.writeMapEnd()}else{var _={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I64,vtype:e.I32,size:Object.keys(_).length});for(var f of Object.entries(_)){var g=f[0],h=f[1];n.writeI64(BigInt(g)),n.writeI32(h!=null?h:0)}n.writeMapEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function H(t,n){n.writeStructBegin("DataMessageBody"),t.genericMessage!=null&&(n.writeFieldBegin({fname:"genericMessage",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),o("WebrtcSignalingCommonSerializers").serializeGenericDataMessage(t.genericMessage,n),n.writeFieldEnd()),t.dominantSpeakerNotification!=null&&(n.writeFieldBegin({fname:"dominantSpeakerNotification",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),D(t.dominantSpeakerNotification,n),n.writeFieldEnd()),t.videoUploadRequest!=null&&(n.writeFieldBegin({fname:"videoUploadRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),x(t.videoUploadRequest,n),n.writeFieldEnd()),t.dominantSpeakerSignalingInfo!=null&&(n.writeFieldBegin({fname:"dominantSpeakerSignalingInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),A(t.dominantSpeakerSignalingInfo,n),n.writeFieldEnd()),t.bweDebugInfo!=null&&(n.writeFieldBegin({fname:"bweDebugInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),P(t.bweDebugInfo,n),n.writeFieldEnd()),t.debugInfo!=null&&(n.writeFieldBegin({fname:"debugInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),w(t.debugInfo,n),n.writeFieldEnd()),t.videoUploadSignalingInfo!=null&&(n.writeFieldBegin({fname:"videoUploadSignalingInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),F(t.videoUploadSignalingInfo,n),n.writeFieldEnd()),t.signalingMessageToClient!=null&&(n.writeFieldBegin({fname:"signalingMessageToClient",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:8}),O(t.signalingMessageToClient,n),n.writeFieldEnd()),t.signalingMessageFromClient!=null&&(n.writeFieldBegin({fname:"signalingMessageFromClient",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:9}),B(t.signalingMessageFromClient,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function G(t,n){if(n.writeStructBegin("DataMessage"),n.writeFieldBegin({fname:"header",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),t.header!=null)I(t.header,n);else{var o=s();I(o,n)}n.writeFieldEnd(),t.data_DEPRECATED!=null&&(n.writeFieldBegin({fname:"data_DEPRECATED",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.data_DEPRECATED),n.writeFieldEnd()),t.body!=null&&(n.writeFieldBegin({fname:"body",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),H(t.body,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function z(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.sender=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.topic_DEPRECATED=t.readString():t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).SET){n.recipients=new Set;for(var s=t.readSetBegin(),u=0;u<s.size;u++){var c=t.readString();n.recipients.add(c)}}else t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.serviceSender=o("MultiwaySharedTypes").EndpointServiceType.cast(t.readI32()):t.skip(i);break;case 5:if(i===(e||(e=r("ThriftTypes"))).SET){n.serviceRecipients=new Set;for(var d=t.readSetBegin(),m=0;m<d.size;m++){var p=o("MultiwaySharedTypes").EndpointServiceType.cast(t.readI32());n.serviceRecipients.add(p)}}else t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).BOOL?n.shouldSendToAllUsers=t.readBool():t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRING?n.senderE2eeId=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.topic_DEPRECATED===void 0&&(n.topic_DEPRECATED=""),n}function j(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.userId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.userId===void 0&&(n.userId=""),n}function K(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.userId=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.cname=t.readString():t.skip(a);break;case 4:if(a===(e||(e=r("ThriftTypes"))).LIST){n.trackIds=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readString();n.trackIds.push(u)}}else t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).I64?n.transactionId=t.readI64().toString():t.skip(a);break;case 6:if(a===(e||(e=r("ThriftTypes"))).LIST){n.dominantSpeakers=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=j(t);n.dominantSpeakers.push(m)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.userId===void 0&&(n.userId=""),n.cname===void 0&&(n.cname=""),n.trackIds===void 0&&(n.trackIds=[]),n.transactionId===void 0&&(n.transactionId="0"),n}function Q(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.cname=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.quality_DEPRECATED=o("MultiwaySharedTypes").VideoQuality.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.qualityMask=t.readI32():t.skip(i);break;case 4:if(i===(e||(e=r("ThriftTypes"))).MAP){n.perSsrcTargetBitrateBpsMap={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){var c=t.readI64().toString(),d=t.readI64().toString();n.perSsrcTargetBitrateBpsMap[c]=d}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.cname===void 0&&(n.cname=""),n.quality_DEPRECATED===void 0&&(n.quality_DEPRECATED=o("MultiwaySharedTypes").VideoQuality.cast(0)),n}function X(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.userId=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I32?n.bottleneckBps=t.readI32():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.userId===void 0&&(n.userId=""),n.bottleneckBps===void 0&&(n.bottleneckBps=0),n}function Y(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).MAP){n.bottleneckUplinksByLayer={};for(var l=t.readMapBegin(),s=0;s<l.size;s++){var u=t.readI32(),c=X(t);n.bottleneckUplinksByLayer[u]=c}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.bottleneckUplinksByLayer===void 0&&(n.bottleneckUplinksByLayer={}),n}function J(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I16?n.duplicationAmount=t.readI16():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I16?n.delayMs=t.readI16():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.duplicationAmount===void 0&&(n.duplicationAmount=0),n.delayMs===void 0&&(n.delayMs=0),n}function Z(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.trackId=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I32?n.numSimulcastLayersSupported=t.readI32():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I32?n.numSimulcastLayersAllocated=t.readI32():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).I32?n.spatialLayerIndex=t.readI32():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function ee(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.audioDuplicationDebugInfo=J(t):t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.receiveTrackDebugInfo=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=Z(t);n.receiveTrackDebugInfo.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function te(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.primarySpeakerUserId=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.transactionId=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.primarySpeakerUserId===void 0&&(n.primarySpeakerUserId=""),n.transactionId===void 0&&(n.transactionId="0"),n}function ne(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I32?n.qualityMask=t.readI32():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).MAP){n.perSsrcTargetBitrateBpsMap={};for(var l=t.readMapBegin(),s=0;s<l.size;s++){var u=t.readI64().toString(),c=t.readI64().toString();n.perSsrcTargetBitrateBpsMap[u]=c}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function re(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.signalingMessagePayload=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.version=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.signalingMessagePayload===void 0&&(n.signalingMessagePayload=Uint8Array.of()),n}function oe(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.signalingMessagePayload=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.version=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.signalingMessagePayload===void 0&&(n.signalingMessagePayload=Uint8Array.of()),n}function ae(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).LIST){n.subscriptionMessagePayload=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("MultiwaySharedSerializers").deserializeSubscription(t);n.subscriptionMessagePayload.push(c)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.subscriptionMessagePayload===void 0&&(n.subscriptionMessagePayload=[]),n}function ie(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).MAP){n.renderResolutionMap={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){for(var c=t.readString(),d={},m=t.readMapBegin(),p=0;p<m.size;p++){var _=o("MultiwaySharedTypes").RenderedStreamType.cast(t.readI32()),f=o("MultiwaySharedSerializers").deserializeResolutionData(t);_!=null&&(d[_]=f)}n.renderResolutionMap[c]=d}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function le(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).MAP){n.renderResolutionMap={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){for(var c=t.readString(),d={},m=t.readMapBegin(),p=0;p<m.size;p++){var _=o("MultiwaySharedTypes").RenderedStreamType.cast(t.readI32()),f=o("MultiwaySharedSerializers").deserializeResolutionData(t);_!=null&&(d[_]=f)}n.renderResolutionMap[c]=d}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function se(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).MAP){n.nodeIdToUserIdMap={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){var c=t.readI64().toString(),d=t.readI64().toString();n.nodeIdToUserIdMap[c]=d}}else t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).MAP){n.nodeIdToServiceTypeMap={};for(var m=t.readMapBegin(),p=0;p<m.size;p++){var _=t.readI64().toString(),f=o("MultiwaySharedTypes").EndpointServiceType.cast(t.readI32());n.nodeIdToServiceTypeMap[_]=f}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.nodeIdToUserIdMap===void 0&&(n.nodeIdToUserIdMap={}),n.nodeIdToServiceTypeMap===void 0&&(n.nodeIdToServiceTypeMap={}),n}function ue(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.genericMessage=o("WebrtcSignalingCommonSerializers").deserializeGenericDataMessage(t):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.dominantSpeakerNotification=K(t):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRUCT?n.videoUploadRequest=Q(t):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRUCT?n.dominantSpeakerSignalingInfo=te(t):t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRUCT?n.bweDebugInfo=Y(t):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).STRUCT?n.debugInfo=ee(t):t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRUCT?n.videoUploadSignalingInfo=ne(t):t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).STRUCT?n.signalingMessageToClient=re(t):t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).STRUCT?n.signalingMessageFromClient=oe(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function ce(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.header=z(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.data_DEPRECATED=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRUCT?n.body=ue(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.header===void 0&&(n.header=s()),n}l.DataHeader$DefaultConstructor=s,l.SpeakerDetail$DefaultConstructor=u,l.DominantSpeakerNotification$DefaultConstructor=c,l.VideoUploadRequest$DefaultConstructor=d,l.ReceiverBottleneck$DefaultConstructor=m,l.BweDebugInfo$DefaultConstructor=p,l.AudioDuplicationDebugInfo$DefaultConstructor=_,l.ReceiveTrackDebugInfo$DefaultConstructor=f,l.DebugInfo$DefaultConstructor=g,l.DominantSpeakerInfo$DefaultConstructor=h,l.VideoUploadInfo$DefaultConstructor=y,l.SignalingMessageToClient$DefaultConstructor=C,l.SignalingMessageFromClient$DefaultConstructor=b,l.SubscriptionMessageFromClient$DefaultConstructor=v,l.RenderResolutionMessageFromClient$DefaultConstructor=S,l.RenderResolutionMessageToClient$DefaultConstructor=R,l.NodeIdNotification$DefaultConstructor=L,l.DataMessageBody$DefaultConstructor=E,l.DataMessage$DefaultConstructor=k,l.serializeDataHeader=I,l.serializeSpeakerDetail=T,l.serializeDominantSpeakerNotification=D,l.serializeVideoUploadRequest=x,l.serializeReceiverBottleneck=$,l.serializeBweDebugInfo=P,l.serializeAudioDuplicationDebugInfo=N,l.serializeReceiveTrackDebugInfo=M,l.serializeDebugInfo=w,l.serializeDominantSpeakerInfo=A,l.serializeVideoUploadInfo=F,l.serializeSignalingMessageToClient=O,l.serializeSignalingMessageFromClient=B,l.serializeSubscriptionMessageFromClient=W,l.serializeRenderResolutionMessageFromClient=q,l.serializeRenderResolutionMessageToClient=U,l.serializeNodeIdNotification=V,l.serializeDataMessageBody=H,l.serializeDataMessage=G,l.deserializeDataHeader=z,l.deserializeSpeakerDetail=j,l.deserializeDominantSpeakerNotification=K,l.deserializeVideoUploadRequest=Q,l.deserializeReceiverBottleneck=X,l.deserializeBweDebugInfo=Y,l.deserializeAudioDuplicationDebugInfo=J,l.deserializeReceiveTrackDebugInfo=Z,l.deserializeDebugInfo=ee,l.deserializeDominantSpeakerInfo=te,l.deserializeVideoUploadInfo=ne,l.deserializeSignalingMessageToClient=re,l.deserializeSignalingMessageFromClient=oe,l.deserializeSubscriptionMessageFromClient=ae,l.deserializeRenderResolutionMessageFromClient=ie,l.deserializeRenderResolutionMessageToClient=le,l.deserializeNodeIdNotification=se,l.deserializeDataMessageBody=ue,l.deserializeDataMessage=ce}),98);
__d("DataMessageTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({OK:200,NOT_FOUND:404});a.exports={DataMessageStatusCode:e}}),null);
__d("HorizonWebMqttChannel",["CurrentUser","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig"],(function(t,n,r,o,a,i,l){"use strict";r("MqttEnvInitializer").initialize();function e(){var e;return o("MqttEnv").setIsUserLoggedInNow(r("CurrentUser").isLoggedIn),new(r("MqttChannel"))({appId:(e=r("MqttWebConfig")).appID,capabilities:e.capabilities,chatVisibility:!0,clientCapabilities:e.clientCapabilities,endpoint:e.endpoint,initialSubscribedTopics:e.subscribedTopics,pageId:null,phpOverride:e.hostNameOverride,pollingEndpoint:e.pollingEndpoint,userFbid:e.fbid})}var s=null;function u(){return s==null&&(s=e()),s}function c(){s!=null&&(s.shutdown(),s=null)}l.getHorizonWebMqttChannelInstance=u,l.shutdownAndClear=c}),98);
__d("LiveChatWidgetMqttChannel",["MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig"],(function(t,n,r,o,a,i,l){"use strict";r("MqttEnvInitializer").initialize();function e(){var e;return o("MqttEnv").setIsUserLoggedInNow(function(){return!0}),new(r("MqttChannel"))({appId:0x70127cc7da0a0,capabilities:(e=r("MqttWebConfig")).capabilities,chatVisibility:!1,clientCapabilities:e.clientCapabilities,endpoint:e.endpoint,initialSubscribedTopics:e.subscribedTopics,pageId:null,phpOverride:e.hostNameOverride,pollingEndpoint:e.pollingEndpoint,userFbid:e.fbid})}var s=null;function u(){return s==null&&(s=e()),s}function c(){s!=null&&(s.shutdown(),s=null)}l.getLiveChatWidgetMqttChannelInstance=u,l.shutdownAndClear=c}),98);
__d("MDCMqttChannel",["CurrentUser","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";r("MqttEnvInitializer").initialize();function e(e){o("MqttEnv").setIsUserLoggedInNow(r("CurrentUser").isLoggedIn);var t=r("CurrentUser").getAppID()==null?0xc7269b363f3c:Number(r("CurrentUser").getAppID());return new(r("MqttChannel"))({appId:t,capabilities:r("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:r("MqttWebConfig").clientCapabilities,clientType:"websocket",deviceId:r("uuidv4")(),endpoint:r("MqttWebConfig").endpoint,initialSubscribedTopics:r("MqttWebConfig").subscribedTopics,phpOverride:r("MqttWebConfig").hostNameOverride,pollingEndpoint:r("MqttWebConfig").pollingEndpoint,userFbid:r("CurrentUser").getPossiblyNonFacebookUserID()})}var s=null;function u(t){return s==null&&(s=e(t)),s}function c(){return s}function d(){s!=null&&(s.shutdown(),s=null)}l.getMDCMqttChannelInstance=u,l.getMDCMqttChannelInstanceDoNotCreate=c,l.shutdownAndClear=d}),98);
__d("MqttThriftHeaderSerializers",["ThriftTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(t,n){n.writeStructBegin("MqttThriftHeader"),t.traceInfo!=null&&(n.writeFieldBegin({fname:"traceInfo",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.traceInfo),n.writeFieldEnd()),t.coreContextRequestId!=null&&(n.writeFieldBegin({fname:"coreContextRequestId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.coreContextRequestId),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function c(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.traceInfo=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.coreContextRequestId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}l.MqttThriftHeader$DefaultConstructor=s,l.serializeMqttThriftHeader=u,l.deserializeMqttThriftHeader=c}),98);
__d("MultiwayCommonTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum"))({STRING:0,THRIFT:1,BOTH:2}),s=e({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503}),u=e({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,MWS_MESSAGE_SENT_TO_INCORRECT_REGION:1005,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,INVALID_BROADCAST_ID:2027,INVALID_ENDPOINT_CONFIG:2028,INVALID_E2EE_STATE:2029,SFU_MODE_PREVENTED:2030,INVALID_CONFERENCE_STATE:2031,JOIN_REQUEST_DENIED:2032,EMPTY_USER_IDS:2033,MISSING_SDP_CONNECT_REQUEST:2034,CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:2035,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_ENDPOINT_USER_ID:2120,EMPTY_ENDPOINT_USER_ID:2121,MISSING_BODY_TRANSFER_REQUEST:2122,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,INVALID_MULTIWAY_PARAMS:3009,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,RESOLUTION_DISABLED:4027,BROADCAST_ID_MISSING:4028,SDP_UNSET_ON_P2P_OFFER:4029,LEGACY_OFFER_MISSING_REQUIRED_VALUE:4031,MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:4032,CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:4033,OTHER_USER_ANSWERED_THE_CALL:4034,MEDIA_SERVER_DESERIALIZATION_ERROR:4035,REMOTE_SDP_TRACKID_MISMATCH:4036,SIGNALING_MESSAGE_TO_CLIENT_DROPPED:4037,DATA_CHANNEL_ENDPOINT_GONE:4038,DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:4039,CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:4040,P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:4041,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:4042,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:4043,REQUEST_TIMEOUT:4044,TOO_MANY_MEDIA_TRACKS_IN_SDP:4045,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,CLIENT_TERMINATED:5010,JOIN_SESSION_RESULT_MISSING:5012,LOGGING_POLICY_RESULT_MISSING:5013,INVITE_USERS_RESULT_MISSING:5014,STATE_SYNC_RESULT_MISSING:5015,ENDPOINT_INFO_RESULT_MISSING:5016,CONFERENCE_NAME_MISMATCH:5017,UNEXPECTED_TRANSPORT_PARAMS_CONFERENCE_NAME:5018,SESSION_CONFIGURATION_RESULT_MISSING:5019,REMOVE_USERS_RESULT_MISSING:5020,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,UNSUPPORTED_CAPABILITIES:6008,PRODUCT_SERVER_DEFINED_END_REASON:6009,WWW_KILLSWITCHED_REQUEST:6010,CONFLICTING_MEDIA_PATH:6011,CONFLICTING_MEDIA_STATUS:6012,CONFLICTING_SESSION_DESCRIPTION:6013,OK:9e3}),c=e({NONE:0,INFO:1,ERROR:2}),d=e({SUCCESS:0,ERROR:1,SESSION_NOT_FOUND:10,SESSION_MISMATCH:11,SESSION_TERMINATING:12,CONNECTION_ALREADY_EXIST:20,CONNECTION_OLD_EXIST:21,CONNECTION_NOT_FOUND:23,CONNECTION_MISMATCH:24,SDP_INVALID:30,SDP_NEGOTIATION_FAILED:31,EXCEEDED_MAX_PARTICIPANT_COUNT:40,UNAUTHORIZED:50}),m=e({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26,TRANSFER:27,WAKEUP:28}),p=e({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:8,WEBRTC_ERROR:9,CONNECTION_DROPPED:10}),_=e({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14,ANSWERED_BY_OTHER_USER:15,PARTICIPANT_SELF_TERMINATION:16,PARTICIPANT_REJOIN:17,LONG_LASTING_AUDIO_ISSUE:18,PRIMARY_ENDPOINT_HANGUP:19,RECONNECT_FAILED:20,E2EE_HARDENING_ERROR:21,CALL_ENDED_BY_EXTENSION:22,CALL_ENDED_BY_OVER_CAPACITY:23}),f=e({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7,SUPPORT_MWPP_DEESCALATION:8,SUPPORT_PARTICIPANT_STATE_UNCALLABLE:9,SUPPORT_MULTIPLE_VIDEO_STREAMS:10,REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED:11,SUPPORT_MULTISTREAM_FEC:12,SUPPORT_DELTA_SMU:13,REQUIRE_DEFAULT_CHANNEL_SCREENSHARE:14,SUPPORT_SCREENSHARE_FLAG_IN_JOIN_RESPONSE_AND_SMU:15,SUPPORT_TEMPORAL_LAYER_JBE:16,REQUIRES_P2P_RELAY_INFO_VIA_SIGNALING:17,SUPPORT_NUMERIC_TOPICS:18,SUPPORT_PSEUDO_QUIC_CONNECTION:19,SUPPORT_SDP_SENDRECV:20}),g=e({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6,LIVE_AUDIO_ROOM:7,LIVE_WITH_ROOM:8}),h=e({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10}),y=e({ACTIVE:0,TERMINATED:1}),C=e({UNKNOWN:0,ACTIVE:1,TERMINATED:2}),b=e({DENIED:0,APPROVED:1}),v=e({UNKNOWN:0,SIGNALING_DATA_MESSAGE:1,STATE_SYNC_UPDATE:2,STATE_SYNC_SNAPSHOT:3}),S=e({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17,UNCALLABLE_DELAYED:18}),R=e({PRANSWER:1001,INITIAL_ANSWER_TO_P2P_CALLER:1002,DEESCALATE_OFFER_TO_P2P_CALLEE:1003,DEESCALATE_ANSWER_TO_P2P_CALLER:1004,REQUEST_DEESCALATE_TO_P2P_CALLER:1005,REQUEST_ESCALATE:1006,REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:1007,REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:1008,PARTICIPANT_ADDED:1009,PARTICIPANT_REMOVED:1010,FIRST_REMOTE_ALERTED_FOR_INITIATOR:2001,FIRST_REMOTE_ANSWERED_FOR_INITIATOR:2002,CONTAIN_PENDING_APPROVAL_PARTICIPANTS:2003,KEEP_ALIVE_PING:3001,IS_INITIATOR:4001,PREGEN_SDP:4002}),L=e({PRIMARY:0,SECONDARY:1}),E=e({UNKNOWN:0,MEDIA_CONNECTED:1}),k=e({JoinRequest:"joinRequest",JoinResponse:"joinResponse",ServerMediaUpdateRequest:"serverMediaUpdateRequest",ServerMediaUpdateResponse:"serverMediaUpdateResponse",HangupRequest:"hangupRequest",IceCandidateRequest:"iceCandidateRequest",RingRequest:"ringRequest",RingResponse:"ringResponse",DismissRequest:"dismissRequest",ConferenceStateRequest:"conferenceStateRequest",ConferenceStateResponse:"conferenceStateResponse",AddParticipantsRequest:"addParticipantsRequest",SubscriptionRequest:"subscriptionRequest",ClientMediaUpdateRequest:"clientMediaUpdateRequest",ClientMediaUpdateResponse:"clientMediaUpdateResponse",DataMessageRequest:"dataMessageRequest",RemoveParticipantsRequest:"removeParticipantsRequest",DataMessageResponse:"dataMessageResponse",UpdateRequest:"updateRequest",UpdateResponse:"updateResponse",NotifyRequest:"notifyRequest",NotifyResponse:"notifyResponse",ConnectRequest:"connectRequest",ConnectResponse:"connectResponse",ClientEventRequest:"clientEventRequest",ClientEventResponse:"clientEventResponse",UnsubscribeRequest:"unsubscribeRequest",UnsubscribeResponse:"unsubscribeResponse",ApprovalRequest:"approvalRequest",TransferRequest:"transferRequest"});a.exports={ApprovalStatus:b,Capability:f,ClientEventType:E,DeviceStatus:h,DismissReason:_,E2eeDataMessageType:v,ExtensionSessionStatus:C,HangupReason:p,JoinMode:L,MediaConnectionStatus:y,MessageTag:R,MessageType:m,ParticipantCallState:S,RingType:g,RtcApiStatusCode:d,RtcLogSeverity:c,RtcMessageBodyVariant$Types:k,RtcResponseStatusCode:s,RtcResponseSubCode:u,SdpPayloadType:l}}),null);
__d("StateSyncSerializers",["ThriftTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{version:0}}function u(){return{stateStore:{}}}function c(t,n){if(n.writeStructBegin("State"),n.writeFieldBegin({fname:"version",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.version!=null)n.writeI32(t.version);else{var o=0;n.writeI32(o)}n.writeFieldEnd(),t.data!=null&&(n.writeFieldBegin({fname:"data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function d(t,n){if(n.writeStructBegin("Snapshot"),n.writeFieldBegin({fname:"stateStore",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),t.stateStore!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(t.stateStore).length});for(var o of Object.entries(t.stateStore)){var a=o[0],i=o[1];n.writeString(a),c(i,n)}n.writeMapEnd()}else{var l={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(l).length});for(var s of Object.entries(l)){var u=s[0],d=s[1];n.writeString(u),c(d,n)}n.writeMapEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function m(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I32?n.version=t.readI32():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.version===void 0&&(n.version=0),n}function p(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).MAP){n.stateStore={};for(var l=t.readMapBegin(),s=0;s<l.size;s++){var u=t.readString(),c=m(t);n.stateStore[u]=c}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.stateStore===void 0&&(n.stateStore={}),n}l.State$DefaultConstructor=s,l.Snapshot$DefaultConstructor=u,l.serializeState=c,l.serializeSnapshot=d,l.deserializeState=m,l.deserializeSnapshot=p}),98);
__d("StateSyncTopicsConfigTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum"))({UNKNOWN:0,INTERNAL:1,EXTERNAL:2}),s=e({UNKNOWN:0,PARTICIPANT_JOIN:100,PARTICIPANT_UPDATE:101,PARTICIPANT_LEAVE:102,PARTICIPANT_NEGOTIATED:103,PARTICIPANT_SDP_CHANGED:104,EXTENSION_CREATION:201,EXTENSION_JOIN:202,EXTENSION_UPDATE:203,EXTENSION_LEAVE:204,EXTENSION_REQUEST:205,CONFERENCE_UPDATE:501,DOMINANT_SPEAKER_UPDATE:1001,MEDIA_ASPECT_RATIO_UPDATE:1002,TIMER_FIRED:1003,MEDIA_PATH_CHANGED:1004,PARTICIPANTS_ACKED_MEDIA:1005}),u=e({UNKNOWN:0,ANY_PARTICIPANT_SUBSCRIBED:1,ALWAYS_RESOLVE:2}),c=e({CACHIUS:1,IRIS:2}),d=e({Config_engine:1,E2eeState:2,Media_information:3,Breakout:4,Countdown_timer:5,Effect_match:6,Emoji_reactions:7,Entered_avatars_mode:8,Moderator_controls:9,Polls:10,Raised_hands_queue:11,Xac_calling:12,Action_items:13,Can_you_see_my_screen:14,Collage:15,Companion:16,Coplay:17,Coview:18,Custom_video_capabilities:19,Dropin:20,Dtmf:21,E2ee_v2_msg:22,Effect_sync:23,Et_pluto_activity:24,Et_pluto_session:25,Et_test_activity:26,Et_test_session:27,Et_tubi_activity:28,Et_tubi_session:29,External_resolution_enabled:30,Hyperspace_copresence_state:31,Hyperspace_mic_state:32,Intenticons:33,Live_stream:34,Live_stream_app_message:35,Max_video_subscriptions:36,Media_sync:37,Media_sync_autoplay:38,Meeting_assistant:39,Meeting_transcription:40,Morpheo_grid:41,Multipeer_ar:42,Number_of_people:43,Opaque_blob:44,Photo_booth:45,Qna:46,Quizzes:47,Reactions:48,Role_assignments:49,Room_features_availability:50,Rooms_notes:51,Screenshare_floor_control:52,Screenshare_single_floor_control:53,Sctp_negotiation:54,Sideband:55,Simple:56,Simple_external:57,Simple_pass_through:58,Simple_passthrough:59,Snippets:60,Sound_effects:61,Whiteboard:62,Whiteboard_messenger:63,Workroom:64,Workrooms_ask_everyone_to_open:65,Workrooms_vr:66,Avatar_transport_state:67,Ambisonic:68,Cathode_extension:69,Biz_calling:70,Work_costreaming:71,Conversation_bot:72,Voip_zone:73,Admin_initiated_casting:74,Smart_glasses_assistant:75,Codec_avatar_2d:76,Custom_media_routing:77,Generic_floor_control:78});a.exports={CryptoAuthVerifierIdentity:c,DataSource:s,DataSourceCondition:u,ResolutionPath:l,TopicId:d}}),null);
__d("WebrtcEnumsTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum"))({OFFER:0,ANSWER:1,ICE_CANDIDATE:2,OK:3,HANG_UP:4,OTHER_DISMISS:5,PRANSWER:7,PING:8,PING_ACK:9,ICE_RESTART_OFFER:10,ICE_RESTART_ANSWER:11,OFFER_ACK:12,ANSWER_ACK:13,NOTIFY_MEDIA_STATE:14,ACK:15,INVALID:16,OFFER_NACK:17,NACK:18,VIDEO_REQUEST:19,SDP_UPDATE:20,SWITCH_TO_MULTIWAY:28,NEGOTIATE:30,PR_OFFER_ACK:32,CLIENT_REPORTED_EVENT:33}),s=e({OFFER:0,ANSWER:1}),u=e({LL_NIL:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5}),c=e({IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,MICROPHONE_PERMISSION_DENIED:20,CAMERA_PERMISSION_DENIED:21,SESSION_MIGRATED:22,RING_MUTED:23,MAX_ALLOWED_PARTICIPANTS_REACHED:24,CALLEE_REQUIRES_MULTIWAY:25,LIVE_NOT_ACKED:26,TX_ACK_TIMEDOUT:27,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:28,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:29,ANSWERED_BY_OTHER_USER:30,LONG_LASTING_AUDIO_ISSUE:31,ADMIN_CALLING_OWN_PAGE:32,PAGE_CALLS_BLOCKED:33}),d=e({UDP:0,TCP:1,SSLTCP:2}),m=e({HOST:0,SERVER_REFLEXIVE:1,PEER_REFLEXIVE:2,RELAY:3}),p=e({TCPTYPE_NONE:0,TCPTYPE_PASSIVE:1,TCPTYPE_ACTIVE:2,TCPTYPE_SIMOPEN:3}),_=e({SENDONLY:0,SENDRECV:1,RECVONLY:2,INACTIVE:3}),f=e({AUDIO:0,VIDEO:1,DATA:2}),g=e({AUDIO:0,VIDEO:1,SCREEN:2}),h=e({AES_CM_128_HMAC_SHA1_80:0,AES_CM_128_HMAC_SHA1_32:1,F8_128_HMAC_SHA1_80:2,AEAD_AES_256_GCM:8}),y=e({RTP_SAVPF:0,DTLS_SCTP:1,SCTP:2}),C=e({URN_IETF_PARAMS_RTP_HDREXT_SSRC_AUDIO_LEVEL:0,URN_IETF_PARAMS_RTP_HDREXT_TOFFSET:1,IETF_DRAFT_HOLMER_RMCAT_TRANSPORT_WIDE_CC_01:2,URN_3GPP_VIDEO_ORIENTATION:3,ABS_SEND_TIME:4,PLAYOUT_DELAY:5,VIDEO_CONTENT_TYPE:6,VIDEO_TIMING:7,RTP_MID:8,RTP_STREAM_ID:9,RTP_REPAIRED_STREAM_ID:10,ENCRYPT_EXTENSIONS:11,FRAME_MARKING:12,GENERIC_FRAME_DESCRIPTOR:13,RTP_LOSS_INFO:14,RTP_CONGESTION_INFO:15,RTP_AUDIO_DROP_INFO:16,FRAME_ENCRYPTION_INFO:17,GENERIC_FRAME_DESCRIPTOR_01:18,DEPENDENCY_DESCRIPTOR:19,COLOR_SPACE:20,ABS_CAPTURE_TIME:21,VIDEO_FRAME_TRACKING_ID:22,VIDEO_FRAME_INFO:23}),b=e({ISAC:0,SPEEX_ISAC_OBSOLETE:1,SPEEX:2,OPUS:3,PCMU_OBSOLETE:4,PCMA_OBSOLETE:5,CN:6,TELEPHONE_EVENT:7,VP8:8,RED:9,ULPFEC:10,H264:17,ISPX_WB_2:32,GOOGLE_DATA:33,AAC:36,AAC_LD:37,VP9:96,GOOGLE_SCTP_DATA:97,H265:98,RTX:99,FLEXFEC:100,MULTIPLEX:101,VIDEO_DATA:102,AV1:103,MLOW:104,MLOW_RED:105,RSFEC:106}),v=e({SILENCEBIT_OBSOLETE:0,SPEEXUSEJITTERBIT_OBSOLETE:1,USEINBANDFEC:2,USEADAPTIVEFEC_OBSOLETE:3,EXTERNALBWE_OBSOLETE:4,FEC_BEI_OBSOLETE:5,ISPX_ADAPTIVE_FEC:6,CBR:7,USEDTX:8}),S=e({MINPTIME:0,MAXAVERAGEBITRATE:1,SPROP_STEREO:2,STEREO:3,MAXPTIME:4,PTIME:5,FEC_BEI_OBSOLETE:6,PORT:7,H264PROFILELEVELID:8,PACKETIZATION_MODE:9,LEVEL_ASYMMETRY_ALLOWED:10,APT:11,MAXPLAYBACKRATE:12,REPAIR_WINDOW:13,EMPTY_KEY:14}),R=e({CR_NONE:0,CR_ACTIVE:1,CR_PASSIVE:2,CR_ACTPASS:3,CR_HOLDCONN:4}),L=e({EVENT_NONE:0,EVENT_MEDIA_CONNECTED:1});a.exports={CallEndReason:c,ClientReportedEventType:L,CodecName:b,CodecOption:S,CodecOptionBoolean:v,ConnectionRole:R,CryptoSuite:h,ExtmapUris:C,IceCandidateProtocolType:m,IceCandidateTcpType:p,IceCandidateTransport:d,MediaProtocol:y,MediaType:f,PayloadType:l,SdpNegotiateType:s,SendRecvMode:_,StreamType:g,UploadLogLevel:u}}),null);
__d("WebrtcSdpSerializers",["ThriftTypes","WebrtcEnumsTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{msid:"stream_label"}}function c(){return{id:""}}function d(){return{bwtype:"",bw:0}}function m(){return{numAudioChannels:1}}function p(){return{id:1,extensionAttributes:[]}}function _(){return{}}function f(){return{componentId:1,transport:o("WebrtcEnumsTypes").IceCandidateTransport.cast(0),generation:0}}function g(){return{port:1,protocol:o("WebrtcEnumsTypes").MediaProtocol.cast(0),sendRecvMode:o("WebrtcEnumsTypes").SendRecvMode.cast(1),hasRtcpMux:!0}}function h(){return{supportsMsid:!0}}function y(){return{}}function C(t,n){if(n.writeStructBegin("SsrcGroup"),t.semantics!=null&&(n.writeFieldBegin({fname:"semantics",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.semantics),n.writeFieldEnd()),t.ssrcIds!=null){n.writeFieldBegin({fname:"ssrcIds",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.I32,size:t.ssrcIds.length});for(var o of t.ssrcIds)n.writeI32(o);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function b(t,n){if(n.writeStructBegin("SsrcObject"),t.ssrcId!=null&&(n.writeFieldBegin({fname:"ssrcId",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32(t.ssrcId),n.writeFieldEnd()),t.cname!=null&&(n.writeFieldBegin({fname:"cname",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.cname),n.writeFieldEnd()),n.writeFieldBegin({fname:"msid",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),t.msid!=null)n.writeString(t.msid);else{var o="stream_label";n.writeString(o)}n.writeFieldEnd(),t.msidAppData!=null&&(n.writeFieldBegin({fname:"msidAppData",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.msidAppData),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function v(t,n){if(n.writeStructBegin("RtcpFbVal"),n.writeFieldBegin({fname:"id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.id!=null)n.writeString(t.id);else{var o="";n.writeString(o)}n.writeFieldEnd(),t.param!=null&&(n.writeFieldBegin({fname:"param",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.param),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function S(t,n){if(n.writeStructBegin("Bandwidth"),n.writeFieldBegin({fname:"bwtype",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.bwtype!=null)n.writeString(t.bwtype);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"bw",ftype:e.I32,fid:2}),t.bw!=null)n.writeI32(t.bw);else{var a=0;n.writeI32(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function R(t,n){if(n.writeStructBegin("CodecDescription"),t.payloadType!=null&&(n.writeFieldBegin({fname:"payloadType",ftype:(e||(e=r("ThriftTypes"))).BYTE,fid:1}),n.writeByte(t.payloadType),n.writeFieldEnd()),t.encodingName!=null){var o;n.writeFieldBegin({fname:"encodingName",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),n.writeI32((o=t.encodingName)!=null?o:0),n.writeFieldEnd()}if(t.clockRateKhz!=null&&(n.writeFieldBegin({fname:"clockRateKhz",ftype:(e||(e=r("ThriftTypes"))).BYTE,fid:3}),n.writeByte(t.clockRateKhz),n.writeFieldEnd()),n.writeFieldBegin({fname:"numAudioChannels",ftype:(e||(e=r("ThriftTypes"))).BYTE,fid:4}),t.numAudioChannels!=null)n.writeByte(t.numAudioChannels);else{var a=1;n.writeByte(a)}if(n.writeFieldEnd(),t.fmtParameters!=null){n.writeFieldBegin({fname:"fmtParameters",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:5}),n.writeMapBegin({ktype:e.I32,vtype:e.STRING,size:Object.keys(t.fmtParameters).length});for(var i of Object.entries(t.fmtParameters)){var l,s=i[0],u=i[1];n.writeI32((l=Number(s))!=null?l:0),n.writeString(u)}n.writeMapEnd(),n.writeFieldEnd()}if(t.enabledOptions!=null){n.writeFieldBegin({fname:"enabledOptions",ftype:(e||(e=r("ThriftTypes"))).SET,fid:6}),n.writeSetBegin({etype:e.I32,size:t.enabledOptions.size});for(var c of t.enabledOptions)n.writeI32(c!=null?c:0);n.writeSetEnd(),n.writeFieldEnd()}if(t.rtcpFbParameters!=null){n.writeFieldBegin({fname:"rtcpFbParameters",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:7}),n.writeMapBegin({ktype:e.STRING,vtype:e.STRING,size:Object.keys(t.rtcpFbParameters).length});for(var d of Object.entries(t.rtcpFbParameters)){var m=d[0],p=d[1];n.writeString(m),n.writeString(p)}n.writeMapEnd(),n.writeFieldEnd()}if(t.rtcpFbParamList!=null){n.writeFieldBegin({fname:"rtcpFbParamList",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:10}),n.writeListBegin({etype:e.STRUCT,size:t.rtcpFbParamList.length});for(var _ of t.rtcpFbParamList)v(_,n);n.writeListEnd(),n.writeFieldEnd()}t.videoWidth!=null&&(n.writeFieldBegin({fname:"videoWidth",ftype:(e||(e=r("ThriftTypes"))).I32,fid:8}),n.writeI32(t.videoWidth),n.writeFieldEnd()),t.videoHeight!=null&&(n.writeFieldBegin({fname:"videoHeight",ftype:(e||(e=r("ThriftTypes"))).I32,fid:9}),n.writeI32(t.videoHeight),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function L(t,n){if(n.writeStructBegin("Extmap"),n.writeFieldBegin({fname:"id",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.id!=null)n.writeI32(t.id);else{var o=1;n.writeI32(o)}if(n.writeFieldEnd(),t.uri!=null){var a;n.writeFieldBegin({fname:"uri",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),n.writeI32((a=t.uri)!=null?a:0),n.writeFieldEnd()}if(n.writeFieldBegin({fname:"extensionAttributes",ftype:e.LIST,fid:3}),t.extensionAttributes!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I32,size:t.extensionAttributes.length});for(var i of t.extensionAttributes)n.writeI32(i!=null?i:0);n.writeListEnd()}else{var l=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I32,size:l.length});for(var s of l)n.writeI32(s!=null?s:0);n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function E(t,n){if(n.writeStructBegin("CryptoParam"),t.tag!=null&&(n.writeFieldBegin({fname:"tag",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32(t.tag),n.writeFieldEnd()),t.suite!=null){var o;n.writeFieldBegin({fname:"suite",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),n.writeI32((o=t.suite)!=null?o:0),n.writeFieldEnd()}t.keyParams!=null&&(n.writeFieldBegin({fname:"keyParams",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.keyParams),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function k(t,n){if(n.writeStructBegin("IceCandidateSdp"),t.foundation!=null&&(n.writeFieldBegin({fname:"foundation",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.foundation),n.writeFieldEnd()),n.writeFieldBegin({fname:"componentId",ftype:(e||(e=r("ThriftTypes"))).BYTE,fid:2}),t.componentId!=null)n.writeByte(t.componentId);else{var a=1;n.writeByte(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"transport",ftype:e.I32,fid:3}),t.transport!=null){var i;n.writeI32((i=t.transport)!=null?i:0)}else{var l=o("WebrtcEnumsTypes").IceCandidateTransport.cast(0);n.writeI32(l!=null?l:0)}if(n.writeFieldEnd(),t.priority!=null&&(n.writeFieldBegin({fname:"priority",ftype:(e||(e=r("ThriftTypes"))).I32,fid:4}),n.writeI32(t.priority),n.writeFieldEnd()),t.address!=null&&(n.writeFieldBegin({fname:"address",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.address),n.writeFieldEnd()),t.port!=null&&(n.writeFieldBegin({fname:"port",ftype:(e||(e=r("ThriftTypes"))).I32,fid:6}),n.writeI32(t.port),n.writeFieldEnd()),t.protocolType!=null){var s;n.writeFieldBegin({fname:"protocolType",ftype:(e||(e=r("ThriftTypes"))).I32,fid:7}),n.writeI32((s=t.protocolType)!=null?s:0),n.writeFieldEnd()}if(t.relatedAddress!=null&&(n.writeFieldBegin({fname:"relatedAddress",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:8}),n.writeString(t.relatedAddress),n.writeFieldEnd()),t.relatedPort!=null&&(n.writeFieldBegin({fname:"relatedPort",ftype:(e||(e=r("ThriftTypes"))).I32,fid:9}),n.writeI32(t.relatedPort),n.writeFieldEnd()),t.username!=null&&(n.writeFieldBegin({fname:"username",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:10}),n.writeString(t.username),n.writeFieldEnd()),t.password!=null&&(n.writeFieldBegin({fname:"password",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:11}),n.writeString(t.password),n.writeFieldEnd()),n.writeFieldBegin({fname:"generation",ftype:e.I32,fid:12}),t.generation!=null)n.writeI32(t.generation);else{var u=0;n.writeI32(u)}if(n.writeFieldEnd(),t.tcptype!=null){var c;n.writeFieldBegin({fname:"tcptype",ftype:(e||(e=r("ThriftTypes"))).I32,fid:13}),n.writeI32((c=t.tcptype)!=null?c:0),n.writeFieldEnd()}t.networkId!=null&&(n.writeFieldBegin({fname:"networkId",ftype:(e||(e=r("ThriftTypes"))).I16,fid:14}),n.writeI16(t.networkId),n.writeFieldEnd()),t.networkCost!=null&&(n.writeFieldBegin({fname:"networkCost",ftype:(e||(e=r("ThriftTypes"))).I16,fid:15}),n.writeI16(t.networkCost),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function I(t,n){if(n.writeStructBegin("MediaDescription"),t.mediaType!=null){var a;n.writeFieldBegin({fname:"mediaType",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32((a=t.mediaType)!=null?a:0),n.writeFieldEnd()}if(n.writeFieldBegin({fname:"port",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),t.port!=null)n.writeI32(t.port);else{var i=1;n.writeI32(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"protocol",ftype:e.I32,fid:3}),t.protocol!=null){var l;n.writeI32((l=t.protocol)!=null?l:0)}else{var s=o("WebrtcEnumsTypes").MediaProtocol.cast(0);n.writeI32(s!=null?s:0)}if(n.writeFieldEnd(),t.fmt!=null&&(n.writeFieldBegin({fname:"fmt",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:22}),n.writeString(t.fmt),n.writeFieldEnd()),t.mediaIceUserFrag!=null&&(n.writeFieldBegin({fname:"mediaIceUserFrag",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.mediaIceUserFrag),n.writeFieldEnd()),t.mediaIcePassword!=null&&(n.writeFieldBegin({fname:"mediaIcePassword",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.mediaIcePassword),n.writeFieldEnd()),t.mediaIceOptions!=null){n.writeFieldBegin({fname:"mediaIceOptions",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:6}),n.writeListBegin({etype:e.STRING,size:t.mediaIceOptions.length});for(var u of t.mediaIceOptions)n.writeString(u);n.writeListEnd(),n.writeFieldEnd()}if(t.mediaSslFingerprintHash!=null&&(n.writeFieldBegin({fname:"mediaSslFingerprintHash",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.mediaSslFingerprintHash),n.writeFieldEnd()),t.mediaSslFingerprintDigest!=null&&(n.writeFieldBegin({fname:"mediaSslFingerprintDigest",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:8}),n.writeString(t.mediaSslFingerprintDigest),n.writeFieldEnd()),t.extmaps!=null){n.writeFieldBegin({fname:"extmaps",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:9}),n.writeListBegin({etype:e.STRUCT,size:t.extmaps.length});for(var c of t.extmaps)L(c,n);n.writeListEnd(),n.writeFieldEnd()}if(n.writeFieldBegin({fname:"sendRecvMode",ftype:e.I32,fid:10}),t.sendRecvMode!=null){var d;n.writeI32((d=t.sendRecvMode)!=null?d:0)}else{var m=o("WebrtcEnumsTypes").SendRecvMode.cast(1);n.writeI32(m!=null?m:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"hasRtcpMux",ftype:e.BOOL,fid:11}),t.hasRtcpMux!=null)n.writeBool(t.hasRtcpMux);else{var p=!0;n.writeBool(p)}if(n.writeFieldEnd(),t.rtcpReducedSize!=null&&(n.writeFieldBegin({fname:"rtcpReducedSize",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:25}),n.writeBool(t.rtcpReducedSize),n.writeFieldEnd()),t.cryptoParams!=null){n.writeFieldBegin({fname:"cryptoParams",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:12}),n.writeListBegin({etype:e.STRUCT,size:t.cryptoParams.length});for(var _ of t.cryptoParams)E(_,n);n.writeListEnd(),n.writeFieldEnd()}if(t.codecs!=null){n.writeFieldBegin({fname:"codecs",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:13}),n.writeListBegin({etype:e.STRUCT,size:t.codecs.length});for(var f of t.codecs)R(f,n);n.writeListEnd(),n.writeFieldEnd()}if(t.maxPTime!=null&&(n.writeFieldBegin({fname:"maxPTime",ftype:(e||(e=r("ThriftTypes"))).I32,fid:14}),n.writeI32(t.maxPTime),n.writeFieldEnd()),t.pTime!=null&&(n.writeFieldBegin({fname:"pTime",ftype:(e||(e=r("ThriftTypes"))).I32,fid:15}),n.writeI32(t.pTime),n.writeFieldEnd()),t.ssrcObjects!=null){n.writeFieldBegin({fname:"ssrcObjects",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:16}),n.writeListBegin({etype:e.STRUCT,size:t.ssrcObjects.length});for(var g of t.ssrcObjects)b(g,n);n.writeListEnd(),n.writeFieldEnd()}if(t.candidates!=null){n.writeFieldBegin({fname:"candidates",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:17}),n.writeListBegin({etype:e.STRUCT,size:t.candidates.length});for(var h of t.candidates)k(h,n);n.writeListEnd(),n.writeFieldEnd()}if(t.conferenceMode!=null&&(n.writeFieldBegin({fname:"conferenceMode",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:18}),n.writeBool(t.conferenceMode),n.writeFieldEnd()),t.ssrcGroups!=null){n.writeFieldBegin({fname:"ssrcGroups",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:19}),n.writeListBegin({etype:e.STRUCT,size:t.ssrcGroups.length});for(var y of t.ssrcGroups)C(y,n);n.writeListEnd(),n.writeFieldEnd()}if(t.connectionRole!=null){var v;n.writeFieldBegin({fname:"connectionRole",ftype:(e||(e=r("ThriftTypes"))).I32,fid:20}),n.writeI32((v=t.connectionRole)!=null?v:0),n.writeFieldEnd()}t.mid!=null&&(n.writeFieldBegin({fname:"mid",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:21}),n.writeString(t.mid),n.writeFieldEnd()),t.bandwidth!=null&&(n.writeFieldBegin({fname:"bandwidth",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:23}),S(t.bandwidth,n),n.writeFieldEnd()),t.sctpPort!=null&&(n.writeFieldBegin({fname:"sctpPort",ftype:(e||(e=r("ThriftTypes"))).I32,fid:24}),n.writeI32(t.sctpPort),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function T(t,n){if(n.writeStructBegin("SessionDescription"),t.sessionId!=null&&(n.writeFieldBegin({fname:"sessionId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.sessionId),n.writeFieldEnd()),t.sessionVersion!=null&&(n.writeFieldBegin({fname:"sessionVersion",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.sessionVersion),n.writeFieldEnd()),n.writeFieldBegin({fname:"supportsMsid",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:3}),t.supportsMsid!=null)n.writeBool(t.supportsMsid);else{var o=!0;n.writeBool(o)}if(n.writeFieldEnd(),t.useIceLite!=null&&(n.writeFieldBegin({fname:"useIceLite",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:4}),n.writeBool(t.useIceLite),n.writeFieldEnd()),t.features!=null){n.writeFieldBegin({fname:"features",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:5}),n.writeListBegin({etype:e.STRING,size:t.features.length});for(var a of t.features)n.writeString(a);n.writeListEnd(),n.writeFieldEnd()}if(t.connectionRole!=null){var i;n.writeFieldBegin({fname:"connectionRole",ftype:(e||(e=r("ThriftTypes"))).I32,fid:6}),n.writeI32((i=t.connectionRole)!=null?i:0),n.writeFieldEnd()}if(t.bandwidth!=null&&(n.writeFieldBegin({fname:"bandwidth",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),S(t.bandwidth,n),n.writeFieldEnd()),t.transportBundle!=null){n.writeFieldBegin({fname:"transportBundle",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:8}),n.writeListBegin({etype:e.STRING,size:t.transportBundle.length});for(var l of t.transportBundle)n.writeString(l);n.writeListEnd(),n.writeFieldEnd()}if(t.commonCryptos!=null){n.writeFieldBegin({fname:"commonCryptos",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:9}),n.writeListBegin({etype:e.STRUCT,size:t.commonCryptos.length});for(var s of t.commonCryptos)E(s,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function D(t,n){if(n.writeStructBegin("Sdp"),t.sessionDescription!=null&&(n.writeFieldBegin({fname:"sessionDescription",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),T(t.sessionDescription,n),n.writeFieldEnd()),t.mediaDescriptions!=null){n.writeFieldBegin({fname:"mediaDescriptions",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.mediaDescriptions.length});for(var o of t.mediaDescriptions)I(o,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function x(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.semantics=t.readString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.ssrcIds=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readI32();n.ssrcIds.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function $(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I32?n.ssrcId=t.readI32():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.cname=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.msid=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.msidAppData=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.msid===void 0&&(n.msid="stream_label"),n}function P(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.id=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.param=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.id===void 0&&(n.id=""),n}function N(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.bwtype=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I32?n.bw=t.readI32():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.bwtype===void 0&&(n.bwtype=""),n.bw===void 0&&(n.bw=0),n}function M(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).BYTE?n.payloadType=t.readByte():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.encodingName=o("WebrtcEnumsTypes").CodecName.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).BYTE?n.clockRateKhz=t.readByte():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).BYTE?n.numAudioChannels=t.readByte():t.skip(i);break;case 5:if(i===(e||(e=r("ThriftTypes"))).MAP){n.fmtParameters={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){var c=o("WebrtcEnumsTypes").CodecOption.cast(t.readI32()),d=t.readString();c!=null&&(n.fmtParameters[c]=d)}}else t.skip(i);break;case 6:if(i===(e||(e=r("ThriftTypes"))).SET){n.enabledOptions=new Set;for(var m=t.readSetBegin(),p=0;p<m.size;p++){var _=o("WebrtcEnumsTypes").CodecOptionBoolean.cast(t.readI32());n.enabledOptions.add(_)}}else t.skip(i);break;case 7:if(i===(e||(e=r("ThriftTypes"))).MAP){n.rtcpFbParameters={};for(var f=t.readMapBegin(),g=0;g<f.size;g++){var h=t.readString(),y=t.readString();n.rtcpFbParameters[h]=y}}else t.skip(i);break;case 10:if(i===(e||(e=r("ThriftTypes"))).LIST){n.rtcpFbParamList=[];for(var C=t.readListBegin(),b=0;b<C.size;b++){var v=P(t);n.rtcpFbParamList.push(v)}}else t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).I32?n.videoWidth=t.readI32():t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).I32?n.videoHeight=t.readI32():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.numAudioChannels===void 0&&(n.numAudioChannels=1),n}function w(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.id=t.readI32():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.uri=o("WebrtcEnumsTypes").ExtmapUris.cast(t.readI32()):t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).LIST){n.extensionAttributes=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("WebrtcEnumsTypes").ExtmapUris.cast(t.readI32());n.extensionAttributes.push(c)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.id===void 0&&(n.id=1),n.extensionAttributes===void 0&&(n.extensionAttributes=[]),n}function A(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.tag=t.readI32():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.suite=o("WebrtcEnumsTypes").CryptoSuite.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.keyParams=t.readString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function F(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.foundation=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).BYTE?n.componentId=t.readByte():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.transport=o("WebrtcEnumsTypes").IceCandidateTransport.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.priority=t.readI32():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.address=t.readString():t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I32?n.port=t.readI32():t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).I32?n.protocolType=o("WebrtcEnumsTypes").IceCandidateProtocolType.cast(t.readI32()):t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).STRING?n.relatedAddress=t.readString():t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).I32?n.relatedPort=t.readI32():t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).STRING?n.username=t.readString():t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).STRING?n.password=t.readString():t.skip(i);break;case 12:i===(e||(e=r("ThriftTypes"))).I32?n.generation=t.readI32():t.skip(i);break;case 13:i===(e||(e=r("ThriftTypes"))).I32?n.tcptype=o("WebrtcEnumsTypes").IceCandidateTcpType.cast(t.readI32()):t.skip(i);break;case 14:i===(e||(e=r("ThriftTypes"))).I16?n.networkId=t.readI16():t.skip(i);break;case 15:i===(e||(e=r("ThriftTypes"))).I16?n.networkCost=t.readI16():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.componentId===void 0&&(n.componentId=1),n.transport===void 0&&(n.transport=o("WebrtcEnumsTypes").IceCandidateTransport.cast(0)),n.generation===void 0&&(n.generation=0),n}function O(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.mediaType=o("WebrtcEnumsTypes").MediaType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.port=t.readI32():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.protocol=o("WebrtcEnumsTypes").MediaProtocol.cast(t.readI32()):t.skip(i);break;case 22:i===(e||(e=r("ThriftTypes"))).STRING?n.fmt=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.mediaIceUserFrag=t.readString():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.mediaIcePassword=t.readString():t.skip(i);break;case 6:if(i===(e||(e=r("ThriftTypes"))).LIST){n.mediaIceOptions=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=t.readString();n.mediaIceOptions.push(c)}}else t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRING?n.mediaSslFingerprintHash=t.readString():t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).STRING?n.mediaSslFingerprintDigest=t.readString():t.skip(i);break;case 9:if(i===(e||(e=r("ThriftTypes"))).LIST){n.extmaps=[];for(var d=t.readListBegin(),m=0;m<d.size;m++){var p=w(t);n.extmaps.push(p)}}else t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).I32?n.sendRecvMode=o("WebrtcEnumsTypes").SendRecvMode.cast(t.readI32()):t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).BOOL?n.hasRtcpMux=t.readBool():t.skip(i);break;case 25:i===(e||(e=r("ThriftTypes"))).BOOL?n.rtcpReducedSize=t.readBool():t.skip(i);break;case 12:if(i===(e||(e=r("ThriftTypes"))).LIST){n.cryptoParams=[];for(var _=t.readListBegin(),f=0;f<_.size;f++){var g=A(t);n.cryptoParams.push(g)}}else t.skip(i);break;case 13:if(i===(e||(e=r("ThriftTypes"))).LIST){n.codecs=[];for(var h=t.readListBegin(),y=0;y<h.size;y++){var C=M(t);n.codecs.push(C)}}else t.skip(i);break;case 14:i===(e||(e=r("ThriftTypes"))).I32?n.maxPTime=t.readI32():t.skip(i);break;case 15:i===(e||(e=r("ThriftTypes"))).I32?n.pTime=t.readI32():t.skip(i);break;case 16:if(i===(e||(e=r("ThriftTypes"))).LIST){n.ssrcObjects=[];for(var b=t.readListBegin(),v=0;v<b.size;v++){var S=$(t);n.ssrcObjects.push(S)}}else t.skip(i);break;case 17:if(i===(e||(e=r("ThriftTypes"))).LIST){n.candidates=[];for(var R=t.readListBegin(),L=0;L<R.size;L++){var E=F(t);n.candidates.push(E)}}else t.skip(i);break;case 18:i===(e||(e=r("ThriftTypes"))).BOOL?n.conferenceMode=t.readBool():t.skip(i);break;case 19:if(i===(e||(e=r("ThriftTypes"))).LIST){n.ssrcGroups=[];for(var k=t.readListBegin(),I=0;I<k.size;I++){var T=x(t);n.ssrcGroups.push(T)}}else t.skip(i);break;case 20:i===(e||(e=r("ThriftTypes"))).I32?n.connectionRole=o("WebrtcEnumsTypes").ConnectionRole.cast(t.readI32()):t.skip(i);break;case 21:i===(e||(e=r("ThriftTypes"))).STRING?n.mid=t.readString():t.skip(i);break;case 23:i===(e||(e=r("ThriftTypes"))).STRUCT?n.bandwidth=N(t):t.skip(i);break;case 24:i===(e||(e=r("ThriftTypes"))).I32?n.sctpPort=t.readI32():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.port===void 0&&(n.port=1),n.protocol===void 0&&(n.protocol=o("WebrtcEnumsTypes").MediaProtocol.cast(0)),n.sendRecvMode===void 0&&(n.sendRecvMode=o("WebrtcEnumsTypes").SendRecvMode.cast(1)),n.hasRtcpMux===void 0&&(n.hasRtcpMux=!0),n}function B(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.sessionId=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.sessionVersion=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).BOOL?n.supportsMsid=t.readBool():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).BOOL?n.useIceLite=t.readBool():t.skip(i);break;case 5:if(i===(e||(e=r("ThriftTypes"))).LIST){n.features=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=t.readString();n.features.push(c)}}else t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I32?n.connectionRole=o("WebrtcEnumsTypes").ConnectionRole.cast(t.readI32()):t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRUCT?n.bandwidth=N(t):t.skip(i);break;case 8:if(i===(e||(e=r("ThriftTypes"))).LIST){n.transportBundle=[];for(var d=t.readListBegin(),m=0;m<d.size;m++){var p=t.readString();n.transportBundle.push(p)}}else t.skip(i);break;case 9:if(i===(e||(e=r("ThriftTypes"))).LIST){n.commonCryptos=[];for(var _=t.readListBegin(),f=0;f<_.size;f++){var g=A(t);n.commonCryptos.push(g)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.supportsMsid===void 0&&(n.supportsMsid=!0),n}function W(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.sessionDescription=B(t):t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.mediaDescriptions=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=O(t);n.mediaDescriptions.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}l.SsrcGroup$DefaultConstructor=s,l.SsrcObject$DefaultConstructor=u,l.RtcpFbVal$DefaultConstructor=c,l.Bandwidth$DefaultConstructor=d,l.CodecDescription$DefaultConstructor=m,l.Extmap$DefaultConstructor=p,l.CryptoParam$DefaultConstructor=_,l.IceCandidateSdp$DefaultConstructor=f,l.MediaDescription$DefaultConstructor=g,l.SessionDescription$DefaultConstructor=h,l.Sdp$DefaultConstructor=y,l.serializeSsrcGroup=C,l.serializeSsrcObject=b,l.serializeRtcpFbVal=v,l.serializeBandwidth=S,l.serializeCodecDescription=R,l.serializeExtmap=L,l.serializeCryptoParam=E,l.serializeIceCandidateSdp=k,l.serializeMediaDescription=I,l.serializeSessionDescription=T,l.serializeSdp=D,l.deserializeSsrcGroup=x,l.deserializeSsrcObject=$,l.deserializeRtcpFbVal=P,l.deserializeBandwidth=N,l.deserializeCodecDescription=M,l.deserializeExtmap=w,l.deserializeCryptoParam=A,l.deserializeIceCandidateSdp=F,l.deserializeMediaDescription=O,l.deserializeSessionDescription=B,l.deserializeSdp=W}),98);
__d("MultiwayCommonSerializers",["DataMessageSerializers","DataMessageTypes","MultiwayCommonTypes","MultiwaySharedSerializers","MultiwaySharedTypes","StateSyncSerializers","StateSyncTopicsConfigTypes","ThriftTypes","Utf8ToString","WebrtcSdpSerializers","WebrtcSignalingCommonTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var e;return{message:"",responseStatusCode:(e=o("MultiwayCommonTypes")).RtcResponseStatusCode.cast(0),responseSubCode:e.RtcResponseSubCode.cast(0),apiStatusCode:e.RtcApiStatusCode.cast(0),rtcLogSeverity:e.RtcLogSeverity.cast(0)}}function u(){return{}}function c(){return{media:{}}}function d(){return{body:"",msid:"",mid:""}}function m(){return{sourceKey:"",media:[],ssrcGroups:[]}}function p(){return{mediaStatus:{}}}function _(){return{sdpMLineIndex:"0",sdpMid:""}}function f(){return{stateStore:{},stateStoreV2:{}}}function g(){return{version:0}}function h(){return{encryptedTopic:"",encryptedData:Uint8Array.of(),senderId:Uint8Array.of(),messageType:o("MultiwayCommonTypes").E2eeDataMessageType.cast(0)}}function y(){return{fromVersion:"0",toVersion:"0",mediaUpdates:[]}}function C(){return{currentVersion:"0",mediaPath:o("MultiwaySharedTypes").MediaPath.cast(0)}}function b(){return{callerUserId:"",calleeUserId:"",sessionId:""}}function v(){return{fromVersion:"0",toVersion:"0",mediaUpdates:[],renegotiationRequested:!1,multipleVideoStreamsAllowed:!1,mediaPath:o("MultiwaySharedTypes").MediaPath.cast(0),screenShareStreamAllowed:!1}}function S(){return{currentVersion:"0"}}function R(){return{}}function L(){return{reason:o("MultiwayCommonTypes").HangupReason.cast(0),detailedReasonString:""}}function E(){return{iceCandidateSdps:[]}}function k(){return{reason:o("MultiwayCommonTypes").DismissReason.cast(0),detailedReasonString:""}}function I(){return{joinMode:o("MultiwayCommonTypes").JoinMode.cast(0)}}function T(){return{state:o("MultiwayCommonTypes").ParticipantCallState.cast(0)}}function D(){return{}}function x(){return{}}function $(){return{}}function P(){return{version:"0",participantStates:{},groupsOfUsers:[]}}function N(){return{currentVersion:"0"}}function M(){return{subscriptions:[]}}function w(){return{message:o("DataMessageSerializers").DataMessage$DefaultConstructor()}}function A(){return{deliveryResult:{}}}function F(){return{usersToInvite:new Set}}function O(){return{smcTier:"",region:"",isUsfu:!1,isEdge:!1}}function B(){return{offer:u(),deviceCapabilities:new Set}}function W(){return{answer:u(),mediaStatus:{},initiator:"",isPendingApproval:!1,multipleVideoStreamsAllowed:!1,mediaPath:o("MultiwaySharedTypes").MediaPath.cast(0),groupsOfUsers:[],screenShareStreamAllowed:!1}}function q(){return{deviceCapabilities:new Set}}function U(){return{}}function V(){return{type:o("MultiwayCommonTypes").ClientEventType.cast(0)}}function H(){return{clientEvents:[]}}function G(){return{}}function z(){return{}}function j(){return{caller:"",otherParticipants:new Set,ringType:o("MultiwayCommonTypes").RingType.cast(0),mediaPath:o("MultiwaySharedTypes").MediaPath.cast(0),isTransferCall:!1}}function K(){return{deviceStatus:o("MultiwayCommonTypes").DeviceStatus.cast(0)}}function Q(){return{usersToRemove:new Set}}function X(){return{topic:"",version:0,topicId:o("StateSyncTopicsConfigTypes").TopicId.cast(0)}}function Y(){return{topic:"",version:0}}function J(){return{syncPayload:f(),topic:"",version:0,topicId:o("StateSyncTopicsConfigTypes").TopicId.cast(0)}}function Z(){return{topic:"",version:0}}function ee(){return{topic:"",version:0,data:Uint8Array.of()}}function te(){return{topic:"",version:0}}function ne(){return{approvalStatus:o("MultiwayCommonTypes").ApprovalStatus.cast(0),targetUsers:new Set}}function re(){return{id:""}}function oe(){return{actorId:"",baseId:""}}function ae(){return{type:o("MultiwayCommonTypes").MessageType.cast(0),conferenceName:"",transactionId:"",retryCount:0}}function ie(){return{}}function le(){return{messageHeader:ae(),messageBody:ie()}}function se(){return{users:new Set,allowMultipleJoins:!1,dismissOthersOnFirstJoin:!1,aliasId:""}}function ue(){return{}}function ce(t,n){if(n.writeStructBegin("RtcException"),n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.message!=null)n.writeString(t.message);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"responseStatusCode",ftype:e.I32,fid:2}),t.responseStatusCode!=null){var i;n.writeI32((i=t.responseStatusCode)!=null?i:0)}else{var l=o("MultiwayCommonTypes").RtcResponseStatusCode.cast(0);n.writeI32(l!=null?l:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"responseSubCode",ftype:e.I32,fid:3}),t.responseSubCode!=null){var s;n.writeI32((s=t.responseSubCode)!=null?s:0)}else{var u=o("MultiwayCommonTypes").RtcResponseSubCode.cast(0);n.writeI32(u!=null?u:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"apiStatusCode",ftype:e.I32,fid:4}),t.apiStatusCode!=null){var c;n.writeI32((c=t.apiStatusCode)!=null?c:0)}else{var d=o("MultiwayCommonTypes").RtcApiStatusCode.cast(0);n.writeI32(d!=null?d:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"rtcLogSeverity",ftype:e.I32,fid:5}),t.rtcLogSeverity!=null){var m;n.writeI32((m=t.rtcLogSeverity)!=null?m:0)}else{var p=o("MultiwayCommonTypes").RtcLogSeverity.cast(0);n.writeI32(p!=null?p:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function de(t,n){n.writeStructBegin("SessionDescription"),t.sdpString!=null&&(n.writeFieldBegin({fname:"sdpString",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.sdpString),n.writeFieldEnd()),t.sdpThrift!=null&&(n.writeFieldBegin({fname:"sdpThrift",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),o("WebrtcSdpSerializers").serializeSdp(t.sdpThrift,n),n.writeFieldEnd()),t.sdpCompressionVersion!=null&&(n.writeFieldBegin({fname:"sdpCompressionVersion",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(BigInt(t.sdpCompressionVersion)),n.writeFieldEnd()),t.sdpCompressedData!=null&&(n.writeFieldBegin({fname:"sdpCompressedData",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.sdpCompressedData),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function me(t,n){if(n.writeStructBegin("SessionDescriptionUpdate"),n.writeFieldBegin({fname:"media",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),t.media!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(t.media).length});for(var o of Object.entries(t.media)){var a=o[0],i=o[1];n.writeI32(Number(a)),pe(i,n)}n.writeMapEnd()}else{var l={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(l).length});for(var s of Object.entries(l)){var u=s[0],c=s[1];n.writeI32(Number(u)),pe(c,n)}n.writeMapEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function pe(t,n){if(n.writeStructBegin("MediaDescriptionUpdate"),n.writeFieldBegin({fname:"body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.body!=null)n.writeString(t.body);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"msid",ftype:e.STRING,fid:2}),t.msid!=null)n.writeString(t.msid);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"mid",ftype:e.STRING,fid:3}),t.mid!=null)n.writeString(t.mid);else{var i="";n.writeString(i)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function _e(t,n){if(n.writeStructBegin("ServerMediaUpdate"),n.writeFieldBegin({fname:"sourceKey",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.sourceKey!=null)n.writeString(t.sourceKey);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"media",ftype:e.LIST,fid:2}),t.media!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.media.length});for(var i of t.media)o("MultiwaySharedSerializers").serializeMedia(i,n);n.writeListEnd()}else{var l=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:l.length});for(var s of l)o("MultiwaySharedSerializers").serializeMedia(s,n);n.writeListEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"ssrcGroups",ftype:e.LIST,fid:3}),t.ssrcGroups!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.ssrcGroups.length});for(var u of t.ssrcGroups)o("MultiwaySharedSerializers").serializeSsrcGroup(u,n);n.writeListEnd()}else{var c=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:c.length});for(var d of c)o("MultiwaySharedSerializers").serializeSsrcGroup(d,n);n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function fe(t,n){if(n.writeStructBegin("ClientMediaUpdate"),n.writeFieldBegin({fname:"mediaStatus",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),t.mediaStatus!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.BOOL,size:Object.keys(t.mediaStatus).length});for(var a of Object.entries(t.mediaStatus)){var i=a[0],l=a[1];n.writeString(i),n.writeBool(l)}n.writeMapEnd()}else{var s={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.BOOL,size:Object.keys(s).length});for(var u of Object.entries(s)){var c=u[0],d=u[1];n.writeString(c),n.writeBool(d)}n.writeMapEnd()}n.writeFieldEnd(),t.mediaStatusEx!=null&&(n.writeFieldBegin({fname:"mediaStatusEx",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),o("MultiwaySharedSerializers").serializeClientMediaStatus(t.mediaStatusEx,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ge(t,n){if(n.writeStructBegin("IceCandidate"),t.candidateSdpString!=null&&(n.writeFieldBegin({fname:"candidateSdpString",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.candidateSdpString),n.writeFieldEnd()),n.writeFieldBegin({fname:"sdpMLineIndex",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),t.sdpMLineIndex!=null)n.writeI64(BigInt(t.sdpMLineIndex));else{var a="0";n.writeI64(BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"sdpMid",ftype:e.STRING,fid:3}),t.sdpMid!=null)n.writeString(t.sdpMid);else{var i="";n.writeString(i)}n.writeFieldEnd(),t.candidateSdpThrift!=null&&(n.writeFieldBegin({fname:"candidateSdpThrift",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),o("WebrtcSdpSerializers").serializeIceCandidateSdp(t.candidateSdpThrift,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function he(t,n){if(n.writeStructBegin("SyncPayload"),n.writeFieldBegin({fname:"stateStore",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),t.stateStore!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(t.stateStore).length});for(var a of Object.entries(t.stateStore)){var i=a[0],l=a[1];n.writeString(i),o("StateSyncSerializers").serializeState(l,n)}n.writeMapEnd()}else{var s={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(s).length});for(var u of Object.entries(s)){var c=u[0],d=u[1];n.writeString(c),o("StateSyncSerializers").serializeState(d,n)}n.writeMapEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"stateStoreV2",ftype:e.MAP,fid:4}),t.stateStoreV2!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(t.stateStoreV2).length});for(var m of Object.entries(t.stateStoreV2)){var p,_=m[0],f=m[1];n.writeI32((p=Number(_))!=null?p:0),o("StateSyncSerializers").serializeState(f,n)}n.writeMapEnd()}else{var g={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(g).length});for(var h of Object.entries(g)){var y,C=h[0],b=h[1];n.writeI32((y=Number(C))!=null?y:0),o("StateSyncSerializers").serializeState(b,n)}n.writeMapEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function ye(t,n){if(n.writeStructBegin("SyncAck"),n.writeFieldBegin({fname:"version",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.version!=null)n.writeI32(t.version);else{var o=0;n.writeI32(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Ce(t,n){if(n.writeStructBegin("E2eeData"),n.writeFieldBegin({fname:"encryptedTopic",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.encryptedTopic!=null)n.writeString(t.encryptedTopic);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"encryptedData",ftype:e.STRING,fid:2}),t.encryptedData!=null)n.writeBinary(t.encryptedData);else{var i=Uint8Array.of();n.writeBinary(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"senderId",ftype:e.STRING,fid:3}),t.senderId!=null)n.writeBinary(t.senderId);else{var l=Uint8Array.of();n.writeBinary(l)}if(n.writeFieldEnd(),t.targetIds!=null){n.writeFieldBegin({fname:"targetIds",ftype:(e||(e=r("ThriftTypes"))).SET,fid:4}),n.writeSetBegin({etype:e.STRING,size:t.targetIds.size});for(var s of t.targetIds)n.writeBinary(s);n.writeSetEnd(),n.writeFieldEnd()}if(n.writeFieldBegin({fname:"messageType",ftype:e.I32,fid:5}),t.messageType!=null){var u;n.writeI32((u=t.messageType)!=null?u:0)}else{var c=o("MultiwayCommonTypes").E2eeDataMessageType.cast(0);n.writeI32(c!=null?c:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function be(t,n){if(n.writeStructBegin("ClientMediaUpdateRequest"),n.writeFieldBegin({fname:"fromVersion",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.fromVersion!=null)n.writeI64(BigInt(t.fromVersion));else{var o="0";n.writeI64(BigInt(o))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"toVersion",ftype:e.I64,fid:2}),t.toVersion!=null)n.writeI64(BigInt(t.toVersion));else{var a="0";n.writeI64(BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"mediaUpdates",ftype:e.LIST,fid:3}),t.mediaUpdates!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.mediaUpdates.length});for(var i of t.mediaUpdates)fe(i,n);n.writeListEnd()}else{var l=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:l.length});for(var s of l)fe(s,n);n.writeListEnd()}n.writeFieldEnd(),t.offer!=null&&(n.writeFieldBegin({fname:"offer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),de(t.offer,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ve(t,n){if(n.writeStructBegin("ClientMediaUpdateResponse"),n.writeFieldBegin({fname:"currentVersion",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.currentVersion!=null)n.writeI64(BigInt(t.currentVersion));else{var a="0";n.writeI64(BigInt(a))}if(n.writeFieldEnd(),t.answer!=null&&(n.writeFieldBegin({fname:"answer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),de(t.answer,n),n.writeFieldEnd()),t.mediaStatus!=null&&(n.writeFieldBegin({fname:"mediaStatus",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),o("MultiwaySharedSerializers").serializeClientMediaStatus(t.mediaStatus,n),n.writeFieldEnd()),t.sdpOriginLocalId!=null&&(n.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.sdpOriginLocalId),n.writeFieldEnd()),t.renegotiationOffer!=null&&(n.writeFieldBegin({fname:"renegotiationOffer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),de(t.renegotiationOffer,n),n.writeFieldEnd()),n.writeFieldBegin({fname:"mediaPath",ftype:e.I32,fid:6}),t.mediaPath!=null){var i;n.writeI32((i=t.mediaPath)!=null?i:0)}else{var l=o("MultiwaySharedTypes").MediaPath.cast(0);n.writeI32(l!=null?l:0)}if(n.writeFieldEnd(),t.stateStore!=null){n.writeFieldBegin({fname:"stateStore",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:7}),n.writeMapBegin({ktype:e.STRING,vtype:e.STRUCT,size:Object.keys(t.stateStore).length});for(var s of Object.entries(t.stateStore)){var u=s[0],c=s[1];n.writeString(u),o("StateSyncSerializers").serializeState(c,n)}n.writeMapEnd(),n.writeFieldEnd()}if(t.stateStoreV2!=null){n.writeFieldBegin({fname:"stateStoreV2",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:8}),n.writeMapBegin({ktype:e.I32,vtype:e.STRUCT,size:Object.keys(t.stateStoreV2).length});for(var d of Object.entries(t.stateStoreV2)){var m,p=d[0],_=d[1];n.writeI32((m=Number(p))!=null?m:0),o("StateSyncSerializers").serializeState(_,n)}n.writeMapEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function Se(t,n){if(n.writeStructBegin("MultipleRelaysAllocationParameters"),n.writeFieldBegin({fname:"callerUserId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.callerUserId!=null)n.writeString(t.callerUserId);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"calleeUserId",ftype:e.STRING,fid:2}),t.calleeUserId!=null)n.writeString(t.calleeUserId);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"sessionId",ftype:e.STRING,fid:3}),t.sessionId!=null)n.writeString(t.sessionId);else{var i="";n.writeString(i)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Re(t,n){if(n.writeStructBegin("ServerMediaUpdateRequest"),n.writeFieldBegin({fname:"fromVersion",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.fromVersion!=null)n.writeI64(BigInt(t.fromVersion));else{var a="0";n.writeI64(BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"toVersion",ftype:e.I64,fid:2}),t.toVersion!=null)n.writeI64(BigInt(t.toVersion));else{var i="0";n.writeI64(BigInt(i))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"mediaUpdates",ftype:e.LIST,fid:3}),t.mediaUpdates!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.mediaUpdates.length});for(var l of t.mediaUpdates)_e(l,n);n.writeListEnd()}else{var s=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:s.length});for(var u of s)_e(u,n);n.writeListEnd()}if(n.writeFieldEnd(),t.offer!=null&&(n.writeFieldBegin({fname:"offer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),de(t.offer,n),n.writeFieldEnd()),t.answer!=null&&(n.writeFieldBegin({fname:"answer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),de(t.answer,n),n.writeFieldEnd()),t.mediaStatus!=null&&(n.writeFieldBegin({fname:"mediaStatus",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),o("MultiwaySharedSerializers").serializeClientMediaStatus(t.mediaStatus,n),n.writeFieldEnd()),n.writeFieldBegin({fname:"renegotiationRequested",ftype:e.BOOL,fid:8}),t.renegotiationRequested!=null)n.writeBool(t.renegotiationRequested);else{var c=!1;n.writeBool(c)}if(n.writeFieldEnd(),t.prAnswer!=null&&(n.writeFieldBegin({fname:"prAnswer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:9}),de(t.prAnswer,n),n.writeFieldEnd()),t.stateStore!=null){n.writeFieldBegin({fname:"stateStore",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:10}),n.writeMapBegin({ktype:e.STRING,vtype:e.STRUCT,size:Object.keys(t.stateStore).length});for(var d of Object.entries(t.stateStore)){var m=d[0],p=d[1];n.writeString(m),o("StateSyncSerializers").serializeState(p,n)}n.writeMapEnd(),n.writeFieldEnd()}if(t.sdpOriginLocalId!=null&&(n.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:11}),n.writeString(t.sdpOriginLocalId),n.writeFieldEnd()),t.multipleRelaysParameters!=null&&(n.writeFieldBegin({fname:"multipleRelaysParameters",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:12}),Se(t.multipleRelaysParameters,n),n.writeFieldEnd()),n.writeFieldBegin({fname:"multipleVideoStreamsAllowed",ftype:e.BOOL,fid:13}),t.multipleVideoStreamsAllowed!=null)n.writeBool(t.multipleVideoStreamsAllowed);else{var _=!1;n.writeBool(_)}if(n.writeFieldEnd(),t.renegotiationOffer!=null&&(n.writeFieldBegin({fname:"renegotiationOffer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:14}),de(t.renegotiationOffer,n),n.writeFieldEnd()),n.writeFieldBegin({fname:"mediaPath",ftype:e.I32,fid:15}),t.mediaPath!=null){var f;n.writeI32((f=t.mediaPath)!=null?f:0)}else{var g=o("MultiwaySharedTypes").MediaPath.cast(0);n.writeI32(g!=null?g:0)}if(n.writeFieldEnd(),t.update!=null&&(n.writeFieldBegin({fname:"update",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:16}),me(t.update,n),n.writeFieldEnd()),n.writeFieldBegin({fname:"screenShareStreamAllowed",ftype:e.BOOL,fid:17}),t.screenShareStreamAllowed!=null)n.writeBool(t.screenShareStreamAllowed);else{var h=!1;n.writeBool(h)}if(n.writeFieldEnd(),t.stateStoreV2!=null){n.writeFieldBegin({fname:"stateStoreV2",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:18}),n.writeMapBegin({ktype:e.I32,vtype:e.STRUCT,size:Object.keys(t.stateStoreV2).length});for(var y of Object.entries(t.stateStoreV2)){var C,b=y[0],v=y[1];n.writeI32((C=Number(b))!=null?C:0),o("StateSyncSerializers").serializeState(v,n)}n.writeMapEnd(),n.writeFieldEnd()}if(t.allowedCustomVideoContentTypes!=null){n.writeFieldBegin({fname:"allowedCustomVideoContentTypes",ftype:(e||(e=r("ThriftTypes"))).SET,fid:19}),n.writeSetBegin({etype:e.I32,size:t.allowedCustomVideoContentTypes.size});for(var S of t.allowedCustomVideoContentTypes)n.writeI32(S!=null?S:0);n.writeSetEnd(),n.writeFieldEnd()}t.relayInfo!=null&&(n.writeFieldBegin({fname:"relayInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:20}),o("MultiwaySharedSerializers").serializeRelayInfo(t.relayInfo,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Le(t,n){if(n.writeStructBegin("ServerMediaUpdateResponse"),n.writeFieldBegin({fname:"currentVersion",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.currentVersion!=null)n.writeI64(BigInt(t.currentVersion));else{var a="0";n.writeI64(BigInt(a))}n.writeFieldEnd(),t.answer!=null&&(n.writeFieldBegin({fname:"answer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),de(t.answer,n),n.writeFieldEnd()),t.mediaStatus!=null&&(n.writeFieldBegin({fname:"mediaStatus",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),o("MultiwaySharedSerializers").serializeClientMediaStatus(t.mediaStatus,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Ee(e,t){t.writeStructBegin("TransferRequest"),t.writeFieldStop(),t.writeStructEnd()}function ke(t,n){if(n.writeStructBegin("HangupRequest"),n.writeFieldBegin({fname:"reason",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.reason!=null){var a;n.writeI32((a=t.reason)!=null?a:0)}else{var i=o("MultiwayCommonTypes").HangupReason.cast(0);n.writeI32(i!=null?i:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"detailedReasonString",ftype:e.STRING,fid:2}),t.detailedReasonString!=null)n.writeString(t.detailedReasonString);else{var l="";n.writeString(l)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Ie(t,n){if(n.writeStructBegin("IceCandidateRequest"),n.writeFieldBegin({fname:"iceCandidateSdps",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),t.iceCandidateSdps!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.iceCandidateSdps.length});for(var o of t.iceCandidateSdps)ge(o,n);n.writeListEnd()}else{var a=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:a.length});for(var i of a)ge(i,n);n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Te(t,n){if(n.writeStructBegin("DismissRequest"),n.writeFieldBegin({fname:"reason",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.reason!=null){var a;n.writeI32((a=t.reason)!=null?a:0)}else{var i=o("MultiwayCommonTypes").DismissReason.cast(0);n.writeI32(i!=null?i:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"detailedReasonString",ftype:e.STRING,fid:2}),t.detailedReasonString!=null)n.writeString(t.detailedReasonString);else{var l="";n.writeString(l)}n.writeFieldEnd(),t.callabilityResultErrorCode!=null&&(n.writeFieldBegin({fname:"callabilityResultErrorCode",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(BigInt(t.callabilityResultErrorCode)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function De(t,n){if(n.writeStructBegin("EndpointSettings"),n.writeFieldBegin({fname:"joinMode",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.joinMode!=null){var a;n.writeI32((a=t.joinMode)!=null?a:0)}else{var i=o("MultiwayCommonTypes").JoinMode.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function xe(t,n){if(n.writeStructBegin("ParticipantState"),n.writeFieldBegin({fname:"state",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.state!=null){var a;n.writeI32((a=t.state)!=null?a:0)}else{var i=o("MultiwayCommonTypes").ParticipantCallState.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.userCapabilities!=null&&(n.writeFieldBegin({fname:"userCapabilities",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.userCapabilities),n.writeFieldEnd()),t.sctpNodeId!=null&&(n.writeFieldBegin({fname:"sctpNodeId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(BigInt(t.sctpNodeId)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function $e(t,n){n.writeStructBegin("ServerOnlyParticipantState"),t.userCountry!=null&&(n.writeFieldBegin({fname:"userCountry",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.userCountry),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Pe(t,n){n.writeStructBegin("UserProfile"),t.name!=null&&(n.writeFieldBegin({fname:"name",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.name),n.writeFieldEnd()),t.profilePictureUri!=null&&(n.writeFieldBegin({fname:"profilePictureUri",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.profilePictureUri),n.writeFieldEnd()),t.aliasId!=null&&(n.writeFieldBegin({fname:"aliasId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.aliasId),n.writeFieldEnd()),t.thirdPartyId!=null&&(n.writeFieldBegin({fname:"thirdPartyId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.thirdPartyId),n.writeFieldEnd()),t.groupId!=null&&(n.writeFieldBegin({fname:"groupId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.groupId),n.writeFieldEnd()),t.avatarImageUri!=null&&(n.writeFieldBegin({fname:"avatarImageUri",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeString(t.avatarImageUri),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Ne(t,n){n.writeStructBegin("ProductMetadata"),t.callerInfo!=null&&(n.writeFieldBegin({fname:"callerInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),Pe(t.callerInfo,n),n.writeFieldEnd()),t.liveBroadcastId!=null&&(n.writeFieldBegin({fname:"liveBroadcastId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.liveBroadcastId),n.writeFieldEnd()),t.callingTags!=null&&(n.writeFieldBegin({fname:"callingTags",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32(t.callingTags),n.writeFieldEnd()),t.backingIdentifier!=null&&(n.writeFieldBegin({fname:"backingIdentifier",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.backingIdentifier),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Me(t,n){if(n.writeStructBegin("ConferenceStateRequest"),n.writeFieldBegin({fname:"version",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.version!=null)n.writeI64(BigInt(t.version));else{var a="0";n.writeI64(BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"participantStates",ftype:e.MAP,fid:2}),t.participantStates!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(t.participantStates).length});for(var i of Object.entries(t.participantStates)){var l=i[0],s=i[1];n.writeString(l),xe(s,n)}n.writeMapEnd()}else{var u={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(u).length});for(var c of Object.entries(u)){var d=c[0],m=c[1];n.writeString(d),xe(m,n)}n.writeMapEnd()}if(n.writeFieldEnd(),t.userProfiles!=null){n.writeFieldBegin({fname:"userProfiles",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:3}),n.writeMapBegin({ktype:e.STRING,vtype:e.STRUCT,size:Object.keys(t.userProfiles).length});for(var p of Object.entries(t.userProfiles)){var _=p[0],f=p[1];n.writeString(_),Pe(f,n)}n.writeMapEnd(),n.writeFieldEnd()}if(t.appMessages!=null){n.writeFieldBegin({fname:"appMessages",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:4}),n.writeListBegin({etype:e.STRUCT,size:t.appMessages.length});for(var g of t.appMessages)o("DataMessageSerializers").serializeDataMessage(g,n);n.writeListEnd(),n.writeFieldEnd()}if(n.writeFieldBegin({fname:"groupsOfUsers",ftype:e.LIST,fid:5}),t.groupsOfUsers!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.groupsOfUsers.length});for(var h of t.groupsOfUsers)ct(h,n);n.writeListEnd()}else{var y=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:y.length});for(var C of y)ct(C,n);n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function we(t,n){if(n.writeStructBegin("ConferenceStateResponse"),n.writeFieldBegin({fname:"currentVersion",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.currentVersion!=null)n.writeI64(BigInt(t.currentVersion));else{var o="0";n.writeI64(BigInt(o))}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Ae(t,n){if(n.writeStructBegin("SubscriptionRequest"),n.writeFieldBegin({fname:"subscriptions",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),t.subscriptions!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.subscriptions.length});for(var a of t.subscriptions)o("MultiwaySharedSerializers").serializeSubscription(a,n);n.writeListEnd()}else{var i=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:i.length});for(var l of i)o("MultiwaySharedSerializers").serializeSubscription(l,n);n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Fe(t,n){if(n.writeStructBegin("DataMessageRequest"),n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),t.message!=null)o("DataMessageSerializers").serializeDataMessage(t.message,n);else{var a=o("DataMessageSerializers").DataMessage$DefaultConstructor();o("DataMessageSerializers").serializeDataMessage(a,n)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Oe(t,n){if(n.writeStructBegin("DataMessageResponse"),n.writeFieldBegin({fname:"deliveryResult",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:1}),t.deliveryResult!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.I32,size:Object.keys(t.deliveryResult).length});for(var o of Object.entries(t.deliveryResult)){var a=o[0],i=o[1];n.writeString(a),n.writeI32(i!=null?i:0)}n.writeMapEnd()}else{var l={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.I32,size:Object.keys(l).length});for(var s of Object.entries(l)){var u=s[0],c=s[1];n.writeString(u),n.writeI32(c!=null?c:0)}n.writeMapEnd()}if(n.writeFieldEnd(),t.serviceTypeDeliveryResult!=null){n.writeFieldBegin({fname:"serviceTypeDeliveryResult",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:2}),n.writeMapBegin({ktype:e.I32,vtype:e.I32,size:Object.keys(t.serviceTypeDeliveryResult).length});for(var d of Object.entries(t.serviceTypeDeliveryResult)){var m,p=d[0],_=d[1];n.writeI32((m=Number(p))!=null?m:0),n.writeI32(_!=null?_:0)}n.writeMapEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function Be(t,n){if(n.writeStructBegin("AddParticipantsRequest"),n.writeFieldBegin({fname:"usersToInvite",ftype:(e||(e=r("ThriftTypes"))).SET,fid:1}),t.usersToInvite!=null){n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:t.usersToInvite.size});for(var a of t.usersToInvite)n.writeString(a);n.writeSetEnd()}else{var i=new Set;n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:i.size});for(var l of i)n.writeString(l);n.writeSetEnd()}if(n.writeFieldEnd(),t.appMessages!=null){n.writeFieldBegin({fname:"appMessages",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.appMessages.length});for(var s of t.appMessages)o("DataMessageSerializers").serializeDataMessage(s,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function We(t,n){if(n.writeStructBegin("SfuAllocation"),n.writeFieldBegin({fname:"smcTier",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.smcTier!=null)n.writeString(t.smcTier);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"region",ftype:e.STRING,fid:2}),t.region!=null)n.writeString(t.region);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"isUsfu",ftype:e.BOOL,fid:3}),t.isUsfu!=null)n.writeBool(t.isUsfu);else{var i=!1;n.writeBool(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"isEdge",ftype:e.BOOL,fid:4}),t.isEdge!=null)n.writeBool(t.isEdge);else{var l=!1;n.writeBool(l)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function qe(t,n){if(n.writeStructBegin("JoinRequest"),n.writeFieldBegin({fname:"offer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),t.offer!=null)de(t.offer,n);else{var a=u();de(a,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"deviceCapabilities",ftype:e.SET,fid:2}),t.deviceCapabilities!=null){n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).I32,size:t.deviceCapabilities.size});for(var i of t.deviceCapabilities)n.writeI32(i!=null?i:0);n.writeSetEnd()}else{var l=new Set;n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).I32,size:l.size});for(var s of l)n.writeI32(s!=null?s:0);n.writeSetEnd()}if(n.writeFieldEnd(),t.usersToCall!=null){n.writeFieldBegin({fname:"usersToCall",ftype:(e||(e=r("ThriftTypes"))).SET,fid:3}),n.writeSetBegin({etype:e.STRING,size:t.usersToCall.size});for(var c of t.usersToCall)n.writeString(c);n.writeSetEnd(),n.writeFieldEnd()}if(t.mediaStatus!=null){n.writeFieldBegin({fname:"mediaStatus",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:4}),n.writeMapBegin({ktype:e.STRING,vtype:e.BOOL,size:Object.keys(t.mediaStatus).length});for(var d of Object.entries(t.mediaStatus)){var m=d[0],p=d[1];n.writeString(m),n.writeBool(p)}n.writeMapEnd(),n.writeFieldEnd()}if(t.userCapabilities!=null&&(n.writeFieldBegin({fname:"userCapabilities",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeBinary(t.userCapabilities),n.writeFieldEnd()),t.supportedExperiments!=null&&(n.writeFieldBegin({fname:"supportedExperiments",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeString(t.supportedExperiments),n.writeFieldEnd()),t.appMessages!=null){n.writeFieldBegin({fname:"appMessages",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:9}),n.writeListBegin({etype:e.STRUCT,size:t.appMessages.length});for(var _ of t.appMessages)o("DataMessageSerializers").serializeDataMessage(_,n);n.writeListEnd(),n.writeFieldEnd()}if(t.userToEscalate!=null&&(n.writeFieldBegin({fname:"userToEscalate",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:10}),n.writeString(t.userToEscalate),n.writeFieldEnd()),t.escalatingCallId!=null&&(n.writeFieldBegin({fname:"escalatingCallId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:11}),n.writeI64(BigInt(t.escalatingCallId)),n.writeFieldEnd()),t.conferenceType!=null){var f;n.writeFieldBegin({fname:"conferenceType",ftype:(e||(e=r("ThriftTypes"))).I32,fid:12}),n.writeI32((f=t.conferenceType)!=null?f:0),n.writeFieldEnd()}if(t.mediaStatusEx!=null&&(n.writeFieldBegin({fname:"mediaStatusEx",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:13}),o("MultiwaySharedSerializers").serializeClientMediaStatus(t.mediaStatusEx,n),n.writeFieldEnd()),t.answer!=null&&(n.writeFieldBegin({fname:"answer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:14}),de(t.answer,n),n.writeFieldEnd()),t.syncPayload!=null&&(n.writeFieldBegin({fname:"syncPayload",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:15}),he(t.syncPayload,n),n.writeFieldEnd()),t.usersToApproveFromWaitingRoom!=null){n.writeFieldBegin({fname:"usersToApproveFromWaitingRoom",ftype:(e||(e=r("ThriftTypes"))).SET,fid:16}),n.writeSetBegin({etype:e.STRING,size:t.usersToApproveFromWaitingRoom.size});for(var g of t.usersToApproveFromWaitingRoom)n.writeString(g);n.writeSetEnd(),n.writeFieldEnd()}if(t.e2eeEnforcement!=null&&(n.writeFieldBegin({fname:"e2eeEnforcement",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:17}),o("MultiwaySharedSerializers").serializeE2eeEnforcement(t.e2eeEnforcement,n),n.writeFieldEnd()),t.sfuAllocation!=null&&(n.writeFieldBegin({fname:"sfuAllocation",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:18}),We(t.sfuAllocation,n),n.writeFieldEnd()),t.clientMediaMode!=null){var h;n.writeFieldBegin({fname:"clientMediaMode",ftype:(e||(e=r("ThriftTypes"))).I32,fid:19}),n.writeI32((h=t.clientMediaMode)!=null?h:0),n.writeFieldEnd()}if(t.endpointSettings!=null&&(n.writeFieldBegin({fname:"endpointSettings",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:20}),De(t.endpointSettings,n),n.writeFieldEnd()),t.backupSfuAllocation!=null&&(n.writeFieldBegin({fname:"backupSfuAllocation",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:21}),We(t.backupSfuAllocation,n),n.writeFieldEnd()),t.supportedCustomVideoContentTypes!=null){n.writeFieldBegin({fname:"supportedCustomVideoContentTypes",ftype:(e||(e=r("ThriftTypes"))).SET,fid:22}),n.writeSetBegin({etype:e.I32,size:t.supportedCustomVideoContentTypes.size});for(var y of t.supportedCustomVideoContentTypes)n.writeI32(y!=null?y:0);n.writeSetEnd(),n.writeFieldEnd()}t.configIntegrityOpaqueToken!=null&&(n.writeFieldBegin({fname:"configIntegrityOpaqueToken",ftype:(e||(e=r("ThriftTypes"))).I32,fid:23}),n.writeI32(t.configIntegrityOpaqueToken),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Ue(t,n){if(n.writeStructBegin("JoinResponse"),n.writeFieldBegin({fname:"answer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),t.answer!=null)de(t.answer,n);else{var a=u();de(a,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"mediaStatus",ftype:e.MAP,fid:2}),t.mediaStatus!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.BOOL,size:Object.keys(t.mediaStatus).length});for(var i of Object.entries(t.mediaStatus)){var l=i[0],s=i[1];n.writeString(l),n.writeBool(s)}n.writeMapEnd()}else{var c={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.BOOL,size:Object.keys(c).length});for(var d of Object.entries(c)){var m=d[0],p=d[1];n.writeString(m),n.writeBool(p)}n.writeMapEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"initiator",ftype:e.STRING,fid:3}),t.initiator!=null)n.writeString(t.initiator);else{var _="";n.writeString(_)}if(n.writeFieldEnd(),t.negotiatedExperiments!=null&&(n.writeFieldBegin({fname:"negotiatedExperiments",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.negotiatedExperiments),n.writeFieldEnd()),t.mediaStatusEx!=null&&(n.writeFieldBegin({fname:"mediaStatusEx",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),o("MultiwaySharedSerializers").serializeClientMediaStatus(t.mediaStatusEx,n),n.writeFieldEnd()),t.appMessages!=null){n.writeFieldBegin({fname:"appMessages",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:7}),n.writeListBegin({etype:e.STRUCT,size:t.appMessages.length});for(var f of t.appMessages)o("DataMessageSerializers").serializeDataMessage(f,n);n.writeListEnd(),n.writeFieldEnd()}if(t.stateStore!=null){n.writeFieldBegin({fname:"stateStore",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:8}),n.writeMapBegin({ktype:e.STRING,vtype:e.STRUCT,size:Object.keys(t.stateStore).length});for(var g of Object.entries(t.stateStore)){var h=g[0],y=g[1];n.writeString(h),o("StateSyncSerializers").serializeState(y,n)}n.writeMapEnd(),n.writeFieldEnd()}if(t.sdpOriginLocalId!=null&&(n.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:9}),n.writeString(t.sdpOriginLocalId),n.writeFieldEnd()),n.writeFieldBegin({fname:"isPendingApproval",ftype:e.BOOL,fid:10}),t.isPendingApproval!=null)n.writeBool(t.isPendingApproval);else{var C=!1;n.writeBool(C)}if(n.writeFieldEnd(),t.renegotiationOffer!=null&&(n.writeFieldBegin({fname:"renegotiationOffer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:11}),de(t.renegotiationOffer,n),n.writeFieldEnd()),n.writeFieldBegin({fname:"multipleVideoStreamsAllowed",ftype:e.BOOL,fid:12}),t.multipleVideoStreamsAllowed!=null)n.writeBool(t.multipleVideoStreamsAllowed);else{var b=!1;n.writeBool(b)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"mediaPath",ftype:e.I32,fid:13}),t.mediaPath!=null){var v;n.writeI32((v=t.mediaPath)!=null?v:0)}else{var S=o("MultiwaySharedTypes").MediaPath.cast(0);n.writeI32(S!=null?S:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"groupsOfUsers",ftype:e.LIST,fid:14}),t.groupsOfUsers!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.groupsOfUsers.length});for(var R of t.groupsOfUsers)ct(R,n);n.writeListEnd()}else{var L=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:L.length});for(var E of L)ct(E,n);n.writeListEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"screenShareStreamAllowed",ftype:e.BOOL,fid:15}),t.screenShareStreamAllowed!=null)n.writeBool(t.screenShareStreamAllowed);else{var k=!1;n.writeBool(k)}if(n.writeFieldEnd(),t.relayInfo!=null&&(n.writeFieldBegin({fname:"relayInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:16}),o("MultiwaySharedSerializers").serializeRelayInfo(t.relayInfo,n),n.writeFieldEnd()),t.selfSctpNodeId!=null&&(n.writeFieldBegin({fname:"selfSctpNodeId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:17}),n.writeI64(BigInt(t.selfSctpNodeId)),n.writeFieldEnd()),t.stateStoreV2!=null){n.writeFieldBegin({fname:"stateStoreV2",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:18}),n.writeMapBegin({ktype:e.I32,vtype:e.STRUCT,size:Object.keys(t.stateStoreV2).length});for(var I of Object.entries(t.stateStoreV2)){var T,D=I[0],x=I[1];n.writeI32((T=Number(D))!=null?T:0),o("StateSyncSerializers").serializeState(x,n)}n.writeMapEnd(),n.writeFieldEnd()}if(t.allowedCustomVideoContentTypes!=null){n.writeFieldBegin({fname:"allowedCustomVideoContentTypes",ftype:(e||(e=r("ThriftTypes"))).SET,fid:19}),n.writeSetBegin({etype:e.I32,size:t.allowedCustomVideoContentTypes.size});for(var $ of t.allowedCustomVideoContentTypes)n.writeI32($!=null?$:0);n.writeSetEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function Ve(t,n){if(n.writeStructBegin("ConnectRequest"),t.sdp!=null&&(n.writeFieldBegin({fname:"sdp",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),de(t.sdp,n),n.writeFieldEnd()),n.writeFieldBegin({fname:"deviceCapabilities",ftype:(e||(e=r("ThriftTypes"))).SET,fid:3}),t.deviceCapabilities!=null){n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).I32,size:t.deviceCapabilities.size});for(var a of t.deviceCapabilities)n.writeI32(a!=null?a:0);n.writeSetEnd()}else{var i=new Set;n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).I32,size:i.size});for(var l of i)n.writeI32(l!=null?l:0);n.writeSetEnd()}if(n.writeFieldEnd(),t.supportedCustomVideoContentTypes!=null){n.writeFieldBegin({fname:"supportedCustomVideoContentTypes",ftype:(e||(e=r("ThriftTypes"))).SET,fid:5}),n.writeSetBegin({etype:e.I32,size:t.supportedCustomVideoContentTypes.size});for(var s of t.supportedCustomVideoContentTypes)n.writeI32(s!=null?s:0);n.writeSetEnd(),n.writeFieldEnd()}t.prOffer!=null&&(n.writeFieldBegin({fname:"prOffer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),de(t.prOffer,n),n.writeFieldEnd()),t.e2eeEnforcement!=null&&(n.writeFieldBegin({fname:"e2eeEnforcement",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),o("MultiwaySharedSerializers").serializeE2eeEnforcement(t.e2eeEnforcement,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function He(t,n){n.writeStructBegin("ConnectResponse"),t.sdp!=null&&(n.writeFieldBegin({fname:"sdp",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),de(t.sdp,n),n.writeFieldEnd()),t.sdpOriginLocalId!=null&&(n.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.sdpOriginLocalId),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Ge(t,n){if(n.writeStructBegin("ClientEvent"),n.writeFieldBegin({fname:"type",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.type!=null){var a;n.writeI32((a=t.type)!=null?a:0)}else{var i=o("MultiwayCommonTypes").ClientEventType.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.time!=null&&(n.writeFieldBegin({fname:"time",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),n.writeI64(BigInt(t.time)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ze(t,n){if(n.writeStructBegin("ClientEventRequest"),n.writeFieldBegin({fname:"clientEvents",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),t.clientEvents!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.clientEvents.length});for(var o of t.clientEvents)Ge(o,n);n.writeListEnd()}else{var a=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:a.length});for(var i of a)Ge(i,n);n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function je(t,n){n.writeStructBegin("ThreadIdInfo"),t.groupThreadId!=null&&(n.writeFieldBegin({fname:"groupThreadId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.groupThreadId),n.writeFieldEnd()),t.peerId!=null&&(n.writeFieldBegin({fname:"peerId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.peerId),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Ke(e,t){t.writeStructBegin("ClientEventResponse"),t.writeFieldStop(),t.writeStructEnd()}function Qe(t,n){if(n.writeStructBegin("RingRequest"),n.writeFieldBegin({fname:"caller",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.caller!=null)n.writeString(t.caller);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"otherParticipants",ftype:e.SET,fid:2}),t.otherParticipants!=null){n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:t.otherParticipants.size});for(var i of t.otherParticipants)n.writeString(i);n.writeSetEnd()}else{var l=new Set;n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:l.size});for(var s of l)n.writeString(s);n.writeSetEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"ringType",ftype:e.I32,fid:4}),t.ringType!=null){var u;n.writeI32((u=t.ringType)!=null?u:0)}else{var c=o("MultiwayCommonTypes").RingType.cast(0);n.writeI32(c!=null?c:0)}if(n.writeFieldEnd(),t.offeredExperiments!=null&&(n.writeFieldBegin({fname:"offeredExperiments",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.offeredExperiments),n.writeFieldEnd()),t.isScheduledCall!=null&&(n.writeFieldBegin({fname:"isScheduledCall",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:6}),n.writeBool(t.isScheduledCall),n.writeFieldEnd()),t.appMessages!=null){n.writeFieldBegin({fname:"appMessages",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:8}),n.writeListBegin({etype:e.STRUCT,size:t.appMessages.length});for(var d of t.appMessages)o("DataMessageSerializers").serializeDataMessage(d,n);n.writeListEnd(),n.writeFieldEnd()}if(t.offer!=null&&(n.writeFieldBegin({fname:"offer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:10}),de(t.offer,n),n.writeFieldEnd()),t.mediaStatusEx!=null&&(n.writeFieldBegin({fname:"mediaStatusEx",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:11}),o("MultiwaySharedSerializers").serializeClientMediaStatus(t.mediaStatusEx,n),n.writeFieldEnd()),t.isPreconnectSupported!=null&&(n.writeFieldBegin({fname:"isPreconnectSupported",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:12}),n.writeBool(t.isPreconnectSupported),n.writeFieldEnd()),t.sdpOriginLocalId!=null&&(n.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:13}),n.writeString(t.sdpOriginLocalId),n.writeFieldEnd()),t.unifiedOffer!=null&&(n.writeFieldBegin({fname:"unifiedOffer",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:14}),de(t.unifiedOffer,n),n.writeFieldEnd()),n.writeFieldBegin({fname:"mediaPath",ftype:e.I32,fid:15}),t.mediaPath!=null){var m;n.writeI32((m=t.mediaPath)!=null?m:0)}else{var p=o("MultiwaySharedTypes").MediaPath.cast(0);n.writeI32(p!=null?p:0)}if(n.writeFieldEnd(),t.e2eeEnforcement!=null&&(n.writeFieldBegin({fname:"e2eeEnforcement",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:16}),o("MultiwaySharedSerializers").serializeE2eeEnforcement(t.e2eeEnforcement,n),n.writeFieldEnd()),t.isLegacyCall!=null&&(n.writeFieldBegin({fname:"isLegacyCall",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:17}),n.writeBool(t.isLegacyCall),n.writeFieldEnd()),n.writeFieldBegin({fname:"isTransferCall",ftype:e.BOOL,fid:18}),t.isTransferCall!=null)n.writeBool(t.isTransferCall);else{var _=!1;n.writeBool(_)}if(n.writeFieldEnd(),t.relayInfo!=null&&(n.writeFieldBegin({fname:"relayInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:20}),o("MultiwaySharedSerializers").serializeRelayInfo(t.relayInfo,n),n.writeFieldEnd()),t.overlayConfigs!=null){n.writeFieldBegin({fname:"overlayConfigs",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:21}),n.writeMapBegin({ktype:e.I32,vtype:e.I32,size:Object.keys(t.overlayConfigs).length});for(var f of Object.entries(t.overlayConfigs)){var g=f[0],h=f[1];n.writeI32(Number(g)),n.writeI32(h)}n.writeMapEnd(),n.writeFieldEnd()}t.productMetadata!=null&&(n.writeFieldBegin({fname:"productMetadata",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:22}),Ne(t.productMetadata,n),n.writeFieldEnd()),t.callerClientSessionId!=null&&(n.writeFieldBegin({fname:"callerClientSessionId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:23}),n.writeString(t.callerClientSessionId),n.writeFieldEnd()),t.threadIdInfo!=null&&(n.writeFieldBegin({fname:"threadIdInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:24}),je(t.threadIdInfo,n),n.writeFieldEnd()),t.linkUrl!=null&&(n.writeFieldBegin({fname:"linkUrl",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:25}),n.writeString(t.linkUrl),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Xe(t,n){if(n.writeStructBegin("RingResponse"),n.writeFieldBegin({fname:"deviceStatus",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),t.deviceStatus!=null){var a;n.writeI32((a=t.deviceStatus)!=null?a:0)}else{var i=o("MultiwayCommonTypes").DeviceStatus.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Ye(t,n){if(n.writeStructBegin("RemoveParticipantsRequest"),n.writeFieldBegin({fname:"usersToRemove",ftype:(e||(e=r("ThriftTypes"))).SET,fid:1}),t.usersToRemove!=null){n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:t.usersToRemove.size});for(var o of t.usersToRemove)n.writeString(o);n.writeSetEnd()}else{var a=new Set;n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:a.size});for(var i of a)n.writeString(i);n.writeSetEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Je(t,n){if(n.writeStructBegin("UnsubscribeRequest"),n.writeFieldBegin({fname:"topic",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.topic!=null)n.writeString(t.topic);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"version",ftype:e.I32,fid:2}),t.version!=null)n.writeI32(t.version);else{var i=0;n.writeI32(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"topicId",ftype:e.I32,fid:3}),t.topicId!=null){var l;n.writeI32((l=t.topicId)!=null?l:0)}else{var s=o("StateSyncTopicsConfigTypes").TopicId.cast(0);n.writeI32(s!=null?s:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Ze(t,n){if(n.writeStructBegin("UnsubscribeResponse"),n.writeFieldBegin({fname:"topic",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.topic!=null)n.writeString(t.topic);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"version",ftype:e.I32,fid:2}),t.version!=null)n.writeI32(t.version);else{var a=0;n.writeI32(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function et(t,n){if(n.writeStructBegin("UpdateRequest"),n.writeFieldBegin({fname:"syncPayload",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),t.syncPayload!=null)he(t.syncPayload,n);else{var a=f();he(a,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"topic",ftype:e.STRING,fid:2}),t.topic!=null)n.writeString(t.topic);else{var i="";n.writeString(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"version",ftype:e.I32,fid:3}),t.version!=null)n.writeI32(t.version);else{var l=0;n.writeI32(l)}if(n.writeFieldEnd(),t.data!=null&&(n.writeFieldBegin({fname:"data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.data),n.writeFieldEnd()),n.writeFieldBegin({fname:"topicId",ftype:e.I32,fid:5}),t.topicId!=null){var s;n.writeI32((s=t.topicId)!=null?s:0)}else{var u=o("StateSyncTopicsConfigTypes").TopicId.cast(0);n.writeI32(u!=null?u:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function tt(t,n){if(n.writeStructBegin("UpdateResponse"),n.writeFieldBegin({fname:"topic",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),t.topic!=null)n.writeString(t.topic);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"version",ftype:e.I32,fid:3}),t.version!=null)n.writeI32(t.version);else{var a=0;n.writeI32(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function nt(t,n){if(n.writeStructBegin("NotifyRequest"),n.writeFieldBegin({fname:"topic",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),t.topic!=null)n.writeString(t.topic);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"version",ftype:e.I32,fid:3}),t.version!=null)n.writeI32(t.version);else{var a=0;n.writeI32(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"data",ftype:e.STRING,fid:4}),t.data!=null)n.writeBinary(t.data);else{var i=Uint8Array.of();n.writeBinary(i)}if(n.writeFieldEnd(),t.syncPayload!=null&&(n.writeFieldBegin({fname:"syncPayload",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),he(t.syncPayload,n),n.writeFieldEnd()),t.topicId!=null){var l;n.writeFieldBegin({fname:"topicId",ftype:(e||(e=r("ThriftTypes"))).I32,fid:6}),n.writeI32((l=t.topicId)!=null?l:0),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function rt(t,n){if(n.writeStructBegin("NotifyResponse"),n.writeFieldBegin({fname:"topic",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),t.topic!=null)n.writeString(t.topic);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"version",ftype:e.I32,fid:3}),t.version!=null)n.writeI32(t.version);else{var a=0;n.writeI32(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function ot(t,n){if(n.writeStructBegin("ApprovalRequest"),n.writeFieldBegin({fname:"approvalStatus",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),t.approvalStatus!=null){var a;n.writeI32((a=t.approvalStatus)!=null?a:0)}else{var i=o("MultiwayCommonTypes").ApprovalStatus.cast(0);n.writeI32(i!=null?i:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"targetUsers",ftype:e.SET,fid:3}),t.targetUsers!=null){n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:t.targetUsers.size});for(var l of t.targetUsers)n.writeString(l);n.writeSetEnd()}else{var s=new Set;n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:s.size});for(var u of s)n.writeString(u);n.writeSetEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function at(t,n){if(n.writeStructBegin("RtcSender"),n.writeFieldBegin({fname:"id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.id!=null)n.writeString(t.id);else{var o="";n.writeString(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function it(t,n){if(n.writeStructBegin("RtcReceiver"),n.writeFieldBegin({fname:"actorId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.actorId!=null)n.writeString(t.actorId);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"baseId",ftype:e.STRING,fid:2}),t.baseId!=null)n.writeString(t.baseId);else{var a="";n.writeString(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function lt(t,n){if(n.writeStructBegin("RtcMessageHeader"),n.writeFieldBegin({fname:"type",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.type!=null){var a;n.writeI32((a=t.type)!=null?a:0)}else{var i=o("MultiwayCommonTypes").MessageType.cast(0);n.writeI32(i!=null?i:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"conferenceName",ftype:e.STRING,fid:2}),t.conferenceName!=null)n.writeString(t.conferenceName);else{var l="";n.writeString(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"transactionId",ftype:e.STRING,fid:3}),t.transactionId!=null)n.writeString(t.transactionId);else{var s="";n.writeString(s)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"retryCount",ftype:e.I16,fid:4}),t.retryCount!=null)n.writeI16(t.retryCount);else{var u=0;n.writeI16(u)}if(n.writeFieldEnd(),t.serverInfoData!=null&&(n.writeFieldBegin({fname:"serverInfoData",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.serverInfoData),n.writeFieldEnd()),t.responseStatusCode!=null){var c;n.writeFieldBegin({fname:"responseStatusCode",ftype:(e||(e=r("ThriftTypes"))).I32,fid:6}),n.writeI32((c=t.responseStatusCode)!=null?c:0),n.writeFieldEnd()}if(t.extensions!=null){n.writeFieldBegin({fname:"extensions",ftype:(e||(e=r("ThriftTypes"))).MAP,fid:7}),n.writeMapBegin({ktype:e.STRING,vtype:e.STRING,size:Object.keys(t.extensions).length});for(var d of Object.entries(t.extensions)){var m=d[0],p=d[1];n.writeString(m),n.writeString(p)}n.writeMapEnd(),n.writeFieldEnd()}if(t.sequenceNumber!=null&&(n.writeFieldBegin({fname:"sequenceNumber",ftype:(e||(e=r("ThriftTypes"))).I64,fid:8}),n.writeI64(BigInt(t.sequenceNumber)),n.writeFieldEnd()),t.clientSessionId!=null&&(n.writeFieldBegin({fname:"clientSessionId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:9}),n.writeString(t.clientSessionId),n.writeFieldEnd()),t.responseStatusMessage!=null&&(n.writeFieldBegin({fname:"responseStatusMessage",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:10}),n.writeString(t.responseStatusMessage),n.writeFieldEnd()),t.responseSubCode!=null){var _;n.writeFieldBegin({fname:"responseSubCode",ftype:(e||(e=r("ThriftTypes"))).I32,fid:11}),n.writeI32((_=t.responseSubCode)!=null?_:0),n.writeFieldEnd()}if(t.collisionKey!=null&&(n.writeFieldBegin({fname:"collisionKey",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:12}),n.writeString(t.collisionKey),n.writeFieldEnd()),t.conferenceType!=null){var f;n.writeFieldBegin({fname:"conferenceType",ftype:(e||(e=r("ThriftTypes"))).I32,fid:13}),n.writeI32((f=t.conferenceType)!=null?f:0),n.writeFieldEnd()}if(t.serverSessionId!=null&&(n.writeFieldBegin({fname:"serverSessionId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:14}),n.writeString(t.serverSessionId),n.writeFieldEnd()),t.rtcHandle!=null&&(n.writeFieldBegin({fname:"rtcHandle",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:15}),n.writeString(t.rtcHandle),n.writeFieldEnd()),t.retryAfterMsec!=null&&(n.writeFieldBegin({fname:"retryAfterMsec",ftype:(e||(e=r("ThriftTypes"))).I32,fid:16}),n.writeI32(t.retryAfterMsec),n.writeFieldEnd()),t.receiverUserId!=null&&(n.writeFieldBegin({fname:"receiverUserId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:17}),n.writeString(t.receiverUserId),n.writeFieldEnd()),t.clientStack!=null){var g;n.writeFieldBegin({fname:"clientStack",ftype:(e||(e=r("ThriftTypes"))).I32,fid:18}),n.writeI32((g=t.clientStack)!=null?g:0),n.writeFieldEnd()}if(t.serverMsgTime!=null&&(n.writeFieldBegin({fname:"serverMsgTime",ftype:(e||(e=r("ThriftTypes"))).I64,fid:19}),n.writeI64(BigInt(t.serverMsgTime)),n.writeFieldEnd()),t.sender!=null&&(n.writeFieldBegin({fname:"sender",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:20}),at(t.sender,n),n.writeFieldEnd()),t.receiver!=null&&(n.writeFieldBegin({fname:"receiver",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:21}),it(t.receiver,n),n.writeFieldEnd()),t.messageTags!=null){n.writeFieldBegin({fname:"messageTags",ftype:(e||(e=r("ThriftTypes"))).SET,fid:22}),n.writeSetBegin({etype:e.I32,size:t.messageTags.size});for(var h of t.messageTags)n.writeI32(h!=null?h:0);n.writeSetEnd(),n.writeFieldEnd()}t.conferenceId!=null&&(n.writeFieldBegin({fname:"conferenceId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:23}),n.writeI64(BigInt(t.conferenceId)),n.writeFieldEnd()),t.protocolVersion!=null&&(n.writeFieldBegin({fname:"protocolVersion",ftype:(e||(e=r("ThriftTypes"))).I32,fid:24}),n.writeI32(t.protocolVersion),n.writeFieldEnd()),t.bodyCompressionVersion!=null&&(n.writeFieldBegin({fname:"bodyCompressionVersion",ftype:(e||(e=r("ThriftTypes"))).I64,fid:25}),n.writeI64(BigInt(t.bodyCompressionVersion)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function st(t,n){n.writeStructBegin("RtcMessageBody"),t.joinRequest!=null&&(n.writeFieldBegin({fname:"joinRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),qe(t.joinRequest,n),n.writeFieldEnd()),t.joinResponse!=null&&(n.writeFieldBegin({fname:"joinResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),Ue(t.joinResponse,n),n.writeFieldEnd()),t.serverMediaUpdateRequest!=null&&(n.writeFieldBegin({fname:"serverMediaUpdateRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),Re(t.serverMediaUpdateRequest,n),n.writeFieldEnd()),t.serverMediaUpdateResponse!=null&&(n.writeFieldBegin({fname:"serverMediaUpdateResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),Le(t.serverMediaUpdateResponse,n),n.writeFieldEnd()),t.hangupRequest!=null&&(n.writeFieldBegin({fname:"hangupRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),ke(t.hangupRequest,n),n.writeFieldEnd()),t.iceCandidateRequest!=null&&(n.writeFieldBegin({fname:"iceCandidateRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),Ie(t.iceCandidateRequest,n),n.writeFieldEnd()),t.ringRequest!=null&&(n.writeFieldBegin({fname:"ringRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:8}),Qe(t.ringRequest,n),n.writeFieldEnd()),t.ringResponse!=null&&(n.writeFieldBegin({fname:"ringResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:9}),Xe(t.ringResponse,n),n.writeFieldEnd()),t.dismissRequest!=null&&(n.writeFieldBegin({fname:"dismissRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:10}),Te(t.dismissRequest,n),n.writeFieldEnd()),t.conferenceStateRequest!=null&&(n.writeFieldBegin({fname:"conferenceStateRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:11}),Me(t.conferenceStateRequest,n),n.writeFieldEnd()),t.conferenceStateResponse!=null&&(n.writeFieldBegin({fname:"conferenceStateResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:12}),we(t.conferenceStateResponse,n),n.writeFieldEnd()),t.addParticipantsRequest!=null&&(n.writeFieldBegin({fname:"addParticipantsRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:13}),Be(t.addParticipantsRequest,n),n.writeFieldEnd()),t.subscriptionRequest!=null&&(n.writeFieldBegin({fname:"subscriptionRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:14}),Ae(t.subscriptionRequest,n),n.writeFieldEnd()),t.clientMediaUpdateRequest!=null&&(n.writeFieldBegin({fname:"clientMediaUpdateRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:15}),be(t.clientMediaUpdateRequest,n),n.writeFieldEnd()),t.clientMediaUpdateResponse!=null&&(n.writeFieldBegin({fname:"clientMediaUpdateResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:16}),ve(t.clientMediaUpdateResponse,n),n.writeFieldEnd()),t.dataMessageRequest!=null&&(n.writeFieldBegin({fname:"dataMessageRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:17}),Fe(t.dataMessageRequest,n),n.writeFieldEnd()),t.removeParticipantsRequest!=null&&(n.writeFieldBegin({fname:"removeParticipantsRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:18}),Ye(t.removeParticipantsRequest,n),n.writeFieldEnd()),t.dataMessageResponse!=null&&(n.writeFieldBegin({fname:"dataMessageResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:19}),Oe(t.dataMessageResponse,n),n.writeFieldEnd()),t.updateRequest!=null&&(n.writeFieldBegin({fname:"updateRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:30}),et(t.updateRequest,n),n.writeFieldEnd()),t.updateResponse!=null&&(n.writeFieldBegin({fname:"updateResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:31}),tt(t.updateResponse,n),n.writeFieldEnd()),t.notifyRequest!=null&&(n.writeFieldBegin({fname:"notifyRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:32}),nt(t.notifyRequest,n),n.writeFieldEnd()),t.notifyResponse!=null&&(n.writeFieldBegin({fname:"notifyResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:33}),rt(t.notifyResponse,n),n.writeFieldEnd()),t.connectRequest!=null&&(n.writeFieldBegin({fname:"connectRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:34}),Ve(t.connectRequest,n),n.writeFieldEnd()),t.connectResponse!=null&&(n.writeFieldBegin({fname:"connectResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:35}),He(t.connectResponse,n),n.writeFieldEnd()),t.clientEventRequest!=null&&(n.writeFieldBegin({fname:"clientEventRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:36}),ze(t.clientEventRequest,n),n.writeFieldEnd()),t.clientEventResponse!=null&&(n.writeFieldBegin({fname:"clientEventResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:37}),Ke(t.clientEventResponse,n),n.writeFieldEnd()),t.unsubscribeRequest!=null&&(n.writeFieldBegin({fname:"unsubscribeRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:40}),Je(t.unsubscribeRequest,n),n.writeFieldEnd()),t.unsubscribeResponse!=null&&(n.writeFieldBegin({fname:"unsubscribeResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:41}),Ze(t.unsubscribeResponse,n),n.writeFieldEnd()),t.approvalRequest!=null&&(n.writeFieldBegin({fname:"approvalRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:42}),ot(t.approvalRequest,n),n.writeFieldEnd()),t.transferRequest!=null&&(n.writeFieldBegin({fname:"transferRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:43}),Ee(t.transferRequest,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ut(t,n){if(n.writeStructBegin("RtcMultiwayMessage"),n.writeFieldBegin({fname:"messageHeader",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),t.messageHeader!=null)lt(t.messageHeader,n);else{var o=ae();lt(o,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"messageBody",ftype:e.STRUCT,fid:2}),t.messageBody!=null)st(t.messageBody,n);else{var a=ie();st(a,n)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function ct(t,n){if(n.writeStructBegin("GroupOfUsers"),n.writeFieldBegin({fname:"users",ftype:(e||(e=r("ThriftTypes"))).SET,fid:1}),t.users!=null){n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:t.users.size});for(var o of t.users)n.writeString(o);n.writeSetEnd()}else{var a=new Set;n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:a.size});for(var i of a)n.writeString(i);n.writeSetEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"allowMultipleJoins",ftype:e.BOOL,fid:2}),t.allowMultipleJoins!=null)n.writeBool(t.allowMultipleJoins);else{var l=!1;n.writeBool(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"dismissOthersOnFirstJoin",ftype:e.BOOL,fid:3}),t.dismissOthersOnFirstJoin!=null)n.writeBool(t.dismissOthersOnFirstJoin);else{var s=!1;n.writeBool(s)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"aliasId",ftype:e.STRING,fid:4}),t.aliasId!=null)n.writeString(t.aliasId);else{var u="";n.writeString(u)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function dt(t,n){if(n.writeStructBegin("RtcMessageBodyVariant"),t.joinRequest!=null){n.writeFieldBegin({fname:"joinRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),qe(t.joinRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.joinResponse!=null){n.writeFieldBegin({fname:"joinResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),Ue(t.joinResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.serverMediaUpdateRequest!=null){n.writeFieldBegin({fname:"serverMediaUpdateRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),Re(t.serverMediaUpdateRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.serverMediaUpdateResponse!=null){n.writeFieldBegin({fname:"serverMediaUpdateResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),Le(t.serverMediaUpdateResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.hangupRequest!=null){n.writeFieldBegin({fname:"hangupRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),ke(t.hangupRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.iceCandidateRequest!=null){n.writeFieldBegin({fname:"iceCandidateRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),Ie(t.iceCandidateRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ringRequest!=null){n.writeFieldBegin({fname:"ringRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:8}),Qe(t.ringRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ringResponse!=null){n.writeFieldBegin({fname:"ringResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:9}),Xe(t.ringResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.dismissRequest!=null){n.writeFieldBegin({fname:"dismissRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:10}),Te(t.dismissRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.conferenceStateRequest!=null){n.writeFieldBegin({fname:"conferenceStateRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:11}),Me(t.conferenceStateRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.conferenceStateResponse!=null){n.writeFieldBegin({fname:"conferenceStateResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:12}),we(t.conferenceStateResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.addParticipantsRequest!=null){n.writeFieldBegin({fname:"addParticipantsRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:13}),Be(t.addParticipantsRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.subscriptionRequest!=null){n.writeFieldBegin({fname:"subscriptionRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:14}),Ae(t.subscriptionRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.clientMediaUpdateRequest!=null){n.writeFieldBegin({fname:"clientMediaUpdateRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:15}),be(t.clientMediaUpdateRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.clientMediaUpdateResponse!=null){n.writeFieldBegin({fname:"clientMediaUpdateResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:16}),ve(t.clientMediaUpdateResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.dataMessageRequest!=null){n.writeFieldBegin({fname:"dataMessageRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:17}),Fe(t.dataMessageRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.removeParticipantsRequest!=null){n.writeFieldBegin({fname:"removeParticipantsRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:18}),Ye(t.removeParticipantsRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.dataMessageResponse!=null){n.writeFieldBegin({fname:"dataMessageResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:19}),Oe(t.dataMessageResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.updateRequest!=null){n.writeFieldBegin({fname:"updateRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:30}),et(t.updateRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.updateResponse!=null){n.writeFieldBegin({fname:"updateResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:31}),tt(t.updateResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.notifyRequest!=null){n.writeFieldBegin({fname:"notifyRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:32}),nt(t.notifyRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.notifyResponse!=null){n.writeFieldBegin({fname:"notifyResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:33}),rt(t.notifyResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.connectRequest!=null){n.writeFieldBegin({fname:"connectRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:34}),Ve(t.connectRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.connectResponse!=null){n.writeFieldBegin({fname:"connectResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:35}),He(t.connectResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.clientEventRequest!=null){n.writeFieldBegin({fname:"clientEventRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:36}),ze(t.clientEventRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.clientEventResponse!=null){n.writeFieldBegin({fname:"clientEventResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:37}),Ke(t.clientEventResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.unsubscribeRequest!=null){n.writeFieldBegin({fname:"unsubscribeRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:40}),Je(t.unsubscribeRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.unsubscribeResponse!=null){n.writeFieldBegin({fname:"unsubscribeResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:41}),Ze(t.unsubscribeResponse,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.approvalRequest!=null){n.writeFieldBegin({fname:"approvalRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:42}),ot(t.approvalRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.transferRequest!=null){n.writeFieldBegin({fname:"transferRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:43}),Ee(t.transferRequest,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function mt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.responseStatusCode=o("MultiwayCommonTypes").RtcResponseStatusCode.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.responseSubCode=o("MultiwayCommonTypes").RtcResponseSubCode.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.apiStatusCode=o("MultiwayCommonTypes").RtcApiStatusCode.cast(t.readI32()):t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).I32?n.rtcLogSeverity=o("MultiwayCommonTypes").RtcLogSeverity.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.message===void 0&&(n.message=""),n.responseStatusCode===void 0&&(n.responseStatusCode=o("MultiwayCommonTypes").RtcResponseStatusCode.cast(0)),n.responseSubCode===void 0&&(n.responseSubCode=o("MultiwayCommonTypes").RtcResponseSubCode.cast(0)),n.apiStatusCode===void 0&&(n.apiStatusCode=o("MultiwayCommonTypes").RtcApiStatusCode.cast(0)),n.rtcLogSeverity===void 0&&(n.rtcLogSeverity=o("MultiwayCommonTypes").RtcLogSeverity.cast(0)),n}function pt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.sdpString=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.sdpThrift=o("WebrtcSdpSerializers").deserializeSdp(t):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I64?n.sdpCompressionVersion=t.readI64().toString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.sdpCompressedData=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function _t(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).MAP){n.media={};for(var l=t.readMapBegin(),s=0;s<l.size;s++){var u=t.readI32(),c=ft(t);n.media[u]=c}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.media===void 0&&(n.media={}),n}function ft(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.body=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.msid=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.mid=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.body===void 0&&(n.body=""),n.msid===void 0&&(n.msid=""),n.mid===void 0&&(n.mid=""),n}function gt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.sourceKey=t.readString():t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.media=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("MultiwaySharedSerializers").deserializeMedia(t);n.media.push(c)}}else t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).LIST){n.ssrcGroups=[];for(var d=t.readListBegin(),m=0;m<d.size;m++){var p=o("MultiwaySharedSerializers").deserializeSsrcGroup(t);n.ssrcGroups.push(p)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.sourceKey===void 0&&(n.sourceKey=""),n.media===void 0&&(n.media=[]),n.ssrcGroups===void 0&&(n.ssrcGroups=[]),n}function ht(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).MAP){n.mediaStatus={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){var c=t.readString(),d=t.readBool();n.mediaStatus[c]=d}}else t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.mediaStatusEx=o("MultiwaySharedSerializers").deserializeClientMediaStatus(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.mediaStatus===void 0&&(n.mediaStatus={}),n}function yt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.candidateSdpString=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I64?n.sdpMLineIndex=t.readI64().toString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.sdpMid=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRUCT?n.candidateSdpThrift=o("WebrtcSdpSerializers").deserializeIceCandidateSdp(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.sdpMLineIndex===void 0&&(n.sdpMLineIndex="0"),n.sdpMid===void 0&&(n.sdpMid=""),n}function Ct(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).MAP){n.stateStore={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){var c=t.readString(),d=o("StateSyncSerializers").deserializeState(t);n.stateStore[c]=d}}else t.skip(i);break;case 4:if(i===(e||(e=r("ThriftTypes"))).MAP){n.stateStoreV2={};for(var m=t.readMapBegin(),p=0;p<m.size;p++){var _=o("StateSyncTopicsConfigTypes").TopicId.cast(t.readI32()),f=o("StateSyncSerializers").deserializeState(t);_!=null&&(n.stateStoreV2[_]=f)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.stateStore===void 0&&(n.stateStore={}),n.stateStoreV2===void 0&&(n.stateStoreV2={}),n}function bt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I32?n.version=t.readI32():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.version===void 0&&(n.version=0),n}function vt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.encryptedTopic=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.encryptedData=t.readBinary():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.senderId=t.readBinary():t.skip(i);break;case 4:if(i===(e||(e=r("ThriftTypes"))).SET){n.targetIds=new Set;for(var s=t.readSetBegin(),u=0;u<s.size;u++){var c=o("Utf8ToString").Utf8ToString(t.readBinary());n.targetIds.add(c)}}else t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).I32?n.messageType=o("MultiwayCommonTypes").E2eeDataMessageType.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.encryptedTopic===void 0&&(n.encryptedTopic=""),n.encryptedData===void 0&&(n.encryptedData=Uint8Array.of()),n.senderId===void 0&&(n.senderId=Uint8Array.of()),n.messageType===void 0&&(n.messageType=o("MultiwayCommonTypes").E2eeDataMessageType.cast(0)),n}function St(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.fromVersion=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.toVersion=t.readI64().toString():t.skip(a);break;case 3:if(a===(e||(e=r("ThriftTypes"))).LIST){n.mediaUpdates=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=ht(t);n.mediaUpdates.push(u)}}else t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRUCT?n.offer=pt(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.fromVersion===void 0&&(n.fromVersion="0"),n.toVersion===void 0&&(n.toVersion="0"),n.mediaUpdates===void 0&&(n.mediaUpdates=[]),n}function Rt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.currentVersion=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.answer=pt(t):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRUCT?n.mediaStatus=o("MultiwaySharedSerializers").deserializeClientMediaStatus(t):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.sdpOriginLocalId=t.readString():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRUCT?n.renegotiationOffer=pt(t):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I32?n.mediaPath=o("MultiwaySharedTypes").MediaPath.cast(t.readI32()):t.skip(i);break;case 7:if(i===(e||(e=r("ThriftTypes"))).MAP){n.stateStore={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){var c=t.readString(),d=o("StateSyncSerializers").deserializeState(t);n.stateStore[c]=d}}else t.skip(i);break;case 8:if(i===(e||(e=r("ThriftTypes"))).MAP){n.stateStoreV2={};for(var m=t.readMapBegin(),p=0;p<m.size;p++){var _=o("StateSyncTopicsConfigTypes").TopicId.cast(t.readI32()),f=o("StateSyncSerializers").deserializeState(t);_!=null&&(n.stateStoreV2[_]=f)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.currentVersion===void 0&&(n.currentVersion="0"),n.mediaPath===void 0&&(n.mediaPath=o("MultiwaySharedTypes").MediaPath.cast(0)),n}function Lt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.callerUserId=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.calleeUserId=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.sessionId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.callerUserId===void 0&&(n.callerUserId=""),n.calleeUserId===void 0&&(n.calleeUserId=""),n.sessionId===void 0&&(n.sessionId=""),n}function Et(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.fromVersion=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I64?n.toVersion=t.readI64().toString():t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).LIST){n.mediaUpdates=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=gt(t);n.mediaUpdates.push(c)}}else t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRUCT?n.offer=pt(t):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).STRUCT?n.answer=pt(t):t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRUCT?n.mediaStatus=o("MultiwaySharedSerializers").deserializeClientMediaStatus(t):t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).BOOL?n.renegotiationRequested=t.readBool():t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).STRUCT?n.prAnswer=pt(t):t.skip(i);break;case 10:if(i===(e||(e=r("ThriftTypes"))).MAP){n.stateStore={};for(var d=t.readMapBegin(),m=0;m<d.size;m++){var p=t.readString(),_=o("StateSyncSerializers").deserializeState(t);n.stateStore[p]=_}}else t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).STRING?n.sdpOriginLocalId=t.readString():t.skip(i);break;case 12:i===(e||(e=r("ThriftTypes"))).STRUCT?n.multipleRelaysParameters=Lt(t):t.skip(i);break;case 13:i===(e||(e=r("ThriftTypes"))).BOOL?n.multipleVideoStreamsAllowed=t.readBool():t.skip(i);break;case 14:i===(e||(e=r("ThriftTypes"))).STRUCT?n.renegotiationOffer=pt(t):t.skip(i);break;case 15:i===(e||(e=r("ThriftTypes"))).I32?n.mediaPath=o("MultiwaySharedTypes").MediaPath.cast(t.readI32()):t.skip(i);break;case 16:i===(e||(e=r("ThriftTypes"))).STRUCT?n.update=_t(t):t.skip(i);break;case 17:i===(e||(e=r("ThriftTypes"))).BOOL?n.screenShareStreamAllowed=t.readBool():t.skip(i);break;case 18:if(i===(e||(e=r("ThriftTypes"))).MAP){n.stateStoreV2={};for(var f=t.readMapBegin(),g=0;g<f.size;g++){var h=o("StateSyncTopicsConfigTypes").TopicId.cast(t.readI32()),y=o("StateSyncSerializers").deserializeState(t);h!=null&&(n.stateStoreV2[h]=y)}}else t.skip(i);break;case 19:if(i===(e||(e=r("ThriftTypes"))).SET){n.allowedCustomVideoContentTypes=new Set;for(var C=t.readSetBegin(),b=0;b<C.size;b++){var v=o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(t.readI32());n.allowedCustomVideoContentTypes.add(v)}}else t.skip(i);break;case 20:i===(e||(e=r("ThriftTypes"))).STRUCT?n.relayInfo=o("MultiwaySharedSerializers").deserializeRelayInfo(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.fromVersion===void 0&&(n.fromVersion="0"),n.toVersion===void 0&&(n.toVersion="0"),n.mediaUpdates===void 0&&(n.mediaUpdates=[]),n.renegotiationRequested===void 0&&(n.renegotiationRequested=!1),n.multipleVideoStreamsAllowed===void 0&&(n.multipleVideoStreamsAllowed=!1),n.mediaPath===void 0&&(n.mediaPath=o("MultiwaySharedTypes").MediaPath.cast(0)),n.screenShareStreamAllowed===void 0&&(n.screenShareStreamAllowed=!1),n}function kt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.currentVersion=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.answer=pt(t):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRUCT?n.mediaStatus=o("MultiwaySharedSerializers").deserializeClientMediaStatus(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.currentVersion===void 0&&(n.currentVersion="0"),n}function It(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;t.skip(a),t.readFieldEnd()}return t.readStructEnd(),n}function Tt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.reason=o("MultiwayCommonTypes").HangupReason.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.detailedReasonString=t.readString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.reason===void 0&&(n.reason=o("MultiwayCommonTypes").HangupReason.cast(0)),n.detailedReasonString===void 0&&(n.detailedReasonString=""),n}function Dt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.iceCandidateSdps=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=yt(t);n.iceCandidateSdps.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.iceCandidateSdps===void 0&&(n.iceCandidateSdps=[]),n}function xt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.reason=o("MultiwayCommonTypes").DismissReason.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.detailedReasonString=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I64?n.callabilityResultErrorCode=t.readI64().toString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.reason===void 0&&(n.reason=o("MultiwayCommonTypes").DismissReason.cast(0)),n.detailedReasonString===void 0&&(n.detailedReasonString=""),n}function $t(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.joinMode=o("MultiwayCommonTypes").JoinMode.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.joinMode===void 0&&(n.joinMode=o("MultiwayCommonTypes").JoinMode.cast(0)),n}function Pt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.state=o("MultiwayCommonTypes").ParticipantCallState.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.userCapabilities=t.readBinary():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I64?n.sctpNodeId=t.readI64().toString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.state===void 0&&(n.state=o("MultiwayCommonTypes").ParticipantCallState.cast(0)),n}function Nt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.userCountry=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Mt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.name=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.profilePictureUri=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.aliasId=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.thirdPartyId=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.groupId=t.readString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRING?n.avatarImageUri=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function wt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.callerInfo=Mt(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.liveBroadcastId=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I32?n.callingTags=t.readI32():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.backingIdentifier=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function At(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.version=t.readI64().toString():t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).MAP){n.participantStates={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){var c=t.readString(),d=Pt(t);n.participantStates[c]=d}}else t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).MAP){n.userProfiles={};for(var m=t.readMapBegin(),p=0;p<m.size;p++){var _=t.readString(),f=Mt(t);n.userProfiles[_]=f}}else t.skip(i);break;case 4:if(i===(e||(e=r("ThriftTypes"))).LIST){n.appMessages=[];for(var g=t.readListBegin(),h=0;h<g.size;h++){var y=o("DataMessageSerializers").deserializeDataMessage(t);n.appMessages.push(y)}}else t.skip(i);break;case 5:if(i===(e||(e=r("ThriftTypes"))).LIST){n.groupsOfUsers=[];for(var C=t.readListBegin(),b=0;b<C.size;b++){var v=pn(t);n.groupsOfUsers.push(v)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.version===void 0&&(n.version="0"),n.participantStates===void 0&&(n.participantStates={}),n.groupsOfUsers===void 0&&(n.groupsOfUsers=[]),n}function Ft(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.currentVersion=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.currentVersion===void 0&&(n.currentVersion="0"),n}function Ot(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).LIST){n.subscriptions=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("MultiwaySharedSerializers").deserializeSubscription(t);n.subscriptions.push(c)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.subscriptions===void 0&&(n.subscriptions=[]),n}function Bt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.message=o("DataMessageSerializers").deserializeDataMessage(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.message===void 0&&(n.message=o("DataMessageSerializers").DataMessage$DefaultConstructor()),n}function Wt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).MAP){n.deliveryResult={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){var c=t.readString(),d=o("DataMessageTypes").DataMessageStatusCode.cast(t.readI32());n.deliveryResult[c]=d}}else t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).MAP){n.serviceTypeDeliveryResult={};for(var m=t.readMapBegin(),p=0;p<m.size;p++){var _=o("MultiwaySharedTypes").EndpointServiceType.cast(t.readI32()),f=o("DataMessageTypes").DataMessageStatusCode.cast(t.readI32());_!=null&&(n.serviceTypeDeliveryResult[_]=f)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.deliveryResult===void 0&&(n.deliveryResult={}),n}function qt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).SET){n.usersToInvite=new Set;for(var s=t.readSetBegin(),u=0;u<s.size;u++){var c=t.readString();n.usersToInvite.add(c)}}else t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.appMessages=[];for(var d=t.readListBegin(),m=0;m<d.size;m++){var p=o("DataMessageSerializers").deserializeDataMessage(t);n.appMessages.push(p)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.usersToInvite===void 0&&(n.usersToInvite=new Set),n}function Ut(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.smcTier=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.region=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.isUsfu=t.readBool():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).BOOL?n.isEdge=t.readBool():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.smcTier===void 0&&(n.smcTier=""),n.region===void 0&&(n.region=""),n.isUsfu===void 0&&(n.isUsfu=!1),n.isEdge===void 0&&(n.isEdge=!1),n}function Vt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.offer=pt(t):t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).SET){n.deviceCapabilities=new Set;for(var s=t.readSetBegin(),c=0;c<s.size;c++){var d=o("MultiwayCommonTypes").Capability.cast(t.readI32());n.deviceCapabilities.add(d)}}else t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).SET){n.usersToCall=new Set;for(var m=t.readSetBegin(),p=0;p<m.size;p++){var _=t.readString();n.usersToCall.add(_)}}else t.skip(i);break;case 4:if(i===(e||(e=r("ThriftTypes"))).MAP){n.mediaStatus={};for(var f=t.readMapBegin(),g=0;g<f.size;g++){var h=t.readString(),y=t.readBool();n.mediaStatus[h]=y}}else t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.userCapabilities=t.readBinary():t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).STRING?n.supportedExperiments=t.readString():t.skip(i);break;case 9:if(i===(e||(e=r("ThriftTypes"))).LIST){n.appMessages=[];for(var C=t.readListBegin(),b=0;b<C.size;b++){var v=o("DataMessageSerializers").deserializeDataMessage(t);n.appMessages.push(v)}}else t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).STRING?n.userToEscalate=t.readString():t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).I64?n.escalatingCallId=t.readI64().toString():t.skip(i);break;case 12:i===(e||(e=r("ThriftTypes"))).I32?n.conferenceType=o("MultiwaySharedTypes").ConferenceType.cast(t.readI32()):t.skip(i);break;case 13:i===(e||(e=r("ThriftTypes"))).STRUCT?n.mediaStatusEx=o("MultiwaySharedSerializers").deserializeClientMediaStatus(t):t.skip(i);break;case 14:i===(e||(e=r("ThriftTypes"))).STRUCT?n.answer=pt(t):t.skip(i);break;case 15:i===(e||(e=r("ThriftTypes"))).STRUCT?n.syncPayload=Ct(t):t.skip(i);break;case 16:if(i===(e||(e=r("ThriftTypes"))).SET){n.usersToApproveFromWaitingRoom=new Set;for(var S=t.readSetBegin(),R=0;R<S.size;R++){var L=t.readString();n.usersToApproveFromWaitingRoom.add(L)}}else t.skip(i);break;case 17:i===(e||(e=r("ThriftTypes"))).STRUCT?n.e2eeEnforcement=o("MultiwaySharedSerializers").deserializeE2eeEnforcement(t):t.skip(i);break;case 18:i===(e||(e=r("ThriftTypes"))).STRUCT?n.sfuAllocation=Ut(t):t.skip(i);break;case 19:i===(e||(e=r("ThriftTypes"))).I32?n.clientMediaMode=o("MultiwaySharedTypes").MediaPath.cast(t.readI32()):t.skip(i);break;case 20:i===(e||(e=r("ThriftTypes"))).STRUCT?n.endpointSettings=$t(t):t.skip(i);break;case 21:i===(e||(e=r("ThriftTypes"))).STRUCT?n.backupSfuAllocation=Ut(t):t.skip(i);break;case 22:if(i===(e||(e=r("ThriftTypes"))).SET){n.supportedCustomVideoContentTypes=new Set;for(var E=t.readSetBegin(),k=0;k<E.size;k++){var I=o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(t.readI32());n.supportedCustomVideoContentTypes.add(I)}}else t.skip(i);break;case 23:i===(e||(e=r("ThriftTypes"))).I32?n.configIntegrityOpaqueToken=t.readI32():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.offer===void 0&&(n.offer=u()),n.deviceCapabilities===void 0&&(n.deviceCapabilities=new Set),n}function Ht(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.answer=pt(t):t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).MAP){n.mediaStatus={};for(var s=t.readMapBegin(),c=0;c<s.size;c++){var d=t.readString(),m=t.readBool();n.mediaStatus[d]=m}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.initiator=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.negotiatedExperiments=t.readString():t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).STRUCT?n.mediaStatusEx=o("MultiwaySharedSerializers").deserializeClientMediaStatus(t):t.skip(i);break;case 7:if(i===(e||(e=r("ThriftTypes"))).LIST){n.appMessages=[];for(var p=t.readListBegin(),_=0;_<p.size;_++){var f=o("DataMessageSerializers").deserializeDataMessage(t);n.appMessages.push(f)}}else t.skip(i);break;case 8:if(i===(e||(e=r("ThriftTypes"))).MAP){n.stateStore={};for(var g=t.readMapBegin(),h=0;h<g.size;h++){var y=t.readString(),C=o("StateSyncSerializers").deserializeState(t);n.stateStore[y]=C}}else t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).STRING?n.sdpOriginLocalId=t.readString():t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).BOOL?n.isPendingApproval=t.readBool():t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).STRUCT?n.renegotiationOffer=pt(t):t.skip(i);break;case 12:i===(e||(e=r("ThriftTypes"))).BOOL?n.multipleVideoStreamsAllowed=t.readBool():t.skip(i);break;case 13:i===(e||(e=r("ThriftTypes"))).I32?n.mediaPath=o("MultiwaySharedTypes").MediaPath.cast(t.readI32()):t.skip(i);break;case 14:if(i===(e||(e=r("ThriftTypes"))).LIST){n.groupsOfUsers=[];for(var b=t.readListBegin(),v=0;v<b.size;v++){var S=pn(t);n.groupsOfUsers.push(S)}}else t.skip(i);break;case 15:i===(e||(e=r("ThriftTypes"))).BOOL?n.screenShareStreamAllowed=t.readBool():t.skip(i);break;case 16:i===(e||(e=r("ThriftTypes"))).STRUCT?n.relayInfo=o("MultiwaySharedSerializers").deserializeRelayInfo(t):t.skip(i);break;case 17:i===(e||(e=r("ThriftTypes"))).I64?n.selfSctpNodeId=t.readI64().toString():t.skip(i);break;case 18:if(i===(e||(e=r("ThriftTypes"))).MAP){n.stateStoreV2={};for(var R=t.readMapBegin(),L=0;L<R.size;L++){var E=o("StateSyncTopicsConfigTypes").TopicId.cast(t.readI32()),k=o("StateSyncSerializers").deserializeState(t);E!=null&&(n.stateStoreV2[E]=k)}}else t.skip(i);break;case 19:if(i===(e||(e=r("ThriftTypes"))).SET){n.allowedCustomVideoContentTypes=new Set;for(var I=t.readSetBegin(),T=0;T<I.size;T++){var D=o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(t.readI32());n.allowedCustomVideoContentTypes.add(D)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.answer===void 0&&(n.answer=u()),n.mediaStatus===void 0&&(n.mediaStatus={}),n.initiator===void 0&&(n.initiator=""),n.isPendingApproval===void 0&&(n.isPendingApproval=!1),n.multipleVideoStreamsAllowed===void 0&&(n.multipleVideoStreamsAllowed=!1),n.mediaPath===void 0&&(n.mediaPath=o("MultiwaySharedTypes").MediaPath.cast(0)),n.groupsOfUsers===void 0&&(n.groupsOfUsers=[]),n.screenShareStreamAllowed===void 0&&(n.screenShareStreamAllowed=!1),n}function Gt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.sdp=pt(t):t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).SET){n.deviceCapabilities=new Set;for(var s=t.readSetBegin(),u=0;u<s.size;u++){var c=o("MultiwayCommonTypes").Capability.cast(t.readI32());n.deviceCapabilities.add(c)}}else t.skip(i);break;case 5:if(i===(e||(e=r("ThriftTypes"))).SET){n.supportedCustomVideoContentTypes=new Set;for(var d=t.readSetBegin(),m=0;m<d.size;m++){var p=o("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(t.readI32());n.supportedCustomVideoContentTypes.add(p)}}else t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).STRUCT?n.prOffer=pt(t):t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRUCT?n.e2eeEnforcement=o("MultiwaySharedSerializers").deserializeE2eeEnforcement(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.deviceCapabilities===void 0&&(n.deviceCapabilities=new Set),n}function zt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.sdp=pt(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.sdpOriginLocalId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function jt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.type=o("MultiwayCommonTypes").ClientEventType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I64?n.time=t.readI64().toString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.type===void 0&&(n.type=o("MultiwayCommonTypes").ClientEventType.cast(0)),n}function Kt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.clientEvents=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=jt(t);n.clientEvents.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.clientEvents===void 0&&(n.clientEvents=[]),n}function Qt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.groupThreadId=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.peerId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Xt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;t.skip(a),t.readFieldEnd()}return t.readStructEnd(),n}function Yt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.caller=t.readString():t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).SET){n.otherParticipants=new Set;for(var s=t.readSetBegin(),u=0;u<s.size;u++){var c=t.readString();n.otherParticipants.add(c)}}else t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.ringType=o("MultiwayCommonTypes").RingType.cast(t.readI32()):t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.offeredExperiments=t.readString():t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).BOOL?n.isScheduledCall=t.readBool():t.skip(i);break;case 8:if(i===(e||(e=r("ThriftTypes"))).LIST){n.appMessages=[];for(var d=t.readListBegin(),m=0;m<d.size;m++){var p=o("DataMessageSerializers").deserializeDataMessage(t);n.appMessages.push(p)}}else t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).STRUCT?n.offer=pt(t):t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).STRUCT?n.mediaStatusEx=o("MultiwaySharedSerializers").deserializeClientMediaStatus(t):t.skip(i);break;case 12:i===(e||(e=r("ThriftTypes"))).BOOL?n.isPreconnectSupported=t.readBool():t.skip(i);break;case 13:i===(e||(e=r("ThriftTypes"))).STRING?n.sdpOriginLocalId=t.readString():t.skip(i);break;case 14:i===(e||(e=r("ThriftTypes"))).STRUCT?n.unifiedOffer=pt(t):t.skip(i);break;case 15:i===(e||(e=r("ThriftTypes"))).I32?n.mediaPath=o("MultiwaySharedTypes").MediaPath.cast(t.readI32()):t.skip(i);break;case 16:i===(e||(e=r("ThriftTypes"))).STRUCT?n.e2eeEnforcement=o("MultiwaySharedSerializers").deserializeE2eeEnforcement(t):t.skip(i);break;case 17:i===(e||(e=r("ThriftTypes"))).BOOL?n.isLegacyCall=t.readBool():t.skip(i);break;case 18:i===(e||(e=r("ThriftTypes"))).BOOL?n.isTransferCall=t.readBool():t.skip(i);break;case 20:i===(e||(e=r("ThriftTypes"))).STRUCT?n.relayInfo=o("MultiwaySharedSerializers").deserializeRelayInfo(t):t.skip(i);break;case 21:if(i===(e||(e=r("ThriftTypes"))).MAP){n.overlayConfigs={};for(var _=t.readMapBegin(),f=0;f<_.size;f++){var g=t.readI32(),h=t.readI32();n.overlayConfigs[g]=h}}else t.skip(i);break;case 22:i===(e||(e=r("ThriftTypes"))).STRUCT?n.productMetadata=wt(t):t.skip(i);break;case 23:i===(e||(e=r("ThriftTypes"))).STRING?n.callerClientSessionId=t.readString():t.skip(i);break;case 24:i===(e||(e=r("ThriftTypes"))).STRUCT?n.threadIdInfo=Qt(t):t.skip(i);break;case 25:i===(e||(e=r("ThriftTypes"))).STRING?n.linkUrl=t.readString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.caller===void 0&&(n.caller=""),n.otherParticipants===void 0&&(n.otherParticipants=new Set),n.ringType===void 0&&(n.ringType=o("MultiwayCommonTypes").RingType.cast(0)),n.mediaPath===void 0&&(n.mediaPath=o("MultiwaySharedTypes").MediaPath.cast(0)),n.isTransferCall===void 0&&(n.isTransferCall=!1),n}function Jt(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 2:i===(e||(e=r("ThriftTypes"))).I32?n.deviceStatus=o("MultiwayCommonTypes").DeviceStatus.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.deviceStatus===void 0&&(n.deviceStatus=o("MultiwayCommonTypes").DeviceStatus.cast(0)),n}function Zt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).SET){n.usersToRemove=new Set;for(var l=t.readSetBegin(),s=0;s<l.size;s++){var u=t.readString();n.usersToRemove.add(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.usersToRemove===void 0&&(n.usersToRemove=new Set),n}function en(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.topic=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.version=t.readI32():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.topicId=o("StateSyncTopicsConfigTypes").TopicId.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.topic===void 0&&(n.topic=""),n.version===void 0&&(n.version=0),n.topicId===void 0&&(n.topicId=o("StateSyncTopicsConfigTypes").TopicId.cast(0)),n}function tn(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.topic=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I32?n.version=t.readI32():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.topic===void 0&&(n.topic=""),n.version===void 0&&(n.version=0),n}function nn(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.syncPayload=Ct(t):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.topic=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.version=t.readI32():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.data=t.readBinary():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).I32?n.topicId=o("StateSyncTopicsConfigTypes").TopicId.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.syncPayload===void 0&&(n.syncPayload=f()),n.topic===void 0&&(n.topic=""),n.version===void 0&&(n.version=0),n.topicId===void 0&&(n.topicId=o("StateSyncTopicsConfigTypes").TopicId.cast(0)),n}function rn(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.topic=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I32?n.version=t.readI32():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.topic===void 0&&(n.topic=""),n.version===void 0&&(n.version=0),n}function on(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.topic=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.version=t.readI32():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.data=t.readBinary():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRUCT?n.syncPayload=Ct(t):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I32?n.topicId=o("StateSyncTopicsConfigTypes").TopicId.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.topic===void 0&&(n.topic=""),n.version===void 0&&(n.version=0),n.data===void 0&&(n.data=Uint8Array.of()),n}function an(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.topic=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I32?n.version=t.readI32():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.topic===void 0&&(n.topic=""),n.version===void 0&&(n.version=0),n}function ln(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 2:i===(e||(e=r("ThriftTypes"))).I32?n.approvalStatus=o("MultiwayCommonTypes").ApprovalStatus.cast(t.readI32()):t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).SET){n.targetUsers=new Set;for(var s=t.readSetBegin(),u=0;u<s.size;u++){var c=t.readString();n.targetUsers.add(c)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.approvalStatus===void 0&&(n.approvalStatus=o("MultiwayCommonTypes").ApprovalStatus.cast(0)),n.targetUsers===void 0&&(n.targetUsers=new Set),n}function sn(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.id=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.id===void 0&&(n.id=""),n}function un(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.actorId=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.baseId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.actorId===void 0&&(n.actorId=""),n.baseId===void 0&&(n.baseId=""),n}function cn(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.type=o("MultiwayCommonTypes").MessageType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.conferenceName=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.transactionId=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I16?n.retryCount=t.readI16():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.serverInfoData=t.readString():t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I32?n.responseStatusCode=o("MultiwayCommonTypes").RtcResponseStatusCode.cast(t.readI32()):t.skip(i);break;case 7:if(i===(e||(e=r("ThriftTypes"))).MAP){n.extensions={};for(var s=t.readMapBegin(),u=0;u<s.size;u++){var c=t.readString(),d=t.readString();n.extensions[c]=d}}else t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).I64?n.sequenceNumber=t.readI64().toString():t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).STRING?n.clientSessionId=t.readString():t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).STRING?n.responseStatusMessage=t.readString():t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).I32?n.responseSubCode=o("MultiwayCommonTypes").RtcResponseSubCode.cast(t.readI32()):t.skip(i);break;case 12:i===(e||(e=r("ThriftTypes"))).STRING?n.collisionKey=t.readString():t.skip(i);break;case 13:i===(e||(e=r("ThriftTypes"))).I32?n.conferenceType=o("MultiwaySharedTypes").ConferenceType.cast(t.readI32()):t.skip(i);break;case 14:i===(e||(e=r("ThriftTypes"))).STRING?n.serverSessionId=t.readString():t.skip(i);break;case 15:i===(e||(e=r("ThriftTypes"))).STRING?n.rtcHandle=t.readString():t.skip(i);break;case 16:i===(e||(e=r("ThriftTypes"))).I32?n.retryAfterMsec=t.readI32():t.skip(i);break;case 17:i===(e||(e=r("ThriftTypes"))).STRING?n.receiverUserId=t.readString():t.skip(i);break;case 18:i===(e||(e=r("ThriftTypes"))).I32?n.clientStack=o("WebrtcSignalingCommonTypes").ClientStack.cast(t.readI32()):t.skip(i);break;case 19:i===(e||(e=r("ThriftTypes"))).I64?n.serverMsgTime=t.readI64().toString():t.skip(i);break;case 20:i===(e||(e=r("ThriftTypes"))).STRUCT?n.sender=sn(t):t.skip(i);break;case 21:i===(e||(e=r("ThriftTypes"))).STRUCT?n.receiver=un(t):t.skip(i);break;case 22:if(i===(e||(e=r("ThriftTypes"))).SET){n.messageTags=new Set;for(var m=t.readSetBegin(),p=0;p<m.size;p++){var _=o("MultiwayCommonTypes").MessageTag.cast(t.readI32());n.messageTags.add(_)}}else t.skip(i);break;case 23:i===(e||(e=r("ThriftTypes"))).I64?n.conferenceId=t.readI64().toString():t.skip(i);break;case 24:i===(e||(e=r("ThriftTypes"))).I32?n.protocolVersion=t.readI32():t.skip(i);break;case 25:i===(e||(e=r("ThriftTypes"))).I64?n.bodyCompressionVersion=t.readI64().toString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.type===void 0&&(n.type=o("MultiwayCommonTypes").MessageType.cast(0)),n.conferenceName===void 0&&(n.conferenceName=""),n.transactionId===void 0&&(n.transactionId=""),n.retryCount===void 0&&(n.retryCount=0),n}function dn(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.joinRequest=Vt(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.joinResponse=Ht(t):t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRUCT?n.serverMediaUpdateRequest=Et(t):t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRUCT?n.serverMediaUpdateResponse=kt(t):t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRUCT?n.hangupRequest=Tt(t):t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRUCT?n.iceCandidateRequest=Dt(t):t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).STRUCT?n.ringRequest=Yt(t):t.skip(a);break;case 9:a===(e||(e=r("ThriftTypes"))).STRUCT?n.ringResponse=Jt(t):t.skip(a);break;case 10:a===(e||(e=r("ThriftTypes"))).STRUCT?n.dismissRequest=xt(t):t.skip(a);break;case 11:a===(e||(e=r("ThriftTypes"))).STRUCT?n.conferenceStateRequest=At(t):t.skip(a);break;case 12:a===(e||(e=r("ThriftTypes"))).STRUCT?n.conferenceStateResponse=Ft(t):t.skip(a);break;case 13:a===(e||(e=r("ThriftTypes"))).STRUCT?n.addParticipantsRequest=qt(t):t.skip(a);break;case 14:a===(e||(e=r("ThriftTypes"))).STRUCT?n.subscriptionRequest=Ot(t):t.skip(a);break;case 15:a===(e||(e=r("ThriftTypes"))).STRUCT?n.clientMediaUpdateRequest=St(t):t.skip(a);break;case 16:a===(e||(e=r("ThriftTypes"))).STRUCT?n.clientMediaUpdateResponse=Rt(t):t.skip(a);break;case 17:a===(e||(e=r("ThriftTypes"))).STRUCT?n.dataMessageRequest=Bt(t):t.skip(a);break;case 18:a===(e||(e=r("ThriftTypes"))).STRUCT?n.removeParticipantsRequest=Zt(t):t.skip(a);break;case 19:a===(e||(e=r("ThriftTypes"))).STRUCT?n.dataMessageResponse=Wt(t):t.skip(a);break;case 30:a===(e||(e=r("ThriftTypes"))).STRUCT?n.updateRequest=nn(t):t.skip(a);break;case 31:a===(e||(e=r("ThriftTypes"))).STRUCT?n.updateResponse=rn(t):t.skip(a);break;case 32:a===(e||(e=r("ThriftTypes"))).STRUCT?n.notifyRequest=on(t):t.skip(a);break;case 33:a===(e||(e=r("ThriftTypes"))).STRUCT?n.notifyResponse=an(t):t.skip(a);break;case 34:a===(e||(e=r("ThriftTypes"))).STRUCT?n.connectRequest=Gt(t):t.skip(a);break;case 35:a===(e||(e=r("ThriftTypes"))).STRUCT?n.connectResponse=zt(t):t.skip(a);break;case 36:a===(e||(e=r("ThriftTypes"))).STRUCT?n.clientEventRequest=Kt(t):t.skip(a);break;case 37:a===(e||(e=r("ThriftTypes"))).STRUCT?n.clientEventResponse=Xt(t):t.skip(a);break;case 40:a===(e||(e=r("ThriftTypes"))).STRUCT?n.unsubscribeRequest=en(t):t.skip(a);break;case 41:a===(e||(e=r("ThriftTypes"))).STRUCT?n.unsubscribeResponse=tn(t):t.skip(a);break;case 42:a===(e||(e=r("ThriftTypes"))).STRUCT?n.approvalRequest=ln(t):t.skip(a);break;case 43:a===(e||(e=r("ThriftTypes"))).STRUCT?n.transferRequest=It(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function mn(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.messageHeader=cn(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.messageBody=dn(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.messageHeader===void 0&&(n.messageHeader=ae()),n.messageBody===void 0&&(n.messageBody=ie()),n}function pn(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).SET){n.users=new Set;for(var l=t.readSetBegin(),s=0;s<l.size;s++){var u=t.readString();n.users.add(u)}}else t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).BOOL?n.allowMultipleJoins=t.readBool():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.dismissOthersOnFirstJoin=t.readBool():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.aliasId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.users===void 0&&(n.users=new Set),n.allowMultipleJoins===void 0&&(n.allowMultipleJoins=!1),n.dismissOthersOnFirstJoin===void 0&&(n.dismissOthersOnFirstJoin=!1),n.aliasId===void 0&&(n.aliasId=""),n}function _n(t){var n,o={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.joinRequest=Vt(t),n="joinRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: joinRequest, previous deserialized field: "+n);else t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.joinResponse=Ht(t),n="joinResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: joinResponse, previous deserialized field: "+n);else t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.serverMediaUpdateRequest=Et(t),n="serverMediaUpdateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: serverMediaUpdateRequest, previous deserialized field: "+n);else t.skip(i);break;case 4:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.serverMediaUpdateResponse=kt(t),n="serverMediaUpdateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: serverMediaUpdateResponse, previous deserialized field: "+n);else t.skip(i);break;case 5:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.hangupRequest=Tt(t),n="hangupRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: hangupRequest, previous deserialized field: "+n);else t.skip(i);break;case 6:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.iceCandidateRequest=Dt(t),n="iceCandidateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: iceCandidateRequest, previous deserialized field: "+n);else t.skip(i);break;case 8:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.ringRequest=Yt(t),n="ringRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: ringRequest, previous deserialized field: "+n);else t.skip(i);break;case 9:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.ringResponse=Jt(t),n="ringResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: ringResponse, previous deserialized field: "+n);else t.skip(i);break;case 10:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.dismissRequest=xt(t),n="dismissRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dismissRequest, previous deserialized field: "+n);else t.skip(i);break;case 11:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.conferenceStateRequest=At(t),n="conferenceStateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: conferenceStateRequest, previous deserialized field: "+n);else t.skip(i);break;case 12:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.conferenceStateResponse=Ft(t),n="conferenceStateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: conferenceStateResponse, previous deserialized field: "+n);else t.skip(i);break;case 13:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.addParticipantsRequest=qt(t),n="addParticipantsRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: addParticipantsRequest, previous deserialized field: "+n);else t.skip(i);break;case 14:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.subscriptionRequest=Ot(t),n="subscriptionRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: subscriptionRequest, previous deserialized field: "+n);else t.skip(i);break;case 15:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.clientMediaUpdateRequest=St(t),n="clientMediaUpdateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientMediaUpdateRequest, previous deserialized field: "+n);else t.skip(i);break;case 16:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.clientMediaUpdateResponse=Rt(t),n="clientMediaUpdateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientMediaUpdateResponse, previous deserialized field: "+n);else t.skip(i);break;case 17:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.dataMessageRequest=Bt(t),n="dataMessageRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dataMessageRequest, previous deserialized field: "+n);else t.skip(i);break;case 18:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.removeParticipantsRequest=Zt(t),n="removeParticipantsRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: removeParticipantsRequest, previous deserialized field: "+n);else t.skip(i);break;case 19:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.dataMessageResponse=Wt(t),n="dataMessageResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dataMessageResponse, previous deserialized field: "+n);else t.skip(i);break;case 30:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.updateRequest=nn(t),n="updateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: updateRequest, previous deserialized field: "+n);else t.skip(i);break;case 31:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.updateResponse=rn(t),n="updateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: updateResponse, previous deserialized field: "+n);else t.skip(i);break;case 32:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.notifyRequest=on(t),n="notifyRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: notifyRequest, previous deserialized field: "+n);else t.skip(i);break;case 33:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.notifyResponse=an(t),n="notifyResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: notifyResponse, previous deserialized field: "+n);else t.skip(i);break;case 34:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.connectRequest=Gt(t),n="connectRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: connectRequest, previous deserialized field: "+n);else t.skip(i);break;case 35:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.connectResponse=zt(t),n="connectResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: connectResponse, previous deserialized field: "+n);else t.skip(i);break;case 36:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.clientEventRequest=Kt(t),n="clientEventRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientEventRequest, previous deserialized field: "+n);else t.skip(i);break;case 37:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.clientEventResponse=Xt(t),n="clientEventResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientEventResponse, previous deserialized field: "+n);else t.skip(i);break;case 40:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.unsubscribeRequest=en(t),n="unsubscribeRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: unsubscribeRequest, previous deserialized field: "+n);else t.skip(i);break;case 41:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.unsubscribeResponse=tn(t),n="unsubscribeResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: unsubscribeResponse, previous deserialized field: "+n);else t.skip(i);break;case 42:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.approvalRequest=ln(t),n="approvalRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: approvalRequest, previous deserialized field: "+n);else t.skip(i);break;case 43:if(i===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)o.transferRequest=It(t),n="transferRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: transferRequest, previous deserialized field: "+n);else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),o}l.RtcException$DefaultConstructor=s,l.SessionDescription$DefaultConstructor=u,l.SessionDescriptionUpdate$DefaultConstructor=c,l.MediaDescriptionUpdate$DefaultConstructor=d,l.ServerMediaUpdate$DefaultConstructor=m,l.ClientMediaUpdate$DefaultConstructor=p,l.IceCandidate$DefaultConstructor=_,l.SyncPayload$DefaultConstructor=f,l.SyncAck$DefaultConstructor=g,l.E2eeData$DefaultConstructor=h,l.ClientMediaUpdateRequest$DefaultConstructor=y,l.ClientMediaUpdateResponse$DefaultConstructor=C,l.MultipleRelaysAllocationParameters$DefaultConstructor=b,l.ServerMediaUpdateRequest$DefaultConstructor=v,l.ServerMediaUpdateResponse$DefaultConstructor=S,l.TransferRequest$DefaultConstructor=R,l.HangupRequest$DefaultConstructor=L,l.IceCandidateRequest$DefaultConstructor=E,l.DismissRequest$DefaultConstructor=k,l.EndpointSettings$DefaultConstructor=I,l.ParticipantState$DefaultConstructor=T,l.ServerOnlyParticipantState$DefaultConstructor=D,l.UserProfile$DefaultConstructor=x,l.ProductMetadata$DefaultConstructor=$,l.ConferenceStateRequest$DefaultConstructor=P,l.ConferenceStateResponse$DefaultConstructor=N,l.SubscriptionRequest$DefaultConstructor=M,l.DataMessageRequest$DefaultConstructor=w,l.DataMessageResponse$DefaultConstructor=A,l.AddParticipantsRequest$DefaultConstructor=F,l.SfuAllocation$DefaultConstructor=O,l.JoinRequest$DefaultConstructor=B,l.JoinResponse$DefaultConstructor=W,l.ConnectRequest$DefaultConstructor=q,l.ConnectResponse$DefaultConstructor=U,l.ClientEvent$DefaultConstructor=V,l.ClientEventRequest$DefaultConstructor=H,l.ThreadIdInfo$DefaultConstructor=G,l.ClientEventResponse$DefaultConstructor=z,l.RingRequest$DefaultConstructor=j,l.RingResponse$DefaultConstructor=K,l.RemoveParticipantsRequest$DefaultConstructor=Q,l.UnsubscribeRequest$DefaultConstructor=X,l.UnsubscribeResponse$DefaultConstructor=Y,l.UpdateRequest$DefaultConstructor=J,l.UpdateResponse$DefaultConstructor=Z,l.NotifyRequest$DefaultConstructor=ee,l.NotifyResponse$DefaultConstructor=te,l.ApprovalRequest$DefaultConstructor=ne,l.RtcSender$DefaultConstructor=re,l.RtcReceiver$DefaultConstructor=oe,l.RtcMessageHeader$DefaultConstructor=ae,l.RtcMessageBody$DefaultConstructor=ie,l.RtcMultiwayMessage$DefaultConstructor=le,l.GroupOfUsers$DefaultConstructor=se,l.RtcMessageBodyVariant$DefaultConstructor=ue,l.serializeRtcException=ce,l.serializeSessionDescription=de,l.serializeSessionDescriptionUpdate=me,l.serializeMediaDescriptionUpdate=pe,l.serializeServerMediaUpdate=_e,l.serializeClientMediaUpdate=fe,l.serializeIceCandidate=ge,l.serializeSyncPayload=he,l.serializeSyncAck=ye,l.serializeE2eeData=Ce,l.serializeClientMediaUpdateRequest=be,l.serializeClientMediaUpdateResponse=ve,l.serializeMultipleRelaysAllocationParameters=Se,l.serializeServerMediaUpdateRequest=Re,l.serializeServerMediaUpdateResponse=Le,l.serializeTransferRequest=Ee,l.serializeHangupRequest=ke,l.serializeIceCandidateRequest=Ie,l.serializeDismissRequest=Te,l.serializeEndpointSettings=De,l.serializeParticipantState=xe,l.serializeServerOnlyParticipantState=$e,l.serializeUserProfile=Pe,l.serializeProductMetadata=Ne,l.serializeConferenceStateRequest=Me,l.serializeConferenceStateResponse=we,l.serializeSubscriptionRequest=Ae,l.serializeDataMessageRequest=Fe,l.serializeDataMessageResponse=Oe,l.serializeAddParticipantsRequest=Be,l.serializeSfuAllocation=We,l.serializeJoinRequest=qe,l.serializeJoinResponse=Ue,l.serializeConnectRequest=Ve,l.serializeConnectResponse=He,l.serializeClientEvent=Ge,l.serializeClientEventRequest=ze,l.serializeThreadIdInfo=je,l.serializeClientEventResponse=Ke,l.serializeRingRequest=Qe,l.serializeRingResponse=Xe,l.serializeRemoveParticipantsRequest=Ye,l.serializeUnsubscribeRequest=Je,l.serializeUnsubscribeResponse=Ze,l.serializeUpdateRequest=et,l.serializeUpdateResponse=tt,l.serializeNotifyRequest=nt,l.serializeNotifyResponse=rt,l.serializeApprovalRequest=ot,l.serializeRtcSender=at,l.serializeRtcReceiver=it,l.serializeRtcMessageHeader=lt,l.serializeRtcMessageBody=st,l.serializeRtcMultiwayMessage=ut,l.serializeGroupOfUsers=ct,l.serializeRtcMessageBodyVariant=dt,l.deserializeRtcException=mt,l.deserializeSessionDescription=pt,l.deserializeSessionDescriptionUpdate=_t,l.deserializeMediaDescriptionUpdate=ft,l.deserializeServerMediaUpdate=gt,l.deserializeClientMediaUpdate=ht,l.deserializeIceCandidate=yt,l.deserializeSyncPayload=Ct,l.deserializeSyncAck=bt,l.deserializeE2eeData=vt,l.deserializeClientMediaUpdateRequest=St,l.deserializeClientMediaUpdateResponse=Rt,l.deserializeMultipleRelaysAllocationParameters=Lt,l.deserializeServerMediaUpdateRequest=Et,l.deserializeServerMediaUpdateResponse=kt,l.deserializeTransferRequest=It,l.deserializeHangupRequest=Tt,l.deserializeIceCandidateRequest=Dt,l.deserializeDismissRequest=xt,l.deserializeEndpointSettings=$t,l.deserializeParticipantState=Pt,l.deserializeServerOnlyParticipantState=Nt,l.deserializeUserProfile=Mt,l.deserializeProductMetadata=wt,l.deserializeConferenceStateRequest=At,l.deserializeConferenceStateResponse=Ft,l.deserializeSubscriptionRequest=Ot,l.deserializeDataMessageRequest=Bt,l.deserializeDataMessageResponse=Wt,l.deserializeAddParticipantsRequest=qt,l.deserializeSfuAllocation=Ut,l.deserializeJoinRequest=Vt,l.deserializeJoinResponse=Ht,l.deserializeConnectRequest=Gt,l.deserializeConnectResponse=zt,l.deserializeClientEvent=jt,l.deserializeClientEventRequest=Kt,l.deserializeThreadIdInfo=Qt,l.deserializeClientEventResponse=Xt,l.deserializeRingRequest=Yt,l.deserializeRingResponse=Jt,l.deserializeRemoveParticipantsRequest=Zt,l.deserializeUnsubscribeRequest=en,l.deserializeUnsubscribeResponse=tn,l.deserializeUpdateRequest=nn,l.deserializeUpdateResponse=rn,l.deserializeNotifyRequest=on,l.deserializeNotifyResponse=an,l.deserializeApprovalRequest=ln,l.deserializeRtcSender=sn,l.deserializeRtcReceiver=un,l.deserializeRtcMessageHeader=cn,l.deserializeRtcMessageBody=dn,l.deserializeRtcMultiwayMessage=mn,l.deserializeGroupOfUsers=pn,l.deserializeRtcMessageBodyVariant=_n}),98);
__d("OculusMqttChannel",["CurrentUser","HorizonMetaIsCastingRoute","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";r("HorizonMetaIsCastingRoute").getIsCastingRoute()?r("MqttEnvInitializer").initialize(function(e){return new WebSocket(e,"horizon_webcasting")}):r("MqttEnvInitializer").initialize();function e(e){o("MqttEnv").setIsUserLoggedInNow(r("CurrentUser").isLoggedIn);var t=r("CurrentUser").getAppID()==null?0x9d143786e51a6:Number(r("CurrentUser").getAppID());return new(r("MqttChannel"))({appId:t,capabilities:r("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:r("MqttWebConfig").clientCapabilities,clientType:"websocket",deviceId:r("uuidv4")(),endpoint:r("MqttWebConfig").endpoint,initialSubscribedTopics:r("MqttWebConfig").subscribedTopics,phpOverride:r("MqttWebConfig").hostNameOverride,pollingEndpoint:r("MqttWebConfig").pollingEndpoint,userFbid:r("CurrentUser").getPossiblyNonFacebookUserID()})}var s=null;function u(t){return s==null&&(s=e(t)),s}function c(){return s}function d(){s!=null&&(s.shutdown(),s=null)}l.getOculusMqttChannelInstance=u,l.getOculusMqttChannelInstanceDoNotCreate=c,l.shutdownAndClear=d}),98);
__d("OverlayConfigConstants",[],(function(t,n,r,o,a,i){"use strict";var e={OverlayConfigNumParameters:5544,OverlayConfigNotPresentFlagValue:-1},l=e;i.default=l}),66);
__d("OverlayConfigLayerSource",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({UNKNOWN:0,DEFAULT:1,MOBILECONFIG:2,APP_CRUCIBLE:3,APP_JNI:4,UNITTEST_CONFIG:5,SERVER:6,PLACEHOLDER:7,LS_MOBILECONFIG:8,APP_LS:9,APP_JS:10,BROWSER:11,APP_OVRRTC:12,APP_IG:13,MLITE4A_LEGACY_QE:14,APP_MLITE4A:15,APP_PORTAL:16,IG_LAUNCHER:17,APP_ARCHON:18,APP_WS:19,APP_NOX:20,APP_WEARABLE_MSNGR:21,APP_WEARABLE_IG:22,APP_ORCA_RSYS:23,APP_WILDE:24,APP_MKIOS:25,APP_MK4A:26,DYNAMIC:27,SDK_DEFAULT:28,APP_FB4A:29,APP_RSYS_SDK_SAMPLE:30,APP_BIZAPP:31,APP_WORKCHAT:32,APP_ARCHON_LOCAL_OVERRIDES:33,APP_CATHODE:34,APP_WR4I:35,APP_WR4A:36,APP_METACAM:37,HORIZON_EMERGENCY:38,APP_SOCIALPLATFORM:39,APP_TWILIGHT:40,APP_AR_CALLING_LOCAL_OVERRIDES:41,APP_TWILIGHT_CASTING:42,TWILIGHT_EMERGENCY:43,METACAM_EMERGENCY:44,CALL_SCOPED:45,APP_CASE50:46,APP_GENERIC:47,HORIZON_EXPERIMENTAL:48}),l=e;i.default=l}),66);
__d("OverlayConfigServerLayer",["OverlayConfigConstants","OverlayConfigLayerSource"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e}e.createFromHeader=function(n){try{var t,r=n==null||(t=n.extensions)==null?void 0:t.oc1_json;if(r==null)return null;var o=JSON.parse(r),a=o==null?void 0:o.values;return a==null?null:new e(a)}catch(e){return null}};var t=e.prototype;return t.getLayerSource=function(){return r("OverlayConfigLayerSource").SERVER},t.getValue=function(t){var e=this.$1[String(t)];return e!=null?e:r("OverlayConfigConstants").OverlayConfigNotPresentFlagValue},t.logExposure=function(t){},e})();l.default=e}),98);
__d("RequestStreamBodyUtils",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){return u(atob(t))},l=function(t){return btoa(c(t))},s=function(t){var e=btoa(t),n=e.indexOf("=");return n===-1?e:e.substring(0,n)},u=function(t){for(var e=t,n=e.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=e.charCodeAt(o);return r},c=function(t){for(var e="",n=t.byteLength,r=0;r<n;r++)e+=String.fromCharCode(t[r]);return e};i.base64ToUint8Array=e,i.uint8ArrayToBase64=l,i.stringToBase64WithoutPadding=s,i.stringToUint8Array=u,i.uint8ArrayToString=c}),66);
__d("ZenonDGWLogger",["$InternalEnum","DGWStreamGroupCallbacks","QuickPerformanceLogger","ZenonAuditedCheckpointLogId","ZenonDebugLogger","ZenonInfraActionsLogger","ZenonLoggingUtils","ZenonODSLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum").Mirrored(["LOGGED_NONE","LOGGED_RETRY","LOGGED_FAILURE"]),u=r("qpl")._(398986999,"3052"),c=r("ZenonDebugLogger").getInstance(),d=!1,m=null;function p(e){d=!0,m=e}function _(t,n){if(o("ZenonLoggingUtils").shouldAllowLogging())switch(t.name){case"dgwStreamCreationInitiated":f(n,t.headers,t.dgwInfo);break;case"dgwStreamCreationSuccess":(e||(e=r("QuickPerformanceLogger"))).markerEnd(u,2,n);break;case"dgwStreamCreationError":c.logConsole("[DGW] Stream creation error: "+t.error),(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(u,{string:{error:t.error}},{instanceKey:n}),(e||(e=r("QuickPerformanceLogger"))).markerEnd(u,87,n);break;case"dgwStreamClosed":c.logConsole("[DGW] Stream closed"+(t.reason!=null?" - Reason: "+t.reason:"")+"}");break;case"dgwStreamError":c.logConsole("[DGW] Stream error: "+t.error);break;default:break}}function f(t,n,o){(e||(e=r("QuickPerformanceLogger"))).markerStart(u,t),e.markerAnnotate(u,{bool:{hasAuthToken:o.hasAuthToken},string:babelHelpers.extends({},n,{deviceId:o.deviceId,loggingId:o.loggingId,serviceId:o.serviceId,windowContext:o.windowContext})},{instanceKey:t}),e.markerPoint(u,"initStreamCreation",{instanceKey:t})}function g(e,t){var n="DGW_STREAM_ERROR_"+t+"_"+e;E(n),r("ZenonODSLogger").logCounter(n)}function h(){E("DGW_SERVER_HAS_FINISHED_SENDING_DATA"),r("ZenonODSLogger").logCounter("DGW_SERVER_HAS_FINISHED_SENDING_DATA")}function y(e){var t="DGW_STREAM_MUST_DRAIN_"+e;E(t),r("ZenonODSLogger").logCounter(t)}function C(){E("DGW_STREAM_RETRY"),r("ZenonODSLogger").logCounter("DGW_STREAM_RETRY")}function b(e){var t=e?"_"+e:"";E("DGW_STREAM_RETRY_SUCCEEDED"+t),r("ZenonODSLogger").logCounter("DGW_STREAM_RETRY_SUCCEEDED"+t)}function v(e){var t=e?"_"+e:"";E("DGW_STREAM_RETRY_FAILED"+t),r("ZenonODSLogger").logCounter("DGW_STREAM_RETRY_FAILED"+t)}function S(e,t){E("["+e+"] Stream closed - Reason: "+(t!=null?t:""))}function R(e){var t="DGW_STREAM_GROUP_ERROR_"+o("DGWStreamGroupCallbacks").dgwStreamGroupErrorToString(e);E(t),r("ZenonODSLogger").logCounter(t)}function L(e){var t="DGW_STREAM_GROUP_MUST_DRAIN_"+e;E(t),r("ZenonODSLogger").logCounter(t)}function E(e){d&&m!=null?m("[SW][ZP] [DGW] "+e):r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] [DGW] "+e})}l.RetryLogState=s,l.setSharedWorkerContext=p,l.logEvent=_,l.logDGWErrorToODS=g,l.logDGWServerHasFinishedToODS=h,l.logDGWStreamMustDrainToODS=y,l.logDGWRetryToODS=C,l.logDGWSucceededRetry=b,l.logDGWFailedRetry=v,l.logDGWStreamClose=S,l.logDGWStreamGroupError=R,l.logDGWStreamGroupMustDrain=L,l.logDGWCheckpoint=E}),98);
__d("ZenonDGWMessageQueue",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(){function t(){this.$1=new Map}var r=t.prototype;return r.enqueue=function(t){this.$1.has(t.messageId)||this.$1.set(t.messageId,t)},r.dequeue=function(t){this.$1.delete(t)},r.sendAllWith=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){this.$2(),yield(e||(e=n("Promise"))).allSettled(this.$1.values().map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){e.succeeded=yield t.send(e.data,e.timeoutInMs)});return function(t){return e.apply(this,arguments)}})()))});function r(e){return t.apply(this,arguments)}return r})(),r.$2=function(){var e=this,t=Array.from(this.$1.values()).filter(function(t){return!e.$3(t)}).map(function(e){return e.messageId});t.forEach(function(t){return e.$1.delete(t)})},r.$3=function(t){var e=Date.now(),n=t.expiryTime,r=n!=null&&e>n;return!r&&!t.succeeded},t})();i.default=l}),66);
__d("ZenonDGWStreamGroupCoordinator",["DGWAuth","DGWClient","DGWConstants","DGWStreamGroupHandler","FBLogger","RawDGWClient","ZenonDGWLogger","err","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("5209"),s=r("justknobx")._("5210"),u=(function(){function t(e){this.$1=null,this.$3=e}var n=t.prototype;return n.$5=function(){var e=this;return new(r("DGWStreamGroupHandler"))(function(t){e.killStreamGroup(),o("ZenonDGWLogger").logDGWStreamGroupError(t),e.$3()},function(t){e.killStreamGroup(),o("ZenonDGWLogger").logDGWStreamGroupMustDrain(t),e.$3()},function(){e.killStreamGroup(),e.$3()})},n.setDGWConfig=function(t){this.$4=t,this.$1=this.getOrCreateRawDGWClientInstance()},n.establishStream=function(n,o,a){if(this.$2==null){var t,i={authToken:a.authToken,authType:a.authType,connectTimeoutMs:s,deviceId:a.deviceId,disableFalcoLogging:a.disableFalcoLogging,keepAliveMs:e,loggingId:a.loggingId,serviceId:(t=a.serviceId)!=null?t:"rpsignaling",streamGroupAppHeaders:{"stream-group":"group1"}};a.overrideUrl!=null&&(i.overrideUrl=a.overrideUrl);var l=this.$1?this.$1:r("DGWClient")();this.$2=l.createStreamGroup(this.$5(),i)}return this.$2.establishStream({disableFalcoLogging:a.disableFalcoLogging,groupedStreamHeaders:n,loggingId:a.loggingId},o)},n.getOrCreateRawDGWClientInstance=function(){if(this.$1!=null)return this.$1;if(this.$4==null){var e=r("err")("dgwConfig is required but was not provided");throw r("FBLogger")("zenon").catching(e).mustfix("Failed to create RawDGWClient: missing dgwConfig"),e}var t=this.$4;return new(o("RawDGWClient")).RawDGWClient({appId:t.appId,appVersion:t.appVersion,authToken:t.authToken,authType:o("DGWAuth").fromStringToDGWAuth(t.authType),dgwVersion:o("DGWConstants").DgwVersion.DGWVER_BIG_IDS,endpoint:t.endpoint,fbId:t.fbId,isUserLoggedIn:t.isUserLoggedIn})},n.killStreamGroup=function(){var e;(e=this.$2)==null||e.close(),this.$2=null},t})();l.default=u}),98);
__d("ZenonDGWStreamController",["DGWStream","EventEmitter","Promise","Random","Run","ZenonDGWLogger","ZenonDGWMessageQueue","ZenonDGWStreamGroupCoordinator","ZenonDeviceId","asyncToGeneratorRuntime","justknobx","promiseDone","qex","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("justknobx")._("1942"),c=r("justknobx")._("5207"),d=r("justknobx")._("5208"),m=(e=r("qex")._("3872"))!=null?e:!1,p=null,_=(function(e){function t(){var t;return t=e.call(this)||this,t.$ZenonDGWStreamController$p_6=o("Random").uint32(),t.$ZenonDGWStreamController$p_7="UNKNOWN",t.$ZenonDGWStreamController$p_8=o("ZenonDGWLogger").RetryLogState.LOGGED_NONE,t.$ZenonDGWStreamController$p_9="Disconnected",t.$ZenonDGWStreamController$p_10=u,t.$ZenonDGWStreamController$p_11=!1,t.$ZenonDGWStreamController$p_5={deviceId:o("ZenonDeviceId").getZenonDeviceId(),loggingId:r("uuidv4")(),serviceId:"rpsignaling"},t.$ZenonDGWStreamController$p_1=new(r("ZenonDGWStreamGroupCoordinator"))(function(){r("promiseDone")(t.$ZenonDGWStreamController$p_19())}),o("Run").onBeforeUnload(function(){t.$ZenonDGWStreamController$p_8===o("ZenonDGWLogger").RetryLogState.LOGGED_RETRY&&o("ZenonDGWLogger").logDGWFailedRetry()}),m&&(t.$ZenonDGWStreamController$p_2=new(r("ZenonDGWMessageQueue"))),t.$ZenonDGWStreamController$p_4={},t}babelHelpers.inheritsLoose(t,e),t.getControllerInstance=function(){return p||(p=new t),p};var a=t.prototype;return a.setHeaders=function(t){this.$ZenonDGWStreamController$p_4=t},a.setStreamOptions=function(t){this.$ZenonDGWStreamController$p_5=t},a.setDGWConfig=function(t){this.$ZenonDGWStreamController$p_18=t,this.$ZenonDGWStreamController$p_1.setDGWConfig(t)},a.setWindowContext=function(t){this.$ZenonDGWStreamController$p_7=t},a.getStream=function(){return this.$ZenonDGWStreamController$p_3},a.closeStream=function(t){this.$ZenonDGWStreamController$p_3!=null&&(this.$ZenonDGWStreamController$p_3.close(),this.$ZenonDGWStreamController$p_3=null,o("ZenonDGWLogger").logDGWStreamClose(this.$ZenonDGWStreamController$p_7,t))},a.$ZenonDGWStreamController$p_20=function(t){this.$ZenonDGWStreamController$p_9=t,this.emit("connectionStateEvent",t)},a.$ZenonDGWStreamController$p_21=function(){var e=this,t={onClose:function(n){e.$ZenonDGWStreamController$p_13==null||e.$ZenonDGWStreamController$p_13(n),e.$ZenonDGWStreamController$p_3=null},onDataReceived:function(n){e.$ZenonDGWStreamController$p_14==null||e.$ZenonDGWStreamController$p_14(n)},onError:function(n){e.$ZenonDGWStreamController$p_15==null||e.$ZenonDGWStreamController$p_15(n),o("ZenonDGWLogger").logDGWErrorToODS(n,e.$ZenonDGWStreamController$p_7),e.$ZenonDGWStreamController$p_19(n)},onServerHasFinishedSendingData:function(n){e.$ZenonDGWStreamController$p_17==null||e.$ZenonDGWStreamController$p_17(n),o("ZenonDGWLogger").logDGWServerHasFinishedToODS(),e.$ZenonDGWStreamController$p_19()},onStreamMustDrain:function(n,r){e.$ZenonDGWStreamController$p_16==null||e.$ZenonDGWStreamController$p_16(n,r),o("ZenonDGWLogger").logDGWStreamMustDrainToODS(r),e.$ZenonDGWStreamController$p_19()}};return t},a.$ZenonDGWStreamController$p_19=function(t){return t!=null&&!o("DGWStream").isRetryableError(t)||this.$ZenonDGWStreamController$p_10<=0?(o("ZenonDGWLogger").logEvent({error:String(t!=null?t:"drain"),name:"dgwStreamCreationError"},this.$ZenonDGWStreamController$p_6),this.$ZenonDGWStreamController$p_20("Disconnected"),this.$ZenonDGWStreamController$p_10<=0&&this.$ZenonDGWStreamController$p_8===o("ZenonDGWLogger").RetryLogState.LOGGED_RETRY&&(this.$ZenonDGWStreamController$p_8=o("ZenonDGWLogger").RetryLogState.LOGGED_FAILURE,o("ZenonDGWLogger").logDGWFailedRetry(t)),(s||(s=n("Promise"))).resolve()):(this.$ZenonDGWStreamController$p_8===o("ZenonDGWLogger").RetryLogState.LOGGED_NONE&&(this.$ZenonDGWStreamController$p_8=o("ZenonDGWLogger").RetryLogState.LOGGED_RETRY,o("ZenonDGWLogger").logDGWRetryToODS()),this.$ZenonDGWStreamController$p_12==null&&(this.closeStream("reestablishing stream"),this.$ZenonDGWStreamController$p_1.killStreamGroup(),this.$ZenonDGWStreamController$p_10--),this.establishAndGetStream())},a.restartStreamWithNewOptions=function(t){return this.closeStream("restarting with new options"),this.$ZenonDGWStreamController$p_1.killStreamGroup(),this.$ZenonDGWStreamController$p_5=t,this.establishAndGetStream()},a.setOnCloseCallback=function(t){this.$ZenonDGWStreamController$p_13=t},a.setOnDataReceivedCallback=function(t){this.$ZenonDGWStreamController$p_14=t},a.setOnErrorCallback=function(t){this.$ZenonDGWStreamController$p_15=t},a.setOnStreamMustDrainCallback=function(t){this.$ZenonDGWStreamController$p_16=t},a.setOnServerHasFinishedSendingDataCallback=function(t){this.$ZenonDGWStreamController$p_17=t},a.getConnectionState=function(){return this.$ZenonDGWStreamController$p_9},a.send=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r,a,i,l={data:t,expiryTime:Date.now()+c,messageId:e,succeeded:!1,timeoutInMs:n!=null?n:d};(r=this.$ZenonDGWStreamController$p_2)==null||r.enqueue(l);var s=(a=yield(i=this.$ZenonDGWStreamController$p_3)==null?void 0:i.send(l.data,l.timeoutInMs))!=null?a:!1;if(!s)this.$ZenonDGWStreamController$p_19(o("DGWStream").StreamError.ACK_TIMEOUT);else{var u;l.succeeded=!0,(u=this.$ZenonDGWStreamController$p_2)==null||u.dequeue(l.messageId)}return s});function t(t,n,r){return e.apply(this,arguments)}return t})(),a.establishAndGetStream=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this;if(this.$ZenonDGWStreamController$p_3)return this.$ZenonDGWStreamController$p_3;if(this.$ZenonDGWStreamController$p_12!=null)return yield this.$ZenonDGWStreamController$p_12;var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var t;o("ZenonDGWLogger").logEvent({dgwInfo:{deviceId:e.$ZenonDGWStreamController$p_5.deviceId,hasAuthToken:e.$ZenonDGWStreamController$p_5.authToken!=null,loggingId:e.$ZenonDGWStreamController$p_5.loggingId,serviceId:e.$ZenonDGWStreamController$p_5.serviceId,windowContext:e.$ZenonDGWStreamController$p_7},headers:e.$ZenonDGWStreamController$p_4,name:"dgwStreamCreationInitiated"},e.$ZenonDGWStreamController$p_6),e.$ZenonDGWStreamController$p_20("Connecting");var n=yield e.$ZenonDGWStreamController$p_1.establishStream(e.$ZenonDGWStreamController$p_4,e.$ZenonDGWStreamController$p_21(),e.$ZenonDGWStreamController$p_5);return o("ZenonDGWLogger").logEvent({name:"dgwStreamCreationSuccess"},e.$ZenonDGWStreamController$p_6),e.$ZenonDGWStreamController$p_8===o("ZenonDGWLogger").RetryLogState.LOGGED_RETRY&&o("ZenonDGWLogger").logDGWSucceededRetry(),e.$ZenonDGWStreamController$p_12=null,e.$ZenonDGWStreamController$p_10=u,e.$ZenonDGWStreamController$p_8=o("ZenonDGWLogger").RetryLogState.LOGGED_NONE,e.$ZenonDGWStreamController$p_20("Connected"),yield(t=e.$ZenonDGWStreamController$p_2)==null?void 0:t.sendAllWith(n),e.$ZenonDGWStreamController$p_3=n,n}catch(t){e.$ZenonDGWStreamController$p_12=null;var r=yield e.$ZenonDGWStreamController$p_19(o("DGWStream").StreamError.isValid(t)?t:null);if(r)return r;throw t}})();return this.$ZenonDGWStreamController$p_12=t,t});function t(){return e.apply(this,arguments)}return t})(),t})(r("EventEmitter"));l.default=_}),98);
__d("ZenonIceStatsParser",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=[],n=e.split("\r\n");return n.forEach(function(e){l(e)&&t.push({gen:s(e),type:u(e)})}),t}function l(e){return e.indexOf("candidate:")>-1}function s(e){var t=0,n=e.match(/generation (\d+)/);return n&&(t=parseInt(n[1],10)),t}function u(e){var t=e.match(/typ (host|relay|srflx|prflx)/);return t?t[1]:"unknown"}i.extractIceInfo=e}),66);
__d("ZenonMWThriftMessageMap",["MultiwayCommonTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return"UNKNOWN";switch(e){case o("MultiwayCommonTypes").MessageType.JOIN:return"JOIN";case o("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case o("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:return"ICE_CANDIDATE";case o("MultiwayCommonTypes").MessageType.HANGUP:return"HANGUP";case o("MultiwayCommonTypes").MessageType.RING:return"RING";case o("MultiwayCommonTypes").MessageType.DISMISS:return"DISMISS";case o("MultiwayCommonTypes").MessageType.CONFERENCE_STATE:return"CONFERENCE_STATE";case o("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case o("MultiwayCommonTypes").MessageType.SUBSCRIPTION:return"SUBSCRIPTION";case o("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case o("MultiwayCommonTypes").MessageType.DATA_MESSAGE:return"DATA_MESSAGE";case o("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case o("MultiwayCommonTypes").MessageType.PING:return"PING";case o("MultiwayCommonTypes").MessageType.NOTIFY:return"NOTIFY";case o("MultiwayCommonTypes").MessageType.CONNECT:return"CONNECT";case o("MultiwayCommonTypes").MessageType.CLIENT_EVENT:return"CLIENT_EVENT";case o("MultiwayCommonTypes").MessageType.UNSUBSCRIBE:return"UNSUBSCRIBE";case o("MultiwayCommonTypes").MessageType.UPDATE:return"UPDATE";case o("MultiwayCommonTypes").MessageType.APPROVAL:return"APPROVAL";case o("MultiwayCommonTypes").MessageType.WAKEUP:return"WAKEUP";default:return"UNKNOWN"}}function s(e){switch(e.toLowerCase()){case"join":return o("MultiwayCommonTypes").MessageType.JOIN;case"server_media_update":return o("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE;case"ice_candidate":return o("MultiwayCommonTypes").MessageType.ICE_CANDIDATE;case"hangup":return o("MultiwayCommonTypes").MessageType.HANGUP;case"ring":return o("MultiwayCommonTypes").MessageType.RING;case"dismiss":return o("MultiwayCommonTypes").MessageType.DISMISS;case"conference_state":return o("MultiwayCommonTypes").MessageType.CONFERENCE_STATE;case"add_participants":return o("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS;case"subscription":return o("MultiwayCommonTypes").MessageType.SUBSCRIPTION;case"client_media_update":return o("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE;case"data_message":return o("MultiwayCommonTypes").MessageType.DATA_MESSAGE;case"remove_participants":return o("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS;case"ping":return o("MultiwayCommonTypes").MessageType.PING;case"notify":return o("MultiwayCommonTypes").MessageType.NOTIFY;case"connect":return o("MultiwayCommonTypes").MessageType.CONNECT;case"client_event":return o("MultiwayCommonTypes").MessageType.CLIENT_EVENT;case"unsubscribe":return o("MultiwayCommonTypes").MessageType.UNSUBSCRIBE;case"update":return o("MultiwayCommonTypes").MessageType.UPDATE;case"approval":return o("MultiwayCommonTypes").MessageType.APPROVAL;case"wakeup":return o("MultiwayCommonTypes").MessageType.WAKEUP;default:return null}}l.messageTypeToString=e,l.messageTypeFromString=s}),98);
__d("ZenonEndCallReason",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({BREAKOUT_SESSION_SWITCH_ROOM:"BreakoutSessionSwitchRoom",CALL_END_ACCEPT_AFTER_HANG_UP:"CallEndAcceptAfterHangUp",CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:"CallerHasAppealableCallingRestriction",CALLER_NOT_VISIBLE:"CallerNotVisible",CAMERA_PERMISSION_DENIED:"CameraPermissionDenied",CARRIER_BLOCKED:"CarrierBlocked",CLIENT_ENCRYPTION_ERROR:"ClientEncryptionError",CLIENT_ERROR:"ClientError",CLIENT_INTERRUPTED:"ClientInterrupted",CONNECTION_DROPPED:"ConnectionDropped",END_TO_END_ENCRYPTION_INVARIANT_VIOLATED:"EndToEndEncryptionInvariantViolated",HANGUP_CALL:"HangupCall",IGNORE_CALL:"IgnoreCall",IN_ANOTHER_CALL:"InAnotherCall",INACTIVE_TIMEOUT:"InactiveTimeout",INCOMING_TIMEOUT:"IncomingTimeout",MAX_ALLOWED_PARTICIPANTS_REACHED:"MaxAllowedParticipantsReached",MICROPHONE_PERMISSION_DENIED:"MicrophonePermissionDenied",NO_ANSWER_TIMEOUT:"NoAnswerTimeout",NO_PERMISSION:"NoPermission",NO_UI_SHOWN:"NoUIShown",OTHER_CARRIER_BLOCKED:"OtherCarrierBlocked",OTHER_INSTANCE_HANDLED:"OtherInstanceHandled",OTHER_NOT_CAPABLE:"OtherNotCapable",PRODUCT_SERVER_DEFINED_END_REASON:"ProductServerDefinedEndReason",REMOVED_BY_PARTICIPANT:"RemovedByParticipant",RING_MUTED:"RingMuted",SESSION_MIGRATED:"SessionMigrated",SIGNALING_MESSAGE_FAILED:"SignalingMessageFailed",TX_ACK_TIMEOUT:"TxAckTimeout",UNEXPECTED_END_OF_CALL:"UnexpectedEndOfCall",UNKNOWN:"Unknown",VERSION_UNSUPPORTED:"VersionUnsupported",WEBRTC_ERROR:"WebRTCError"}),l=e;i.default=l}),66);
__d("ZenonIncomingRingSDKTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["Hangup","OtherDismiss"]);i.ZenonCancelReason=e}),66);
__d("fbwebrtc_ClientStack",[],(function(t,n,r,o,a,i){var e=Object.freeze({OLD_CLIENT_PLATFORM_STACK:0,RSYS_X:1,IG_OLD_STACK:2,MLITE_OLD_STACK:3,SCOTCH:4,ZENON:5});i.default=e}),66);
__d("multiway_ApprovalStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({DENIED:0,APPROVED:1});i.default=e}),66);
__d("multiway_Capability",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7,SUPPORT_MWPP_DEESCALATION:8,SUPPORT_PARTICIPANT_STATE_UNCALLABLE:9,SUPPORT_MULTIPLE_VIDEO_STREAMS:10,REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED:11,SUPPORT_MULTISTREAM_FEC:12,SUPPORT_DELTA_SMU:13,REQUIRE_DEFAULT_CHANNEL_SCREENSHARE:14,SUPPORT_SCREENSHARE_FLAG_IN_JOIN_RESPONSE_AND_SMU:15,SUPPORT_TEMPORAL_LAYER_JBE:16,REQUIRES_P2P_RELAY_INFO_VIA_SIGNALING:17,SUPPORT_NUMERIC_TOPICS:18,SUPPORT_PSEUDO_QUIC_CONNECTION:19,SUPPORT_SDP_SENDRECV:20});i.default=e}),66);
__d("multiway_ClientEventType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,MEDIA_CONNECTED:1});i.default=e}),66);
__d("multiway_ConferenceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,IGVIDEOCALL:9,ROOM:15,CRUCIBLE:20,MBS_WA:21,BOT:22,HORIZON:23,ULLC:24});i.default=e}),66);
__d("multiway_DeviceStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10});i.default=e}),66);
__d("multiway_DismissReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14,ANSWERED_BY_OTHER_USER:15,PARTICIPANT_SELF_TERMINATION:16,PARTICIPANT_REJOIN:17,LONG_LASTING_AUDIO_ISSUE:18,PRIMARY_ENDPOINT_HANGUP:19,RECONNECT_FAILED:20,E2EE_HARDENING_ERROR:21,CALL_ENDED_BY_EXTENSION:22,CALL_ENDED_BY_OVER_CAPACITY:23});i.default=e}),66);
__d("multiway_E2eeMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({E2EE_NOT_MANDATED:0,DEPRECATED_NO_REQUIREMENT:1,E2EE_MANDATED:2,E2EE_BYPASSED_USER_CONSENTED:3});i.default=e}),66);
__d("multiway_EndpointServiceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,COMPOSITING_SERVICE:1,MEDIA_SERVER:2,CATHODE_AMBISONIC:3,CATHODE_CAPTIONS:4,CATHODE_MEETING_SUMMARIZER:5,CATHODE_REALTIME_SHARED_STATE:6,RP_GENAI_SERVICE:7,SMART_GLASSES_ASSISTANT:8});i.default=e}),66);
__d("multiway_HangupReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:8,WEBRTC_ERROR:9,CONNECTION_DROPPED:10});i.default=e}),66);
__d("multiway_JoinMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({PRIMARY:0,SECONDARY:1});i.default=e}),66);
__d("multiway_MediaPath",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,SFU:1,P2P:2});i.default=e}),66);
__d("multiway_MediaPauseStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({NotPaused:0,Paused:1});i.default=e}),66);
__d("multiway_MessageTag",[],(function(t,n,r,o,a,i){var e=Object.freeze({PRANSWER:1001,INITIAL_ANSWER_TO_P2P_CALLER:1002,DEESCALATE_OFFER_TO_P2P_CALLEE:1003,DEESCALATE_ANSWER_TO_P2P_CALLER:1004,REQUEST_DEESCALATE_TO_P2P_CALLER:1005,REQUEST_ESCALATE:1006,REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:1007,REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:1008,PARTICIPANT_ADDED:1009,PARTICIPANT_REMOVED:1010,FIRST_REMOTE_ALERTED_FOR_INITIATOR:2001,FIRST_REMOTE_ANSWERED_FOR_INITIATOR:2002,CONTAIN_PENDING_APPROVAL_PARTICIPANTS:2003,KEEP_ALIVE_PING:3001,IS_INITIATOR:4001,PREGEN_SDP:4002});i.default=e}),66);
__d("multiway_MessageType",[],(function(t,n,r,o,a,i){var e=Object.freeze({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26,TRANSFER:27,WAKEUP:28});i.default=e}),66);
__d("multiway_ParticipantCallState",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17,UNCALLABLE_DELAYED:18});i.default=e}),66);
__d("multiway_RingType",[],(function(t,n,r,o,a,i){var e=Object.freeze({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6,LIVE_AUDIO_ROOM:7,LIVE_WITH_ROOM:8});i.default=e}),66);
__d("multiway_RtcResponseStatusCode",[],(function(t,n,r,o,a,i){var e=Object.freeze({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503});i.default=e}),66);
__d("multiway_RtcResponseSubCode",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,MWS_MESSAGE_SENT_TO_INCORRECT_REGION:1005,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,INVALID_BROADCAST_ID:2027,INVALID_ENDPOINT_CONFIG:2028,INVALID_E2EE_STATE:2029,SFU_MODE_PREVENTED:2030,INVALID_CONFERENCE_STATE:2031,JOIN_REQUEST_DENIED:2032,EMPTY_USER_IDS:2033,MISSING_SDP_CONNECT_REQUEST:2034,CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:2035,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_ENDPOINT_USER_ID:2120,EMPTY_ENDPOINT_USER_ID:2121,MISSING_BODY_TRANSFER_REQUEST:2122,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,INVALID_MULTIWAY_PARAMS:3009,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,RESOLUTION_DISABLED:4027,BROADCAST_ID_MISSING:4028,SDP_UNSET_ON_P2P_OFFER:4029,LEGACY_OFFER_MISSING_REQUIRED_VALUE:4031,MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:4032,CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:4033,OTHER_USER_ANSWERED_THE_CALL:4034,MEDIA_SERVER_DESERIALIZATION_ERROR:4035,REMOTE_SDP_TRACKID_MISMATCH:4036,SIGNALING_MESSAGE_TO_CLIENT_DROPPED:4037,DATA_CHANNEL_ENDPOINT_GONE:4038,DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:4039,CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:4040,P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:4041,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:4042,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:4043,REQUEST_TIMEOUT:4044,TOO_MANY_MEDIA_TRACKS_IN_SDP:4045,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,CLIENT_TERMINATED:5010,JOIN_SESSION_RESULT_MISSING:5012,LOGGING_POLICY_RESULT_MISSING:5013,INVITE_USERS_RESULT_MISSING:5014,STATE_SYNC_RESULT_MISSING:5015,ENDPOINT_INFO_RESULT_MISSING:5016,CONFERENCE_NAME_MISMATCH:5017,UNEXPECTED_TRANSPORT_PARAMS_CONFERENCE_NAME:5018,SESSION_CONFIGURATION_RESULT_MISSING:5019,REMOVE_USERS_RESULT_MISSING:5020,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,UNSUPPORTED_CAPABILITIES:6008,PRODUCT_SERVER_DEFINED_END_REASON:6009,WWW_KILLSWITCHED_REQUEST:6010,CONFLICTING_MEDIA_PATH:6011,CONFLICTING_MEDIA_STATUS:6012,CONFLICTING_SESSION_DESCRIPTION:6013,OK:9e3});i.default=e}),66);
__d("multiway_SubscriptionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CNAME:0,TRACK:1,DOMINANT_SPEAKER:2});i.default=e}),66);
__d("multiway_VideoQuality",[],(function(t,n,r,o,a,i){var e=Object.freeze({LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4});i.default=e}),66);
__d("ZenonMWMessageTypes",["$InternalEnum","fbwebrtc_ClientStack","multiway_ApprovalStatus","multiway_Capability","multiway_ClientEventType","multiway_ConferenceType","multiway_DeviceStatus","multiway_DismissReason","multiway_E2eeMode","multiway_EndpointServiceType","multiway_HangupReason","multiway_JoinMode","multiway_MediaPath","multiway_MediaPauseStatus","multiway_MessageTag","multiway_MessageType","multiway_ParticipantCallState","multiway_RingType","multiway_RtcResponseStatusCode","multiway_RtcResponseSubCode","multiway_SubscriptionType","multiway_VideoQuality"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({DEFAULT_AUDIO:0,DEFAULT_VIDEO:1,SCREEN_AUDIO:2,SCREEN_VIDEO:3});l.ZenonMWClientStack=r("fbwebrtc_ClientStack"),l.ZenonMWApprovalStatus=r("multiway_ApprovalStatus"),l.ZenonMWCapability=r("multiway_Capability"),l.ZenonMWClientEventType=r("multiway_ClientEventType"),l.ZenonMWConferenceType=r("multiway_ConferenceType"),l.ZenonMWDeviceStatus=r("multiway_DeviceStatus"),l.ZenonMWDismissReason=r("multiway_DismissReason"),l.ZenonMWE2eeMode=r("multiway_E2eeMode"),l.ZenonMWEndpointServiceType=r("multiway_EndpointServiceType"),l.ZenonMWHangupReason=r("multiway_HangupReason"),l.ZenonMWMediaPath=r("multiway_MediaPath"),l.ZenonMWJoinMode=r("multiway_JoinMode"),l.ZenonMWMediaPauseStatus=r("multiway_MediaPauseStatus"),l.ZenonMWMessageTag=r("multiway_MessageTag"),l.ZenonMWSignalingPayloadType=r("multiway_MessageType"),l.ZenonMWParticipantCallState=r("multiway_ParticipantCallState"),l.ZenonMWRingType=r("multiway_RingType"),l.ZenonMWResponseStatusCode=r("multiway_RtcResponseStatusCode"),l.ZenonMWResponseSubCode=r("multiway_RtcResponseSubCode"),l.ZenonMWSubscriptionType=r("multiway_SubscriptionType"),l.ZenonMWVideoQuality=r("multiway_VideoQuality"),l.ZenonMWTrackLabel=e}),98);
__d("ZenonMediaError",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ConnectionClosed","IceDisconnected","IceFailure","SetLocalSdpFailed","SetRemoteSdpFailed","RollbackSdpFailed","UnknownError"]);i.ZenonMediaError=e}),66);
__d("ZenonDismissReason",["$InternalEnum","FBLogger","ZenonIncomingRingSDKTypes","ZenonMWMessageTypes","ZenonMediaError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=n("$InternalEnum")({IgnoreCall:0,HangupCall:1,InAnotherCall:2,AcceptAfterHangUp:3,NoAnswerTimeout:4,IncomingTimeout:5,OtherInstanceHandled:6,SignalingMessageFailed:7,ConnectionDropped:8,ClientInterrupted:9,WebRTCError:10,ClientError:11,NoPermission:12,OtherNotCapable:13,NoUIShown:14,VersionUnsupported:15,CallerNotVisible:16,CarrierBlocked:17,OtherCarrierBlocked:18,ClientEncryptionError:19,MicrophonePermissionDenied:20,CameraPermissionDenied:21,SessionMigrated:22,RingMuted:23,JoinApprovalDenied:24,RejectedByCallee:25,CallEndedByProduct:26,CallEnded:27,AnsweredOnAnotherDevice:28,RejectedOnAnotherDevice:29,CallCollision:30,MaxAllowedParticipantsReached:31,UnexpectedEndOfCall:32,TxAckTimeout:33,EndToEndEncryptionInvariantViolated:34,ProductServerDefinedEndReason:35,RemovedByParticipant:39,AnsweredByOtherUser:40,CallerHasAppealableCallingRestriction:41});function c(e){switch(e){case"BreakoutSessionSwitchRoom":return u.HangupCall;case"CallEndAcceptAfterHangUp":return u.AcceptAfterHangUp;case"CallerNotVisible":return u.CallerNotVisible;case"CarrierBlocked":return u.CarrierBlocked;case"ClientEncryptionError":return u.ClientEncryptionError;case"ClientError":return u.ClientError;case"ClientInterrupted":return u.ClientInterrupted;case"ConnectionDropped":return u.ConnectionDropped;case"HangupCall":return u.HangupCall;case"IgnoreCall":return u.IgnoreCall;case"InAnotherCall":return u.InAnotherCall;case"EndToEndEncryptionInvariantViolated":return u.EndToEndEncryptionInvariantViolated;case"InactiveTimeout":return u.CallEnded;case"IncomingTimeout":return u.IncomingTimeout;case"MaxAllowedParticipantsReached":return u.MaxAllowedParticipantsReached;case"NoAnswerTimeout":return u.NoAnswerTimeout;case"NoPermission":return u.NoPermission;case"NoUIShown":return u.NoUIShown;case"OtherCarrierBlocked":return u.OtherCarrierBlocked;case"OtherInstanceHandled":return u.OtherInstanceHandled;case"OtherNotCapable":return u.OtherNotCapable;case"SignalingMessageFailed":return u.SignalingMessageFailed;case"UnexpectedEndOfCall":return u.UnexpectedEndOfCall;case"Unknown":return u.CallEnded;case"VersionUnsupported":return u.VersionUnsupported;case"WebRTCError":return u.WebRTCError;case"MicrophonePermissionDenied":return u.MicrophonePermissionDenied;case"CameraPermissionDenied":return u.CameraPermissionDenied;case"SessionMigrated":return u.SessionMigrated;case"RingMuted":return u.RingMuted;case"TxAckTimeout":return u.TxAckTimeout;case"ProductServerDefinedEndReason":return u.ProductServerDefinedEndReason;case"RemovedByParticipant":return u.RemovedByParticipant;case"CallerHasAppealableCallingRestriction":return u.CallerHasAppealableCallingRestriction}}function d(e){switch(e){case u.CallEnded:case u.CallEndedByProduct:case u.HangupCall:return"HangupCall";case u.IgnoreCall:case u.JoinApprovalDenied:case u.RejectedByCallee:return"IgnoreCall";case u.InAnotherCall:return"InAnotherCall";case u.AcceptAfterHangUp:return"CallEndAcceptAfterHangUp";case u.NoAnswerTimeout:return"NoAnswerTimeout";case u.IncomingTimeout:return"IncomingTimeout";case u.AnsweredOnAnotherDevice:case u.CallCollision:case u.RejectedOnAnotherDevice:case u.OtherInstanceHandled:case u.AnsweredByOtherUser:return"OtherInstanceHandled";case u.SignalingMessageFailed:return"SignalingMessageFailed";case u.ConnectionDropped:return"ConnectionDropped";case u.ClientInterrupted:return"ClientInterrupted";case u.WebRTCError:return"WebRTCError";case u.ClientError:return"ClientError";case u.NoPermission:return"NoPermission";case u.OtherNotCapable:return"OtherNotCapable";case u.NoUIShown:return"NoUIShown";case u.VersionUnsupported:return"VersionUnsupported";case u.CallerNotVisible:return"CallerNotVisible";case u.CarrierBlocked:return"CarrierBlocked";case u.OtherCarrierBlocked:return"OtherCarrierBlocked";case u.ClientEncryptionError:return"ClientEncryptionError";case u.UnexpectedEndOfCall:return"UnexpectedEndOfCall";case u.MaxAllowedParticipantsReached:return"MaxAllowedParticipantsReached";case u.MicrophonePermissionDenied:return"MicrophonePermissionDenied";case u.CameraPermissionDenied:return"CameraPermissionDenied";case u.SessionMigrated:return"SessionMigrated";case u.RingMuted:return"RingMuted";case u.TxAckTimeout:return"TxAckTimeout";case u.EndToEndEncryptionInvariantViolated:return"EndToEndEncryptionInvariantViolated";case u.ProductServerDefinedEndReason:return"ProductServerDefinedEndReason";case u.RemovedByParticipant:return"RemovedByParticipant";case u.CallerHasAppealableCallingRestriction:return"CallerHasAppealableCallingRestriction"}return r("FBLogger")("rtc_www").mustfix("Unknown dismiss reason: %s",e),"Unknown"}function m(e){switch(e){case u.OtherInstanceHandled:case u.AnsweredOnAnotherDevice:case u.AnsweredByOtherUser:case u.RejectedOnAnotherDevice:return o("ZenonIncomingRingSDKTypes").ZenonCancelReason.OtherDismiss;default:return o("ZenonIncomingRingSDKTypes").ZenonCancelReason.Hangup}}function p(e){switch(e){case o("ZenonMediaError").ZenonMediaError.IceDisconnected:return u.ConnectionDropped;case o("ZenonMediaError").ZenonMediaError.ConnectionClosed:return u.HangupCall;case o("ZenonMediaError").ZenonMediaError.IceFailure:case o("ZenonMediaError").ZenonMediaError.SetLocalSdpFailed:case o("ZenonMediaError").ZenonMediaError.SetRemoteSdpFailed:case o("ZenonMediaError").ZenonMediaError.RollbackSdpFailed:return u.WebRTCError;case o("ZenonMediaError").ZenonMediaError.UnknownError:return u.UnexpectedEndOfCall}}function _(e){return f[e]}var f=Object.freeze((e={},e[(s=o("ZenonMWMessageTypes")).ZenonMWDismissReason.CALL_ENDED]=u.CallEnded,e[s.ZenonMWDismissReason.ANSWERED_ON_ANOTHER_DEVICE]=u.AnsweredOnAnotherDevice,e[s.ZenonMWDismissReason.ANSWERED_BY_OTHER_USER]=u.AnsweredByOtherUser,e[s.ZenonMWDismissReason.IN_ANOTHER_CALL]=u.InAnotherCall,e[s.ZenonMWDismissReason.CONNECTION_DROPPED]=u.ConnectionDropped,e[s.ZenonMWDismissReason.REJECTED_ON_ANOTHER_DEVICE]=u.RejectedOnAnotherDevice,e[s.ZenonMWDismissReason.REJECTED_BY_CALLEE]=u.RejectedByCallee,e[s.ZenonMWDismissReason.CALL_ENDED_BY_PRODUCT]=u.CallEndedByProduct,e[s.ZenonMWDismissReason.INTERNAL_ERROR]=u.SignalingMessageFailed,e[s.ZenonMWDismissReason.REMOVED_BY_PARTICIPANT]=u.RemovedByParticipant,e[s.ZenonMWDismissReason.TX_ACK_TIMEDOUT]=u.TxAckTimeout,e));l.ZenonDismissReason=u,l.endCallToDismissReason=c,l.dismissToEndCallReason=d,l.dismissReasonToCancelReason=m,l.mediaErrorToDismissReason=p,l.mwDismissToDmissReason=_}),98);
__d("ZenonMWThriftMessageTagUtils",["MultiwayCommonTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case o("MultiwayCommonTypes").MessageTag.PRANSWER:return 1001;case o("MultiwayCommonTypes").MessageTag.INITIAL_ANSWER_TO_P2P_CALLER:return 1002;case o("MultiwayCommonTypes").MessageTag.DEESCALATE_OFFER_TO_P2P_CALLEE:return 1003;case o("MultiwayCommonTypes").MessageTag.DEESCALATE_ANSWER_TO_P2P_CALLER:return 1004;case o("MultiwayCommonTypes").MessageTag.REQUEST_DEESCALATE_TO_P2P_CALLER:return 1005;case o("MultiwayCommonTypes").MessageTag.REQUEST_ESCALATE:return 1006;case o("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:return 1007;case o("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:return 1008;case o("MultiwayCommonTypes").MessageTag.PARTICIPANT_ADDED:return 1009;case o("MultiwayCommonTypes").MessageTag.PARTICIPANT_REMOVED:return 1010;case o("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ALERTED_FOR_INITIATOR:return 2001;case o("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ANSWERED_FOR_INITIATOR:return 2002;case o("MultiwayCommonTypes").MessageTag.CONTAIN_PENDING_APPROVAL_PARTICIPANTS:return 2003;case o("MultiwayCommonTypes").MessageTag.KEEP_ALIVE_PING:return 3001;case o("MultiwayCommonTypes").MessageTag.IS_INITIATOR:return 4001;case o("MultiwayCommonTypes").MessageTag.PREGEN_SDP:return 4002}}function s(e){switch(e){case 1001:return o("MultiwayCommonTypes").MessageTag.PRANSWER;case 1002:return o("MultiwayCommonTypes").MessageTag.INITIAL_ANSWER_TO_P2P_CALLER;case 1003:return o("MultiwayCommonTypes").MessageTag.DEESCALATE_OFFER_TO_P2P_CALLEE;case 1004:return o("MultiwayCommonTypes").MessageTag.DEESCALATE_ANSWER_TO_P2P_CALLER;case 1005:return o("MultiwayCommonTypes").MessageTag.REQUEST_DEESCALATE_TO_P2P_CALLER;case 1006:return o("MultiwayCommonTypes").MessageTag.REQUEST_ESCALATE;case 1007:return o("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM;case 1008:return o("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS;case 1009:return o("MultiwayCommonTypes").MessageTag.PARTICIPANT_ADDED;case 1010:return o("MultiwayCommonTypes").MessageTag.PARTICIPANT_REMOVED;case 2001:return o("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ALERTED_FOR_INITIATOR;case 2002:return o("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ANSWERED_FOR_INITIATOR;case 2003:return o("MultiwayCommonTypes").MessageTag.CONTAIN_PENDING_APPROVAL_PARTICIPANTS;case 3001:return o("MultiwayCommonTypes").MessageTag.KEEP_ALIVE_PING;case 4001:return o("MultiwayCommonTypes").MessageTag.IS_INITIATOR;case 4002:return o("MultiwayCommonTypes").MessageTag.PREGEN_SDP}}function u(t){var n=[];return t==null||t.forEach(function(t){t&&n.push(e(t))}),n}l.toThriftMessageTag=s,l.fromThriftMessageTags=u}),98);
__d("ZenonCallsModelTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum")).Mirrored(["Disconnected","Precontacting","Contacting","Ringing","PendingApproval","Approved","FailedApproval","Connecting","Connected","Reconnecting","ProvisionalRinging"]),s=e.Mirrored(["Facebook","Instagram","Messenger","Guest","WhatsApp","Workplace"]),u=e.Mirrored(["New","Connecting","PendingApproval","Connected","Terminating","Terminated"]),c=e.Mirrored(["Unknown","CallsBlocked","PageAdminPressedDecline"]),d=e.Mirrored(["None","PendingPeerFeedback","Declined","RemoteDeclined","LocalDeclined","Cancelled","TimedOut","Accepted","InitiatedFromPeer"]);i.ZenonCallParticipantState=l,i.ZenonCallParticipantType=s,i.ZenonCallState=u,i.ZenonEndCallSubreason=c,i.ZenonVideoEscalationStatus=d}),66);
__d("ZenonParticipantState",["$InternalEnum","ZenonCallsModelTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({UNKNOWN:0,ADDING:1,CONTACTING:2,RINGING:3,ACCEPTING:4,PRECONNECTING:5,CONNECTING:6,CONNECTED:7,REMOVING:8,DISCONNECTED:9,NO_ANSWER:10,REJECTED:11,UNREACHABLE:12,CONNECTION_DROPPED:13,PARTICIPANT_LIMIT_REACHED:14,IN_ANOTHER_CALL:15,RING_TYPE_UNSUPPORTED:16,PENDING_APPROVAL:17,APPROVING:18,DENYING:19,APPROVED:20,FAILED_APPROVAL:21,HANGUP_IN_WAITING_ROOM:22,RECONNECTING:23});function s(t){if(t==null)return o("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected;switch(t){case e.CONTACTING:case e.PRECONNECTING:return o("ZenonCallsModelTypes").ZenonCallParticipantState.Contacting;case e.RINGING:return o("ZenonCallsModelTypes").ZenonCallParticipantState.Ringing;case e.CONNECTING:case e.RECONNECTING:return o("ZenonCallsModelTypes").ZenonCallParticipantState.Connecting;case e.CONNECTED:return o("ZenonCallsModelTypes").ZenonCallParticipantState.Connected;case e.PENDING_APPROVAL:case e.APPROVING:case e.DENYING:case e.ACCEPTING:case e.ADDING:case e.REMOVING:return o("ZenonCallsModelTypes").ZenonCallParticipantState.PendingApproval;case e.APPROVED:return o("ZenonCallsModelTypes").ZenonCallParticipantState.Approved;case e.FAILED_APPROVAL:return o("ZenonCallsModelTypes").ZenonCallParticipantState.FailedApproval;case e.HANGUP_IN_WAITING_ROOM:case e.UNKNOWN:case e.DISCONNECTED:case e.NO_ANSWER:case e.REJECTED:case e.UNREACHABLE:case e.CONNECTION_DROPPED:case e.PARTICIPANT_LIMIT_REACHED:case e.IN_ANOTHER_CALL:case e.RING_TYPE_UNSUPPORTED:return o("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected}return o("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected}l.ZenonParticipantState=e,l.toCallParticipantState=s}),98);
__d("ZenonScreenShare",["UserAgent","ZenonAppProvider"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;return e.length===1&&((t=e[0])==null?void 0:t.contentType)==="screen"}function s(){return!r("UserAgent").isBrowser("Safari")}function u(){return!o("ZenonAppProvider").isOculusCastingSite()}function c(){return!s()||!u()}l.isScreenSharingTrack=e,l.screenShareWithReplaceTrack=c}),98);
__d("ZenonSignalingTypes",[],(function(t,n,r,o,a,i){"use strict";var e={OK:0,REJECTED_FROM_VERSION_DOES_NOT_MATCH:1,METHOD_NOT_ALLOWED:2},l={CLIENT_TERMINATED:0};i.ZenonSignalingStatusCode=e,i.ZenonSignalingStatusSubCode=l}),66);
__d("addDevTierOverridesToHeaderExtensions",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={multiwayCoreTier:"",multiwayWwwTier:""};return r("gkx")("25224")&&(t.multiwayWwwTier=s(e,"multiway_www_tier"),t.multiwayCoreTier=s(e,"multiway_core_tier")),t}function s(e,t){var n=t+"=",r=e.split(n);return r[1]?r.pop().split("&").shift():""}l.default=e}),98);
__d("ZenonMWThriftTranslatorUtils",["FBLogger","MultiwayCommonTypes","MultiwaySharedTypes","OverlayConfigServerLayer","RequestStreamBodyUtils","WebrtcSignalingCommonTypes","ZenonDismissReason","ZenonMWMessageTypes","ZenonMWThriftMessageTagUtils","ZenonParticipantState","ZenonScreenShare","ZenonSignalingProtocol","ZenonSignalingTypes","addDevTierOverridesToHeaderExtensions"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d="signalingDominantSpeakerUpdate",m="signalingVideoUploadUpdate",p="E2eeState",_=new Map(Array.from(o("MultiwaySharedTypes").ConferenceType.members(),function(e){return[o("MultiwaySharedTypes").ConferenceType.getName(e),e]}));function f(e,t,n,r){n===void 0&&(n=!1),e&&Object.keys(e).forEach(function(o){if(!(o===p&&r)){var a=e[o],i=a.data,l=a.version;if(i!=null){var s={data:i,eventName:"stateSyncNotifyRequest",responseRequired:n,topic:o,version:l};t.push(s)}}})}function g(e){if(e){var t=e[p];return t==null?void 0:t.data}}function h(e){if(e==null)return o("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN;switch(e){case o("MultiwaySharedTypes").MediaPath.SFU:return o("ZenonMWMessageTypes").ZenonMWMediaPath.SFU;case o("MultiwaySharedTypes").MediaPath.P2P:return o("ZenonMWMessageTypes").ZenonMWMediaPath.P2P;default:return o("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN}}function y(e){if(e==null)return o("ZenonParticipantState").ZenonParticipantState.UNKNOWN;switch(e){case o("MultiwayCommonTypes").ParticipantCallState.DISCONNECTED:return o("ZenonParticipantState").ZenonParticipantState.DISCONNECTED;case o("MultiwayCommonTypes").ParticipantCallState.NO_ANSWER:return o("ZenonParticipantState").ZenonParticipantState.NO_ANSWER;case o("MultiwayCommonTypes").ParticipantCallState.REJECTED:return o("ZenonParticipantState").ZenonParticipantState.REJECTED;case o("MultiwayCommonTypes").ParticipantCallState.UNREACHABLE:case o("MultiwayCommonTypes").ParticipantCallState.UNCALLABLE:return o("ZenonParticipantState").ZenonParticipantState.UNREACHABLE;case o("MultiwayCommonTypes").ParticipantCallState.CONNECTION_DROPPED:return o("ZenonParticipantState").ZenonParticipantState.CONNECTION_DROPPED;case o("MultiwayCommonTypes").ParticipantCallState.CONTACTING:return o("ZenonParticipantState").ZenonParticipantState.CONTACTING;case o("MultiwayCommonTypes").ParticipantCallState.RINGING:return o("ZenonParticipantState").ZenonParticipantState.RINGING;case o("MultiwayCommonTypes").ParticipantCallState.CONNECTING:return o("ZenonParticipantState").ZenonParticipantState.CONNECTING;case o("MultiwayCommonTypes").ParticipantCallState.CONNECTED:return o("ZenonParticipantState").ZenonParticipantState.CONNECTED;case o("MultiwayCommonTypes").ParticipantCallState.PARTICIPANT_LIMIT_REACHED:return o("ZenonParticipantState").ZenonParticipantState.PARTICIPANT_LIMIT_REACHED;case o("MultiwayCommonTypes").ParticipantCallState.IN_ANOTHER_CALL:return o("ZenonParticipantState").ZenonParticipantState.IN_ANOTHER_CALL;case o("MultiwayCommonTypes").ParticipantCallState.RING_TYPE_UNSUPPORTED:return o("ZenonParticipantState").ZenonParticipantState.RING_TYPE_UNSUPPORTED;case o("MultiwayCommonTypes").ParticipantCallState.PENDING_APPROVAL:return o("ZenonParticipantState").ZenonParticipantState.PENDING_APPROVAL;case o("MultiwayCommonTypes").ParticipantCallState.APPROVED:return o("ZenonParticipantState").ZenonParticipantState.APPROVED;case o("MultiwayCommonTypes").ParticipantCallState.FAILED_APPROVAL:return o("ZenonParticipantState").ZenonParticipantState.FAILED_APPROVAL;case o("MultiwayCommonTypes").ParticipantCallState.HANGUP_IN_WAITING_ROOM:return o("ZenonParticipantState").ZenonParticipantState.HANGUP_IN_WAITING_ROOM;default:return o("ZenonParticipantState").ZenonParticipantState.UNKNOWN}}function C(e){var t=null;return e!=null&&e.forEach(function(e){var n,r=(n=e.body)==null?void 0:n.genericMessage;if(r!=null&&r.topic==="collision_context_payload"){var a=r.data;if(a!=null){var i,l,s,u=JSON.parse(o("RequestStreamBodyUtils").uint8ArrayToString(a));t={groupThreadID:(i=u.group_thread_id)!=null?i:null,peerID:(l=u.peer_id)!=null?l:null,serverInfoData:(s=u.server_info_data)!=null?s:null}}}}),t}function b(e){var t=e&&e.length>0?e.find(function(e){var t;return((t=e.body)==null||(t=t.genericMessage)==null?void 0:t.topic)==="room_metadata"}):null;if(t){var n,r=(n=t.body)==null||(n=n.genericMessage)==null?void 0:n.data;if(r!=null){var a,i=JSON.parse(o("RequestStreamBodyUtils").uint8ArrayToString(r)),l=(a=t.header)==null?void 0:a.sender;if(i.link_hash!=null&&i.room_name!=null&&l!=null)return{linkHash:i.link_hash,profileURL:i.profile_url,ringSubtitle:i.ring_subtitle,roomName:i.room_name,sender:l}}}return null}function v(e){return e.reduce(function(e,t){var n,r,a=(n=t.body)==null||(n=n.genericMessage)==null?void 0:n.topic,i=(r=t.body)==null||(r=r.genericMessage)==null?void 0:r.data;return a!=null&&i!=null&&(e[a]=o("RequestStreamBodyUtils").uint8ArrayToString(i)),e},{})}function S(e){switch(e){case o("ZenonMWMessageTypes").ZenonMWMediaPath.SFU:return o("MultiwaySharedTypes").MediaPath.SFU;case o("ZenonMWMessageTypes").ZenonMWMediaPath.P2P:return o("MultiwaySharedTypes").MediaPath.P2P;default:return o("MultiwaySharedTypes").MediaPath.UNKNOWN}}function R(e,t,n){n===void 0&&(n=0);var r={fromVersion:t,tracks:[],version:n};return e!=null&&Object.keys(e.tracks).forEach(function(t){var n,o,a=e.tracks[t],i={enabled:a.enabled,name:(n=a.name)!=null?n:"",participantID:(o=a.owner)!=null?o:"0",trackID:t,type:L(a.label)};r.tracks.push(i)}),r}function L(e){if(e==null)return null;switch(e){case o("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_AUDIO:return"audio";case o("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_VIDEO:return"video";case o("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_AUDIO:return"screen_audio";case o("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_VIDEO:return"screen";default:return null}}function E(e,t){var n=r("OverlayConfigServerLayer").createFromHeader(t);if(n){var o={eventName:"overlayConfigServerUpdateRequest",serverLayer:n};e.push(o)}}function k(e){var t=e.header,n=e.rtcMessageBody,r=e.type,o=$(t,r),a={messageBody:n,messageHeader:o};return a}function I(e){var t=e.header,n=e.rtcMessageBody,r=e.statusCode,o=e.subCode,a=e.type,i=O(t,a,r,o),l={messageBody:n,messageHeader:i};return l}var T={IN_ANOTHER_CALL:(u=o("MultiwayCommonTypes")).DeviceStatus.IN_ANOTHER_CALL,NO_OP:null,NOT_SUPPORTED:u.DeviceStatus.NOT_SUPPORTED,OK:u.DeviceStatus.OK};function D(e,t){return Object.keys(e).map(function(n){var r=e[n];return{body:{genericMessage:{data:o("RequestStreamBodyUtils").stringToUint8Array(r),topic:n}},header:{recipients:new Set(t),topic_DEPRECATED:n}}})}function x(e){var t,n=e.clientSessionId,a=e.conferenceName,i=e.receiver,l=e.receiverUserId,s=e.sequenceNumber,u=e.serverInfoData,c=e.transactionId,d=e.type;if(l==null){var m=d!=null?o("MultiwayCommonTypes").MessageType.getName(d):"UNKNOWN";r("FBLogger")("rpweb").info("Allowing null receiverUserId for MessageType: %s",m)}var p=n,_={userID:"2"},f={actorID:(t=i==null?void 0:i.actorId)!=null?t:null,messageID:c,messageTags:o("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(e.messageTags),protocol:r("ZenonSignalingProtocol").MW,remoteInfo:_,retryCount:e.retryCount,roomInfo:{name:a},sequenceNumber:Number(s),signalingID:p,userInfo:{userID:l!=null?l:"1"}};return u!=null&&(f.remoteSignalingID=u),f}function $(e,t){var n,a,i,l=e.messageID,s=e.messageTags,u=e.remoteSignalingID,c=e.roomInfo,d=e.signalingID,m=r("addDevTierOverridesToHeaderExtensions")(window.location.href),p={clientStack:o("WebrtcSignalingCommonTypes").ClientStack.ZENON,conferenceName:(n=c.name)!=null?n:"",conferenceType:B((a=c.name)!=null?a:""),messageTags:new Set(s==null?void 0:s.map(function(e){return o("ZenonMWThriftMessageTagUtils").toThriftMessageTag(e)})),retryCount:e.retryCount,sequenceNumber:(i=e.sequenceNumber)==null?void 0:i.toString(),transactionId:l,type:t};return(m.multiwayCoreTier!==""||m.multiwayWwwTier!=="")&&(p.extensions=m),d!=null&&(p.clientSessionId=d),u!=null&&(p.serverInfoData=u),e.actorID!=null&&(p.sender={id:e.actorID}),p}function P(e){switch(e){case o("ZenonDismissReason").ZenonDismissReason.IgnoreCall:return o("MultiwayCommonTypes").HangupReason.IGNORE_CALL;case o("ZenonDismissReason").ZenonDismissReason.HangupCall:return o("MultiwayCommonTypes").HangupReason.HANGUP_CALL;case o("ZenonDismissReason").ZenonDismissReason.NoAnswerTimeout:return o("MultiwayCommonTypes").HangupReason.NO_ANSWER_TIMEOUT;case o("ZenonDismissReason").ZenonDismissReason.ClientError:return o("MultiwayCommonTypes").HangupReason.CLIENT_ERROR;case o("ZenonDismissReason").ZenonDismissReason.InAnotherCall:return o("MultiwayCommonTypes").HangupReason.IN_ANOTHER_CALL;case o("ZenonDismissReason").ZenonDismissReason.ClientInterrupted:return o("MultiwayCommonTypes").HangupReason.CLIENT_INTERRUPTED;case o("ZenonDismissReason").ZenonDismissReason.SessionMigrated:return o("MultiwayCommonTypes").HangupReason.SESSION_MIGRATED;default:return o("MultiwayCommonTypes").HangupReason.HANGUP_CALL}}function N(e){var t,n=(t=e.message.body)!=null?t:{},r=n.dominantSpeakerSignalingInfo,a=n.genericMessage,i=n.videoUploadSignalingInfo;return a?o("RequestStreamBodyUtils").uint8ArrayToString(a.data):r?JSON.stringify(r):i?JSON.stringify(i):null}function M(e){var t,n=(t=e.message.body)!=null?t:{},r=n.dominantSpeakerSignalingInfo,o=n.genericMessage,a=n.videoUploadSignalingInfo;return o?o.topic:r?d:a?m:null}function w(e){return e==null?null:e===1?o("MultiwaySharedTypes").EndpointServiceType.COMPOSITING_SERVICE:o("MultiwaySharedTypes").EndpointServiceType.UNKNOWN}function A(e){var t=F(e);return t!=null?t:o("ZenonDismissReason").ZenonDismissReason.CallEnded}function F(e){if(e==null)return null;switch(e){case o("MultiwayCommonTypes").DismissReason.CALL_ENDED:return o("ZenonDismissReason").ZenonDismissReason.CallEnded;case o("MultiwayCommonTypes").DismissReason.ANSWERED_ON_ANOTHER_DEVICE:return o("ZenonDismissReason").ZenonDismissReason.AnsweredOnAnotherDevice;case o("MultiwayCommonTypes").DismissReason.ANSWERED_BY_OTHER_USER:return o("ZenonDismissReason").ZenonDismissReason.AnsweredByOtherUser;case o("MultiwayCommonTypes").DismissReason.IN_ANOTHER_CALL:return o("ZenonDismissReason").ZenonDismissReason.InAnotherCall;case o("MultiwayCommonTypes").DismissReason.CONNECTION_DROPPED:return o("ZenonDismissReason").ZenonDismissReason.ConnectionDropped;case o("MultiwayCommonTypes").DismissReason.PRIMARY_ENDPOINT_HANGUP:return o("ZenonDismissReason").ZenonDismissReason.HangupCall;case o("MultiwayCommonTypes").DismissReason.REJECTED_ON_ANOTHER_DEVICE:return o("ZenonDismissReason").ZenonDismissReason.RejectedOnAnotherDevice;case o("MultiwayCommonTypes").DismissReason.REMOVED_BY_PARTICIPANT:return o("ZenonDismissReason").ZenonDismissReason.RemovedByParticipant;case o("MultiwayCommonTypes").DismissReason.REJECTED_BY_CALLEE:return o("ZenonDismissReason").ZenonDismissReason.RejectedByCallee;case o("MultiwayCommonTypes").DismissReason.INTERNAL_ERROR:return o("ZenonDismissReason").ZenonDismissReason.SignalingMessageFailed;case o("MultiwayCommonTypes").DismissReason.CALL_ENDED_BY_PRODUCT:return o("ZenonDismissReason").ZenonDismissReason.CallEndedByProduct;case o("MultiwayCommonTypes").DismissReason.TX_ACK_TIMEDOUT:return o("ZenonDismissReason").ZenonDismissReason.TxAckTimeout;default:return null}}function O(e,t,n,r){var a=$(e,t);return a.responseStatusCode=n!=null?n:o("MultiwayCommonTypes").RtcResponseStatusCode.OK,a.responseSubCode=r,a}function B(e){var t,n=e.indexOf(":");if(n===-1)return null;var r=e.slice(0,n);return(t=_.get(r))!=null?t:null}function W(e){var t={},n=!o("ZenonScreenShare").screenShareWithReplaceTrack();return e.tracks.forEach(function(e){var r={customAudioContentType:o("WebrtcSignalingCommonTypes").CustomAudioContentType.NONE,customVideoContentType:o("WebrtcSignalingCommonTypes").CustomVideoContentType.NONE,enabled:e.enabled},a=n?z(e.type):null;a!=null&&(r.label=a),t[e.trackID]=r}),{tracks:t}}function q(e){var t=T[e];return t!=null?t:o("MultiwayCommonTypes").DeviceStatus.OK}function U(e){var t={};return e.tracks.forEach(function(e){t[e.trackID]=e.enabled}),t}function V(e){return K[e]}function H(e){return e==null?null:Q[e]}function G(e){var t={};return e.forEach(function(e,n){t[n]={data:e.data,version:e.version}}),t}function z(e){switch(e){case"audio":return o("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_AUDIO;case"video":return o("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_VIDEO;case"screen":return o("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_VIDEO;case"screen_audio":return o("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_AUDIO;default:return null}}function j(e){return e===o("MultiwaySharedTypes").EndpointServiceType.COMPOSITING_SERVICE?1:0}var K=Object.freeze((e={},e[(c=o("ZenonSignalingTypes")).ZenonSignalingStatusCode.OK]=u.RtcResponseStatusCode.OK,e[c.ZenonSignalingStatusCode.REJECTED_FROM_VERSION_DOES_NOT_MATCH]=u.RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED,e[c.ZenonSignalingStatusCode.METHOD_NOT_ALLOWED]=u.RtcResponseStatusCode.METHOD_NOT_ALLOWED,e)),Q=Object.freeze((s={},s[c.ZenonSignalingStatusSubCode.CLIENT_TERMINATED]=u.RtcResponseSubCode.CLIENT_TERMINATED,s));l.addThriftStateStoreSignalingEvents=f,l.fetchE2eeServerState=g,l.fromThriftMediaPath=h,l.fromThriftParticipantState=y,l.getCollisionContextFromThriftAppMessages=C,l.getRoomMetadataFromThriftAppMessages=b,l.mwThriftAppMessagesToSignalingAppMessages=v,l.toThriftMediaPath=S,l.toZenonMediaStatesFromThrift=R,l.toMWClientTrackContentTypeFromThrift=L,l.maybeAddOverlayConfigServerUpdateRequestFromThrift=E,l.createMWThriftRequest=k,l.createMWThriftResponse=I,l.signalingMessageAppMessagesToThriftMWAppMessages=D,l.mwThriftMessageHeaderToSignalingMessageHeader=x,l.toMWThriftHangupReason=P,l.getGenericMWThriftDataMessageData=N,l.getGenericMWThriftDataMessageTopic=M,l.toThriftServiceRecipient=w,l.fromMWThriftDismissReason=A,l.getConferenceTypeFromName=B,l.toThriftMWMediaStatusEx=W,l.toMWThriftDeviceStatus=q,l.toMWThriftMediaStatus=U,l.toMWThriftResponseStatusCode=V,l.toMWThriftResponseStatusSubCode=H,l.toThriftMWSyncStateStore=G,l.toMWThriftTrackLabel=z,l.toServiceRecipientType=j}),98);
__d("ZenonMWThriftMessageDebugLogger",["Log","LogHistory","MultiwayCommonTypes","ODS","RequestStreamBodyUtils","RpWebStateMachineLoggingBlocklist.experimental","ZenonAuditedCheckpointLogId","ZenonIceStatsParser","ZenonInfraActionsLogger","ZenonMWThriftMessageMap","ZenonMWThriftTranslatorUtils","formatDate","isEmployeeTestUserZenonLogging"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){this.$1=o("LogHistory").getInstance("webrtc"),this.$2=new Set(r("RpWebStateMachineLoggingBlocklist.experimental").MESSAGE_TYPES)}var n=t.prototype;return n.$3=function(t,n,o){n===void 0&&(n=!0);var e=r("formatDate")(new Date,"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+t),n&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] "+t,messageID:o})},n.$4=function(t){var e=t.messageHeader.responseStatusCode;return e!=null},n.logMWThriftMessage=function(t,n,a){if(this.$5(t,n,a),!!r("isEmployeeTestUserZenonLogging")()){var e=a.messageHeader,i=o("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type),l=this.$4(a)?"RESPONSE":"REQUEST",s=this.$6(a),u="[ms] "+t+" ["+n+"] "+i+" "+l+" [retryCount: "+e.retryCount+(s!=null?" details: "+s:"")+"]";this.$2.has(i)||this.$3(u,!0,e.transactionId)}},n.$5=function(n,r,a){var t=this.$7(n,r,a);t!==null&&(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_signaling",t)},n.$7=function(t,n,r){var e=r.messageBody,a=r.messageHeader,i="";if(a.type!=null)switch(a.type){case o("MultiwayCommonTypes").MessageType.DATA_MESSAGE:if(e.dataMessageRequest){var l;i=(l=o("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageTopic(e.dataMessageRequest))!=null?l:"undefined"}break;default:break}var s=this.$4(r)?"RESPONSE":"REQUEST",u=o("ZenonMWThriftMessageMap").messageTypeToString(a.type);return i===""?t+"-"+n+"-"+u+"-"+s:t+"-"+n+"-"+u+"-"+s+"-"+i},n.$6=function(t){var e=t.messageHeader;if(o("MultiwayCommonTypes").MessageType==null||e.type==null)return null;switch(e.type){case o("MultiwayCommonTypes").MessageType.JOIN:return this.$8(t);case o("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:return this.$9(t);case o("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:return this.$10(t);case o("MultiwayCommonTypes").MessageType.SUBSCRIPTION:return this.$11(t);case o("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:return this.$12(t);default:return null}},n.$8=function(t){var e,n,r,a,i=t.messageBody,l=t.messageHeader;if(this.$4(t)){var s,u,c,d;return JSON.stringify({hasAnswer:((s=i.joinResponse)==null?void 0:s.answer)!=null,hasRenegotiationOffer:((u=i.joinResponse)==null?void 0:u.renegotiationOffer)!=null,isPendingApproval:(c=i.joinResponse)==null?void 0:c.isPendingApproval,multipleVideoStreamsAllowed:(d=i.joinResponse)==null?void 0:d.multipleVideoStreamsAllowed,statusCode:l.responseStatusCode,subCode:l.responseSubCode})}return JSON.stringify({deviceCapabilities:(e=i.joinRequest)==null?void 0:e.deviceCapabilities,sdpType:((n=i.joinRequest)==null?void 0:n.offer)!=null?"offer":((r=i.joinRequest)==null?void 0:r.answer)!=null?"answer":"null",userCapabilities:(a=i.joinRequest)!=null&&a.userCapabilities?o("RequestStreamBodyUtils").uint8ArrayToString(i.joinRequest.userCapabilities):""})},n.$9=function(t){var e,n,r,o,a,i,l,s,u=t.messageBody,c=t.messageHeader;if(this.$4(t)){var d,m;return JSON.stringify({currentVersion:(d=u.serverMediaUpdateResponse)==null?void 0:d.currentVersion,hasAnswer:((m=u.serverMediaUpdateResponse)==null?void 0:m.answer)!=null,statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({fromVersion:(e=u.serverMediaUpdateRequest)==null?void 0:e.fromVersion,messageTags:c.messageTags,renegotiationRequested:(n=(r=u.serverMediaUpdateRequest)==null?void 0:r.renegotiationRequested)!=null?n:!1,sdpType:(o=u.serverMediaUpdateRequest)!=null&&o.offer?"offer":(a=u.serverMediaUpdateRequest)!=null&&a.answer?"answer":(i=u.serverMediaUpdateRequest)!=null&&i.update?"delta":"empty",toVersion:(l=(s=u.serverMediaUpdateRequest)==null?void 0:s.toVersion)!=null?l:""})},n.$10=function(t){var e,n,r,o,a=t.messageBody,i=t.messageHeader;if(this.$4(t)){var l,s;return JSON.stringify({currentVersion:(l=(s=a.clientMediaUpdateResponse)==null?void 0:s.currentVersion)!=null?l:"",statusCode:i.responseStatusCode,subCode:i.responseSubCode})}return JSON.stringify({fromVersion:(e=(n=a.clientMediaUpdateRequest)==null?void 0:n.fromVersion)!=null?e:"",toVersion:(r=(o=a.clientMediaUpdateRequest)==null?void 0:o.toVersion)!=null?r:""})},n.$11=function(t){var e,n,r=t.messageBody;return this.$4(t)?null:JSON.stringify({subscriptions:(e=(n=r.subscriptionRequest)==null?void 0:n.subscriptions)!=null?e:""})},n.$12=function(t){var e,n=t.messageBody;if(this.$4(t))return null;var r=(e=n.iceCandidateRequest)==null?void 0:e.iceCandidateSdps.map(function(e){var t=e.candidateSdpString;if(t!=null)return o("ZenonIceStatsParser").extractIceInfo(t)});return JSON.stringify({iceCandidates:r})},n.logSendMultiwayThriftMessageFailure=function(n,a,i){(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","send_message_failure"),e.flush();var t=i?"Stack Trace: "+i.stack+".":"Error msg: "+n;r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Failed to send MW Thrift message of type "+a+". "+t})},t})(),u=new s;l.default=u}),98);
__d("ZenonMWMessageReliabilityLogTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["RECEIVED_REQUEST","RECEIVED_RESPONSE","PROCESSING_REQUEST","START_PROCESSING_RESPONSE","PROCESSING_RESPONSE","PROCESSED_REQUEST","PROCESSED_RESPONSE","SENDING_REQUEST","SENDING_RESPONSE","SENT_REQUEST","SENT_REQUEST_FROM_HANDLER","SENT_RESPONSE","SEND_REQUEST_FAILED","SEND_REQUEST_FAILED_FROM_HANDLER","SEND_RESPONSE_FAILED","SENT_SM_EVENT","PROCESSED_SM_EVENT","REQUEST_AFTER_NULL_CHECK","REQUEST_AFTER_TRANSLATION"]);i.ZenonMWMessageReliabilityEvent=e}),66);
__d("ZenonMWThriftResponseStatusCodeUtils",["MultiwayCommonTypes","ZenonMWMessageTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case o("MultiwayCommonTypes").RtcResponseStatusCode.OK:return o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK;case o("MultiwayCommonTypes").RtcResponseStatusCode.BAD_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.BAD_REQUEST;case o("MultiwayCommonTypes").RtcResponseStatusCode.UNAUTHORIZED:return o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.UNAUTHORIZED;case o("MultiwayCommonTypes").RtcResponseStatusCode.NOT_FOUND:return o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.NOT_FOUND;case o("MultiwayCommonTypes").RtcResponseStatusCode.METHOD_NOT_ALLOWED:return o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.METHOD_NOT_ALLOWED;case o("MultiwayCommonTypes").RtcResponseStatusCode.CONFLICT:return o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONFLICT;case o("MultiwayCommonTypes").RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED:return o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONDITIONAL_REQUEST_FAILED;case o("MultiwayCommonTypes").RtcResponseStatusCode.SERVER_INTERNAL_ERROR:return o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVER_INTERNAL_ERROR;case o("MultiwayCommonTypes").RtcResponseStatusCode.SERVICE_UNAVAILABLE:return o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVICE_UNAVAILABLE}}function s(e){switch(e){case o("MultiwayCommonTypes").RtcResponseSubCode.UNKNOWN:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNKNOWN;case o("MultiwayCommonTypes").RtcResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS;case o("MultiwayCommonTypes").RtcResponseSubCode.MEMBERSHIP_CHECK_FAIL:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEMBERSHIP_CHECK_FAIL;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_THROTTLED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_THROTTLED;case o("MultiwayCommonTypes").RtcResponseSubCode.ENDPOINT_THROTTLED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.ENDPOINT_THROTTLED;case o("MultiwayCommonTypes").RtcResponseSubCode.MWS_MESSAGE_SENT_TO_INCORRECT_REGION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MWS_MESSAGE_SENT_TO_INCORRECT_REGION;case o("MultiwayCommonTypes").RtcResponseSubCode.UNSUPPORTED_REQUEST_TYPE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNSUPPORTED_REQUEST_TYPE;case o("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_REQUEST_UNACCEPTABLE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_REQUEST_UNACCEPTABLE;case o("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_RESPONSE_UNACCEPTABLE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_RESPONSE_UNACCEPTABLE;case o("MultiwayCommonTypes").RtcResponseSubCode.RING_RESPONSE_BODY_NOT_SET:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.RING_RESPONSE_BODY_NOT_SET;case o("MultiwayCommonTypes").RtcResponseSubCode.SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SDP:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SDP;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CONFERENCE_NAME:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CONFERENCE_NAME;case o("MultiwayCommonTypes").RtcResponseSubCode.SERVER_INFO_CONFERENCE_NAME_MISMATCH:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.SERVER_INFO_CONFERENCE_NAME_MISMATCH;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_USER_ID:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_USER_ID;case o("MultiwayCommonTypes").RtcResponseSubCode.INCORRECT_VERSION_RANGE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INCORRECT_VERSION_RANGE;case o("MultiwayCommonTypes").RtcResponseSubCode.SENDER_ID_MISMATCH:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.SENDER_ID_MISMATCH;case o("MultiwayCommonTypes").RtcResponseSubCode.RECIPIENT_NOT_SPECIFIED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.RECIPIENT_NOT_SPECIFIED;case o("MultiwayCommonTypes").RtcResponseSubCode.FIELD_NOT_ALLOWED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.FIELD_NOT_ALLOWED;case o("MultiwayCommonTypes").RtcResponseSubCode.USERS_NOT_SPECIFIED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.USERS_NOT_SPECIFIED;case o("MultiwayCommonTypes").RtcResponseSubCode.REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CALL_ID:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CALL_ID;case o("MultiwayCommonTypes").RtcResponseSubCode.SESSION_DESCRIPTION_ID_MISMATCH:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.SESSION_DESCRIPTION_ID_MISMATCH;case o("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_CLIENT_MEDIA_UPDATES:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_CLIENT_MEDIA_UPDATES;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SERVER_INFO_DATA:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SERVER_INFO_DATA;case o("MultiwayCommonTypes").RtcResponseSubCode.INCORRECT_STATE_VERSION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INCORRECT_STATE_VERSION;case o("MultiwayCommonTypes").RtcResponseSubCode.MISMATCHED_STATE_FOR_VERSION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISMATCHED_STATE_FOR_VERSION;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_STATE_VERSION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_STATE_VERSION;case o("MultiwayCommonTypes").RtcResponseSubCode.NO_RESOLVER_FOUND:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.NO_RESOLVER_FOUND;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_APPROVERLIST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_APPROVERLIST;case o("MultiwayCommonTypes").RtcResponseSubCode.FULL_SDP_REQUIRED_IN_APPROVED_STATE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.FULL_SDP_REQUIRED_IN_APPROVED_STATE;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_BROADCAST_ID:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_BROADCAST_ID;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_ENDPOINT_CONFIG:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_ENDPOINT_CONFIG;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_E2EE_STATE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_E2EE_STATE;case o("MultiwayCommonTypes").RtcResponseSubCode.SFU_MODE_PREVENTED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.SFU_MODE_PREVENTED;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CONFERENCE_STATE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CONFERENCE_STATE;case o("MultiwayCommonTypes").RtcResponseSubCode.JOIN_REQUEST_DENIED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.JOIN_REQUEST_DENIED;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ENDPOINT:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ENDPOINT;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_HEADER:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_HEADER;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_BODY:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_BODY;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_PARAMS:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_PARAMS;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_DATA_MESSAGE_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_DATA_MESSAGE_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ADD_PARTICIPANTS_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ADD_PARTICIPANTS_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_SUBSCRIPTION_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_SUBSCRIPTION_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_JOIN_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_JOIN_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_HANGUP_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_HANGUP_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ICE_CANDIDATE_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ICE_CANDIDATE_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_P2P_MESSAGE_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_P2P_MESSAGE_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_UPDATE_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_UPDATE_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CLIENT_EVENT_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CLIENT_EVENT_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CONNECT_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CONNECT_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_UNSUBSCRIBE_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_UNSUBSCRIBE_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_APPROVAL_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_APPROVAL_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_ENDPOINT_USER_ID:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_ENDPOINT_USER_ID;case o("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_ENDPOINT_USER_ID:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_ENDPOINT_USER_ID;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_TRANSFER_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_TRANSFER_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_GENERIC:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_GENERIC;case o("MultiwayCommonTypes").RtcResponseSubCode.REQUESTOR_NOT_MEMBER_CONFERENCE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUESTOR_NOT_MEMBER_CONFERENCE;case o("MultiwayCommonTypes").RtcResponseSubCode.NOT_BROADCAST_OWNER:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.NOT_BROADCAST_OWNER;case o("MultiwayCommonTypes").RtcResponseSubCode.GUEST_NOT_INVITED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_NOT_INVITED;case o("MultiwayCommonTypes").RtcResponseSubCode.GUEST_DISCONNECTED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_DISCONNECTED;case o("MultiwayCommonTypes").RtcResponseSubCode.GUEST_INVITATION_EXPIRED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_INVITATION_EXPIRED;case o("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_IN_PENDING_APPROVAL_STATE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_IN_PENDING_APPROVAL_STATE;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_MULTIWAY_PARAMS:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_MULTIWAY_PARAMS;case o("MultiwayCommonTypes").RtcResponseSubCode.BROADCAST_ALREADY_STOPPED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.BROADCAST_ALREADY_STOPPED;case o("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_GENERATE_SDP_ANSWER:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_GENERATE_SDP_ANSWER;case o("MultiwayCommonTypes").RtcResponseSubCode.FAILED_GENERATE_SESSION_DESCRIPTION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_GENERATE_SESSION_DESCRIPTION;case o("MultiwayCommonTypes").RtcResponseSubCode.SDP_SESSION_ID_MISMATCH:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_SESSION_ID_MISMATCH;case o("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_GONE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_GONE;case o("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_ALREADY_EXISTS:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_ALREADY_EXISTS;case o("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID;case o("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_MESSENGER_SENDER_UNSET:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_MESSENGER_SENDER_UNSET;case o("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_SET_TRANSPORT_INFO:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_SET_TRANSPORT_INFO;case o("MultiwayCommonTypes").RtcResponseSubCode.NON_PRIMARY_MULTIWAY_SERVER:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.NON_PRIMARY_MULTIWAY_SERVER;case o("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_GET_REMOTE_DESCRIPTION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_GET_REMOTE_DESCRIPTION;case o("MultiwayCommonTypes").RtcResponseSubCode.LOCAL_DESCRIPTION_NOT_SET:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.LOCAL_DESCRIPTION_NOT_SET;case o("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SDP_TYPE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SDP_TYPE;case o("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO;case o("MultiwayCommonTypes").RtcResponseSubCode.SDP_UNSET_ON_P2P_ANSWER:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_UNSET_ON_P2P_ANSWER;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_ICE_CANDIDATE_PAYLOAD:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_ICE_CANDIDATE_PAYLOAD;case o("MultiwayCommonTypes").RtcResponseSubCode.P2P_PROTOCOL_UNSET:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.P2P_PROTOCOL_UNSET;case o("MultiwayCommonTypes").RtcResponseSubCode.CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CREATE_ACK_FOR_INVALID_MESSAGE_TYPE;case o("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE;case o("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_IN_SFU_MODE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_IN_SFU_MODE;case o("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION;case o("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS;case o("MultiwayCommonTypes").RtcResponseSubCode.RESOLVE_STATE_API_ERROR:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.RESOLVE_STATE_API_ERROR;case o("MultiwayCommonTypes").RtcResponseSubCode.EXTERNAL_RESOLUTION_ERROR:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXTERNAL_RESOLUTION_ERROR;case o("MultiwayCommonTypes").RtcResponseSubCode.INTERNAL_RESOLUTION_ERROR:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INTERNAL_RESOLUTION_ERROR;case o("MultiwayCommonTypes").RtcResponseSubCode.RESOLUTION_DISABLED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.RESOLUTION_DISABLED;case o("MultiwayCommonTypes").RtcResponseSubCode.BROADCAST_ID_MISSING:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.BROADCAST_ID_MISSING;case o("MultiwayCommonTypes").RtcResponseSubCode.SDP_UNSET_ON_P2P_OFFER:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_UNSET_ON_P2P_OFFER;case o("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_OFFER_MISSING_REQUIRED_VALUE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_OFFER_MISSING_REQUIRED_VALUE;case o("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR;case o("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS;case o("MultiwayCommonTypes").RtcResponseSubCode.OTHER_USER_ANSWERED_THE_CALL:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.OTHER_USER_ANSWERED_THE_CALL;case o("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_DESERIALIZATION_ERROR:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_DESERIALIZATION_ERROR;case o("MultiwayCommonTypes").RtcResponseSubCode.REMOTE_SDP_TRACKID_MISMATCH:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.REMOTE_SDP_TRACKID_MISMATCH;case o("MultiwayCommonTypes").RtcResponseSubCode.SIGNALING_MESSAGE_TO_CLIENT_DROPPED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.SIGNALING_MESSAGE_TO_CLIENT_DROPPED;case o("MultiwayCommonTypes").RtcResponseSubCode.DATA_CHANNEL_ENDPOINT_GONE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.DATA_CHANNEL_ENDPOINT_GONE;case o("MultiwayCommonTypes").RtcResponseSubCode.DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NOT_FOUND:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NOT_FOUND;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_IS_TERMINATING:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_IS_TERMINATING;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_IS_TERMINATED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_IS_TERMINATED;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NAME_EMPTY:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NAME_EMPTY;case o("MultiwayCommonTypes").RtcResponseSubCode.NONCE_EMPTY:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.NONCE_EMPTY;case o("MultiwayCommonTypes").RtcResponseSubCode.NONCE_MISMATCH:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.NONCE_MISMATCH;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_HAS_GONE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_HAS_GONE;case o("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_HAS_GONE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_HAS_GONE;case o("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_NOT_FOUND:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_NOT_FOUND;case o("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_TERMINATED:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_TERMINATED;case o("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_INCAPABLE_RENEGOTIATION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_INCAPABLE_RENEGOTIATION;case o("MultiwayCommonTypes").RtcResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING;case o("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC;case o("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_ALREADY_IN_WAITING_ROOM:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_ALREADY_IN_WAITING_ROOM;case o("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_NOT_IN_PENDING_APPROVAL:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_NOT_IN_PENDING_APPROVAL;case o("MultiwayCommonTypes").RtcResponseSubCode.USER_NOT_APPROVER_FOR_TARGET_USER:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.USER_NOT_APPROVER_FOR_TARGET_USER;case o("MultiwayCommonTypes").RtcResponseSubCode.UNSUPPORTED_CAPABILITIES:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNSUPPORTED_CAPABILITIES;case o("MultiwayCommonTypes").RtcResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON;case o("MultiwayCommonTypes").RtcResponseSubCode.WWW_KILLSWITCHED_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.WWW_KILLSWITCHED_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_MEDIA_PATH:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_PATH;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_MEDIA_STATUS:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_STATUS;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_SESSION_DESCRIPTION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_SESSION_DESCRIPTION;case o("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_USER_IDS:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_USER_IDS;case o("MultiwayCommonTypes").RtcResponseSubCode.MISSING_SDP_CONNECT_REQUEST:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_SDP_CONNECT_REQUEST;case o("MultiwayCommonTypes").RtcResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION;case o("MultiwayCommonTypes").RtcResponseSubCode.P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION;case o("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE;case o("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER;case o("MultiwayCommonTypes").RtcResponseSubCode.REQUEST_TIMEOUT:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUEST_TIMEOUT;case o("MultiwayCommonTypes").RtcResponseSubCode.TOO_MANY_MEDIA_TRACKS_IN_SDP:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.TOO_MANY_MEDIA_TRACKS_IN_SDP;case o("MultiwayCommonTypes").RtcResponseSubCode.OK:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.OK;case o("MultiwayCommonTypes").RtcResponseSubCode.ENDPOINT_INFO_RESULT_MISSING:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.ENDPOINT_INFO_RESULT_MISSING;case o("MultiwayCommonTypes").RtcResponseSubCode.INVITE_USERS_RESULT_MISSING:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVITE_USERS_RESULT_MISSING;case o("MultiwayCommonTypes").RtcResponseSubCode.JOIN_SESSION_RESULT_MISSING:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.JOIN_SESSION_RESULT_MISSING;case o("MultiwayCommonTypes").RtcResponseSubCode.LOGGING_POLICY_RESULT_MISSING:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.LOGGING_POLICY_RESULT_MISSING;case o("MultiwayCommonTypes").RtcResponseSubCode.STATE_SYNC_RESULT_MISSING:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.STATE_SYNC_RESULT_MISSING;case o("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NAME_MISMATCH:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NAME_MISMATCH;case o("MultiwayCommonTypes").RtcResponseSubCode.SESSION_CONFIGURATION_RESULT_MISSING:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.SESSION_CONFIGURATION_RESULT_MISSING;case o("MultiwayCommonTypes").RtcResponseSubCode.REMOVE_USERS_RESULT_MISSING:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.REMOVE_USERS_RESULT_MISSING;case o("MultiwayCommonTypes").RtcResponseSubCode.UNEXPECTED_TRANSPORT_PARAMS_CONFERENCE_NAME:return o("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNEXPECTED_TRANSPORT_PARAMS_CONFERENCE_NAME}}l.getResponseStatusCodeFromThrift=e,l.getResponseSubCodeFromThrift=s}),98);
__d("ZenonTransportChannelStatus",["cr:17347"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:17347")}),98);
__d("ZenonMWThriftMessageQPLLogger",["DateConsts","QPLMsgTypesSitevarConfig","QPLUserFlow","ZenonLoggingUtils","ZenonMWMessageReliabilityLogTypes","ZenonMWThriftMessageMap","ZenonMWThriftMessageTagUtils","ZenonMWThriftResponseStatusCodeUtils","ZenonTransportChannelStatus","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=30*o("DateConsts").MS_PER_SEC,s=new Map,u=new(r("ZenonTransportChannelStatus"));function c(e,t,n){var a,i,l,s,u,c;if(o("ZenonLoggingUtils").shouldAllowLogging()){var d=e.messageHeader,L=o("ZenonMWThriftMessageMap").messageTypeToString(e.messageHeader.type).toLowerCase();if(r("QPLMsgTypesSitevarConfig").QPL_MSG_TYPES.includes(L)){var E=m(d.transactionId);switch(t){case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:p(E,L,{connectionState:(a=n==null?void 0:n.connectionState)!=null?a:"",peerConnectionState:(i=n==null?void 0:n.peerConnectionState)!=null?i:"",signalingState:(l=n==null?void 0:n.signalingState)!=null?l:""},e);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:_(E);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:f(E,e);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:g(E,e);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:h(E,e,n==null?void 0:n.errorMessage);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:y(E,L,{connectionState:(s=n==null?void 0:n.connectionState)!=null?s:"",peerConnectionState:(u=n==null?void 0:n.peerConnectionState)!=null?u:"",signalingState:(c=n==null?void 0:n.signalingState)!=null?c:""},e);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST:C(E);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED:b(E,n==null?void 0:n.errorMessage);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:v(E,e);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT:S(E,n==null?void 0:n.smEvent);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT:R(E,n==null?void 0:n.smEvent);return;default:return}}}}function d(e,t){o("ZenonLoggingUtils").shouldAllowLogging()&&r("QPLUserFlow").addAnnotations(r("qpl")._(398988976,"737"),{string:babelHelpers.extends({},t)},{instanceKey:+e})}function m(e){var t=isNaN(+e)?0:+e,n=9223372036854776e3;return Math.round(t%n)}function p(t,n,a,i){var l=u.getTransportName()+"State",c=babelHelpers.extends({},a,{messageType:n});if(c[l]=u.getConnectionState(),r("QPLUserFlow").start(r("qpl")._(398988976,"737"),{annotations:{int:{retryCount:i.messageHeader.retryCount},int_array:{messageTags:o("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(i.messageHeader.messageTags)},string:c},instanceKey:t,timeoutInMs:e}),i.messageBody.serverMediaUpdateRequest){var d=i.messageBody.serverMediaUpdateRequest,m=d.answer,p=d.offer,_=d.update;r("QPLUserFlow").addAnnotations(r("qpl")._(398988976,"737"),{string:{sdpType:p?"offer":m?"answer":_?"delta":"empty"}},{instanceKey:t})}var f=function(n){r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),u.getTransportName()+"_"+n,{instanceKey:t})},g=u.addListener("connectionStateEvent",f);s.set(t,g)}function _(e){r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),"processed_request",{instanceKey:e})}function f(e,t){var n=t.messageHeader,a=n.responseStatusCode,i=n.responseSubCode;r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),"sending_response",{instanceKey:e}),r("QPLUserFlow").addAnnotations(r("qpl")._(398988976,"737"),{int:{responseStatusCode:a?o("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(a):200,responseSubCode:i?o("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(i):9e3}},{instanceKey:e})}function g(e,t){var n=t.messageHeader,a=n.responseStatusCode,i=n.responseSubCode;r("QPLUserFlow").endSuccess(r("qpl")._(398988976,"737"),{annotations:{int:{responseStatusCode:a?o("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(a):200,responseSubCode:i?o("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(i):9e3}},instanceKey:e});var l=s.get(e);l&&(u.removeListener(l),s.delete(e))}function h(e,t,n){var a=t.messageHeader,i=a.responseStatusCode,l=a.responseSubCode;r("QPLUserFlow").endFailure(r("qpl")._(398988976,"737"),"send_response_failed",{annotations:{int:{responseStatusCode:i?o("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(i):200,responseSubCode:l?o("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(l):9e3},string:{errorMessage:n}},instanceKey:e});var c=s.get(e);c&&(u.removeListener(c),s.delete(e))}function y(t,n,a,i){var l=u.getTransportName()+"State",s=babelHelpers.extends({},a,{messageType:n});s[l]=u.getConnectionState(),r("QPLUserFlow").start(r("qpl")._(398988976,"737"),{annotations:{int:{retryCount:i.messageHeader.retryCount},int_array:{messageTags:o("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(i.messageHeader.messageTags)},string:s},instanceKey:t,timeoutInMs:e})}function C(e){r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),"sending_request",{instanceKey:e})}function b(e,t){r("QPLUserFlow").endFailure(r("qpl")._(398988976,"737"),"send_request_failed",{annotations:{string:{errorMessage:t}},instanceKey:e})}function v(e,t){var n=t.messageHeader,a=n.responseStatusCode,i=n.responseSubCode;r("QPLUserFlow").endSuccess(r("qpl")._(398988976,"737"),{annotations:{int:{responseStatusCode:a?o("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(a):200,responseSubCode:i?o("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(i):9e3}},instanceKey:e})}function S(e,t){t!=null&&r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),"sent_sm_event:"+t,{instanceKey:e})}function R(e,t){t!=null&&r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),"processed_sm_event:"+t,{instanceKey:e})}l.log=c,l.updateState=d}),98);
__d("ZenonMWThriftMessageReliabilityLogger",["ODS","ZenonMWMessageReliabilityLogTypes","ZenonMWThriftMessageMap","ZenonMWThriftMessageQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map,u=new Map,c=new Map;function d(e){c.set(e,!0)}function m(e,t,n){var r=u.get(e);r&&k(r,t,n)}function p(e){v(e)?k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE):k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST)}function _(e){v(e)?k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_RESPONSE):k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST)}function f(e){v(e)||k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK)}function g(e){v(e)||k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION)}function h(e){v(e)?k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_RESPONSE):k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST)}function y(e){v(e)?k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE):k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST)}function C(e){v(e)?k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE):k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST)}function b(e,t){var n=v(e)?o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED;k(e,n,{errorMessage:t})}function v(e){var t=e.messageHeader.responseStatusCode;return t!=null}function S(e){var t=isNaN(+e)?0:+e,n=9223372036854776e3;return Math.round(t%n)}function R(t,n){var r=o("ZenonMWThriftMessageMap").messageTypeToString(t.messageHeader.type).toLowerCase(),a=v(t)?"response":"request";switch(n){case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","receive_"+a+"_"+r),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","processing_"+a+"_"+r),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","processed_"+a+"_"+r),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","sending_"+a+"_"+r),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_translation_"+a+"_"+r),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_null_check_"+a+"_"+r),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","sent_"+a+"_"+r),(e||(e=o("ODS"))).flush();return;default:return}}var L={connectionState:"",peerConnectionState:"",signalingState:""};function E(e){var t=babelHelpers.extends({},L,e);if(L.connectionState!==t.connectionState||L.peerConnectionState!==t.peerConnectionState||L.signalingState!==t.signalingState){L=t;for(var n of s.keys())o("ZenonMWThriftMessageQPLLogger").updateState(n,e)}}function k(e,t,n){var r,a=e.messageHeader,i=(r=s.get(a.transactionId))!=null?r:new Set;s.set(a.transactionId,i),!(t!==o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT&&t!==o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT&&i.has(t))&&(i.add(t),u.set(a.transactionId,e),R(e,t),o("ZenonMWThriftMessageQPLLogger").log(e,t,babelHelpers.extends({},n,L)))}l.setE2eeIsMandatedForCall=d,l.logEventForTxid=m,l.logReceivedMessage=p,l.logProcessingMessage=_,l.logMessageAfterNullCheck=f,l.logMessageAfterTranslation=g,l.logProcessedMessage=h,l.logSendingMessage=y,l.logSentMessage=C,l.logSendMessageFailed=b,l.updateState=E}),98);
__d("ZenonMWThriftMessageSerializer",["CompactSerializer","MqttThriftHeaderSerializers","MultiwayCommonSerializers","TCompactProtocol","TReadBuffer"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t=!1);var n=o("CompactSerializer").serialize(e.messageHeader,o("MultiwayCommonSerializers").serializeRtcMessageHeader),r=o("CompactSerializer").serialize(e.messageBody,o("MultiwayCommonSerializers").serializeRtcMessageBody);if(t){var a=new Uint8Array(n.length+r.length);return a.set(n),a.set(r,n.length),a}var i={},l=o("CompactSerializer").serialize(i,o("MqttThriftHeaderSerializers").serializeMqttThriftHeader),s=new Uint8Array(l.length+n.length+r.length);return s.set(l),s.set(n,l.length),s.set(r,l.length+n.length),s}function s(e,t){t===void 0&&(t=!1);var n=new(r("TReadBuffer"))(e),a=new(r("TCompactProtocol"))(n);t||o("MqttThriftHeaderSerializers").deserializeMqttThriftHeader(a);var i=o("MultiwayCommonSerializers").deserializeRtcMessageHeader(a),l=o("MultiwayCommonSerializers").deserializeRtcMessageBody(a);return{messageBody:l,messageHeader:i}}l.serializeMWThriftMessage=e,l.deserializeMWThriftMessage=s}),98);
__d("SharedWorkerDGWSignalingListener",["FBLogger","ZenonDGWLogger","ZenonDGWStreamController","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=r("ZenonDGWStreamController").getControllerInstance(),r("promiseDone")(this.$1.establishAndGetStream())}var t=e.prototype;return t.setLoggingEventHandler=function(t){this.$2=t},t.subscribe=function(t,n){var e=this;this.$1.setOnDataReceivedCallback(function(a){try{var i=o("ZenonMWThriftMessageSerializer").deserializeMWThriftMessage(a,!0);r("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("RECEIVED","DGW Thrift",i),o("ZenonMWThriftMessageReliabilityLogger").logReceivedMessage(i),e.$2&&e.$2({mwThriftMessage:i,name:"mwThriftMessageRecv"}),n&&e.$3(i,n),t(i),o("ZenonMWThriftMessageReliabilityLogger").logProcessingMessage(i)}catch(e){o("ZenonDGWLogger").logDGWCheckpoint("RECV_ERROR_LISTENER: "+String(e)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).warn("Error receiving DGW message in Shared Worker")}})},t.unsubscribe=function(){this.$1.closeStream()},t.$3=function(t,n){try{n(t)}catch(e){o("ZenonDGWLogger").logDGWCheckpoint("RAW_MSG_ERROR_LISTENER: "+String(e)),r("FBLogger")("rtweb").catching(r("getErrorSafe")(e)).mustfix("Signaling messages should be json parsable")}},e})();l.default=e}),98);
__d("ZenonLoggingEventTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["Send","Receive"]),l=n("$InternalEnum")({Primary:"primary",Secondary:"secondary"}),s="rtc_www";i.ZenonUpdateIceInfoDirection=e,i.ZenonJoinMode=l,i.tslogSource=s}),66);
__d("ZenonMqttChannel",["CurrentUser","FBLogger","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=-1;try{if(r("MqttEnvInitializer").initialize(),o("MqttEnv").setIsUserLoggedInNow(r("CurrentUser").isLoggedIn),r("gkx")("11152")&&r("CurrentUser").getAppID()===String(0x4d31ba8e7e89d))e=949958857019662;else{var t;e=Number((t=r("CurrentUser").getAppID())!=null?t:r("MqttWebConfig").appID)}return new(r("MqttChannel"))({appId:e,capabilities:r("MqttWebConfig").capabilities,chatVisibility:!1,clientCapabilities:r("MqttWebConfig").clientCapabilities,endpoint:r("MqttWebConfig").endpoint,initialSubscribedTopics:r("MqttWebConfig").subscribedTopics,phpOverride:r("MqttWebConfig").hostNameOverride,pollingEndpoint:r("MqttWebConfig").pollingEndpoint,userFbid:r("MqttWebConfig").fbid})}catch(t){var n=r("getErrorSafe")(t);throw r("FBLogger")("rtc_www").catching(n).warn("[ZenonMqttChannel][%d] failed to create MqttChannel",e),n}}var s=e(),u=s;l.default=u}),98);
__d("getZenonMqttChannel",["CurrentUser","FBMqttChannel","HorizonWebMqttChannel","IGDOverLSMqttChannel","LiveChatWidgetMqttChannel","MDCMqttChannel","OculusMqttChannel","RpWebMqttEnabledAppIds","ZenonAppProvider","ZenonMqttChannel"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set(r("RpWebMqttEnabledAppIds").APP_IDS);function s(){return o("ZenonAppProvider").isInstagramApp()?o("IGDOverLSMqttChannel").getInstance():o("ZenonAppProvider").isOculusCastingSite()?o("OculusMqttChannel").getOculusMqttChannelInstance():o("ZenonAppProvider").isHorizonApp()?o("HorizonWebMqttChannel").getHorizonWebMqttChannelInstance():o("ZenonAppProvider").isMDCApp()?o("MDCMqttChannel").getMDCMqttChannelInstance():o("ZenonAppProvider").isWidgetLiveChatApp()?o("LiveChatWidgetMqttChannel").getLiveChatWidgetMqttChannelInstance():e.has(Number(r("CurrentUser").getAppID()))?r("ZenonMqttChannel"):r("FBMqttChannel")}l.default=s}),98);
__d("ZenonMQTTTransportChannelStatus",["EventEmitter","getZenonMqttChannel"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){var t;t=e.call(this)||this,t.$ZenonMQTTTransportChannelStatus$p_1=r("getZenonMqttChannel")();var n={onMQTTStateChanged:function(n){t.emit("connectionStateEvent",n)}};return t.$ZenonMQTTTransportChannelStatus$p_1.subscribeChannelEvents(n),t}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getConnectionState=function(){return this.$ZenonMQTTTransportChannelStatus$p_1.getConnectionState()},n.getTransportName=function(){return"mqtt"},t})(r("EventEmitter"));l.default=e}),98);
__d("ZenonMWThriftMessageLogger",["MultiwayCommonTypes","ZenonLoggingEventTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set,s=new Set;function u(t,n){var r=t.messageHeader,a=t.messageBody;if(!(e.has(r.transactionId)||r.type==null)){switch(r.type){case o("MultiwayCommonTypes").MessageType.JOIN:a.joinRequest&&d(a.joinRequest,n);break;case o("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:a.iceCandidateRequest&&p(a.iceCandidateRequest,n,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);break;case o("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateRequest&&_(a.clientMediaUpdateRequest,n);break;case o("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateResponse&&h(a.serverMediaUpdateResponse,n);break;default:break}e.add(r.transactionId)}}function c(e,t){var n=e.messageHeader,r=e.messageBody;if(!(s.has(n.transactionId)||n.type==null)){switch(n.type){case o("MultiwayCommonTypes").MessageType.JOIN:r.joinResponse&&m(r.joinResponse,t);break;case o("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:r.iceCandidateRequest&&p(r.iceCandidateRequest,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);break;case o("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:r.clientMediaUpdateResponse&&f(r.clientMediaUpdateResponse,t);break;case o("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:r.serverMediaUpdateRequest&&g(r.serverMediaUpdateRequest,t);break;default:break}s.add(n.transactionId)}}function d(e,t){var n=e.answer,r=e.offer;t({name:"inviteSent"}),y(r,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send),n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function m(e,t){var n=e.answer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function p(e,t,n){var r=e.iceCandidateSdps;r.forEach(function(e){e.candidateSdpString!=null&&t({direction:n,name:"updateIceInfo",sdpString:e.candidateSdpString})})}function _(e,t){var n=e.offer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function f(e,t){var n=e.answer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function g(e,t){var n=e.answer,r=e.offer;r&&y(r,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive),n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function h(e,t){var n=e.answer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function y(e,t,n){e.sdpString!=null&&t({direction:n,name:"updateIceInfo",sdpString:e.sdpString})}l.logSentMessage=u,l.logReceivedMessage=c}),98);
__d("ZenonValidateMWThriftMessage",["FBLogger","MultiwayCommonTypes","ZenonInfraActionsLogger","ZenonMWThriftMessageMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.messageHeader.type,n=o("ZenonMWThriftMessageMap").messageTypeToString(t);return e.messageHeader.serverInfoData==null&&t!=null&&t!==o("MultiwayCommonTypes").MessageType.JOIN?(r("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP][DROP] No remoteSignalingID in message: "+n}),r("FBLogger")("rtc_www").warn("[ZP][DROP] No remoteSignalingID in message: "+n),!1):!0}l.default=e}),98);
__d("ZenonSharedWorkerMWThriftMessageSender",["Promise","ZenonDGWLogger","ZenonDGWStreamController","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageLogger","ZenonMWThriftMessageMap","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","ZenonValidateMWThriftMessage","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){this.$3=r("ZenonDGWStreamController").getControllerInstance()}var a=t.prototype;return a.$4=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{yield this.$3.establishAndGetStream()}catch(n){var t=o("ZenonMWThriftMessageMap").messageTypeToString(e.messageHeader.type);o("ZenonDGWLogger").logDGWCheckpoint("SEND_STREAM_ERROR: type="+t+" err="+String(n)),this.$5(e,"Failed to establish stream")}o("ZenonMWThriftMessageReliabilityLogger").logSendingMessage(e),r("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("SENDING","DGW Thrift",e),this.$2&&o("ZenonMWThriftMessageLogger").logSentMessage(e,this.$2);var n=o("ZenonMWThriftMessageSerializer").serializeMWThriftMessage(e,!0),a=yield this.$3.send(e.messageHeader.transactionId,n);if(a&&this.$2)this.$2({mwThriftMessage:e,name:"mwThriftMessageSent"});else if(!a){var i=o("ZenonMWThriftMessageMap").messageTypeToString(e.messageHeader.type);o("ZenonDGWLogger").logDGWCheckpoint("SEND_FAIL: type="+i),this.$5(e,"Failed to send data")}});function t(t){return e.apply(this,arguments)}return t})(),a.$5=function(t,n){var e=n!=null?n:"DGW Thrift Message Send Error";o("ZenonMWThriftMessageReliabilityLogger").logSendMessageFailed(t,"[DGW Thrift] "+e),r("ZenonMWThriftMessageDebugLogger").logSendMultiwayThriftMessageFailure(e,o("ZenonMWThriftMessageMap").messageTypeToString(t.messageHeader.type))},a.sendMessage=function(a){return!a||!r("ZenonValidateMWThriftMessage")(a)?(o("ZenonDGWLogger").logDGWCheckpoint("SEND_INVALID_MSG"),(e||(e=n("Promise"))).reject(r("err")("Invalid MW Thrift message"))):this.$4(a)},a.setMessageReceiver=function(t){this.$1=t},a.setLoggingEventHandler=function(t){this.$2=t},t})();l.default=s}),98);
__d("ZenonSignalingSharedWorker",["CurrentWorkerMessagePort","FBLogger","SharedWorkerDGWSignalingListener","ZenonDGWLogger","ZenonDGWStreamController","ZenonMWThriftMessageMap","ZenonSharedWorkerMWThriftMessageSender","getErrorSafe","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=0,u=null,c=!1,d=!1,m=null;function p(){o("ZenonDGWLogger").setSharedWorkerContext(function(e){b({event:{checkpoint:e,name:"sharedWorkerCheckpoint"},type:"LOGGING_EVENT"})});var e=o("CurrentWorkerMessagePort").getMessagePort();e.addEventListener("message",function(t){y(t.data,e)})}function _(e){if(!c)try{e!=null&&(u=new(r("SharedWorkerDGWSignalingListener")));var t=u;t!=null&&(t.subscribe(function(e){return h(e)},function(e){return g(e)}),t.setLoggingEventHandler(function(e){f(e)}),c=!0,f({name:"dgwConnectionState",pending:!1}))}catch(e){o("ZenonDGWLogger").logDGWCheckpoint("SUBSCRIBE_ERROR: Failed to initialize signaling subscription from Shared Worker"+String(e)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).warn("Failed to initialize signaling subscription from Shared Worker")}}function f(e){b({event:e,type:"LOGGING_EVENT"})}function g(e){b({rawMessage:e,type:"RAW_MW_THRIFT_MESSAGE"})}function h(t){var n=e.size;if(n===0){var r=o("ZenonMWThriftMessageMap").messageTypeToString(t.messageHeader.type);o("ZenonDGWLogger").logDGWCheckpoint("MESSAGE_DROPPED: 0_connections type="+r)}b({message:t,type:"SIGNALING_MESSAGE"})}function y(e,t){if(!(typeof e!="object"||e==null||!("type"in e)||typeof e.type!="string")){if(e.type==="INIT_DGW_CONFIG"&&"config"in e){var n=e.config;if(!d){var a;try{a=r("ZenonDGWStreamController").getControllerInstance()}catch(e){o("ZenonDGWLogger").logDGWCheckpoint("INIT_ERROR_STREAM_CONTROLLER: "+String(e)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).mustfix("Failed to initialize ZenonDGWStreamController from Shared Worker");return}a.setWindowContext("SHARED_WORKER"),a.setStreamOptions({deviceId:n.deviceId,loggingId:r("uuidv4")(),serviceId:"rpsignaling"}),a.setDGWConfig(n),d=!0}_(n);return}else if(e.type==="register"&&"windowType"in e&&(e.windowType==="CHILD"||e.windowType==="PARENT")){C(e.windowType,t);return}else if(e.type==="SEND_SIGNALING_MESSAGE"&&"message"in e){v(e.message,t);return}}}function C(t,n){var r=s++;e.set(r,{connectionId:r,port:n,windowType:t}),n.postMessage({response:{from:"zenon_signaling_shared_worker",workerID:"zenon_signaling_worker_1"},type:"connection-ack"})}function b(t){e.forEach(function(e){try{e.port.postMessage(t)}catch(t){o("ZenonDGWLogger").logDGWCheckpoint("BROADCAST_FAIL: type="+e.windowType+" Connection Id: "+e.connectionId+" Error: "+String(t)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(t)).warn("Failed to send message from Shared Worker to window: type=%s, connectionId=%s",e.windowType,e.connectionId)}})}function v(e,t){try{m==null&&(m=new(r("ZenonSharedWorkerMWThriftMessageSender")),m.setLoggingEventHandler(function(e){f(e)})),m!=null&&m.sendMessage(e).then(function(){t.postMessage({type:"SIGNALING_MESSAGE_SENT"})}).catch(function(e){o("ZenonDGWLogger").logDGWCheckpoint("SEND_ERROR: "+String(e)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).mustfix("Failed to send outgoing message to DGW from Shared Worker")})}catch(e){o("ZenonDGWLogger").logDGWCheckpoint("OUTGOING_SENDER_ERROR: "+String(e)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).mustfix("Error processing outgoing message from Shared Worker")}}l.default=p}),98);
__d("ZenonSignalingSharedWorkerV2",["ZenonSignalingSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("ZenonSignalingSharedWorker")}),98);/*FB_PKG_DELIM*/
__d("ACSCipherSuiteModule",[],(function(t,n,r,o,a,i){"use strict";var e={hash:"SHA-512",name:"HMAC"},l={curveName:"RISTRETTO",macAlgorithm:e,value:1},s=new Map([[l.value,l]]);function u(e){return s.has(e)?s.get(e):null}i.VOPRF_RISTRETTO_HMACSHA512=l,i.getACSCipherSuiteByValue=u}),66);
__d("ACSTokenHmacUtil",["XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return s(e,t).then(function(e){return c(e,n)})}function s(e,t){return o("XPlatReactCrypto").subtleImportKey("raw",t,e,!1,["sign"]).then(function(t){return{algo:e,key:t}})}function u(e){return typeof e.hash=="string"?e.hash:e.hash.name}function c(e,t){var n=e.algo,r=e.key,a={hash:u(n),name:"HMAC"};return o("XPlatReactCrypto").subtleSign(a,r,t).then(function(e){return new Uint8Array(e)})}l.hmac=e}),98);
__d("EBMinosHasNewerMailboxKeys",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){return t==null||n==null?!1:(e==null?void 0:e.epoch_head)==null||(e==null?void 0:e.epoch_head_creation_time)==null?!0:e.epoch_head_creation_time!==n&&n>e.epoch_head_creation_time}i.hasNewerMailboxKeys=e}),66);
__d("EBMinosDb",["ExecutionEnvironment","MAWCurrentUser","MAWIndexedDbMetadata","MAWWormOdsLogger","MessengerWebInitData","Promise","QPLFlow","WAHex","WALogger","WAResolvable","Worm","WormEAR","WormIDbDriver","asyncToGeneratorRuntime","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c={secure_minos_mailbox_keys:{indexes:{},primaryKey:"contact_id",secure:!0},secure_minos_message_epoch_heads:{indexes:{"[thread_id+message_id]":{fields:["thread_id","message_id"],unique:!0}},primaryKey:"message_id",secure:!0},secure_minos_thread_message_encryption_keys:{indexes:{"[roster_hash+minos_thread_id]":{fields:["roster_hash","minos_thread_id"],unique:!1}},primaryKey:"mek_id_blob",secure:!0},secure_minos_thread_message_encryption_keys_v2:{indexes:{"[roster_hash+minos_thread_id]":{fields:["roster_hash","minos_thread_id"],unique:!1}},primaryKey:"mek_id_blob",secure:!0}},d=null,m=1e4;function p(){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d!=null)return d.promise;var t=new(o("WAResolvable")).Resolvable;d=t;var n=o("MAWIndexedDbMetadata").ebMinosDbName(o("MAWCurrentUser").getID()),a=r("qpl")._(1056840657,"2716"),i=o("WAHex").parseHex(r("MessengerWebInitData").accountKeyV2),l=o("QPLFlow").startQPLFlow(a,{annotations:{bool:{isInSharedWorker:(u||(u=r("ExecutionEnvironment"))).isInSharedWorker},string:{operationType:"initEBMinosDbSchema"}},timeoutInMs:m});try{var s="ebMinosDev",p=new(o("WormEAR")).WormEAR(c,s,i),_=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(n,s,c,p,o("MAWWormOdsLogger").wormOdsWorkerLogger,{}),a);return yield _.init({eventFlow:l}),l.endSuccess(),t.resolve(_),_}catch(n){throw l.endFail("error"),d=null,t.reject(n),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error performing makeEBMinosDb: ",""])),n),n}}),_.apply(this,arguments)}function f(){return p()}function g(){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=Object.keys(c),t=yield f();return t.runInTransaction(e,"readonly",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r={};return yield(s||(s=n("Promise"))).all(e.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=yield t.stores[e].readAll();r[e]=n});return function(t){return e.apply(this,arguments)}})())),r});return function(e){return t.apply(this,arguments)}})(),"EBMinosDb - Dump").catch(function(){return{}})}),h.apply(this,arguments)}l.schema=c,l.makeEBMinosDb=p,l.getEBMinosDb=f,l.getDbDump=g}),98);
__d("EBMinosMailboxKeysCache",["WALRUMap","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=1e3,s=new(o("WALRUMap")).LRUMap({max:e}),u=720*60,c=120;function d(e){var t=s.get(e),n=Math.floor(Date.now()/1e3);if(t!=null&&(n-t.mailboxKeys.epoch_head_creation_time<u||n-t.last_queried_time<c))return t}function m(e,t){s.set(e,{last_queried_time:o("WATimeUtils").castToUnixTime(Math.floor(Date.now()/1e3)),mailboxKeys:t})}function p(e){s.delete(e)}function _(){s.clear()}l.getCachedMailboxKeys=d,l.setCachedMailboxKeys=m,l.invalidateCachedMailboxKeys=p,l.clearMailboxKeysCache=_}),98);
__d("EBMinosSaveNewMailboxKey",["EBMinosDb","EBMinosMailboxKeysCache","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i,l){var s={contact_id:e,encryption_public_key:t,epoch_anon_id:n,epoch_head:a,epoch_head_creation_time:i,public_key_fbid:l},u=yield o("EBMinosDb").getEBMinosDb();yield u.runInTransaction(["secure_minos_mailbox_keys"],"readwrite",function(e){return e.stores.secure_minos_mailbox_keys.bulkPut([s])},"SaveNewMailboxKey"),r("gkx")("16129")&&o("EBMinosMailboxKeysCache").setCachedMailboxKeys(e,s)});return function(n,r,o,a,i,l){return e.apply(this,arguments)}})();l.saveNewMailboxKey=e}),98);
__d("EBMinosLoadMailboxKeys",["EBMinosDb","EBMinosMailboxKeysCache","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(r("gkx")("16129")){var t=o("EBMinosMailboxKeysCache").getCachedMailboxKeys(e);if(t!=null)return t.mailboxKeys}var n=yield o("EBMinosDb").getEBMinosDb(),a=yield n.runInTransaction(["secure_minos_mailbox_keys"],"readonly",function(t){return t.stores.secure_minos_mailbox_keys.get(e)},"LoadMailboxKeys");return a!=null&&r("gkx")("16129")&&o("EBMinosMailboxKeysCache").setCachedMailboxKeys(e,a),a});return function(n){return e.apply(this,arguments)}})();l.loadMailboxKeys=e}),98);
__d("EBMinosSecureMailboxKeysForContact",["EBMinosLoadMailboxKeys","EBMinosTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("EBMinosLoadMailboxKeys").loadMailboxKeys(o("EBMinosTypes").unsafeCastToUserFbId(e))}l.getSecureMailboxKeysForContact=e}),98);
__d("EBMinosWriteMinosPublicKeysForRecipient",["EBMinosHasNewerMailboxKeys","EBMinosLogger","EBMinosSaveNewMailboxKey","EBMinosSecureMailboxKeysForContact","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.contactId,r=t.encryptionPublicKey,a=t.epochAnonId,i=t.epochHead,l=t.epochHeadCreationTime,u=t.publicKeyFbid,c=yield o("EBMinosSecureMailboxKeysForContact").getSecureMailboxKeysForContact(n);if(i==null||l==null){(c==null?void 0:c.epoch_head)!=null&&(c==null?void 0:c.epoch_head_creation_time)!=null&&(o("EBMinosLogger").minosLogger.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Deleting mailbox keys for contact: ",""])),n),yield o("EBMinosSaveNewMailboxKey").saveNewMailboxKey(n,r,a,i,l,u));return}o("EBMinosHasNewerMailboxKeys").hasNewerMailboxKeys(c,i,l)&&(o("EBMinosLogger").minosLogger.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Writing new mailbox keys for contact: ",""])),n),yield o("EBMinosSaveNewMailboxKey").saveNewMailboxKey(n,r,a,i,l,u))}),c.apply(this,arguments)}l.writeMinosMailboxKeysForRecipient=u}),98);
__d("EBAPIWriteMinosPublicKeysForRecipient",["EBMinosWriteMinosPublicKeysForRecipient"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.contactId,n=e.encryptionPublicKey,r=e.epochAnonId,a=e.epochHead,i=e.epochHeadCreationTime,l=e.publicKeyFbid;return o("EBMinosWriteMinosPublicKeysForRecipient").writeMinosMailboxKeysForRecipient({contactId:t,encryptionPublicKey:n,epochAnonId:r,epochHead:a,epochHeadCreationTime:i,publicKeyFbid:l})}l.writeMinosMailboxKeysForRecipientAPI=e}),98);
__d("EBGetMinosWasm",["WAWasmModuleCache","bx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("bx").getURL(r("bx")("31853")),s=function(){return o("WAWasmModuleCache").loadWasmModule(e)};l.getMinosWasm=s}),98);
__d("EBMinosWasm.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={},X={},Y={},J={},Z={},ee={},te={},ne={},re={},oe={},ae={},ie={},le={};s.name="MinosMessageMetadata",s.internalSpec={mekId:[1,(e=o("WAProtoConst")).FLAGS.REQUIRED|e.TYPES.BYTES],timestamp:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64],messageId:[3,e.FLAGS.REQUIRED|e.TYPES.STRING],threadId:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES]},u.name="MinosClientConfig",u.internalSpec={preferredMessageEncryptionVersion:[1,e.FLAGS.REQUIRED|e.TYPES.INT32],preferredMekEncryptionVersion:[2,e.FLAGS.REQUIRED|e.TYPES.INT32]},c.name="MinosEncryptAndSignMessageInput",c.internalSpec={transportSigningSk:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mek:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],plaintext:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],metadata:[4,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,s],transportSigningPk:[5,e.TYPES.BYTES],conf:[6,e.TYPES.MESSAGE,u]},d.name="MinosEncryptAndSignMessageResult",d.internalSpec={ciphertext:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],signature:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],version:[3,e.FLAGS.REQUIRED|e.TYPES.INT32]},m.name="MinosDecryptAndVerifyMessageInput",m.internalSpec={transportSigningPk:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mek:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],encryptedMessageCiphertext:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],encryptedMessageSignature:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],metadata:[5,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,s],messageEncryptionVersion:[6,e.TYPES.INT32],conf:[7,e.TYPES.MESSAGE,u]},p.name="MinosDecryptAndVerifyMessageResult",p.internalSpec={plaintext:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},_.name="MekBundle",_.internalSpec={key:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mekId:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],rosterHash:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES]},f.name="GenerateMekInput",f.internalSpec={epochHeads:[1,e.FLAGS.REPEATED|e.TYPES.BYTES]},g.name="GenerateMekResult",g.internalSpec={mek:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,_]},h.name="GenerateMekRosterHashInput",h.internalSpec={epochHeads:[1,e.FLAGS.REPEATED|e.TYPES.BYTES]},y.name="GenerateMekRosterHashResult",y.internalSpec={rosterHash:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},C.name="EncryptMekForDistributionInput",C.internalSpec={senderEpochHead:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],toMailboxPk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],fromKeypair:[3,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,b],mek:[4,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,_],toEpochHead:[5,e.TYPES.BYTES],conf:[6,e.TYPES.MESSAGE,u]},b.name="EncryptMekForDistributionInput$MailboxAuthKP",b.internalSpec={sk:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],pk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},v.name="EncryptMekForDistributionResult",v.internalSpec={ciphertext:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],version:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64]},S.name="DecryptMekForDistributionInput",S.internalSpec={toMailboxSk:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],fromPk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],mekId:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],senderEpochHead:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],rosterHash:[5,e.FLAGS.REQUIRED|e.TYPES.BYTES],ciphertext:[6,e.FLAGS.REQUIRED|e.TYPES.BYTES],toEpochHead:[7,e.TYPES.BYTES],mekEncryptionVersion:[8,e.TYPES.INT32],conf:[9,e.TYPES.MESSAGE,u]},R.name="DecryptMekForDistributionResult",R.internalSpec={success:[1,e.TYPES.MESSAGE,L],errorMessage:[2,e.TYPES.STRING],__oneofs__:{result:["success","errorMessage"]}},L.name="DecryptMekForDistributionSuccess",L.internalSpec={mek:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},E.name="EncryptMeksForDistributionFromTransportSenderInput",E.internalSpec={mek:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,_],transportSigningKp:[2,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,k],recipientMailboxEncryptionPks:[3,e.FLAGS.REPEATED|e.TYPES.BYTES],recipientEpochHeads:[4,e.FLAGS.REPEATED|e.TYPES.BYTES],conf:[5,e.TYPES.MESSAGE,u]},k.name="EncryptMeksForDistributionFromTransportSenderInput$TransportSigningKP",k.internalSpec={sk:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],pk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},I.name="EncryptMeksForDistributionFromTransportSenderResult",I.internalSpec={encryptedMeks:[1,e.FLAGS.REPEATED|e.TYPES.BYTES],ephemeralEncryptionPk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],signingPk:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],signature:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],version:[5,e.FLAGS.REQUIRED|e.TYPES.UINT64]},T.name="DecryptMekForDistributionFromTransportSenderInput",T.internalSpec={mekDistribution:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,D],mekId:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],rosterHash:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],recipientEncSk:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],version:[5,e.FLAGS.REQUIRED|e.TYPES.UINT64],conf:[6,e.TYPES.MESSAGE,u]},D.name="DecryptMekForDistributionFromTransportSenderInput$TransportSenderMEKDistributionSingleRecipient",D.internalSpec={encryptedMek:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],ephemeralEncryptionPk:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES],signingPk:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],signature:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],recipientEpochHead:[5,e.TYPES.BYTES]},x.name="DecryptMekForDistributionFromTransportSenderResult",x.internalSpec={success:[1,e.TYPES.MESSAGE,$],errorMessage:[2,e.TYPES.STRING],__oneofs__:{result:["success","errorMessage"]}},$.name="DecryptMekForDistributionFromTransportSenderSuccess",$.internalSpec={mek:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},P.name="WrapTransportSigningPublicKeyInput",P.internalSpec={keyBytes:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},N.name="WrapTransportSigningPublicKeyResult",N.internalSpec={prefixedKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},M.name="WrapTransportSigningSecretKeyInput",M.internalSpec={keyBytes:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},w.name="WrapTransportSigningSecretKeyResult",w.internalSpec={prefixedKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},A.name="DeriveMailboxSigningKeypairInput",A.internalSpec={exportRootKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],epochNumber:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64]},F.name="DeriveMailboxSigningKeypairResult",F.internalSpec={mailboxSigningPublicKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mailboxSigningPrivateKey:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},O.name="DeriveMailboxEncryptionKeypairInput",O.internalSpec={exportRootKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],epochNumber:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64]},B.name="DeriveMailboxEncryptionKeypairResult",B.internalSpec={mailboxEncryptionPublicKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mailboxEncryptionPrivateKey:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},W.name="DeriveMailboxAuthKeypairInput",W.internalSpec={exportRootKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],epochNumber:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64]},q.name="DeriveMailboxAuthKeypairResult",q.internalSpec={mailboxAuthPublicKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],mailboxAuthPrivateKey:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},U.name="DeriveAttachmentAccessTokenSecretInput",U.internalSpec={mediaKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},V.name="DeriveAttachmentAccessTokenSecretResult",V.internalSpec={attachmentAccessTokenSecret:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},H.name="DeriveAttachmentPrimaryKeySecretInput",H.internalSpec={mediaKey:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},G.name="DeriveAttachmentPrimaryKeySecretResult",G.internalSpec={attachmentPrimaryKeySecret:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},z.name="EpochPublicData",z.internalSpec={epochNumber:[1,e.FLAGS.REQUIRED|e.TYPES.UINT64],userFbid:[2,e.FLAGS.REQUIRED|e.TYPES.STRING],mailboxSigningPk:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],mailboxEncryptionPk:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],mailboxAuthPk:[5,e.FLAGS.REQUIRED|e.TYPES.BYTES],previousEpochHead:[6,e.TYPES.BYTES]},j.name="EpochSignatures",j.internalSpec={selfSignature:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES],prevSignature:[2,e.TYPES.BYTES]},K.name="MinosSignedEpoch",K.internalSpec={epochPublicData:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,z],signatures:[2,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,j],epochHead:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES]},Q.name="MinosOpenInitialEpochInput",Q.internalSpec={userFbid:[1,e.FLAGS.REQUIRED|e.TYPES.STRING],epochNumber:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64],exportRootKey:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES]},X.name="MinosOpenInitialEpochResult",X.internalSpec={minosSignedEpoch:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,K]},Y.name="MinosOpenEpochInput",Y.internalSpec={userFbid:[1,e.FLAGS.REQUIRED|e.TYPES.STRING],epochNumber:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64],exportRootKey:[3,e.FLAGS.REQUIRED|e.TYPES.BYTES],previousExportRootKey:[4,e.FLAGS.REQUIRED|e.TYPES.BYTES],previousEpochNumber:[5,e.FLAGS.REQUIRED|e.TYPES.UINT64],previousEpochHead:[6,e.FLAGS.REQUIRED|e.TYPES.BYTES]},J.name="MinosOpenEpochResult",J.internalSpec={minosSignedEpoch:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,K]},Z.name="MinosValidateEpochInput",Z.internalSpec={epochPublicData:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,z],previousEpochPublicData:[2,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,z],signatures:[3,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,j]},ee.name="MinosValidateEpochResult",ee.internalSpec={valid:[1,e.TYPES.BOOL],errorMessage:[2,e.TYPES.STRING],__oneofs__:{result:["valid","errorMessage"]}},te.name="MinosVerifySingleEpochInput",te.internalSpec={epochPublicData:[1,e.FLAGS.REQUIRED|e.TYPES.MESSAGE,z],signature:[2,e.FLAGS.REQUIRED|e.TYPES.BYTES]},ne.name="MinosVerifySingleEpochResult",ne.internalSpec={valid:[1,e.FLAGS.REQUIRED|e.TYPES.BOOL]},re.name="MinosThreadIdFromOneToOneThreadInput",re.internalSpec={actThreadId:[1,e.FLAGS.REQUIRED|e.TYPES.STRING],selfFbid:[2,e.FLAGS.REQUIRED|e.TYPES.STRING]},oe.name="MinosThreadIdFromOneToOneThreadResult",oe.internalSpec={threadId:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},ae.name="MinosThreadIdFromActThreadIdInput",ae.internalSpec={actThreadId:[1,e.FLAGS.REQUIRED|e.TYPES.STRING]},ie.name="MinosThreadIdFromActThreadIdResult",ie.internalSpec={threadId:[1,e.FLAGS.REQUIRED|e.TYPES.BYTES]},le.name="MinosCommand",le.internalSpec={encryptAndSignMessage:[1,e.TYPES.MESSAGE,c],decryptAndVerifyMessage:[2,e.TYPES.MESSAGE,m],generateMek:[3,e.TYPES.MESSAGE,f],generateMekRosterHash:[4,e.TYPES.MESSAGE,h],encryptMekForDistribution:[5,e.TYPES.MESSAGE,C],decryptMekForDistribution:[6,e.TYPES.MESSAGE,S],encryptMeksForDistributionFromTransportSender:[7,e.TYPES.MESSAGE,E],decryptMekForDistributionFromTransportSender:[8,e.TYPES.MESSAGE,T],wrapTransportSigningPublicKey:[9,e.TYPES.MESSAGE,P],wrapTransportSigningSecretKey:[10,e.TYPES.MESSAGE,M],deriveMailboxSigningKeypair:[11,e.TYPES.MESSAGE,A],deriveMailboxEncryptionKeypair:[12,e.TYPES.MESSAGE,O],deriveMailboxAuthKeypair:[13,e.TYPES.MESSAGE,W],deriveAttachmentAccessTokenSecret:[14,e.TYPES.MESSAGE,U],deriveAttachmentPrimaryKeySecret:[15,e.TYPES.MESSAGE,H],minosOpenInitialEpoch:[16,e.TYPES.MESSAGE,Q],minosOpenEpoch:[17,e.TYPES.MESSAGE,Y],minosValidateEpoch:[18,e.TYPES.MESSAGE,Z],minosVerifySingleEpoch:[19,e.TYPES.MESSAGE,te],minosThreadIdFromOneToOneThread:[20,e.TYPES.MESSAGE,re],minosThreadIdFromActThreadId:[21,e.TYPES.MESSAGE,ae],__oneofs__:{commandInput:["encryptAndSignMessage","decryptAndVerifyMessage","generateMek","generateMekRosterHash","encryptMekForDistribution","decryptMekForDistribution","encryptMeksForDistributionFromTransportSender","decryptMekForDistributionFromTransportSender","wrapTransportSigningPublicKey","wrapTransportSigningSecretKey","deriveMailboxSigningKeypair","deriveMailboxEncryptionKeypair","deriveMailboxAuthKeypair","deriveAttachmentAccessTokenSecret","deriveAttachmentPrimaryKeySecret","minosOpenInitialEpoch","minosOpenEpoch","minosValidateEpoch","minosVerifySingleEpoch","minosThreadIdFromOneToOneThread","minosThreadIdFromActThreadId"]}},l.MinosMessageMetadataSpec=s,l.MinosClientConfigSpec=u,l.MinosEncryptAndSignMessageInputSpec=c,l.MinosEncryptAndSignMessageResultSpec=d,l.MinosDecryptAndVerifyMessageInputSpec=m,l.MinosDecryptAndVerifyMessageResultSpec=p,l.MekBundleSpec=_,l.GenerateMekInputSpec=f,l.GenerateMekResultSpec=g,l.GenerateMekRosterHashInputSpec=h,l.GenerateMekRosterHashResultSpec=y,l.EncryptMekForDistributionInputSpec=C,l.EncryptMekForDistributionInput$MailboxAuthKPSpec=b,l.EncryptMekForDistributionResultSpec=v,l.DecryptMekForDistributionInputSpec=S,l.DecryptMekForDistributionResultSpec=R,l.DecryptMekForDistributionSuccessSpec=L,l.EncryptMeksForDistributionFromTransportSenderInputSpec=E,l.EncryptMeksForDistributionFromTransportSenderInput$TransportSigningKPSpec=k,l.EncryptMeksForDistributionFromTransportSenderResultSpec=I,l.DecryptMekForDistributionFromTransportSenderInputSpec=T,l.DecryptMekForDistributionFromTransportSenderInput$TransportSenderMEKDistributionSingleRecipientSpec=D,l.DecryptMekForDistributionFromTransportSenderResultSpec=x,l.DecryptMekForDistributionFromTransportSenderSuccessSpec=$,l.WrapTransportSigningPublicKeyInputSpec=P,l.WrapTransportSigningPublicKeyResultSpec=N,l.WrapTransportSigningSecretKeyInputSpec=M,l.WrapTransportSigningSecretKeyResultSpec=w,l.DeriveMailboxSigningKeypairInputSpec=A,l.DeriveMailboxSigningKeypairResultSpec=F,l.DeriveMailboxEncryptionKeypairInputSpec=O,l.DeriveMailboxEncryptionKeypairResultSpec=B,l.DeriveMailboxAuthKeypairInputSpec=W,l.DeriveMailboxAuthKeypairResultSpec=q,l.DeriveAttachmentAccessTokenSecretInputSpec=U,l.DeriveAttachmentAccessTokenSecretResultSpec=V,l.DeriveAttachmentPrimaryKeySecretInputSpec=H,l.DeriveAttachmentPrimaryKeySecretResultSpec=G,l.EpochPublicDataSpec=z,l.EpochSignaturesSpec=j,l.MinosSignedEpochSpec=K,l.MinosOpenInitialEpochInputSpec=Q,l.MinosOpenInitialEpochResultSpec=X,l.MinosOpenEpochInputSpec=Y,l.MinosOpenEpochResultSpec=J,l.MinosValidateEpochInputSpec=Z,l.MinosValidateEpochResultSpec=ee,l.MinosVerifySingleEpochInputSpec=te,l.MinosVerifySingleEpochResultSpec=ne,l.MinosThreadIdFromOneToOneThreadInputSpec=re,l.MinosThreadIdFromOneToOneThreadResultSpec=oe,l.MinosThreadIdFromActThreadIdInputSpec=ae,l.MinosThreadIdFromActThreadIdResultSpec=ie,l.MinosCommandSpec=le}),98);
__d("WASIContext",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e,n,r,o,a,i;this.fs=(e=t==null?void 0:t.fs)!=null?e:{},this.args=(n=t==null?void 0:t.args)!=null?n:[],this.env=(r=t==null?void 0:t.env)!=null?r:{},this.stdin=(o=t==null?void 0:t.stdin)!=null?o:function(){return null},this.stdout=(a=t==null?void 0:t.stdout)!=null?a:function(){},this.stderr=(i=t==null?void 0:t.stderr)!=null?i:function(){},this.debug=t==null?void 0:t.debug,this.isTTY=!!(t!=null&&t.isTTY)};i.WASIContext=e}),66);
__d("WASISnapshotPreview1",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=Object.freeze({SUCCESS:0,E2BIG:1,EACCESS:2,EADDRINUSE:3,EADDRNOTAVAIL:4,EAFNOSUPPORT:5,EAGAIN:6,EALREADY:7,EBADF:8,EBADMSG:9,EBUSY:10,ECANCELED:11,ECHILD:12,ECONNABORTED:13,ECONNREFUSED:14,ECONNRESET:15,EDEADLK:16,EDESTADDRREQ:17,EDOM:18,EDQUOT:19,EEXIST:20,EFAULT:21,EFBIG:22,EHOSTUNREACH:23,EIDRM:24,EILSEQ:25,EINPROGRESS:26,EINTR:27,EINVAL:28,EIO:29,EISCONN:30,EISDIR:31,ELOOP:32,EMFILE:33,EMLINK:34,EMSGSIZE:35,EMULTIHOP:36,ENAMETOOLONG:37,ENETDOWN:38,ENETRESET:39,ENETUNREACH:40,ENFILE:41,ENOBUFS:42,ENODEV:43,ENOENT:44,ENOEXEC:45,ENOLCK:46,ENOLINK:47,ENOMEM:48,ENOMSG:49,ENOPROTOOPT:50,ENOSPC:51,ENOSYS:52,ENOTCONN:53,ENOTDIR:54,ENOTEMPTY:55,ENOTRECOVERABLE:56,ENOTSOCK:57,ENOTSUP:58,ENOTTY:59,ENXIO:60,EOVERFLOW:61,EOWNERDEAD:62,EPERM:63,EPIPE:64,EPROTO:65,EPROTONOSUPPORT:66,EPROTOTYPE:67,ERANGE:68,EROFS:69,ESPIPE:70,ESRCH:71,ESTALE:72,ETIMEDOUT:73,ETXTBSY:74,EXDEV:75,ENOTCAPABLE:76}),s=(e=n("$InternalEnum"))({REALTIME:0,MONOTONIC:1,PROCESS_CPUTIME_ID:2,THREAD_CPUTIME_ID:3}),u=e({SET:0,CUR:1,END:2}),c=e({UNKNOWN:0,BLOCK_DEVICE:1,CHARACTER_DEVICE:2,DIRECTORY:3,REGULAR_FILE:4,SOCKET_DGRAM:5,SOCKET_STREAM:6,SYMBOLIC_LINK:7}),d=e({DIR:0}),m=e({CLOCK:0,FD_READ:1,FD_WRITE:2}),p={SYMLINK_FOLLOW:1},_={CREAT:1,DIRECTORY:2,EXCL:4,TRUNC:8},f={APPEND:1,DSYNC:2,NONBLOCK:4,RSYNC:8,SYNC:16},g={FD_DATASYNC:BigInt(1)<<BigInt(0),FD_READ:BigInt(1)<<BigInt(1),FD_SEEK:BigInt(1)<<BigInt(2),FD_FDSTAT_SET_FLAGS:BigInt(1)<<BigInt(3),FD_SYNC:BigInt(1)<<BigInt(4),FD_TELL:BigInt(1)<<BigInt(5),FD_WRITE:BigInt(1)<<BigInt(6),FD_ADVISE:BigInt(1)<<BigInt(7),FD_ALLOCATE:BigInt(1)<<BigInt(8),PATH_CREATE_DIRECTORY:BigInt(1)<<BigInt(9),PATH_CREATE_FILE:BigInt(1)<<BigInt(10),PATH_LINK_SOURCE:BigInt(1)<<BigInt(11),PATH_LINK_TARGET:BigInt(1)<<BigInt(12),PATH_OPEN:BigInt(1)<<BigInt(13),FD_READDIR:BigInt(1)<<BigInt(14),PATH_READLINK:BigInt(1)<<BigInt(15),PATH_RENAME_SOURCE:BigInt(1)<<BigInt(16),PATH_RENAME_TARGET:BigInt(1)<<BigInt(17),PATH_FILESTAT_GET:BigInt(1)<<BigInt(18),PATH_FILESTAT_SET_SIZE:BigInt(1)<<BigInt(19),PATH_FILESTAT_SET_TIMES:BigInt(1)<<BigInt(20),FD_FILESTAT_GET:BigInt(1)<<BigInt(21),FD_FILESTAT_SET_SIZE:BigInt(1)<<BigInt(22),FD_FILESTAT_SET_TIMES:BigInt(1)<<BigInt(23),PATH_SYMLINK:BigInt(1)<<BigInt(24),PATH_REMOVE_DIRECTORY:BigInt(1)<<BigInt(25),PATH_UNLINK_FILE:BigInt(1)<<BigInt(26),POLL_FD_READWRITE:BigInt(1)<<BigInt(27),SOCK_SHUTDOWN:BigInt(1)<<BigInt(28),SOCK_ACCEPT:BigInt(1)<<BigInt(29)},h={ATIM:1,ATIM_NOW:2,MTIM:4,MTIM_NOW:8},y={SUBSCRIPTION_CLOCK_ABSTIME:1},C={FD_READWRITE_HANGUP:1},b=64,v=48,S=32;i.RESULT=l,i.Clock=s,i.Whence=u,i.FileType=c,i.PreopenType=d,i.EventType=m,i.LookupFlags=p,i.OpenFlags=_,i.FileDescriptorFlags=f,i.RightsFlags=g,i.FileStatTimestampFlags=h,i.SubscriptionClockFlags=y,i.EventReadWriteFlags=C,i.FILESTAT_SIZE=b,i.SUBSCRIPTION_SIZE=v,i.EVENT_SIZE=S}),66);
__d("WATextEncoding",[],(function(t,n,r,o,a,i){"use strict";var e=TextEncoder,l=TextDecoder,s=e,u=l;function c(){return new s}function d(){return new u}function m(e){s=e}function p(e){u=e}i.newTextEncoder=c,i.newTextDecoder=d,i.setTextEncoderClass=m,i.setTextDecoderClass=p}),66);
__d("WASIDrive",["WASISnapshotPreview1","WATextEncoding"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.nextFD=10,this.openMap=new Map,this.fs=babelHelpers.extends({},e),this.openMap.set(3,new c(this.fs,"/"))}var t=e.prototype;return t.$1=function(t,n,r){var e=new s(t,r);n&&(e.buffer=new Uint8Array(new ArrayBuffer(1024),0,0));var a=this.nextFD;return this.openMap.set(a,e),this.nextFD++,[o("WASISnapshotPreview1").RESULT.SUCCESS,a]},t.$2=function(t,n){var e=new c(t,n),r=this.nextFD;return this.openMap.set(r,e),this.nextFD++,[o("WASISnapshotPreview1").RESULT.SUCCESS,r]},t.$3=function(t,n){return n==="."?!0:t.containsDirectory(n)},t.open=function(t,n,r,a){var e,i=!!(r&(e=o("WASISnapshotPreview1")).OpenFlags.CREAT),l=!!(r&e.OpenFlags.DIRECTORY),s=!!(r&e.OpenFlags.EXCL),u=!!(r&e.OpenFlags.TRUNC),d=this.openMap.get(t);if(!(d instanceof c))return[o("WASISnapshotPreview1").RESULT.EBADF];if(d.containsFile(n)){if(l)return[o("WASISnapshotPreview1").RESULT.ENOTDIR];if(s)return[o("WASISnapshotPreview1").RESULT.EEXIST];var m=d.get(n);return this.$1(m,u,a)}else if(this.$3(d,n)){if(n===".")return this.$2(this.fs,"/");var p="/"+n+"/",_=Object.entries(this.fs).filter(function(e){var t=e[0];return t.startsWith(p)});return this.$2(Object.fromEntries(_),p)}else{if(i){var f=d.fullPath(n);return this.fs[f]={path:f,mode:"binary",content:new Uint8Array(0),timestamps:{access:new Date,modification:new Date,change:new Date}},this.$1(this.fs[f],u,a)}return[o("WASISnapshotPreview1").RESULT.ENOTCAPABLE]}},t.close=function(t){if(!this.openMap.has(t))return o("WASISnapshotPreview1").RESULT.EBADF;var e=this.openMap.get(t);return e instanceof s&&e.sync(),this.openMap.delete(t),o("WASISnapshotPreview1").RESULT.SUCCESS},t.read=function(t,n){var e=this.openMap.get(t);return!e||e instanceof c?[o("WASISnapshotPreview1").RESULT.EBADF]:[o("WASISnapshotPreview1").RESULT.SUCCESS,e.read(n)]},t.pread=function(t,n,r){var e=this.openMap.get(t);return!e||e instanceof c?[o("WASISnapshotPreview1").RESULT.EBADF]:[o("WASISnapshotPreview1").RESULT.SUCCESS,e.pread(n,r)]},t.write=function(t,n){var e=this.openMap.get(t);return!e||e instanceof c?o("WASISnapshotPreview1").RESULT.EBADF:(e.write(n),o("WASISnapshotPreview1").RESULT.SUCCESS)},t.pwrite=function(t,n,r){var e=this.openMap.get(t);return!e||e instanceof c?o("WASISnapshotPreview1").RESULT.EBADF:(e.pwrite(n,r),o("WASISnapshotPreview1").RESULT.SUCCESS)},t.sync=function(t){var e=this.openMap.get(t);return!e||e instanceof c?o("WASISnapshotPreview1").RESULT.EBADF:(e.sync(),o("WASISnapshotPreview1").RESULT.SUCCESS)},t.seek=function(t,n,r){var e=this.openMap.get(t);return!e||e instanceof c?[o("WASISnapshotPreview1").RESULT.EBADF]:[o("WASISnapshotPreview1").RESULT.SUCCESS,e.seek(n,r)]},t.tell=function(t){var e=this.openMap.get(t);return!e||e instanceof c?[o("WASISnapshotPreview1").RESULT.EBADF]:[o("WASISnapshotPreview1").RESULT.SUCCESS,e.tell()]},t.renumber=function(t,n){if(!this.exists(t)||!this.exists(n))return o("WASISnapshotPreview1").RESULT.EBADF;if(t===n)return o("WASISnapshotPreview1").RESULT.SUCCESS;this.close(n);var e=this.openMap.get(t);return this.openMap.set(n,e),o("WASISnapshotPreview1").RESULT.SUCCESS},t.unlink=function(t,n){var e=this.openMap.get(t);if(!(e instanceof c))return o("WASISnapshotPreview1").RESULT.EBADF;if(!e.contains(n))return o("WASISnapshotPreview1").RESULT.ENOENT;for(var r of Object.keys(this.fs))(r===e.fullPath(n)||r.startsWith(e.fullPath(n)+"/"))&&delete this.fs[r];return o("WASISnapshotPreview1").RESULT.SUCCESS},t.rename=function(t,n,r,a){var e=this.openMap.get(t),i=this.openMap.get(r);if(!(e instanceof c)||!(i instanceof c))return o("WASISnapshotPreview1").RESULT.EBADF;if(!e.contains(n))return o("WASISnapshotPreview1").RESULT.ENOENT;if(i.contains(a))return o("WASISnapshotPreview1").RESULT.EEXIST;var l=e.fullPath(n),s=i.fullPath(a);for(var u of Object.keys(this.fs))if(u.startsWith(l)){var d=u.replace(l,s);this.fs[d]=this.fs[u],this.fs[d].path=d,delete this.fs[u]}return o("WASISnapshotPreview1").RESULT.SUCCESS},t.list=function(t){var e=this.openMap.get(t);return e instanceof c?[o("WASISnapshotPreview1").RESULT.SUCCESS,e.list()]:[o("WASISnapshotPreview1").RESULT.EBADF]},t.stat=function(t){var e=this.openMap.get(t);return e instanceof s?[o("WASISnapshotPreview1").RESULT.SUCCESS,e.stat()]:[o("WASISnapshotPreview1").RESULT.EBADF]},t.pathStat=function(t,n){var e=this.openMap.get(t);if(!(e instanceof c))return[o("WASISnapshotPreview1").RESULT.EBADF];if(e.containsFile(n)){var r=e.fullPath(n),a=new s(this.fs[r],0).stat();return[o("WASISnapshotPreview1").RESULT.SUCCESS,a]}else if(this.$3(e,n)){if(n===".")return[o("WASISnapshotPreview1").RESULT.SUCCESS,new c(this.fs,"/").stat()];var i="/"+n+"/",l=Object.entries(this.fs).filter(function(e){var t=e[0];return t.startsWith(i)}),u=new c(Object.fromEntries(l),i).stat();return[o("WASISnapshotPreview1").RESULT.SUCCESS,u]}else return[o("WASISnapshotPreview1").RESULT.ENOTCAPABLE]},t.setFlags=function(t,n){var e=this.openMap.get(t);return e instanceof s?(e.setFlags(n),o("WASISnapshotPreview1").RESULT.SUCCESS):o("WASISnapshotPreview1").RESULT.EBADF},t.setSize=function(t,n){var e=this.openMap.get(t);return e instanceof s?(e.setSize(Number(n)),o("WASISnapshotPreview1").RESULT.SUCCESS):o("WASISnapshotPreview1").RESULT.EBADF},t.setAccessTime=function(t,n){var e=this.openMap.get(t);return e instanceof s?(e.setAccessTime(n),o("WASISnapshotPreview1").RESULT.SUCCESS):o("WASISnapshotPreview1").RESULT.EBADF},t.setModificationTime=function(t,n){var e=this.openMap.get(t);return e instanceof s?(e.setModificationTime(n),o("WASISnapshotPreview1").RESULT.SUCCESS):o("WASISnapshotPreview1").RESULT.EBADF},t.pathSetAccessTime=function(t,n,r){var e=this.openMap.get(t);if(!(e instanceof c))return o("WASISnapshotPreview1").RESULT.EBADF;var a=e.get(n);if(a==null)return o("WASISnapshotPreview1").RESULT.ENOTCAPABLE;var i=new s(a,0);return i.setAccessTime(r),i.sync(),o("WASISnapshotPreview1").RESULT.SUCCESS},t.pathSetModificationTime=function(t,n,r){var e=this.openMap.get(t);if(!(e instanceof c))return o("WASISnapshotPreview1").RESULT.EBADF;var a=e.get(n);if(a==null)return o("WASISnapshotPreview1").RESULT.ENOTCAPABLE;var i=new s(a,0);return i.setModificationTime(r),i.sync(),o("WASISnapshotPreview1").RESULT.SUCCESS},t.pathCreateDir=function(t,n){var e=this.openMap.get(t);if(!(e instanceof c))return o("WASISnapshotPreview1").RESULT.EBADF;if(e.contains(n))return o("WASISnapshotPreview1").RESULT.ENOTCAPABLE;var r=e.fullPath(n)+"/.runno";return this.fs[r]={path:r,timestamps:{access:new Date,modification:new Date,change:new Date},mode:"string",content:""},o("WASISnapshotPreview1").RESULT.SUCCESS},t.exists=function(t){return this.openMap.has(t)},t.fileType=function(t){var e=this.openMap.get(t);return e?e instanceof s?o("WASISnapshotPreview1").FileType.REGULAR_FILE:o("WASISnapshotPreview1").FileType.DIRECTORY:o("WASISnapshotPreview1").FileType.UNKNOWN},t.fileFdflags=function(t){var e=this.openMap.get(t);return e instanceof s?e.fdflags:0},e})(),s=(function(){function e(e,t){if(this.$1=BigInt(0),this.isDirty=!1,this.file=e,this.file.mode==="string"){var n=this.file.content,r=o("WATextEncoding").newTextEncoder();this.buffer=r.encode(n)}else this.buffer=this.file.content;this.fdflags=t,this.flagAppend=!!(t&o("WASISnapshotPreview1").FileDescriptorFlags.APPEND),this.flagDSync=!!(t&o("WASISnapshotPreview1").FileDescriptorFlags.DSYNC),this.flagNonBlock=!!(t&o("WASISnapshotPreview1").FileDescriptorFlags.NONBLOCK),this.flagRSync=!!(t&o("WASISnapshotPreview1").FileDescriptorFlags.RSYNC),this.flagSync=!!(t&o("WASISnapshotPreview1").FileDescriptorFlags.SYNC)}var t=e.prototype;return t.getOffset=function(){return Number(this.$1)},t.read=function(t){var e=this.buffer.subarray(this.getOffset(),this.getOffset()+t);return this.$1+=BigInt(e.length),e},t.pread=function(t,n){return this.buffer.subarray(n,n+t)},t.write=function(t){if(this.isDirty=!0,this.flagAppend){var e=this.buffer.length;this.$2(e+t.byteLength),this.buffer.set(t,e)}else{var n=Math.max(this.getOffset()+t.byteLength,this.buffer.byteLength);this.$2(n),this.buffer.set(t,this.getOffset()),this.$1+=BigInt(t.byteLength)}(this.flagDSync||this.flagSync)&&this.sync()},t.pwrite=function(t,n){if(this.isDirty=!0,this.flagAppend){var e=this.buffer.length;this.$2(e+t.byteLength),this.buffer.set(t,e)}else{var r=Math.max(n+t.byteLength,this.buffer.byteLength);this.$2(r),this.buffer.set(t,n)}(this.flagDSync||this.flagSync)&&this.sync()},t.sync=function(){if(this.isDirty){if(this.isDirty=!1,this.file.mode==="binary"){this.file.content=new Uint8Array(this.buffer);return}var e=o("WATextEncoding").newTextDecoder();this.file.content=e.decode(this.buffer)}},t.seek=function(t,n){switch(n){case o("WASISnapshotPreview1").Whence.SET:this.$1=t;break;case o("WASISnapshotPreview1").Whence.CUR:this.$1+=t;break;case o("WASISnapshotPreview1").Whence.END:this.$1=BigInt(this.buffer.length)+t;break}return this.$1},t.tell=function(){return this.$1},t.stat=function(){return{path:this.file.path,timestamps:this.file.timestamps,type:o("WASISnapshotPreview1").FileType.REGULAR_FILE,byteLength:this.buffer.length}},t.setFlags=function(t){this.fdflags=t},t.setSize=function(t){this.$2(t)},t.setAccessTime=function(t){this.file.timestamps.access=t},t.setModificationTime=function(t){this.file.timestamps.modification=t},t.$2=function(t){if(t<=this.buffer.buffer.byteLength){this.buffer=new Uint8Array(this.buffer.buffer,0,t);return}var e;this.buffer.buffer.byteLength===0?e=new ArrayBuffer(t<1024?1024:t*2):t>this.buffer.buffer.byteLength*2?e=new ArrayBuffer(t*2):e=new ArrayBuffer(this.buffer.buffer.byteLength*2);var n=new Uint8Array(e,0,t);n.set(this.buffer),this.buffer=n},e})();function u(e,t){var n=t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),r=new RegExp("^"+n);return e.replace(r,"")}var c=(function(){function e(e,t){this.dir=e,this.prefix=t}var t=e.prototype;return t.containsFile=function(t){for(var e of Object.keys(this.dir)){var n=u(e,this.prefix);if(n===t)return!0}return!1},t.containsDirectory=function(t){for(var e of Object.keys(this.dir)){var n=u(e,this.prefix);if(n.startsWith(t+"/"))return!0}return!1},t.contains=function(t){for(var e of Object.keys(this.dir)){var n=u(e,this.prefix);if(n===t||n.startsWith(t+"/"))return!0}return!1},t.get=function(t){return this.dir[this.fullPath(t)]},t.fullPath=function(t){return""+this.prefix+t},t.list=function(){var e=[],t=new Set;for(var n of Object.keys(this.dir)){var r=u(n,this.prefix);if(r.includes("/")){var a=r.split("/")[0];if(t.has(a))continue;t.add(a),e.push({name:a,type:o("WASISnapshotPreview1").FileType.DIRECTORY})}else e.push({name:r,type:o("WASISnapshotPreview1").FileType.REGULAR_FILE})}return e},t.stat=function(){return{path:this.prefix,timestamps:{access:new Date,modification:new Date,change:new Date},type:o("WASISnapshotPreview1").FileType.DIRECTORY,byteLength:0}},e})();l.WASIDrive=e}),98);
__d("WASMMemoryLogger",["FBLogger","QPLFlow","WAHashStringToNumber","justknobx","qpl","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("168"),s=(function(){function e(){var e=this;this.$1=new FinalizationRegistry(function(t){e.$3-=t.numBytes;var n=t.wasmModule;if(n!=null){var r=e.$2.get(n);if(r!=null){var o=r-t.numBytes;o<=0?e.$2.delete(n):e.$2.set(n,o)}}}),this.$3=0,this.$2=new Map}var t=e.prototype;return t.addWasmInstanceToSet=function(t,n){var e=t.buffer.byteLength;if(this.$1.register(t,{numBytes:e,wasmModule:n}),this.$3+=e,n!=null){var r,o=(r=this.$2.get(n))!=null?r:0;this.$2.set(n,o+e)}},t.getCurrentWasmMemoryUsage=function(){return this.$3},t.getWasmMemoryUsagePerModuleAnnotationsObject=function(){var e={};return this.$2.forEach(function(t,n){e["wasm_memory_usage_"+n]=t}),e},e})(),u;function c(){if(u==null){if(typeof FinalizationRegistry!="function"){r("FBLogger")("wmi").warn("unable to run wasm memory logger - finalization registry not supported in browser");return}u=new s,window.setInterval(function(){var e=r("qpl")._(994782764,"418"),t=o("WAHashStringToNumber").hashStringToNumber(r("uuidv4")()),n=u.getWasmMemoryUsagePerModuleAnnotationsObject(),a=o("QPLFlow").startQPLFlow(e,{annotations:{int:babelHelpers.extends({},n,{wasm_total_memory_usage:u.getCurrentWasmMemoryUsage()})},instanceKey:t});a.endSuccess()},e)}return u}l.getOrInitWasmMemoryLogger=c}),98);
__d("WASI",["WACryptoDependencies","WASIContext","WASIDrive","WASISnapshotPreview1","WASMMemoryLogger","WATextEncoding","err","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t,n=new(o("WASIContext")).WASIContext(e),a=new(o("WASIDrive")).WASIDrive(n.fs);function i(){return Object.entries(n.env).map(function(e){var t=e[0],n=e[1];return t+"="+n})}var l={args_get:function(r,a){var e=r,i=a,l=new DataView(t.buffer);for(var s of n.args){l.setUint32(e,i,!0),e+=4;var u=o("WATextEncoding").newTextEncoder().encode(s+"\0"),c=new Uint8Array(t.buffer,i,u.byteLength);c.set(u),i+=u.byteLength}return o("WASISnapshotPreview1").RESULT.SUCCESS},args_sizes_get:function(r,a){var e=n.args,i=e.reduce(function(e,t){return e+o("WATextEncoding").newTextEncoder().encode(t+"\0").byteLength},0),l=new DataView(t.buffer);return l.setUint32(r,e.length,!0),l.setUint32(a,i,!0),o("WASISnapshotPreview1").RESULT.SUCCESS},clock_res_get:function(){throw r("err")("clock_res_get is not implemented")},clock_time_get:function(n,r,a){var e=o("WASISnapshotPreview1").Clock.cast(n);if(e==null)return o("WASISnapshotPreview1").RESULT.EINVAL;switch(e){case o("WASISnapshotPreview1").Clock.REALTIME:case o("WASISnapshotPreview1").Clock.MONOTONIC:case o("WASISnapshotPreview1").Clock.PROCESS_CPUTIME_ID:case o("WASISnapshotPreview1").Clock.THREAD_CPUTIME_ID:{var i=new DataView(t.buffer);return i.setBigUint64(a,f(new Date),!0),o("WASISnapshotPreview1").RESULT.SUCCESS}}},environ_get:function(n,r){var e=n,a=r,l=new DataView(t.buffer);for(var s of i()){l.setUint32(e,a,!0),e+=4;var u=o("WATextEncoding").newTextEncoder().encode(s+"\0"),c=new Uint8Array(t.buffer,a,u.byteLength);c.set(u),a+=u.byteLength}return o("WASISnapshotPreview1").RESULT.SUCCESS},environ_sizes_get:function(n,r){var e=i().reduce(function(e,t){return e+o("WATextEncoding").newTextEncoder().encode(t+"\0").byteLength},0),a=new DataView(t.buffer);return a.setUint32(n,i().length,!0),a.setUint32(r,e,!0),o("WASISnapshotPreview1").RESULT.SUCCESS},fd_advise:function(){throw r("err")("fd_advise is not implemented")},fd_allocate:function(){throw r("err")("fd_allocate is not implemented")},fd_close:function(t){return a.close(t)},fd_datasync:function(){throw r("err")("fd_datasync is not implemented")},fd_fdstat_get:function(r,i){if(r<3){var e;if(n.isTTY){var l=c^o("WASISnapshotPreview1").RightsFlags.FD_SEEK^o("WASISnapshotPreview1").RightsFlags.FD_TELL;e=p(o("WASISnapshotPreview1").FileType.CHARACTER_DEVICE,0,l)}else e=p(o("WASISnapshotPreview1").FileType.CHARACTER_DEVICE,0);var s=new Uint8Array(t.buffer,i,e.byteLength);return s.set(e),o("WASISnapshotPreview1").RESULT.SUCCESS}if(!a.exists(r))return o("WASISnapshotPreview1").RESULT.EBADF;var u=a.fileType(r),d=a.fileFdflags(r),m=p(u,d),_=new Uint8Array(t.buffer,i,m.byteLength);return _.set(m),o("WASISnapshotPreview1").RESULT.SUCCESS},fd_fdstat_set_flags:function(t,n){return a.setFlags(t,n)},fd_fdstat_set_rights:function(){return o("WASISnapshotPreview1").RESULT.SUCCESS},fd_filestat_get:function(n,r){if(n<3){var e;switch(n){case 0:e="/dev/stdin";break;case 1:e="/dev/stdout";break;case 2:e="/dev/stderr";break;default:e="/dev/undefined";break}var i=m({path:e,byteLength:0,timestamps:{access:new Date,modification:new Date,change:new Date},type:o("WASISnapshotPreview1").FileType.CHARACTER_DEVICE}),l=new Uint8Array(t.buffer,r,i.byteLength);return l.set(i),o("WASISnapshotPreview1").RESULT.SUCCESS}var s=a.stat(n);if(s.length===1)return s[0];var u=s[1],c=m(u),d=new Uint8Array(t.buffer,r,c.byteLength);return d.set(c),o("WASISnapshotPreview1").RESULT.SUCCESS},fd_filestat_set_size:function(){throw r("err")("fd_filestat_set_size is not implemented")},fd_filestat_set_times:function(){throw r("err")("fd_filestat_set_times is not implemented")},fd_pread:function(){throw r("err")("fd_pread is not implemented")},fd_prestat_dir_name:function(n,r,a){if(n!==3)return o("WASISnapshotPreview1").RESULT.EBADF;var e=o("WATextEncoding").newTextEncoder().encode("/"),i=new Uint8Array(t.buffer,r,a);return i.set(e.subarray(0,a)),o("WASISnapshotPreview1").RESULT.SUCCESS},fd_prestat_get:function(n,r){if(n!==3)return o("WASISnapshotPreview1").RESULT.EBADF;var e=o("WATextEncoding").newTextEncoder().encode("."),a=new DataView(t.buffer,r);return a.setUint8(0,o("WASISnapshotPreview1").PreopenType.DIR),a.setUint32(4,e.byteLength,!0),o("WASISnapshotPreview1").RESULT.SUCCESS},fd_pwrite:function(){throw r("err")("fd_pwrite is not implemented")},fd_read:function(r,i,l,s){if(r===1||r===2)return o("WASISnapshotPreview1").RESULT.ENOTSUP;var e=new DataView(t.buffer),u=d(e,i,l),c=o("WATextEncoding").newTextEncoder(),m=0,p=o("WASISnapshotPreview1").RESULT.SUCCESS;for(var _ of u){var f=void 0;if(r===0){var g=n.stdin(_.byteLength);if(g==null)break;f=c.encode(g)}else{var h=a.read(r,_.byteLength);if(h.length===1){p=h[0];break}else f=h[1]}var y=Math.min(_.byteLength,f.byteLength);_.set(f.subarray(0,y)),m+=y}return e.setUint32(s,m,!0),p},fd_readdir:function(){throw r("err")("fd_readdir is not implemented")},fd_renumber:function(){throw r("err")("fd_renumber is not implemented")},fd_seek:function(n,i,l,s){var e=o("WASISnapshotPreview1").Whence.cast(l);if(e==null)throw r("err")("fd_seek: invalid whence");var u=a.seek(n,i,e);if(u.length===1)return u[0];var c=u[0],d=u[1],m=new DataView(t.buffer);return m.setBigUint64(s,d,!0),c},fd_sync:function(){throw r("err")("fd_sync is not implemented")},fd_tell:function(n,r){var e=a.tell(n);if(e.length===1)return e[0];var o=e[0],i=e[1],l=new DataView(t.buffer);return l.setBigUint64(r,i,!0),o},fd_write:function(r,i,l,s){if(r===0)return o("WASISnapshotPreview1").RESULT.ENOTSUP;var e=new DataView(t.buffer),u=d(e,i,l),c=o("WATextEncoding").newTextDecoder(),m=0,p=o("WASISnapshotPreview1").RESULT.SUCCESS;for(var _ of u)if(_.byteLength!==0){if(r===1||r===2){var f=r===1?n.stdout:n.stderr,g=c.decode(_);f(g)}else if(p=a.write(r,_),p!==o("WASISnapshotPreview1").RESULT.SUCCESS)break;m+=_.byteLength}return e.setUint32(s,m,!0),p},path_create_directory:function(){throw r("err")("path_create_directory is not implemented")},path_filestat_get:function(){throw r("err")("path_filestat_get is not implemented")},path_filestat_set_times:function(){throw r("err")("path_filestat_set_times is not implemented")},path_link:function(){throw r("err")("path_link is not implemented")},path_open:function(n,r,o,i,l,s,u,c,d){var e=new DataView(t.buffer),m=_(t,o,i),p=a.open(n,m,l,c);if(p.length===1)return p[0];var f=p[0],g=p[1];return e.setUint32(d,g,!0),f},path_readlink:function(){throw r("err")("path_readlink is not implemented")},path_remove_directory:function(){throw r("err")("path_remove_directory is not implemented")},path_rename:function(){throw r("err")("path_rename is not implemented")},path_symlink:function(){throw r("err")("path_symlink is not implemented")},path_unlink_file:function(){throw r("err")("path_unlink_file is not implemented")},poll_oneoff:function(){throw r("err")("poll_oneoff is not implemented")},proc_exit:function(t){throw new u(t)},proc_raise:function(){throw r("err")("proc_raise is not implemented")},random_get:function(n,r){var e=new Uint8Array(t.buffer,n,r);return o("WACryptoDependencies").getCrypto().getRandomValues(e),o("WASISnapshotPreview1").RESULT.SUCCESS},sched_yield:function(){throw r("err")("sched_yield is not implemented")},sock_accept:function(){throw r("err")("sock_accept is not implemented")},sock_recv:function(){throw r("err")("sock_recv is not implemented")},sock_send:function(){throw r("err")("sock_send is not implemented")},sock_shutdown:function(){throw r("err")("sock_shutdown is not implemented")}};return{getImportObject:function(){return{wasi_snapshot_preview1:l}},start:function(i){var n=i.exports.memory;if(n instanceof WebAssembly.Memory){if(t=n,r("gkx")("4444")){var l=o("WASMMemoryLogger").getOrInitWasmMemoryLogger();l!=null&&l.addWasmInstanceToSet(t,e.moduleName)}}else throw r("err")("Expected memory object");var s=i.exports._start;try{s()}catch(e){if(e instanceof u)return{exitCode:e.code,fs:a.fs};if(e instanceof WebAssembly.RuntimeError)return{exitCode:134,fs:a.fs};throw e}return{exitCode:0,fs:a.fs}},initialize:function(n){var e=n.exports.memory;if(e instanceof WebAssembly.Memory)t=e;else throw r("err")("Expected memory object");var o=n.exports;if("_initialize"in o){var i=o._initialize;i()}return{exports:o,drive:a}}}}var u=(function(e){function t(t){var n;return n=e.call(this)||this,n.code=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),c=(e=o("WASISnapshotPreview1")).RightsFlags.FD_DATASYNC|e.RightsFlags.FD_READ|e.RightsFlags.FD_SEEK|e.RightsFlags.FD_FDSTAT_SET_FLAGS|e.RightsFlags.FD_SYNC|e.RightsFlags.FD_TELL|e.RightsFlags.FD_WRITE|e.RightsFlags.FD_ADVISE|e.RightsFlags.FD_ALLOCATE|e.RightsFlags.PATH_CREATE_DIRECTORY|e.RightsFlags.PATH_CREATE_FILE|e.RightsFlags.PATH_LINK_SOURCE|e.RightsFlags.PATH_LINK_TARGET|e.RightsFlags.PATH_OPEN|e.RightsFlags.FD_READDIR|e.RightsFlags.PATH_READLINK|e.RightsFlags.PATH_RENAME_SOURCE|e.RightsFlags.PATH_RENAME_TARGET|e.RightsFlags.PATH_FILESTAT_GET|e.RightsFlags.PATH_FILESTAT_SET_SIZE|e.RightsFlags.PATH_FILESTAT_SET_TIMES|e.RightsFlags.FD_FILESTAT_GET|e.RightsFlags.FD_FILESTAT_SET_SIZE|e.RightsFlags.FD_FILESTAT_SET_TIMES|e.RightsFlags.PATH_SYMLINK|e.RightsFlags.PATH_REMOVE_DIRECTORY|e.RightsFlags.PATH_UNLINK_FILE|e.RightsFlags.POLL_FD_READWRITE|e.RightsFlags.SOCK_SHUTDOWN|e.RightsFlags.SOCK_ACCEPT;function d(e,t,n){for(var r=new Array(n),o=t,a=0;a<n;a++){var i=e.getUint32(o,!0);o+=4;var l=e.getUint32(o,!0);o+=4,r[a]=new Uint8Array(e.buffer,i,l)}return r}function m(e){var t=new Uint8Array(o("WASISnapshotPreview1").FILESTAT_SIZE),n=new DataView(t.buffer);return n.setBigUint64(0,BigInt(0),!0),n.setBigUint64(8,BigInt(g(e.path)),!0),n.setUint8(16,e.type),n.setBigUint64(24,BigInt(1),!0),n.setBigUint64(32,BigInt(e.byteLength),!0),n.setBigUint64(40,f(e.timestamps.access),!0),n.setBigUint64(48,f(e.timestamps.modification),!0),n.setBigUint64(56,f(e.timestamps.change),!0),t}function p(e,t,n){var r=n!=null?n:c,o=n!=null?n:c,a=new Uint8Array(24),i=new DataView(a.buffer,0,24);return i.setUint8(0,e),i.setUint32(2,t,!0),i.setBigUint64(8,r,!0),i.setBigUint64(16,o,!0),a}function _(e,t,n){return o("WATextEncoding").newTextDecoder().decode(new Uint8Array(e.buffer,t,n))}function f(e){return BigInt(e.getTime())*BigInt(1e6)}function g(e,t){t===void 0&&(t=0);for(var n=3735928559^t,r=1103547991^t,o=0,a;o<e.length;o++)a=e.charCodeAt(o),n=Math.imul(n^a,2654435761),r=Math.imul(r^a,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}l.createWasi=s}),98);
__d("WAWasmReactor",["FBLogger","WAPromiseQueue","WAResultOrError","WASI","WASISnapshotPreview1","WASMMemoryLogger","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p=function(){return r("FBLogger")("wmi").tags(["WasmReactor"])},_=3e4;function f(e){var t=e.stderr,n=e.stdout;return{stderr:t,stdout:n}}var g=(function(){function t(e,t){this.$1=null,this.$4=e,this.$3=t}var a=t.prototype;return a.init=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=this,a=function(r){p().tags([n.$4]).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),r)},i=function(t){p().INFO(s||(s=babelHelpers.taggedTemplateLiteralLoose(["",""])),t)},l=o("WASI").createWasi(f({stderr:a,stdout:i})),u=l.getImportObject,c=l.initialize,d=yield t(),m=yield WebAssembly.instantiate(d,u()),_=m.exports.memory,g=r("gkx")("4444"),h=o("WASMMemoryLogger").getOrInitWasmMemoryLogger();_ instanceof WebAssembly.Memory&&g&&h!=null&&h.addWasmInstanceToSet(_,this.$4),this.$1=yield c(m)});function a(e){return t.apply(this,arguments)}return a})(),a.createWasmCommand=function(a){var e=a.InputSpec,i=a.ResultSpec,l=a.validateResult,s=this;return function(d){return s.$3.enqueue(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=s.$1;if(n==null)return p().tags([s.$4]).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WAWasmReactor not initialized"]))),o("WAResultOrError").makeError({errorName:"wasm-internal-not-initialized",failReason:null});var a=n.drive,m="input",_="output";try{var f=o("encodeProtobuf").encodeProtobuf(e,d).readBuffer();t.$5(a,m,new Uint8Array(f),s.$4),t.$5(a,_,new Uint8Array(0),s.$4),yield n.exports.execute_command();var g=t.$6(a,_,s.$4);if(g.length===0)return o("WAResultOrError").makeError({errorName:"wasm-internal-runtime-error",failReason:null});var h=o("decodeProtobuf").decodeProtobuf(i,g);return l(h)}catch(e){var y=r("getErrorSafe")(e);return p().tags([s.$4]).catching(y).MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Unexpected runtime error: ",""])),y.message),o("WAResultOrError").makeError({errorName:"wasm-internal-runtime-error",failReason:null})}finally{var C=t.$2;a.unlink(C,m),a.unlink(C,_)}}))}},a.DEPRECATED_createWasmCommand=function(a){var e=a.InputSpec,i=a.ResultSpec,l=a.validateResult,s=this;return function(u){return s.$3.enqueue(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=s.$1;if(n==null)return p().tags([s.$4]).MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["WAWasmReactor not initialized"]))),o("WAResultOrError").makeError("wasm-internal-not-initialized");var a=n.drive,c="input",_="output";try{var f=o("encodeProtobuf").encodeProtobuf(e,u).readBuffer();t.$5(a,c,new Uint8Array(f),s.$4),t.$5(a,_,new Uint8Array(0),s.$4),yield n.exports.execute_command();var g=t.$6(a,_,s.$4);if(g.length===0)return o("WAResultOrError").makeError("wasm-internal-runtime-error");var h=o("decodeProtobuf").decodeProtobuf(i,g);return l(h)}catch(e){var y=r("getErrorSafe")(e);return p().tags([s.$4]).catching(y).MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Unexpected runtime error: ",""])),y.message),o("WAResultOrError").makeError("wasm-internal-runtime-error")}finally{var C=t.$2;a.unlink(C,c),a.unlink(C,_)}}))}},t.$5=function(n,r,a,i){var e=n.open(t.$2,r,o("WASISnapshotPreview1").OpenFlags.CREAT||o("WASISnapshotPreview1").OpenFlags.TRUNC,0);if(e[0]!==o("WASISnapshotPreview1").RESULT.SUCCESS)throw p().tags([i]).mustfixThrow("Failed to open file for writing: ",r);var l=e[1];n.write(l,a),n.close(l)},t.$6=function(n,r,a){var e=n.open(t.$2,r,0,0);if(e[0]!==o("WASISnapshotPreview1").RESULT.SUCCESS)throw p().tags([a]).mustfixThrow("Failed to open file for reading: ",r);var i=e[1],l=n.stat(i);if(l[0]!==o("WASISnapshotPreview1").RESULT.SUCCESS)throw n.close(i),p().tags([a]).mustfixThrow("Failed to stat file: ",r);var s=l[1].byteLength,u=n.read(i,s);if(n.close(i),u[0]!==o("WASISnapshotPreview1").RESULT.SUCCESS)throw p().tags([a]).mustfixThrow("Failed to read from file ",r);return u[1]},t})();g.$2=3;function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=new(o("WAPromiseQueue")).PromiseQueue(_),r=new g(t,n);return yield r.init(e),r}),y.apply(this,arguments)}l.WAWasmReactor=g,l.createWasmInstance=h}),98);
__d("EBMinosWasmReactorSingleton",["EBGetMinosWasm","WAWasmReactor","asyncToGeneratorRuntime","memoizeWithArgs"],(function(t,n,r,o,a,i,l){"use strict";var e="Minos_REPL",s=r("memoizeWithArgs")(function(){return o("WAWasmReactor").createWasmInstance(o("EBGetMinosWasm").getMinosWasm,e)},function(){return"cache"}),u=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.InputSpec,r=e.ResultSpec,o=e.validateResult,a=yield s();return a.createWasmCommand({InputSpec:n,ResultSpec:r,validateResult:o})(t)});return function(n,r){return e.apply(this,arguments)}})(),c=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.InputSpec,r=e.ResultSpec,o=e.validateResult,a=yield s();return a.DEPRECATED_createWasmCommand({InputSpec:n,ResultSpec:r,validateResult:o})(t)});return function(n,r){return e.apply(this,arguments)}})();l.minosCommand=u,l.DEPRECATED_minosCommand=c}),98);
__d("EBMinosWasmVerifySingleEpoch",["EBMinosWasm.pb","EBMinosWasmReactorSingleton","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(){function e(e){var t=e.valid;return o("WAResultOrError").makeResult({valid:t})}return(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.epochPublicData,r=t.signature;return yield o("EBMinosWasmReactorSingleton").DEPRECATED_minosCommand({InputSpec:o("EBMinosWasm.pb").MinosCommandSpec,ResultSpec:o("EBMinosWasm.pb").MinosVerifySingleEpochResultSpec,validateResult:e},{minosVerifySingleEpoch:{epochPublicData:n,signature:r}})});function r(e){return t.apply(this,arguments)}return r})()}var s=e();l.verifySingleEpoch=s}),98);
__d("EncryptedBackupUploadSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5729"),s=o("FalcoLoggerInternal").create("encrypted_backup_upload_success",e),u=s;l.default=u}),98);
__d("GetBlobFromInt64BE",["I64","LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=new Uint8Array(8);return a.reduceRight(function(e,t,n){var r=(s||(s=o("I64"))).to_int32(s.mod_(e,s.of_string("256")));return a[n]=r,s.div(e,s.of_string("256"))},t),(e||(e=n("Promise"))).resolve(r("LSResult")(a.buffer))}l.GetBlobFromInt64BE=u}),98);
__d("PakeCpaceUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}function l(e,t){var n=new e.VectorInt;return t.forEach(function(e){n.push_back(e)}),n}i.typedArrayToBuffer=e,i.uint8ArrayToVectorInt=l}),66);
__d("Hmac_v2",["CryptoLogger","LSResult","PakeCpaceUtils","Promise","WACryptoSha256HmacBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i){try{var t=new(o("WACryptoSha256HmacBuilder")).Sha256HMacBuilder(new Uint8Array(a)).update(new Uint8Array(i)).finish();return(e||(e=n("Promise"))).resolve(r("LSResult")(o("PakeCpaceUtils").typedArrayToBuffer(t)))}catch(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("hmac_v2"),e).mustfix("Crypto signing failed: data length: %s, was_timeout: %s",i==null?void 0:i.byteLength,!1),e}};l.default=s}),98);
__d("LSACSExperimentCapability",[],(function(t,n,r,o,a,i){var e=Object.freeze({RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:0,BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:1,INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:2});i.default=e}),66);
__d("LSBeginHandlingFireForgetTasksForQueue",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return n[0]=t.createArray(),t.forEach(t.filter(t.db.table(5).fetch(),function(t){return t.queueName===e[0]}),function(e){var r=e.item;return n[3]=new t.Map,n[3].set("label",r.context),n[3].set("payload",r.taskValue),n[3].set("queue_name",r.queueName),n[3].set("task_id",r.taskId),n[3].set("failure_count",t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))?void 0:t.i64.cast([0,0])),n[4]=(n[0].push(n[3]),n[0])})},function(o){return n[1]=new t.Map,n[1].set("tasks",n[0]),n[1].set("epoch_id",void 0),n[2]=new t.Map,n[2].set("queue_name",e[0]),n[2].set("next_sync_ms",void 0),n[2].set("work_item_type",t.i64.cast([0,5])),n[2].set("network_payload",n[1]),n[2].set("http_url_override",void 0),n[2].set("skip_realtime_gateway",!1),r[0]=n[2]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreBeginHandlingFireForgetTasksForQueueStoredProcedure",e.__tables__=["pending_fire_and_forget_tasks"],a.exports=e}),null);
__d("LSBeginHandlingFireForgetTasksForQueueStoredProcedure",["LSBeginHandlingFireForgetTasksForQueue","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBeginHandlingFireForgetTasksForQueue"),a.queueName);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSForceTaskExecutionImmediately",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?0:(o=i.item,n[1]=t.i64.of_float(Date.now()),t.i64.lt(n[1],o.minTimeToSyncTimestampMs)?t.forEach(t.db.table(2).fetch([[[e[0]]]]),function(e){var n=e.update,r=e.item;return n({minTimeToSyncTimestampMs:t.i64.cast([0,0]),failureCount:t.i64.add(r.failureCount,t.i64.cast([0,1]))})}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreForceTaskExecutionImmediatelyStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSRemoveUsedTokens",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(309).fetch(),function(e){return t.i64.le(e.redeemLimit,t.i64.cast([0,0]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSAnonymousCredentialsRemoveUsedTokensStoredProcedure",e.__tables__=["secure_acs_tokens"],a.exports=e}),null);
__d("LSGetCurrentTokenPoolState",["LSArrayGetObjectAt","LSRemoveBlindedTokens","LSRemoveUsedTokens"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),r[1]=t.createArray(),t.count(t.filter(t.db.table(307).fetch(),function(t){return t.projectName===e[0]})).then(function(e){return r[2]=e})},function(n){return t.forEach(t.filter(t.db.table(307).fetch(),function(t){return t.projectName===e[0]}),function(e){var n=e.item;return r[7]=n.configId,t.i64.gt(r[0],n.expirationTimestampMs)?t.forEach(t.db.table(307).fetch([[[r[7]]]]),function(e){return e.delete()}):t.resolve(r[8]=(r[1].push(r[7]),r[1]))})},function(e){return t.storedProcedure(n("LSRemoveUsedTokens"))},function(e){return r[3]=t.i64.cast([0,0]),r[4]=t.i64.of_int32(r[1].length),t.i64.gt(r[4],t.i64.cast([0,0]))?t.loopAsync(r[4],function(e){return r[7]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[1],r[7]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(e){return t.count(t.filter(t.db.table(309).fetch(),function(e){return e.configId===r[8]})).then(function(e){return r[10]=e})},function(e){return r[3]=t.i64.add(r[10],r[3]),t.storedProcedure(n("LSRemoveBlindedTokens"),r[8])}])}):t.resolve()},function(e){var n;return t.i64.gt(r[2],t.i64.cast([0,0]))?(r[7]=t.i64.of_int32(r[1].length),r[5]=t.i64.ge(r[7],t.i64.cast([0,1]))):r[5]=void 0,r[5]!==void 0?(r[5]?(t.i64.gt(r[3],t.i64.cast([0,0]))?r[8]=t.i64.cast([0,3]):r[8]=t.i64.cast([0,2]),r[7]=r[8]):r[7]=t.i64.cast([0,1]),r[6]=r[7]):r[6]=t.i64.cast([0,0]),n=[r[6],r[3]],o[0]=n[0],o[1]=n[1]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsGetCurrentTokenPoolStateStoredProcedure",e.__tables__=["secure_acs_configurations","secure_acs_tokens"],a.exports=e}),null);
__d("LSVoprfBlind.nop",["XPlatReactVoprf","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("XPlatReactVoprf").loadXPlatReactVoprf(),a=r.voprfInstance,i=a.voprfInfo,l=a.voprfWasm;try{var s=l.blind(i,new Uint8Array(n));return[s.blindedElement.buffer,s.blindingFactor.buffer]}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(a)}});function t(t,n,r){return e.apply(this,arguments)}return t})();e.__nop_name__="LSVoprfBlind",l.default=e}),98);
__d("LSVoprfCreateNonce.nop",["LSSynchronousPromise","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e=32,s=function(n,r){var t=e,a=new Uint8Array(t);return o("XPlatReactCrypto").getRandomValues(a),o("LSSynchronousPromise").makeSynchronousPromise([a.buffer])};s.__nop_name__="LSVoprfCreateNonce",l.default=s}),98);
__d("LSTaskSerializerAcsIssueNextSync",["LSBase64Encode.nop","LSGetCurrentTokenPoolState","LSIssueNextSync","LSVoprfBlind.nop","LSVoprfCreateNonce.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(310).fetch([[[e[0]]]]).next().then(function(e,o){var a,i=e.done,l=e.value;return i?((function(e){t.logger(e).mustfix(e)})("Request context for the passed task_id was not found"),a=[void 0,void 0,void 0],r[0]=a[0],r[1]=a[1],r[2]=a[2]):(o=l.item,t.sequence([function(e){return r[9]=o.projectName,r[10]=o.maxClientTokenPoolSize,t.storedProcedure(n("LSGetCurrentTokenPoolState"),r[9]).then(function(e){var t;return t=e,r[4]=t[0],r[5]=t[1],t})},function(e){var o;return t.i64.eq(r[4],t.i64.cast([0,0]))||t.i64.eq(r[4],t.i64.cast([0,1]))?t.resolve((r[11]=new t.Map,r[11].set("project_name",r[9]),r[12]=t.toJSON(r[11]),o=[r[12],t.i64.cast([0,351]),void 0],r[6]=o[0],r[7]=o[1],r[8]=o[2])):t.sequence([function(e){return r[11]=t.i64.of_float(Date.now()),t.islc(t.sortBy(t.filter(t.db.table(307).fetch(),function(e){return e.projectName===r[9]&&t.i64.gt(e.expirationTimestampMs,r[11])}),[["expirationTimestampMs","DESC"]]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?((function(e){t.logger(e).mustfix(e)})("A config for the passed project name was not found"),r[16]=new t.Map,r[16].set("project_name",r[9]),r[16].set("max_client_token_pool_size",r[10]),r[17]=t.toJSON(r[16]),a=[r[17],t.i64.cast([0,362]),void 0],r[12]=a[0],r[13]=a[1],r[14]=a[2]):(o=l.item,t.sequence([function(e){return r[24]=o.configId,r[16]=o.maxEvals,r[26]=o.tokenPollFrequencyMs,r[25]=o.maxClientTokenPoolSize,r[17]=t.i64.sub(r[10],r[5]),r[23]=t.i64.lt(r[16],r[17])?r[16]:r[17],r[18]=t.createArray(),t.i64.gt(r[23],t.i64.cast([0,0]))?t.loopAsync(r[23],function(e){return r[27]=e,t.sequence([function(e){return t.nativeOperation(n("LSVoprfCreateNonce.nop")).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return t.blobs.neq(r[28],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSVoprfBlind.nop"),r[28]).then(function(e){var t;return t=e,r[29]=t[0],r[30]=t[1],t})},function(e){return t.blobs.neq(r[29],void 0)&&t.blobs.neq(r[30],void 0)?t.sequence([function(e){return r[31]=t.i64.cast([-1,4294967295]),t.db.table(308).peekNextAutoIncrementId().then(function(e){return r[31]=e})},function(e){return t.db.table(308).add({tokenId:void 0,blindedNonce:r[29],blindingFactor:r[30],nonce:r[28],configId:r[24]})},function(e){return t.db.table(308).fetch([[[r[31]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[32]=t.i64.cast([-1,4294967295]):(n=a.item,r[32]=n.tokenId)})},function(e){return t.i64.eq(r[32],t.i64.cast([-1,4294967295]))?t.sequence([function(e){return t.islc(t.db.table(308).fetchDesc([[[{gt:t.i64.cast([0,0])}]]]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?r[37]=t.i64.cast([-1,4294967295]):(n=a.item,r[37]=n.tokenId)})},function(e){return r[34]=r[37]}]):t.resolve(r[34]=r[32])},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[29]).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[36]=new t.Map,r[36].set("id",r[34]),r[36].set("data",r[35]==null?"":r[35]),r[37]=(r[18].push(r[36]),r[18])}]):t.resolve()}]):t.resolve()}])}):t.resolve()},function(e){var o;return r[19]=t.i64.of_int32(r[18].length),t.i64.gt(r[19],t.i64.cast([0,0]))?t.resolve((r[27]=new t.Map,r[27].set("project_name",r[9]),r[27].set("config_id",r[24]),r[27].set("blinded_nonces",r[18]),r[28]=t.toJSON(r[27]),o=[r[28],t.i64.cast([0,354]),void 0],r[20]=o[0],r[21]=o[1],r[22]=o[2])):t.sequence([function(e){var o;return t.i64.neq(r[26],void 0)?t.sequence([function(e){var o;return t.i64.neq(r[25],void 0)?t.sequence([function(e){return(function(e){t.logger(e).info(e)})(["Already have the max number of tokens. Scheduling next ACS token sync locally for project: ",r[9]].join("")),t.storedProcedure(n("LSIssueNextSync"),r[25],r[9],r[26],!1)},function(e){var t;return t=[void 0,void 0,void 0],r[30]=t[0],r[31]=t[1],r[32]=t[2],t}]):t.resolve(((function(e){t.logger(e).info(e)})(["token_poll_frequency is nonnull but max_client_token_pool_size is null. Already have the max number of tokens. Scheduling the next ACS token sync for project: ",r[9]].join("")),r[33]=new t.Map,r[33].set("project_name",r[9]),r[33].set("max_client_token_pool_size",r[10]),r[34]=t.toJSON(r[33]),o=[r[34],t.i64.cast([0,362]),void 0],r[30]=o[0],r[31]=o[1],r[32]=o[2]))},function(e){var t;return t=[r[30],r[31],r[32]],r[27]=t[0],r[28]=t[1],r[29]=t[2],t}]):t.resolve(((function(e){t.logger(e).info(e)})(["Already have the max number of tokens. Scheduling the next ACS token sync for project: ",r[9]].join("")),r[30]=new t.Map,r[30].set("project_name",r[9]),r[30].set("max_client_token_pool_size",r[10]),r[31]=t.toJSON(r[30]),o=[r[31],t.i64.cast([0,362]),void 0],r[27]=o[0],r[28]=o[1],r[29]=o[2]))},function(e){var t;return t=[r[27],r[28],r[29]],r[20]=t[0],r[21]=t[1],r[22]=t[2],t}])},function(e){var t;return t=[r[20],r[21],r[22]],r[12]=t[0],r[13]=t[1],r[14]=t[2],t}]))})},function(e){var t;return t=[r[12],r[13],r[14]],r[6]=t[0],r[7]=t[1],r[8]=t[2],t}])},function(e){var t;return t=[r[6],r[7],r[8]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}]))})},function(e){var t;return t=[r[0],r[1],r[2]],o[0]=t[0],o[1]=t[1],o[2]=t[2],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsTaskSerializerAcsIssueNextSyncStoredProcedure",e.__tables__=["acs_request_context","secure_acs_configurations","secure_acs_blinded_tokens"],a.exports=e}),null);
__d("LSTaskSerializerDeleteChatHistory",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i=r.done,l=r.value;return i?(n[4]=t.createArray(),n[5]=(n[4].push("taskSerializerDeleteChatHistory: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=l.item,t.sequence([function(e){return n[8]=o.threadKey,t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o,a=e.done,i=e.value;return a?(n[9]=t.createArray(),n[10]=(n[9].push("taskSerializerDeleteChatHistory: Thread not found"),n[9]),n[11]=(n[9].push(n[8]),n[9]),n[12]=t.toJSON(n[9]),(function(e){t.logger(e).mustfix(e)})(n[12]),o=[void 0,void 0,void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]):(r=i.item,t.sequence([function(e){return t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[9]=t.i64.cast([0,1]):(r=a.item,n[14]=r.syncGroup,t.i64.neq(n[14],void 0)?n[13]=n[14]:n[13]=t.i64.cast([0,1]),n[9]=n[13])})},function(e){var r;return n[11]=new t.Map,n[11].set("thread_key",n[8]),n[11].set("sync_group",n[9]),n[12]=t.toJSON(n[11]),r=[n[12],t.i64.cast([0,903]),void 0],n[4]=r[0],n[5]=r[1],n[6]=r[2]}]))})},function(e){var t;return t=[n[4],n[5],n[6]],n[0]=t[0],n[1]=t[1],n[2]=t[2],t}]))})},function(e){var t;return t=[n[0],n[1],n[2]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerDeleteChatHistoryStoredProcedure",e.__tables__=["threads_optimistic_context","threads"],a.exports=e}),null);
__d("LSTaskSerializerE2eeMessageIntegrityCheckV2",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,n.i64.cast([0,705]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerE2eeMessageIntegrityCheckV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerE2eeMetadataThreadIntegrityCheck",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,n.i64.cast([0,700]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTaskSerializerE2eeMetadataThreadIntegrityCheckStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupAction",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,n.i64.cast([0,319]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupActionStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsLoopingUpload",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] Beginning execution."),r[1]=t.i64.of_float(Date.now()),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] LSEncryptedBackupsLoopingUploadPayloadsTable table not found"),r[3]="LSEncryptedBackupsLoopingUploadPayloadsTable table not found",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] ","",r[3]].join("")),r[2]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure",r[3],r[2],t.i64.cast([0,3]))},function(e){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.random(),r[7]="Finishing execution. Execution time: ",r[8]=t.i64.to_string(t.i64.sub(r[4],r[0])),r[9]=" ms",r[6]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] ",r[6],r[7],r[6],r[8],r[6],r[9]].join("")),t.i64.eq(t.i64.mod_(r[5],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[10]=",",r[11]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsLoopingUpload",[r[7],r[10],r[8],r[10],r[9]].join(""),r[11],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=['{"request_id":"unknown","upload_type":"FBN","payload":{"error_code":2,"operation":"","error_message":"","__typename":"MPSUploadFailurePayload"}}',t.i64.cast([0,50043]),void 0],o[0]=n[0],o[1]=n[1],o[2]=n[2],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSQueryLocalPersistenceStoreForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i){var l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.local_message_persistence_store).filter(function(e){var t=e.offlineThreadingId,n=e.threadId;return n===a&&i===t}));if(l.length===0)return(e||(e=n("Promise"))).resolve([void 0,void 0,!1]);var s=l[0];return(e||(e=n("Promise"))).resolve([s.messagePayload,s.messageTimestampMs,!1])});function r(e,n,r,o){return t.apply(this,arguments)}return r})();s.__nop_name__="LSQueryLocalPersistenceStoreForBackup",l.default=s}),98);
__d("LSQueryLocalPersistenceStoreSupplementalForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i,l){var s=yield o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.local_message_persistence_store_supplemental).filter(function(e){var t=e.supplementalKey,n=e.threadId,r=e.toplevelOfflineThreadingId;return n===a&&r===i&&t===l}));return s==null?(e||(e=n("Promise"))).resolve([void 0,void 0]):(e||(e=n("Promise"))).resolve([s.messagePayload,s.messageTimestampMs])});function r(e,n,r,o,a){return t.apply(this,arguments)}return r})();s.__nop_name__="LSQueryLocalPersistenceStoreSupplementalForBackup",l.default=s}),98);
__d("LSQueryLocalPersistenceStoreTagsForBackup.nop",["LSVec","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=":",u=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l){var u=yield o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.local_message_persistence_store_tag_index.index("offlineThreadingId")).getKeyRange(l,i));if(u==null)return(e||(e=n("Promise"))).resolve([r("LSVec").ofArray([])]);var c=u.tag;return(e||(e=n("Promise"))).resolve([r("LSVec").ofArray(c.split(s))])});function a(e,n,r,o){return t.apply(this,arguments)}return a})();u.__nop_name__="LSQueryLocalPersistenceStoreTagsForBackup",l.default=u}),98);
__d("LSLoadUnencryptedProtobufWithInputs",["LSBase64Encode.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadUnencryptedProtobufWithInputs] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.i64.eq(e[0],t.i64.cast([0,1]))?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[10]=t[0],r[11]=t[1],r[12]=t[2],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(o){var a,i,l;return t.blobs.neq(r[10],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[10]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(n){var o,a,i;return r[16]!==void 0?(r[13]!==void 0?(r[21]=new t.Map,r[21].set("message_tags",r[13]),r[22]=t.toJSON(r[21]),r[19]=r[22]):r[19]=void 0,r[20]=new t.Map,r[20].set("backup_action",e[0]),r[20].set("protobuf_encrypted",r[16]),r[20].set("supplemental_data_encrypted",void 0),r[20].set("timestamp_ms",e[4]),r[20].set("message_tags",r[19]),o=[r[20],void 0],r[17]=o[0],r[18]=o[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,68])),r[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[19].set("error_message",""),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]),i=[r[17],r[18]],r[14]=i[0],r[15]=i[1]}]):t.resolve((r[12]?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),r[18]=new t.Map,r[18].set("error_code",t.i64.cast([0,70])),r[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[18].set("error_message",""),a=[void 0,r[18]],r[16]=a[0],r[17]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),r[18]=new t.Map,r[18].set("error_code",t.i64.cast([0,63])),r[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[18].set("error_message",""),i=[void 0,r[18]],r[16]=i[0],r[17]=i[1]),l=[r[16],r[17]],r[14]=l[0],r[15]=l[1]))},function(e){var t;return t=[r[14],r[15]],r[2]=t[0],r[3]=t[1],t}]):t.sequence([function(o){var a,i,l;return t.i64.eq(e[0],t.i64.cast([0,2]))?t.sequence([function(o){var a;return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),e[1],e[2],e[3]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){var a;return t.blobs.neq(r[14],void 0)?t.sequence([function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(o){var a;return t.blobs.neq(r[19],void 0)?t.sequence([function(e){return r[22]=new t.Map,r[22].set("sk_ciphertext",r[19]),r[22].set("sk_hash",r[19]),t.nativeOperation(n("LSBase64Encode.nop"),r[14]).then(function(e){var t;return t=e,r[23]=t[0],t})},function(n){var o,a,i;return r[23]!==void 0?(r[16]!==void 0?(r[28]=new t.Map,r[28].set("message_tags",r[16]),r[29]=t.toJSON(r[28]),r[26]=r[29]):r[26]=void 0,r[27]=new t.Map,r[27].set("backup_action",e[0]),r[27].set("protobuf_encrypted",r[23]),r[27].set("supplemental_data_encrypted",r[22]),r[27].set("timestamp_ms",e[4]),r[27].set("message_tags",r[26]),o=[r[27],void 0],r[24]=o[0],r[25]=o[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),r[26]=new t.Map,r[26].set("error_code",t.i64.cast([0,68])),r[26].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[26].set("error_message",""),a=[void 0,r[26]],r[24]=a[0],r[25]=a[1]),i=[r[24],r[25]],r[20]=i[0],r[21]=i[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_FORMATTING_FAILED"),r[22]=new t.Map,r[22].set("error_code",t.i64.cast([0,69])),r[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[22].set("error_message",""),a=[void 0,r[22]],r[20]=a[0],r[21]=a[1]))},function(e){var t;return t=[r[20],r[21]],r[17]=t[0],r[18]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,64])),r[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[19].set("error_message",""),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]))},function(e){var t;return t=[r[17],r[18]],r[12]=t[0],r[13]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),r[14]=new t.Map,r[14].set("error_code",t.i64.cast([0,65])),r[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[14].set("error_message",""),a=[void 0,r[14]],r[12]=a[0],r[13]=a[1]))},function(e){var t;return t=[r[12],r[13]],r[10]=t[0],r[11]=t[1],t}]):t.resolve((t.i64.eq(e[0],t.i64.cast([0,3]))?(r[14]=new t.Map,r[14].set("backup_action",e[0]),r[14].set("protobuf_encrypted",void 0),r[14].set("supplemental_data_encrypted",void 0),r[14].set("timestamp_ms",e[4]),r[14].set("message_tags",void 0),a=[r[14],void 0],r[12]=a[0],r[13]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error INVALID_BACKUP_OPERATION"),r[14]=new t.Map,r[14].set("error_code",t.i64.cast([-1,4294967289])),r[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[14].set("error_message",""),i=[void 0,r[14]],r[12]=i[0],r[13]=i[1]),l=[r[12],r[13]],r[10]=l[0],r[11]=l[1]))},function(e){var t;return t=[r[10],r[11]],r[2]=t[0],r[3]=t[1],t}])},function(e){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.random(),r[7]="Finishing execution. Execution time: ",r[8]=t.i64.to_string(t.i64.sub(r[4],r[0])),r[9]=" ms",r[6]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadUnencryptedProtobufWithInputs] ",r[6],r[7],r[6],r[8],r[6],r[9]].join("")),t.i64.eq(t.i64.mod_(r[5],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[10]=",",r[11]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufWithInputs",[r[7],r[10],r[8],r[10],r[9]].join(""),r[11],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[2],r[3]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLoadUnencryptedProtobufBackupSerializedPayloadData",["LSLoadUnencryptedProtobufWithInputs","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){var o;return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[18]=t.i64.mul(r[1],t.i64.cast([0,1e6])),t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,o){var a,i,l=n.done,s=n.value;return l?(r[30]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(r[30],t.i64.cast([0,1e6])),r[18]),void 0],r[22]=a[0],r[23]=a[1],r[24]=a[2],r[25]=a[3],r[26]=a[4],r[27]=a[5],r[28]=a[6]):(o=s.item,r[30]=t.i64.of_float(Date.now()),i=[e[0],o.queueName,o.enqueueTimestampMs,o.priority,o.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(r[30],t.i64.cast([0,1e6])),r[18]),void 0],r[22]=i[0],r[23]=i[1],r[24]=i[2],r[25]=i[3],r[26]=i[4],r[27]=i[5],r[28]=i[6])})},function(e){var t;return t=[r[22],r[23],r[24],r[25],r[26],r[27],r[28]],r[2]=t[0],r[3]=t[1],r[4]=t[2],r[5]=t[3],r[6]=t[4],r[7]=t[5],r[8]=t[6],t}])},function(o){return r[9]=new t.Map,r[9].set("task_id",r[2]),r[9].set("queue_name",r[3]),r[9].set("enqueue_timestamp_ms",r[4]),r[9].set("priority",r[5]),r[9].set("first_executed_timestamp_ms",r[6]),r[9].set("execution_time_ns",r[7]),r[9].set("echo_encoding_execution_time_ns",r[8]),r[10]=new t.Map,r[10].set("task_metadata",r[9]),r[10].set("action_type",void 0),r[10].set("content_type",void 0),r[10].set("identifiers",void 0),r[10].set("identifiers_v2",void 0),r[10].set("task_creation_source",void 0),r[10].set("message_payload_source",t.i64.cast([0,2])),t.filter(t.db.table(305).fetch(),function(n){return t.i64.eq(n.pendingBackupTaskId,e[0])}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(r[22]=new t.Map,r[22].set("error_code",t.i64.cast([0,5])),r[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure"),r[22].set("error_message",""),i=[void 0,r[22],r[10]],r[11]=i[0],r[12]=i[1],r[13]=i[2]):(a=s.item,t.sequence([function(n){var o;return r[39]=a.actThreadId,r[40]=a.toplevelOfflineThreadingId,r[23]=a.messageTimestampMs,r[22]=new t.Map,r[22].set("backup_id","openEbUploadGenericBackupId"),r[22].set("act_thread_id",r[39]),r[22].set("server_thread_id",r[39]),r[22].set("timestamp",t.i64.to_string(r[23])),r[22].set("otid",r[40]),r[24]=new t.Map,r[24].set("backup_id","openEbUploadGenericBackupId"),r[24].set("act_thread_id",r[39]),r[24].set("timestamp",t.i64.to_string(r[23])),r[24].set("otid",r[40]),t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,o){var a,i,l=n.done,s=n.value;return l?(r[49]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(r[49],t.i64.cast([0,1e6])),r[18]),void 0],r[41]=a[0],r[42]=a[1],r[43]=a[2],r[44]=a[3],r[45]=a[4],r[46]=a[5],r[47]=a[6]):(o=s.item,r[49]=t.i64.of_float(Date.now()),i=[e[0],o.queueName,o.enqueueTimestampMs,o.priority,o.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(r[49],t.i64.cast([0,1e6])),r[18]),void 0],r[41]=i[0],r[42]=i[1],r[43]=i[2],r[44]=i[3],r[45]=i[4],r[46]=i[5],r[47]=i[6])})},function(e){var t;return t=[r[41],r[42],r[43],r[44],r[45],r[46],r[47]],r[25]=t[0],r[26]=t[1],r[27]=t[2],r[28]=t[3],r[29]=t[4],r[30]=t[5],r[31]=t[6],t}])},function(e){return r[32]=new t.Map,r[32].set("task_id",r[25]),r[32].set("queue_name",r[26]),r[32].set("enqueue_timestamp_ms",r[27]),r[32].set("priority",r[28]),r[32].set("first_executed_timestamp_ms",r[29]),r[32].set("execution_time_ns",r[30]),r[32].set("echo_encoding_execution_time_ns",r[31]),r[33]=new t.Map,r[33].set("task_metadata",r[32]),r[33].set("action_type",void 0),r[33].set("content_type",void 0),r[33].set("identifiers",void 0),r[33].set("identifiers_v2",r[24]),r[33].set("task_creation_source",void 0),r[33].set("message_payload_source",t.i64.cast([0,2])),t.storedProcedure(n("LSLoadUnencryptedProtobufWithInputs"),a.backupAction,r[39],r[40],a.supplementalKey,r[23],r[22]).then(function(e){var t;return t=e,r[34]=t[0],r[35]=t[1],t})},function(e){var n,o,i;return r[34]!==void 0?(r[41]=new t.Map,r[41].set("unencrypted_protobuf_backup_payload",r[34]),r[41].set("message_identifiers",r[22]),r[41].set("attachment_backup_payload",a.attachmentPayload),r[41].set("sender_id",a.senderId),r[41].set("extra_data_for_eb_upload",void 0),n=[r[41],void 0,r[33]],r[36]=n[0],r[37]=n[1],r[38]=n[2]):(o=[void 0,r[35],r[33]],r[36]=o[0],r[37]=o[1],r[38]=o[2]),i=[r[36],r[37],r[38]],r[11]=i[0],r[12]=i[1],r[13]=i[2]}]))})},function(e){return r[15]=t.i64.of_float(Date.now()),r[16]=t.i64.random(),r[19]="Finishing execution. Execution time: ",r[20]=t.i64.to_string(t.i64.sub(r[15],r[0])),r[21]=" ms",r[17]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] ",r[17],r[19],r[17],r[20],r[17],r[21]].join("")),t.i64.eq(t.i64.mod_(r[16],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[22]=",",r[23]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufBackupSerializedPayloadData",[r[19],r[22],r[20],r[22],r[21]].join(""),r[23],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[11],r[12],r[13]],o[0]=t[0],o[1]=t[1],o[2]=t[2],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure",e.__tables__=["pending_tasks","pending_protobuf_backups_context"],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsOpenUpload",["LSArrayGetObjectAt","LSBase64Encode.nop","LSDeserializeFromJsonIntoDictionaryV2.nop","LSLoadUnencryptedProtobufBackupSerializedPayloadData","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSLoadUnencryptedProtobufBackupSerializedPayloadData"),e[0]).then(function(e){var t;return t=e,r[2]=t[0],r[3]=t[1],r[4]=t[2],t})},function(e){var o,a,i;return r[2]!==void 0?t.sequence([function(e){return r[15]=r[2].get("message_identifiers"),r[16]=r[2].get("unencrypted_protobuf_backup_payload"),r[17]=r[15].get("server_thread_id"),r[18]=r[15].get("timestamp"),r[19]=r[15].get("otid"),r[20]=r[15].get("act_thread_id"),r[21]=new t.Map,r[21].set("server_thread_key",r[17]),r[21].set("timestamp",r[18]),r[21].set("otid",r[19]),r[21].set("wa_thread_id",t.i64.from_string(r[20])),r[22]=new t.Map,r[22].set("message_identifiers",r[21]),r[23]=r[2].get("extra_data_for_eb_upload"),r[23]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[23]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[33]=new t.Map,r[34]=r[32].keys(),r[35]=t.i64.of_int32(r[34].length),t.i64.gt(r[35],t.i64.cast([0,0]))?t.loopAsync(r[35],function(e){return r[36]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[34],r[36]).then(function(e){var t;return t=e,r[37]=t[0],r[38]=t[1],t})},function(e){return r[39]=r[32].get(r[37]),r[33].set(r[37],r[39])}])}):t.resolve()},function(e){return r[24]=r[33]}]):t.resolve(r[24]=void 0)},function(e){return r[24]!==void 0?t.sequence([function(e){return r[32]=r[24].get("mt"),r[32]?r[33]=!1:r[33]=!0,r[33]?t.resolve(r[34]=void 0):t.sequence([function(e){return r[36]=new t.Map,r[37]=r[32].keys(),r[38]=t.i64.of_int32(r[37].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[39]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[39]).then(function(e){var t;return t=e,r[40]=t[0],r[41]=t[1],t})},function(e){return r[42]=r[32].get(r[40]),r[36].set(r[40],r[42])}])}):t.resolve()},function(e){return r[34]=r[36]}])},function(e){return r[34]!==void 0?(r[36]=t.toJSON(r[34]),r[35]=r[36]):r[35]=void 0,r[25]=r[35]}]):t.resolve(r[25]=void 0)},function(e){return r[26]=r[16].get("supplemental_data_encrypted"),r[26]!==void 0?t.sequence([function(e){return r[32]=r[16].get("protobuf_encrypted"),r[33]=r[16].get("backup_action"),r[34]=r[16].get("timestamp_ms"),r[35]=r[26].get("sk_ciphertext"),t.nativeOperation(n("LSBase64Encode.nop"),r[35]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[37]=r[26].get("sk_hash"),t.nativeOperation(n("LSBase64Encode.nop"),r[37]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=new t.Map,r[39].set("supplementary_data_key",void 0),r[39].set("encrypted_protobuf",r[32]),r[39].set("key_value_backup_action",r[33]),r[39].set("protobuf_ts_ms",r[34]),r[39].set("supplemental_key_ciphertext",r[36]),r[39].set("supplemental_key_hash",r[38]),r[39].set("message_tags",r[25]),r[27]=r[39]}]):t.resolve((r[32]=r[16].get("protobuf_encrypted"),r[33]=r[16].get("backup_action"),r[34]=r[16].get("timestamp_ms"),r[35]=new t.Map,r[35].set("supplementary_data_key",void 0),r[35].set("encrypted_protobuf",r[32]),r[35].set("key_value_backup_action",r[33]),r[35].set("protobuf_ts_ms",r[34]),r[35].set("message_tags",r[25]),r[27]=r[35]))},function(e){return r[22].set("key_value_backup_unencrypted_payload",r[27]),r[28]=r[2].get("sender_id"),r[22].set("sender_id",r[28]),r[29]=r[2].get("attachment_backup_payload"),r[29]!==void 0&&r[22].set("attachment_backup_payload",r[29]),r[24]!==void 0?t.sequence([function(e){return r[32]=r[24].get("ttd"),r[32]?r[33]=!1:r[33]=!0,r[33]?t.resolve(r[34]=void 0):t.sequence([function(e){return r[36]=new t.Map,r[37]=r[32].keys(),r[38]=t.i64.of_int32(r[37].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[39]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[39]).then(function(e){var t;return t=e,r[40]=t[0],r[41]=t[1],t})},function(e){return r[42]=r[32].get(r[40]),r[36].set(r[40],r[42])}])}):t.resolve()},function(e){return r[34]=r[36]}])},function(e){return r[34]!==void 0?(r[36]=t.toJSON(r[34]),r[35]=r[36]):r[35]=void 0,r[30]=r[35]}]):t.resolve(r[30]=void 0)},function(e){var n;return r[30]!==void 0&&r[22].set("tags_to_delete",r[30]),r[31]=t.toJSON(r[22]),n=[r[31],void 0,r[4]],r[5]=n[0],r[6]=n[1],r[7]=n[2]}]):t.resolve((r[3]?r[15]=!1:r[15]=!0,r[15]?(a=[void 0,void 0,r[4]],r[16]=a[0],r[17]=a[1],r[18]=a[2]):(o=[void 0,r[3],r[4]],r[16]=o[0],r[17]=o[1],r[18]=o[2]),i=[r[16],r[17],r[18]],r[5]=i[0],r[6]=i[1],r[7]=i[2]))},function(e){return r[15]=new t.Map,r[16]=r[15].set("success",r[5]),r[17]=r[15].set("failure",r[6]),r[18]=r[15].set("context",r[7]),r[19]=t.toJSON(r[15]),r[8]=r[19],r[9]=t.i64.of_float(Date.now()),r[10]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[9],r[0])),r[14]=" ms",r[11]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] ",r[11],r[12],r[11],r[13],r[11],r[14]].join("")),t.i64.eq(t.i64.mod_(r[10],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsOpenUpload",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[8],t.i64.cast([0,50048])],o[0]=n[0],o[1]=n[1],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsOpenUploadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsRestoreWithSerializer",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,void 0,void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeriveValueSecretRefV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][deriveValueSecretRefV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]=e[2].get("message_payload_encryption_keys"),r[3]=r[2].get("encryption_version"),r[4]=r[2].get("epoch_anon_id"),r[5]=r[2].get("epoch_root_key"),r[6]=r[2].get("payload_key"),r[7]=t.createArray(),r[41]=(r[7].push(t.i64.cast([0,6])),r[7]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(e){var t;return t=e,r[8]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[8],void 0,r[4],r[7]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return r[9]?r[10]=!1:r[10]=!0,r[10]?t.resolve(r[11]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[9],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[11]=r[43]==null?"":r[43]}])},function(e){return r[12]=t.createArray(),r[41]=(r[12].push(t.i64.cast([0,6])),r[12]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[13],void 0,r[5],r[12]).then(function(e){var t;return t=e,r[14]=t[0],t})},function(e){return r[14]?r[15]=!1:r[15]=!0,r[15]?t.resolve(r[16]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[14],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[16]=r[43]==null?"":r[43]}])},function(e){return r[17]=t.createArray(),r[41]=(r[17].push(t.i64.cast([0,6])),r[17]),t.nativeOperation(n("LSGetBlobFromString.nop"),"message_key_debug").then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[18],void 0,r[6],r[17]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[19]?r[20]=!1:r[20]=!0,r[20]?t.resolve(r[21]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[19],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[21]=r[43]==null?"":r[43]}])},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[5]).then(function(e){var t;return t=e,r[22]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),[r[22]==null?"":r[22],e[0]].join("")).then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return r[24]=t.createArray(),r[41]=(r[24].push(t.i64.cast([0,6])),r[24]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(e){var t;return t=e,r[25]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[25],void 0,r[23],r[24]).then(function(e){var t;return t=e,r[26]=t[0],t})},function(e){return r[26]?r[27]=!1:r[27]=!0,r[27]?t.resolve(r[28]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[26],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[28]=r[43]==null?"":r[43]}])},function(e){return r[29]=":",t.blobs.neq(r[5],void 0)?t.sequence([function(e){return r[41]=t.createArray(),r[47]=(r[41].push(t.i64.cast([0,18])),r[41]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,r[5],r[41]).then(function(e){var t;return t=e,r[42]=t[0],t})},function(e){return r[42]!==void 0?t.sequence([function(e){return r[47]=t.i64.of_int32(r[42].length),t.i64.ge(r[47],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[42],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[49]=t[0],r[50]=t[1],t})},function(e){return r[48]=r[49]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[50]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[50]].join("")),r[49]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[50],r[49],t.i64.cast([0,3]))},function(e){return r[48]=void 0}])},function(e){return r[43]=r[48]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[48]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[48]].join("")),r[47]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[48],r[47],t.i64.cast([0,3]))},function(e){return r[43]=void 0}])},function(e){return t.blobs.neq(r[43],void 0)?r[44]=!0:r[44]=!1,r[44]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),t.nativeOperation(n("LSBase64Encode.nop"),r[43]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return r[45]!==void 0?r[46]=r[45]:r[46]="encodingfailed",r[30]=r[46]}]):t.resolve(r[30]="null")},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[4]).then(function(e){var t;return t=e,r[31]=t[0],t})},function(o){return r[32]=new t.Map,r[32].set("encryption_version",r[3]),r[32].set("epoch_anon_id",r[31]==null?"":r[31]),r[32].set("message_encryption_values",[r[11],r[29],r[16],r[29],r[21],r[29],r[28]].join("")),r[32].set("root_key_fingerprint",r[30]),r[32].set("backup_id",e[1]),r[33]=t.toJSON(r[32]),r[34]=new t.Map,r[34].set("value_secret_ref",r[33]),r[35]=t.i64.of_float(Date.now()),r[36]=t.i64.random(),r[38]="Finishing execution. Execution time: ",r[39]=t.i64.to_string(t.i64.sub(r[35],r[0])),r[40]=" ms",r[37]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deriveValueSecretRefV2] ",r[37],r[38],r[37],r[39],r[37],r[40]].join("")),t.i64.eq(t.i64.mod_(r[36],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[41]=",",r[42]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deriveValueSecretRefV2",[r[38],r[41],r[39],r[41],r[40]].join(""),r[42],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[34],void 0],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsDeriveValueSecretRefV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(o,a,i){var t=Array.from(new Uint8Array(i)),l=t.map(function(e){return e.toString(16).padStart(2,"0")}),s=l.join("").toUpperCase();return(e||(e=n("Promise"))).resolve(r("LSResult")(s))};s.__nop_name__="LSBinaryToHex",l.default=s}),98);
__d("LSGetBlobFromInt64BE.nop",["GetBlobFromInt64BE"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r){return o("GetBlobFromInt64BE").GetBlobFromInt64BE(r)};e.__nop_name__="LSGetBlobFromInt64BE",l.default=e}),98);
__d("LSHmac_v2.nop",["Hmac_v2"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a){return r("Hmac_v2")(o,a)};e.__nop_name__="LSHmac_v2",l.default=e}),98);
__d("LSCryptoUtils",["FBLogger","XPlatReactTextDecoder","XPlatReactTextEncoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return new Uint8Array(e)}function s(e){var t=new(o("XPlatReactTextEncoder")).TextEncoder;return t.encode(e)}function u(e){var t=new(o("XPlatReactTextDecoder")).TextDecoder;return t.decode(e)}function c(e){return u(new Uint8Array(e))}function d(e){return s(e).buffer}function m(e,t){var n=e.byteLength,o=t.byteLength;if(n!==o)throw r("FBLogger")("messenger_web").mustfixThrow("[LS] Mismatched lengths for modAdd, %d != %d",n,o);var a=new Uint8Array(n);return new Uint8Array(n).reduceRight(function(n,r,o){var i=e[o],l=t[o],s=i+l+n,u=s>255?[s-256,1]:[s,0];return a[o]=u[0],u[1]},0),a}l.bufToUint8=e,l.strToUint8=s,l.uint8ToStr=u,l.bufToStr=c,l.strToBuf=d,l.modAddBytes=m}),98);
__d("OcmfClientMap",["CryptoLogger","LSCryptoUtils","Promise","requireDeferred","tweetnacl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("ristretto255").__setRef("OcmfClientMap"),u=function(r,a){var t=o("tweetnacl").hash(o("LSCryptoUtils").bufToUint8(a));return(e||(e=n("Promise"))).all([t,s.load()]).then(function(e){var t=e[0],n=e[1],o=n.fromHash(new Uint8Array(t)),a=n.scalarMult(new Uint8Array(r),o);return a.buffer}).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("ocmf_client_map"),e).mustfix("Failed OcmfClientMap."),e})};l.default=u}),98);
__d("LSOcmfClientMap.nop",["LSResult","OcmfClientMap"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a){return r("OcmfClientMap")(o,a).then(function(e){return r("LSResult")(e)})};e.__nop_name__="LSOcmfClientMap",l.default=e}),98);
__d("UInt8Array",["XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.length;if(t>0&&t%2===0&&/^[\da-f]+$/gi.test(e)){for(var n=[],r=0,o=t/2|0;r<o;++r){var a=parseInt(e.substring(r<<1,(r<<1)+2|0),16);n.push(a)}return new Uint8Array(n)}}function s(e){return o("XPlatReactCrypto").getRandomValues(new Uint8Array(e)).buffer}function u(e){var t=e.filter(function(e){return e.byteLength!==0}),n=t.reduce(function(e,t){return e+t.byteLength|0},0),r=new Uint8Array(n);return t.reduce(function(e,t){return r.set(t,e),e+t.byteLength|0},0),r}l.fromHexString=e,l.getBufferWithRandomValuesFromLength=s,l.concatBytes=u}),98);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","Promise","UInt8Array","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return o("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer}function u(e){var t=e.length;return t%2!==0?"0"+e:e}function c(e){for(var t=BigInt(e),n=u(t.toString(16)),r=n.length,o=r/2,a=[],i=0;i<o;++i)a.push(i*2);return new Uint8Array(a.map(function(e){var t=e+2;return n.slice(e,t)}).map(function(e){return parseInt(e,16)}))}function d(e){var t=e.map(function(e){return e._0});return{_0:o("UInt8Array").concatBytes(t)}}function m(e){return"OPE key has length "+String(e)+", expected  "+String(32)}function p(e,t,n){var r=new ArrayBuffer(0);return o("XPlatReactCrypto").subtleImportKey("raw",e.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(e){return o("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:t.buffer,name:"HKDF",salt:r},e,n*8)}).then(function(e){return{_0:new Uint8Array(e)}})}function _(e,t){return{_0:o("LSCryptoUtils").modAddBytes(e._0,t)}}function f(t,a,i,l){var s=i.byteLength;if(s!==32)throw r("FBLogger")("wmi_eb").mustfixThrow(m(s));var u=l.byteLength,c=function(t,n){var e=new Uint8Array(1+u),r=new Uint8Array(u-n).fill(0);return e.set([n]),e.set(t.subarray(0,n),1),e.set(r,n+1),e};if(u>=255)throw r("FBLogger")("wmi_eb").mustfixThrow("Input is too large");var f=Array.from(l).map(function(e,n){var r=c(l,n),o=new Uint8Array(t);o[t-1]=e;var a=new Uint8Array(i);return p(a,r,t).then(function(e){return _(e,o)})});return(e||(e=n("Promise"))).all(f).then(function(e){return o("UInt8Array").concatBytes([new Uint8Array([a]),d(e)._0])})}function g(e,t,n,r){var o=c(r);return f(e,t,n,o)}l.keyGen=s,l.intStringToBEBytes=c,l.buildKeyLengthErrorMsg=m,l.encryptBigEndianBytes=f,l.encryptIntString=g}),98);
__d("OpeEncrypt",["CryptoLogger","I64","LSResult","OrderPreservingEncryption"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=o("CryptoLogger").CryptoLogger("ope_encrypt");return o("OrderPreservingEncryption").encryptBigEndianBytes((e||(e=o("I64"))).to_int32(a),1,t,new Uint8Array(n)).then(function(e){return r("LSResult")(e.buffer)},function(e){throw o("CryptoLogger").captureError(i,e).mustfix("OpeEncrypt_impl failed"),e})}l.OpeEncrypt=s}),98);
__d("LSOpeEncrypt.nop",["OpeEncrypt"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r,a,i){return o("OpeEncrypt").OpeEncrypt(r,a,i)};e.__nop_name__="LSOpeEncrypt",l.default=e}),98);
__d("TruncateSortKey",["CryptoLogger","LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("CryptoLogger").CryptoLogger("truncate_sort_key");function u(t){if(t.byteLength!==8)throw s.mustfixThrow("Bad length on sort key for truncation");var o=new Uint8Array(t),a=o.subarray(0,2);if(a.some(function(e){return e!==0}))throw s.mustfixThrow("Bad prefix on sort key for truncation");return(e||(e=n("Promise"))).resolve(r("LSResult")(t.slice(2)))}l.TruncateSortKey=u}),98);
__d("LSTruncateSortKey.nop",["TruncateSortKey"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r){return o("TruncateSortKey").TruncateSortKey(r)};e.__nop_name__="LSTruncateSortKey",l.default=e}),98);
__d("LSEncryptIdentifiersV2",["LSBase64Encode.nop","LSBinaryToHex.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][encryptIdentifiersV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]=e[6].get("ocmf_shared_key"),t.nativeOperation(n("LSGetBlobFromString.nop"),e[2]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWFpbGJveF9pZF9zY29wZQ=="),r[3]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[2],r[4]).then(function(e){var t;return t=e,r[5]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[5]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(o){return t.i64.eq(e[0],t.i64.cast([0,2]))&&t.i64.eq(e[1],t.i64.cast([0,2]))?r[7]=e[5]:r[7]=e[3],r[8]=e[6].get("ocmf_shared_key"),t.nativeOperation(n("LSGetBlobFromString.nop"),r[7]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("dGhyZWFkX2lkX3Njb3Bl"),r[9]).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[8],r[10]).then(function(e){var t;return t=e,r[11]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[11]).then(function(e){var t;return t=e,r[12]=t[0],t})},function(o){return r[13]=e[6].get("ope_key"),t.nativeOperation(n("LSGetBlobFromInt64BE.nop"),e[4]).then(function(e){var t;return t=e,r[14]=t[0],t})},function(e){return t.nativeOperation(n("LSTruncateSortKey.nop"),r[14]).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.nativeOperation(n("LSOpeEncrypt.nop"),r[13],r[15],t.i64.cast([0,16])).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return t.nativeOperation(n("LSBinaryToHex.nop"),r[16]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(o){return r[18]=e[6].get("ocmf_shared_key"),t.nativeOperation(n("LSGetBlobFromString.nop"),e[5]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWVzc2FnZV9pZF9zY29wZQ=="),r[19]).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[18],r[20]).then(function(e){var t;return t=e,r[21]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[21]).then(function(e){var t;return t=e,r[22]=t[0],t})},function(e){return r[23]=new t.Map,r[23].set("backup_id_ocmf_partial",r[6]==null?"":r[6]),r[23].set("act_thread_id_ocmf_partial",r[12]==null?"":r[12]),r[23].set("timestamp_encrypted",r[17]==null?"":r[17]),r[23].set("otid_ocmf_partial",r[22]==null?"":r[22]),r[24]=t.i64.of_float(Date.now()),r[25]=t.i64.random(),r[27]="Finishing execution. Execution time: ",r[28]=t.i64.to_string(t.i64.sub(r[24],r[0])),r[29]=" ms",r[26]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][encryptIdentifiersV2] ",r[26],r[27],r[26],r[28],r[26],r[29]].join("")),t.i64.eq(t.i64.mod_(r[25],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[30]=",",r[31]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"encryptIdentifiersV2",[r[27],r[30],r[28],r[30],r[29]].join(""),r[31],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[23],void 0],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsEncryptIdentifiersV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("SymmetricEncryptionCreateEncryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a,i){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_data"),l=o("SymmetricEncryptionPaddingUtils").padData(i),s=o("XPlatReactCrypto").getRandomValues(new Uint8Array(o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes)),u=new(o("HChaCha20")).HChaCha20,c=u.hChaCha20Bytes(s.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,r);return o("XPlatReactCrypto").subtleImportKey("raw",c,"AES-GCM",!1,["encrypt"]).then(function(e){return o("XPlatReactCrypto").subtleEncrypt({additionalData:a,iv:new Uint8Array(s.slice(o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},e,l)}).then(function(t){var r=s.byteLength+t.byteLength,a=new Uint8Array(r);return a.set(s),a.set(new Uint8Array(t),o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(a.buffer))}).catch(function(r){return o("CryptoLogger").captureError(t,r).mustfix("symmetric data encryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};l.default=s}),98);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["SymmetricEncryptionCreateEncryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a,i){return r("SymmetricEncryptionCreateEncryptedData")(o,a,i)};e.__nop_name__="LSSymmetricEncryptionCreateEncryptedData",l.default=e}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return r("LSSymmetricEncryptionCreateEncryptedData.nop")(a,i,l,s,o("LSCryptoUtils").strToBuf(u)).then(function(e){return e[0]}).then(function(t){return(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(t?o("Base64Utils").fromArrayBuffer(t):void 0))}).catch(function(r){return o("CryptoLogger").captureError(t,r).mustfix("symmetric string encryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};s.__nop_name__="LSSymmetricEncryptionCreateEncryptedString",l.default=s}),98);
__d("LSEncryptMessagePayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][encryptMessagePayloadV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]=e[2].get("message_payload_encryption_keys"),r[3]=r[2].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedString.nop"),r[3],t.blobs.of_string(["message_thread","_",e[1]].join("")),e[3]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(o){var a;return r[4]!==void 0?t.sequence([function(e){return r[13]=r[2].get("encryption_version"),r[14]=r[2].get("epoch_anon_id"),r[15]=r[2].get("epoch_root_key"),r[16]=r[2].get("payload_key"),r[17]=t.createArray(),r[45]=(r[17].push(t.i64.cast([0,6])),r[17]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[18],void 0,r[14],r[17]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[19]?r[20]=!1:r[20]=!0,r[20]?t.resolve(r[21]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[19],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[21]=r[47]==null?"":r[47]}])},function(e){return r[22]=t.createArray(),r[45]=(r[22].push(t.i64.cast([0,6])),r[22]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[23],void 0,r[15],r[22]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return r[24]?r[25]=!1:r[25]=!0,r[25]?t.resolve(r[26]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[24],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[26]=r[47]==null?"":r[47]}])},function(e){return r[27]=t.createArray(),r[45]=(r[27].push(t.i64.cast([0,6])),r[27]),t.nativeOperation(n("LSGetBlobFromString.nop"),"message_key_debug").then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[28],void 0,r[16],r[27]).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]?r[30]=!1:r[30]=!0,r[30]?t.resolve(r[31]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[29],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[31]=r[47]==null?"":r[47]}])},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[15]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),[r[32]==null?"":r[32],e[1]].join("")).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return r[34]=t.createArray(),r[45]=(r[34].push(t.i64.cast([0,6])),r[34]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[35],void 0,r[33],r[34]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[36]?r[37]=!1:r[37]=!0,r[37]?t.resolve(r[38]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[36],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[38]=r[47]==null?"":r[47]}])},function(e){return r[39]=":",t.blobs.neq(r[15],void 0)?t.sequence([function(e){return r[45]=t.createArray(),r[51]=(r[45].push(t.i64.cast([0,18])),r[45]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,r[15],r[45]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return r[46]!==void 0?t.sequence([function(e){return r[51]=t.i64.of_int32(r[46].length),t.i64.ge(r[51],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[46],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[53]=t[0],r[54]=t[1],t})},function(e){return r[52]=r[53]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[54]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[54]].join("")),r[53]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[54],r[53],t.i64.cast([0,3]))},function(e){return r[52]=void 0}])},function(e){return r[47]=r[52]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[52]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[52]].join("")),r[51]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[52],r[51],t.i64.cast([0,3]))},function(e){return r[47]=void 0}])},function(e){return t.blobs.neq(r[47],void 0)?r[48]=!0:r[48]=!1,r[48]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),t.nativeOperation(n("LSBase64Encode.nop"),r[47]).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return r[49]!==void 0?r[50]=r[49]:r[50]="encodingfailed",r[40]=r[50]}]):t.resolve(r[40]="null")},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[14]).then(function(e){var t;return t=e,r[41]=t[0],t})},function(n){var o;return r[42]=new t.Map,r[42].set("encryption_version",r[13]),r[42].set("epoch_anon_id",r[41]==null?"":r[41]),r[42].set("message_encryption_values",[r[21],r[39],r[26],r[39],r[31],r[39],r[38]].join("")),r[42].set("root_key_fingerprint",r[40]),r[42].set("backup_id",e[0]),r[43]=t.toJSON(r[42]),r[44]=new t.Map,r[44].set("encrypted_message_payload",r[4]),r[44].set("value_secret_ref",r[43]),o=[r[44],void 0],r[5]=o[0],r[6]=o[1]}]):t.resolve((r[13]=new t.Map,r[13].set("error_code",t.i64.cast([0,40])),r[13].set("stored_procedure","LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure"),r[13].set("error_message",""),a=[void 0,r[13]],r[5]=a[0],r[6]=a[1]))},function(e){return r[7]=t.i64.of_float(Date.now()),r[8]=t.i64.random(),r[10]="Finishing execution. Execution time: ",r[11]=t.i64.to_string(t.i64.sub(r[7],r[0])),r[12]=" ms",r[9]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][encryptMessagePayloadV2] ",r[9],r[10],r[9],r[11],r[9],r[12]].join("")),t.i64.eq(t.i64.mod_(r[8],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[13]=",",r[14]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"encryptMessagePayloadV2",[r[10],r[13],r[11],r[13],r[12]].join(""),r[14],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[5],r[6]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]="",r[3]=void 0,r[4]=void 0,r[5]=void 0,e[0]?t.resolve(0):(r[15]=void 0,t.i64.neq(r[15],void 0)?t.sequence([function(e){return t.count(t.db.table(169).fetch([[[r[15]]]])).then(function(e){return r[16]=e})},function(e){return t.i64.le(r[16],t.i64.cast([0,1]))?t.sequence([function(e){return t.db.table(169).fetch([[[r[15]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[26]=new t.Map,r[26].set("error_msg","Expected a nonempty query result"),r[26].set("code",t.i64.cast([0,3])),r[26].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),r[27]=t.createArray(),r[28]=(r[27].push(r[26]),r[27]),o=[void 0,r[27]],r[22]=o[0],r[23]=o[1]):(n=l.item,r[26]=new t.Map,r[26].set("epoch_id",n.epochId),r[26].set("backup_id",n.backupId),r[26].set("epoch_anon_id_blob",n.epochAnonIdBlob),r[26].set("epoch_root_key_blob",n.epochRootKeyBlob),r[26].set("epoch_status",n.epochStatus),r[26].set("epoch_head",n.epochHead),r[26].set("authority_level",n.authorityLevel),a=[r[26],void 0],r[22]=a[0],r[23]=a[1])})},function(e){return r[25]=new t.Map,r[25].set("value",r[22]),r[25].set("errors",r[23]),r[17]=r[25]}]):t.resolve((r[22]=new t.Map,r[22].set("error_msg","Expected at most one result"),r[22].set("code",t.i64.cast([0,4])),r[22].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),r[23]=t.createArray(),r[25]=(r[23].push(r[22]),r[23]),r[24]=new t.Map,r[24].set("value",void 0),r[24].set("errors",r[23]),r[17]=r[24]))},function(e){return r[18]=r[17].get("value"),r[18]!==void 0?(r[22]=r[18].get("epoch_id"),r[23]=r[18].get("backup_id"),r[24]=r[18].get("epoch_anon_id_blob"),r[25]=r[18].get("epoch_root_key_blob"),r[26]=r[18].get("epoch_status"),r[27]=r[18].get("epoch_head"),r[28]=r[18].get("authority_level"),r[29]=r[17],r[19]=r[29]):(r[22]=r[17].get("errors"),r[23]=r[17].get("errors"),r[24]=new t.Map,r[24].set("value",void 0),r[24].set("errors",r[22]),r[19]=r[24]),r[20]=r[19].get("value"),r[20]!==void 0?(r[22]=r[20].get("epoch_id"),r[23]=r[20].get("backup_id"),r[24]=r[20].get("epoch_anon_id_blob"),r[25]=r[20].get("epoch_root_key_blob"),r[26]=r[20].get("epoch_status"),r[27]=r[20].get("epoch_head"),r[28]=r[20].get("authority_level"),r[2]=t.blobs.to_string(r[24]),r[3]=r[22],r[4]=r[25],t.blobs.neq(r[27],void 0)&&(r[5]=r[27]),r[21]=!0):(r[22]=r[19].get("errors"),r[23]=r[19].get("errors"),r[21]=!1)}]):t.resolve())},function(n){return t.i64.neq(r[3],void 0)?t.resolve(0):t.sequence([function(n){return r[15]=void 0,r[16]="",r[17]=void 0,r[18]=void 0,t.forEach(t.filter(t.db.table(169).fetch(),function(n){return e[0]||t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}),function(e){var n=e.item;return r[20]=t.blobs.to_string(n.epochAnonIdBlob),t.i64.eq([0,r[20].length],[0,r[16].length])?r[19]=r[20]>r[16]:r[19]=t.i64.gt([0,r[20].length],[0,r[16].length]),r[19]?(r[15]=n.epochId,r[16]=r[20],r[17]=n.epochRootKeyBlob,r[18]=n.epochHead):0})},function(e){return t.i64.neq(r[15],void 0)&&(r[2]=r[16],r[3]=r[15],r[4]=r[17],t.blobs.neq(r[18],void 0)&&(r[5]=r[18]),r[19]=t.i64.of_float(Date.now())),0}])},function(e){var o,a,i,l,s,u;return r[11]=t.blobs.of_string(r[2]),t.i64.neq(r[3],void 0)?(t.blobs.neq(r[11],void 0)?(t.blobs.neq(r[4],void 0)?(r[19]=new t.Map,r[19].set("epoch_id",r[3]),r[19].set("epoch_root_key",r[4]),r[19].set("epoch_anon_id",r[11]),r[19].set("epoch_head",r[5]),r[20]=new t.Map,r[20].set("epoch_keys",r[19]),o=[r[20],void 0],r[17]=o[0],r[18]=o[1]):(r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,402])),r[19].set("error_message","failed to query latest epoch"),r[19].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]),i=[r[17],r[18]],r[15]=i[0],r[16]=i[1]):(r[17]=new t.Map,r[17].set("error_code",t.i64.cast([0,403])),r[17].set("error_message","failed to query latest epoch"),r[17].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),l=[void 0,r[17]],r[15]=l[0],r[16]=l[1]),s=[r[15],r[16]],r[6]=s[0],r[7]=s[1]):(r[15]=new t.Map,r[15].set("error_code",t.i64.cast([0,400])),r[15].set("error_message","failed to query latest epoch"),r[15].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),u=[void 0,r[15]],r[6]=u[0],r[7]=u[1]),r[8]=t.i64.of_float(Date.now()),r[9]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[8],r[0])),r[14]=" ms",r[10]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][getLatestEpochKeys] ",r[10],r[12],r[10],r[13],r[10],r[14]].join("")),t.i64.eq(t.i64.mod_(r[9],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[6],r[7]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsGetLatestEpochKeysStoredProcedure",e.__tables__=["secure_encrypted_backups_epochs"],a.exports=e}),null);
__d("LSLoadAndEncryptProtobufWithInputsV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop","LSSymmetricEncryptionCreateEncryptedData.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.i64.eq(e[0],t.i64.cast([0,1]))?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[10]=t[0],r[11]=t[1],r[12]=t[2],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(o){var a,i,l;return r[14]=new t.Map,r[14].set("message_tags",r[13]),r[15]=new t.Map,r[15].set("mt",r[14]),t.blobs.neq(r[10],void 0)?t.sequence([function(o){return r[18]=e[5].get("message_payload_encryption_keys"),r[19]=r[18].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[19],t.blobs.of_string(["message_thread","_",e[1]].join("")),r[10]).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return t.blobs.neq(r[20],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[20]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return r[21]=r[24]}]):t.resolve(r[21]=void 0)},function(o){var a;return r[21]!==void 0?t.sequence([function(e){return r[15]!==void 0?t.sequence([function(e){return r[27]=r[15].get("mt"),r[27]?r[28]=!1:r[28]=!0,r[28]?t.resolve(r[29]=void 0):t.sequence([function(e){return r[31]=new t.Map,r[32]=r[27].keys(),r[33]=t.i64.of_int32(r[32].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[34]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[32],r[34]).then(function(e){var t;return t=e,r[35]=t[0],r[36]=t[1],t})},function(e){return r[37]=r[27].get(r[35]),r[31].set(r[35],r[37])}])}):t.resolve()},function(e){return r[29]=r[31]}])},function(e){return r[29]!==void 0?(r[31]=t.toJSON(r[29]),r[30]=r[31]):r[30]=void 0,r[24]=r[30]}]):t.resolve(r[24]=void 0)},function(n){var o;return r[15]!==void 0?(r[27]=r[15].get("mooos"),r[25]=r[27]):r[25]=void 0,r[26]=new t.Map,r[26].set("backup_action",e[0]),r[26].set("protobuf_encrypted",r[21]),r[26].set("supplemental_data_encrypted",void 0),r[26].set("timestamp_ms",e[4]),r[26].set("message_tags",r[24]),r[26].set("serialized_attachment_backup_payload",void 0),r[26].set("maybe_ooo_supplemental_upload",r[25]),o=[r[26],void 0],r[22]=o[0],r[23]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),r[24]=new t.Map,r[24].set("error_code",t.i64.cast([0,62])),r[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[24].set("error_message",""),a=[void 0,r[24]],r[22]=a[0],r[23]=a[1]))},function(e){var t;return t=[r[22],r[23]],r[16]=t[0],r[17]=t[1],t}]):t.resolve((r[12]?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),r[20]=new t.Map,r[20].set("error_code",t.i64.cast([0,70])),r[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[20].set("error_message",""),a=[void 0,r[20]],r[18]=a[0],r[19]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),r[20]=new t.Map,r[20].set("error_code",t.i64.cast([0,63])),r[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[20].set("error_message",""),i=[void 0,r[20]],r[18]=i[0],r[19]=i[1]),l=[r[18],r[19]],r[16]=l[0],r[17]=l[1]))},function(e){var t;return t=[r[16],r[17]],r[2]=t[0],r[3]=t[1],t}]):t.sequence([function(o){return t.i64.eq(e[0],t.i64.cast([0,2]))?t.sequence([function(o){var a;return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),e[1],e[2],e[3]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){var a;return r[17]=new t.Map,r[17].set("message_tags",r[16]),r[18]=new t.Map,r[18].set("mt",r[17]),t.blobs.neq(r[14],void 0)?t.sequence([function(o){var a;return e[3]!==void 0?t.sequence([function(o){var a;return r[23]=e[5].get("mailbox_root_key_v2"),t.blobs.neq(r[23],void 0)?t.sequence([function(o){return r[26]=e[5].get("message_payload_encryption_keys"),r[27]=r[26].get("epoch_root_key"),r[28]=t.createArray(),r[41]=(r[28].push(t.i64.cast([0,32])),r[28]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfcHJmX2tleQ=="),void 0,r[23],r[28]).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]!==void 0?t.sequence([function(e){return r[41]=t.i64.of_int32(r[29].length),t.i64.ge(r[41],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[29],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[43]=t[0],r[44]=t[1],t})},function(e){return r[42]=r[43]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[44]].join("")),r[43]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[44],r[43],t.i64.cast([0,3]))},function(e){return r[42]=void 0}])},function(e){return r[30]=r[42]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[42]].join("")),r[41]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[42],r[41],t.i64.cast([0,3]))},function(e){return r[30]=void 0}])},function(e){return t.blobs.neq(r[30],void 0)?r[31]=!0:r[31]=!1,r[31]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),r[32]=t.createArray(),r[41]=(r[32].push(t.i64.cast([0,32])),r[32]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,r[27],r[32]).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return r[33]!==void 0?t.sequence([function(e){return r[41]=t.i64.of_int32(r[33].length),t.i64.ge(r[41],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[33],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[43]=t[0],r[44]=t[1],t})},function(e){return r[42]=r[43]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[44]].join("")),r[43]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[44],r[43],t.i64.cast([0,3]))},function(e){return r[42]=void 0}])},function(e){return r[34]=r[42]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[42]].join("")),r[41]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[42],r[41],t.i64.cast([0,3]))},function(e){return r[34]=void 0}])},function(o){return t.blobs.neq(r[34],void 0)?r[35]=!0:r[35]=!1,r[35]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),t.nativeOperation(n("LSGetBlobFromString.nop"),e[3]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),r[30],r[36]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[34],t.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),r[36]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(o){var a;return t.blobs.neq(r[38],void 0)?t.sequence([function(o){return r[41]=new t.Map,r[41].set("sk_ciphertext",r[38]),r[41].set("sk_hash",r[37]),r[42]=e[5].get("message_payload_encryption_keys"),r[43]=r[42].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[43],t.blobs.of_string(["message_thread","_",e[1]].join("")),r[14]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return t.blobs.neq(r[44],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[44]).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return r[45]=r[48]}]):t.resolve(r[45]=void 0)},function(o){var a;return r[45]!==void 0?t.sequence([function(e){return r[18]!==void 0?t.sequence([function(e){return r[51]=r[18].get("mt"),r[51]?r[52]=!1:r[52]=!0,r[52]?t.resolve(r[53]=void 0):t.sequence([function(e){return r[55]=new t.Map,r[56]=r[51].keys(),r[57]=t.i64.of_int32(r[56].length),t.i64.gt(r[57],t.i64.cast([0,0]))?t.loopAsync(r[57],function(e){return r[58]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[56],r[58]).then(function(e){var t;return t=e,r[59]=t[0],r[60]=t[1],t})},function(e){return r[61]=r[51].get(r[59]),r[55].set(r[59],r[61])}])}):t.resolve()},function(e){return r[53]=r[55]}])},function(e){return r[53]!==void 0?(r[55]=t.toJSON(r[53]),r[54]=r[55]):r[54]=void 0,r[48]=r[54]}]):t.resolve(r[48]=void 0)},function(n){var o;return r[18]!==void 0?(r[51]=r[18].get("mooos"),r[49]=r[51]):r[49]=void 0,r[50]=new t.Map,r[50].set("backup_action",e[0]),r[50].set("protobuf_encrypted",r[45]),r[50].set("supplemental_data_encrypted",r[41]),r[50].set("timestamp_ms",e[4]),r[50].set("message_tags",r[48]),r[50].set("serialized_attachment_backup_payload",void 0),r[50].set("maybe_ooo_supplemental_upload",r[49]),o=[r[50],void 0],r[46]=o[0],r[47]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),r[48]=new t.Map,r[48].set("error_code",t.i64.cast([0,62])),r[48].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[48].set("error_message",""),a=[void 0,r[48]],r[46]=a[0],r[47]=a[1]))},function(e){var t;return t=[r[46],r[47]],r[39]=t[0],r[40]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_ENCRYPTION_FAILED"),r[41]=new t.Map,r[41].set("error_code",t.i64.cast([0,66])),r[41].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[41].set("error_message",""),a=[void 0,r[41]],r[39]=a[0],r[40]=a[1]))},function(e){var t;return t=[r[39],r[40]],r[24]=t[0],r[25]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NULL_MAILBOX_ROOT_KEY_V2"),r[26]=new t.Map,r[26].set("error_code",t.i64.cast([0,27])),r[26].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[26].set("error_message",""),a=[void 0,r[26]],r[24]=a[0],r[25]=a[1]))},function(e){var t;return t=[r[24],r[25]],r[21]=t[0],r[22]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),r[23]=new t.Map,r[23].set("error_code",t.i64.cast([0,65])),r[23].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[23].set("error_message",""),a=[void 0,r[23]],r[21]=a[0],r[22]=a[1]))},function(e){var t;return t=[r[21],r[22]],r[19]=t[0],r[20]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),r[21]=new t.Map,r[21].set("error_code",t.i64.cast([0,64])),r[21].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[21].set("error_message",""),a=[void 0,r[21]],r[19]=a[0],r[20]=a[1]))},function(e){var t;return t=[r[19],r[20]],r[12]=t[0],r[13]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),r[14]=new t.Map,r[14].set("error_code",t.i64.cast([0,65])),r[14].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[14].set("error_message",""),a=[void 0,r[14]],r[12]=a[0],r[13]=a[1]))},function(e){var t;return t=[r[12],r[13]],r[10]=t[0],r[11]=t[1],t}]):t.sequence([function(o){return t.i64.eq(e[0],t.i64.cast([0,4]))?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],r[16]=t[2],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(o){var a,i,l;return r[18]=new t.Map,r[18].set("message_tags",r[17]),r[19]=new t.Map,r[19].set("mt",r[18]),t.blobs.neq(r[14],void 0)?t.sequence([function(o){return r[22]=e[5].get("message_payload_encryption_keys"),r[23]=r[22].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[23],t.blobs.of_string(["message_thread","_",e[1]].join("")),r[14]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return t.blobs.neq(r[24],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[24]).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return r[25]=r[28]}]):t.resolve(r[25]=void 0)},function(o){var a;return r[25]!==void 0?t.sequence([function(e){return r[19]!==void 0?t.sequence([function(e){return r[31]=r[19].get("mt"),r[31]?r[32]=!1:r[32]=!0,r[32]?t.resolve(r[33]=void 0):t.sequence([function(e){return r[35]=new t.Map,r[36]=r[31].keys(),r[37]=t.i64.of_int32(r[36].length),t.i64.gt(r[37],t.i64.cast([0,0]))?t.loopAsync(r[37],function(e){return r[38]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[36],r[38]).then(function(e){var t;return t=e,r[39]=t[0],r[40]=t[1],t})},function(e){return r[41]=r[31].get(r[39]),r[35].set(r[39],r[41])}])}):t.resolve()},function(e){return r[33]=r[35]}])},function(e){return r[33]!==void 0?(r[35]=t.toJSON(r[33]),r[34]=r[35]):r[34]=void 0,r[28]=r[34]}]):t.resolve(r[28]=void 0)},function(n){var o;return r[19]!==void 0?(r[31]=r[19].get("mooos"),r[29]=r[31]):r[29]=void 0,r[30]=new t.Map,r[30].set("backup_action",e[0]),r[30].set("protobuf_encrypted",r[25]),r[30].set("supplemental_data_encrypted",void 0),r[30].set("timestamp_ms",e[4]),r[30].set("message_tags",r[28]),r[30].set("serialized_attachment_backup_payload",void 0),r[30].set("maybe_ooo_supplemental_upload",r[29]),o=[r[30],void 0],r[26]=o[0],r[27]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),r[28]=new t.Map,r[28].set("error_code",t.i64.cast([0,62])),r[28].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[28].set("error_message",""),a=[void 0,r[28]],r[26]=a[0],r[27]=a[1]))},function(e){var t;return t=[r[26],r[27]],r[20]=t[0],r[21]=t[1],t}]):t.resolve((r[16]?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),r[24]=new t.Map,r[24].set("error_code",t.i64.cast([0,70])),r[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[24].set("error_message",""),a=[void 0,r[24]],r[22]=a[0],r[23]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),r[24]=new t.Map,r[24].set("error_code",t.i64.cast([0,63])),r[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[24].set("error_message",""),i=[void 0,r[24]],r[22]=i[0],r[23]=i[1]),l=[r[22],r[23]],r[20]=l[0],r[21]=l[1]))},function(e){var t;return t=[r[20],r[21]],r[12]=t[0],r[13]=t[1],t}]):t.sequence([function(n){var o;return t.i64.eq(e[0],t.i64.cast([0,3]))?t.sequence([function(e){return t.resolve(r[16]=void 0)},function(n){var o;return r[17]=void 0,r[18]=new t.Map,r[18].set("backup_action",e[0]),r[18].set("protobuf_encrypted",void 0),r[18].set("supplemental_data_encrypted",void 0),r[18].set("timestamp_ms",e[4]),r[18].set("message_tags",r[16]),r[18].set("serialized_attachment_backup_payload",void 0),r[18].set("maybe_ooo_supplemental_upload",r[17]),o=[r[18],void 0],r[14]=o[0],r[15]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error UNKNOWN_PROTOBUF_TYPE"),r[16]=new t.Map,r[16].set("error_code",t.i64.cast([0,60])),r[16].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[16].set("error_message",""),o=[void 0,r[16]],r[14]=o[0],r[15]=o[1]))},function(e){var t;return t=[r[14],r[15]],r[12]=t[0],r[13]=t[1],t}])},function(e){var t;return t=[r[12],r[13]],r[10]=t[0],r[11]=t[1],t}])},function(e){var t;return t=[r[10],r[11]],r[2]=t[0],r[3]=t[1],t}])},function(e){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.random(),r[7]="Finishing execution. Execution time: ",r[8]=t.i64.to_string(t.i64.sub(r[4],r[0])),r[9]=" ms",r[6]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] ",r[6],r[7],r[6],r[8],r[6],r[9]].join("")),t.i64.eq(t.i64.mod_(r[5],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[10]=",",r[11]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufWithInputsV2",[r[7],r[10],r[8],r[10],r[9]].join(""),r[11],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[2],r[3]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLoadAndEncryptProtobufV2",["LSLoadAndEncryptProtobufWithInputsV2","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadAndEncryptProtobufV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.filter(t.db.table(305).fetch(),function(n){return t.i64.eq(n.pendingBackupTaskId,e[0])}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error PROTOBUF_CONTEXT_ROW_NOT_FOUND"),r[11]=new t.Map,r[11].set("error_code",t.i64.cast([0,67])),r[11].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),r[11].set("error_message",""),i=[void 0,r[11]],r[2]=i[0],r[3]=i[1]):(a=s.item,t.sequence([function(o){return t.storedProcedure(n("LSLoadAndEncryptProtobufWithInputsV2"),a.backupAction,e[2],a.toplevelOfflineThreadingId,a.supplementalKey,a.messageTimestampMs,e[1]).then(function(e){var t;return t=e,r[11]=t[0],r[12]=t[1],t})},function(e){var t;return t=[r[11],r[12]],r[2]=t[0],r[3]=t[1],t}]))})},function(e){return r[5]=t.i64.of_float(Date.now()),r[6]=t.i64.random(),r[8]="Finishing execution. Execution time: ",r[9]=t.i64.to_string(t.i64.sub(r[5],r[0])),r[10]=" ms",r[7]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadAndEncryptProtobufV2] ",r[7],r[8],r[7],r[9],r[7],r[10]].join("")),t.i64.eq(t.i64.mod_(r[6],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[11]=",",r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufV2",[r[8],r[11],r[9],r[11],r[10]].join(""),r[12],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[2],r[3]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure",e.__tables__=["pending_protobuf_backups_context"],a.exports=e}),null);
__d("LSLogWebQpl.nop",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LogWebQplNOP").__setRef("LSLogWebQpl.nop"),s=function(n,r,o,a,i,l,s,u){return e.load().then(function(e){return e.call(o,a,i,l,s,u)})};s.__nop_name__="LSLogWebQpl",l.default=s}),98);
__d("LSQplAnnotateBool.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t,d=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),m=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addAnnotations(d,{bool:(t={},t[u]=c,t)},{instanceKey:m}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplAnnotateBool",l.default=s}),98);
__d("LSSerializeBackupPayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDeriveValueSecretRefV2","LSEncryptIdentifiersV2","LSEncryptMessagePayloadV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop","LSLogWebQpl.nop","LSQplAnnotateBool.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(i){return t.sequence([function(n){return o[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][serializeBackupPayloadV2] Beginning execution."),o[1]=t.i64.of_float(Date.now()),o[19]=t.i64.mul(o[1],t.i64.cast([0,1e6])),o[2]=t.i64.random(),o[6]=t.i64.to_string(o[2]),t.db.table(2).fetch([[[e[0]]]]).next().then(function(e,t){var n=e.done,r=e.value;return n?o[3]=void 0:(t=r.item,o[3]=t.dataTraceId)})},function(e){return o[3]!==void 0?o[5]=o[3]:o[5]=void 0,o[6]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,637746317]),o[6],!0,o[5]):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,637746317]),o[6],"LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure_start"):t.resolve()},function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var r,a,i=e.done,l=e.value;return i?(o[23]=new t.Map,o[23].set("error_msg","Expected a nonempty query result"),o[23].set("code",t.i64.cast([0,3])),o[23].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),o[24]=t.createArray(),o[25]=(o[24].push(o[23]),o[24]),r=[void 0,o[24]],o[7]=r[0],o[8]=r[1]):(n=l.item,o[23]=new t.Map,o[23].set("backup_id",n.backupId),o[23].set("device_public_key_blob",n.devicePublicKeyBlob),o[23].set("device_private_key_blob",n.devicePrivateKeyBlob),o[23].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),o[23].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),o[23].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),o[23].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),o[23].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),o[23].set("ocmf_client_state_blob",n.ocmfClientStateBlob),o[23].set("orf_client_state_v2_blob",void 0),o[23].set("orf_v2_authority_level",void 0),o[23].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),o[23].set("device_id",n.deviceId),o[23].set("backup_tenancy",n.backupTenancy),o[23].set("encryption_version",n.encryptionVersion),o[23].set("revision_version",n.revisionVersion),o[23].set("initialize_restore_result",void 0),o[23].set("device_creation_timestamp_sec",void 0),o[23].set("authority_level",n.authorityLevel),a=[o[23],void 0],o[7]=a[0],o[8]=a[1])})},function(a){return o[10]=new t.Map,o[10].set("value",o[7]),o[10].set("errors",o[8]),o[11]=o[10].get("value"),o[11]!==void 0?t.sequence([function(a){return o[23]=o[11].get("backup_id"),o[24]=o[11].get("device_public_key_blob"),o[25]=o[11].get("device_private_key_blob"),o[26]=o[11].get("epoch_storage_public_key_blob"),o[27]=o[11].get("epoch_storage_private_key_blob"),o[28]=o[11].get("epoch_auth_public_key_blob"),o[29]=o[11].get("epoch_auth_private_key_blob"),o[30]=o[11].get("mailbox_root_key_blob"),o[31]=o[11].get("ocmf_client_state_blob"),o[32]=o[11].get("orf_client_state_v2_blob"),o[33]=o[11].get("orf_v2_authority_level"),o[34]=o[11].get("oblivious_validation_token_blob"),o[35]=o[11].get("device_id"),o[36]=o[11].get("backup_tenancy"),o[37]=o[11].get("encryption_version"),o[38]=o[11].get("revision_version"),o[39]=o[11].get("initialize_restore_result"),o[40]=o[11].get("device_creation_timestamp_sec"),o[41]=o[11].get("authority_level"),t.i64.neq(o[35],void 0)?t.sequence([function(e){return o[46]=void 0,t.i64.neq(o[46],void 0)?t.resolve(o[47]=o[46]):t.sequence([function(e){return o[55]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,o[56]=t[0],t})},function(e){return o[56]&&(o[65]=(o[55].push(t.i64.cast([0,0])),o[55])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,o[57]=t[0],t})},function(e){return o[57]&&(o[65]=(o[55].push(t.i64.cast([0,2])),o[55])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,o[58]=t[0],t})},function(e){return o[58]&&(o[65]=(o[55].push(t.i64.cast([0,3])),o[55])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,o[59]=t[0],t})},function(e){return o[59]&&(o[65]=(o[55].push(t.i64.cast([0,4])),o[55])),o[60]=t.createArray(),o[61]=t.i64.of_int32(o[55].length),t.i64.gt(o[61],t.i64.cast([0,0]))?t.loopAsync(o[61],function(e){return o[65]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[55],o[65]).then(function(e){var t;return t=e,o[66]=t[0],o[67]=t[1],t})},function(e){return o[68]=(o[60].push(o[66]),o[60])}])}):t.resolve()},function(e){return t.sequence([function(e){return o[65]=t.createArray(),o[66]=t.i64.of_int32(o[60].length),t.i64.gt(o[66],t.i64.cast([0,0]))?t.loopAsync(o[66],function(e){return o[68]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[60],o[68]).then(function(e){var t;return t=e,o[69]=t[0],o[70]=t[1],t})},function(e){return o[71]=(o[65].push(t.i64.to_string(o[69])),o[65])}])}):t.resolve()},function(e){return o[67]=o[65].join(","),o[62]=o[67]}])},function(e){return o[60].some(function(e){return t.i64.eq(o[37],e)})?o[63]=o[37]:o[63]=void 0,t.i64.neq(o[63],void 0)?o[64]=o[63]:o[64]=void 0,o[47]=o[64]}])},function(a){return t.i64.neq(o[47],void 0)?o[48]=o[47]:o[48]=t.i64.cast([0,0]),t.i64.neq(o[36],void 0)?o[49]=o[36]:o[49]=t.i64.cast([0,1]),t.db.table(177).fetch([[[e[0]]],"fk_pending_tasks"]).next().then(function(a,i){var l=a.done,s=a.value;return l?t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[67]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[67],t.i64.cast([0,1e6])),o[19]),void 0],o[55]=a[0],o[56]=a[1],o[57]=a[2],o[58]=a[3],o[59]=a[4],o[60]=a[5],o[61]=a[6]):(r=s.item,o[67]=t.i64.of_float(Date.now()),i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[67],t.i64.cast([0,1e6])),o[19]),void 0],o[55]=i[0],o[56]=i[1],o[57]=i[2],o[58]=i[3],o[59]=i[4],o[60]=i[5],o[61]=i[6])})},function(e){return o[63]=new t.Map,o[63].set("task_id",o[55]),o[63].set("queue_name",o[56]),o[63].set("enqueue_timestamp_ms",o[57]),o[63].set("priority",o[58]),o[63].set("first_executed_timestamp_ms",o[59]),o[63].set("execution_time_ns",o[60]),o[63].set("echo_encoding_execution_time_ns",o[61]),o[64]=new t.Map,o[64].set("task_metadata",o[63]),o[64].set("action_type",void 0),o[64].set("content_type",void 0),o[64].set("identifiers",void 0),o[64].set("identifiers_v2",void 0),o[64].set("task_creation_source",void 0),o[64].set("message_payload_source",t.i64.cast([0,2])),o[65]=new t.Map,o[65].set("error_code",t.i64.cast([0,5])),o[65].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[65].set("error_message","Pending backup context row not found"),o[65]!==void 0?(o[67]=o[65].get("stored_procedure"),o[68]=o[65].get("error_code"),o[69]=o[65].get("error_message"),o[70]=".",o[71]=[o[67],o[70],t.i64.to_string(o[68]),o[70],o[69]].join(""),o[6]!==void 0&&o[71]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[71]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[66]=t.createArray(),n=[void 0,o[65],o[64],o[66]],o[50]=n[0],o[51]=n[1],o[52]=n[2],o[53]=n[3]}]):(i=s.item,t.sequence([function(n){return o[62]=i.actionType,o[63]=i.contentType,o[68]=i.echoContent,o[69]=i.lsTraceId,o[67]=i.echoEncodingLatencyNs,o[66]=i.attachmentPayload,o[72]=i.attachmentErrorCode,o[70]=i.tamThreadSubtype,o[71]=i.isInstamadillo,o[55]=new t.Map,o[55].set("backup_id",t.i64.to_string(o[23])),o[55].set("act_thread_id",i.listKey),o[55].set("timestamp",i.sortKey),o[55].set("otid",i.uniqueKey),t.filter(t.db.table(305).fetch(),function(n){return t.i64.eq(n.pendingBackupTaskId,e[0])}).next().then(function(e,t){var n=e.done,r=e.value;return n?o[56]=!1:(t=r.item,o[55].set("supplemental_otid",t.supplementalOfflineThreadingId),o[55].set("deletion_otid",t.deletionOfflineThreadingId),o[56]=!0)})},function(e){return o[65]=t.i64.eq(void 0,void 0),o[6]!==void 0?t.nativeOperation(n("LSQplAnnotateBool.nop"),t.i64.cast([0,637746317]),o[6],"should_run_device_timestamp_sync",o[65]):t.resolve()},function(a){return o[64]=i.error==null?t.i64.cast([0,0]):i.error,[t.i64.cast([0,0]),t.i64.cast([0,32])].some(function(e){return t.i64.eq(o[64],e)})?t.sequence([function(e){return o[73]=o[55].get("act_thread_id"),o[74]=o[55].get("otid"),t.storedProcedure(n("LSGetLatestEpochKeys"),!1).then(function(e){var t;return t=e,o[75]=t[0],o[76]=t[1],t})},function(e){var r;return o[75]!==void 0?t.sequence([function(e){return t.i64.eq(o[63],t.i64.cast([0,1]))?t.sequence([function(e){return o[86]=t.createArray(),o[91]=(o[86].push(t.i64.cast([0,32])),o[86]),t.nativeOperation(n("LSGetBlobFromString.nop"),["thread_ope_key","_",o[73]].join("")).then(function(e){var t;return t=e,o[87]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),o[87],void 0,o[30],o[86]).then(function(e){var t;return t=e,o[88]=t[0],t})},function(e){return o[88]?o[89]=!1:o[89]=!0,o[89]?t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),o[92]="Got null keys while deriving message list OPE key. Returning null blobish",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[92]].join("")),o[91]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[92],o[91],t.i64.cast([0,3]))},function(e){return o[90]=void 0}]):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[88],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[91]=t[0],o[92]=t[1],t})},function(e){return o[90]=o[91]}])},function(e){return o[83]=o[90]}]):t.sequence([function(e){return t.i64.eq(o[62],t.i64.cast([0,2]))?t.sequence([function(e){return o[87]=t.createArray(),o[92]=(o[87].push(t.i64.cast([0,32])),o[87]),t.nativeOperation(n("LSGetBlobFromString.nop"),["thread_ope_key","_",o[74]].join("")).then(function(e){var t;return t=e,o[88]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),o[88],void 0,o[30],o[87]).then(function(e){var t;return t=e,o[89]=t[0],t})},function(e){return o[89]?o[90]=!1:o[90]=!0,o[90]?t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),o[93]="Got null keys while deriving message list OPE key. Returning null blobish",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[93]].join("")),o[92]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[93],o[92],t.i64.cast([0,3]))},function(e){return o[91]=void 0}]):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[89],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[92]=t[0],o[93]=t[1],t})},function(e){return o[91]=o[92]}])},function(e){return o[86]=o[91]}]):t.resolve(o[86]=void 0)},function(e){return o[83]=o[86]}])},function(e){var r;return t.blobs.neq(o[83],void 0)?t.sequence([function(e){return o[86]=o[75].get("epoch_keys"),o[87]=o[86].get("epoch_anon_id"),o[88]=o[86].get("epoch_root_key"),o[89]=t.createArray(),o[104]=(o[89].push(t.i64.cast([0,32])),o[89]),t.i64.ge(o[48],t.i64.cast([0,3]))?t.resolve(o[90]=void 0):t.sequence([function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),o[73]).then(function(e){var t;return t=e,o[104]=t[0],t})},function(e){return o[90]=o[104]}])},function(e){return t.i64.ge(o[48],t.i64.cast([0,4]))?(o[104]="_",o[91]=["message_key_in_epoch",o[104],t.blobs.to_string(o[87]),o[104],"cipher_version",o[104],t.i64.to_string(o[48]),o[104],"thread",o[104],o[73]==null?"":o[73]].join("")):(t.i64.ge(o[48],t.i64.cast([0,3]))?(o[105]="_",o[104]=["message_key_in_epoch",o[105],t.blobs.to_string(o[87]),o[105],"cipher_version",o[105],t.i64.to_string(o[48]),o[105],"thread",o[105],o[73]==null?"":o[73]].join("")):(t.i64.ge(o[48],t.i64.cast([0,2]))?(o[106]="_",o[105]=["message_key_in_epoch",o[106],t.blobs.to_string(o[87]),o[106],"cipher_version",o[106],t.i64.to_string(o[48])].join("")):o[105]=["message_key_in_epoch","_",t.blobs.to_string(o[87])].join(""),o[104]=o[105]),o[91]=o[104]),t.nativeOperation(n("LSGetBlobFromString.nop"),o[91]).then(function(e){var t;return t=e,o[92]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),o[92],o[90],o[88],o[89]).then(function(e){var t;return t=e,o[93]=t[0],t})},function(e){return o[93]?o[94]=!1:o[94]=!0,o[94]?t.resolve(o[95]=void 0):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[93],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[104]=t[0],o[105]=t[1],t})},function(e){return o[95]=o[104]}])},function(e){return t.filter(t.db.table(169).fetch(),function(e){return t.blobs.eq(e.epochAnonIdBlob,t.blob("MA=="))}).next().then(function(e,n){var r,a,i=e.done,l=e.value;return i?(o[104]=new t.Map,o[104].set("error_msg","Expected a nonempty query result"),o[104].set("code",t.i64.cast([0,3])),o[104].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),o[105]=t.createArray(),o[106]=(o[105].push(o[104]),o[105]),r=[void 0,o[105]],o[96]=r[0],o[97]=r[1]):(n=l.item,o[104]=new t.Map,o[104].set("epoch_id",n.epochId),o[104].set("backup_id",n.backupId),o[104].set("epoch_anon_id_blob",n.epochAnonIdBlob),o[104].set("epoch_root_key_blob",n.epochRootKeyBlob),o[104].set("epoch_status",n.epochStatus),o[104].set("epoch_head",n.epochHead),o[104].set("authority_level",n.authorityLevel),a=[o[104],void 0],o[96]=a[0],o[97]=a[1])})},function(e){return o[99]=new t.Map,o[99].set("value",o[96]),o[99].set("errors",o[97]),o[100]=o[99].get("value"),o[100]!==void 0?t.sequence([function(e){return o[104]=o[100].get("epoch_id"),o[105]=o[100].get("backup_id"),o[106]=o[100].get("epoch_anon_id_blob"),o[107]=o[100].get("epoch_root_key_blob"),o[108]=o[100].get("epoch_status"),o[109]=o[100].get("epoch_head"),o[110]=o[100].get("authority_level"),o[111]=t.createArray(),o[119]=(o[111].push(t.i64.cast([0,32])),o[111]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,o[30],o[111]).then(function(e){var t;return t=e,o[112]=t[0],t})},function(e){return o[112]!==void 0?t.sequence([function(e){return o[119]=t.i64.of_int32(o[112].length),t.i64.ge(o[119],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[112],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[121]=t[0],o[122]=t[1],t})},function(e){return o[120]=o[121]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),o[122]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[122]].join("")),o[121]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[122],o[121],t.i64.cast([0,3]))},function(e){return o[120]=void 0}])},function(e){return o[113]=o[120]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),o[120]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[120]].join("")),o[119]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[120],o[119],t.i64.cast([0,3]))},function(e){return o[113]=void 0}])},function(e){return t.blobs.neq(o[113],void 0)?o[114]=!0:o[114]=!1,o[114]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),o[115]=t.createArray(),o[119]=(o[115].push(t.i64.cast([0,32])),o[115]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),o[113],o[107],o[115]).then(function(e){var t;return t=e,o[116]=t[0],t})},function(e){return o[116]!==void 0?t.sequence([function(e){return o[119]=t.i64.of_int32(o[116].length),t.i64.ge(o[119],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[116],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[121]=t[0],o[122]=t[1],t})},function(e){return o[120]=o[121]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),o[122]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[122]].join("")),o[121]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[122],o[121],t.i64.cast([0,3]))},function(e){return o[120]=void 0}])},function(e){return o[117]=o[120]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),o[120]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[120]].join("")),o[119]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[120],o[119],t.i64.cast([0,3]))},function(e){return o[117]=void 0}])},function(e){return t.blobs.neq(o[117],void 0)?o[118]=!0:o[118]=!1,o[118]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),o[101]=o[117]}]):t.sequence([function(e){return o[104]=o[99].get("errors"),o[105]=o[99].get("errors"),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBEpochClientUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),o[107]="Failed to get mailbox_root_key_v2: epoch 0 is not available.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBEpochClientUtils] ","",o[107]].join("")),o[106]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBEpochClientUtils",o[107],o[106],t.i64.cast([0,3]))},function(e){return o[101]=void 0}])},function(e){var r;return t.blobs.neq(o[95],void 0)?t.sequence([function(e){return t.blobs.neq(o[101],void 0)?t.sequence([function(e){return o[110]=t.createArray(),o[114]=(o[110].push(t.i64.cast([0,32])),o[110]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,o[101],o[110]).then(function(e){var t;return t=e,o[111]=t[0],t})},function(e){return o[111]!==void 0?t.sequence([function(e){return o[114]=t.i64.of_int32(o[111].length),t.i64.ge(o[114],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[111],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[116]=t[0],o[117]=t[1],t})},function(e){return o[115]=o[116]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),o[117]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[117]].join("")),o[116]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[117],o[116],t.i64.cast([0,3]))},function(e){return o[115]=void 0}])},function(e){return o[112]=o[115]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),o[115]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[115]].join("")),o[114]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[115],o[114],t.i64.cast([0,3]))},function(e){return o[112]=void 0}])},function(e){return t.blobs.neq(o[112],void 0)?o[113]=!0:o[113]=!1,o[113]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),o[104]=o[112]}]):t.resolve(o[104]=void 0)},function(e){var n;return o[105]=o[86].get("epoch_root_key"),o[106]=o[86].get("epoch_anon_id"),o[107]=o[86].get("epoch_id"),o[108]=new t.Map,o[108].set("payload_key",o[95]),o[108].set("payload_fallback_key",o[104]),o[108].set("encryption_version",o[48]),o[108].set("epoch_root_key",o[105]),o[108].set("epoch_anon_id",o[106]),o[108].set("epoch_id",o[107]),o[109]=new t.Map,o[109].set("ope_key",o[83]),o[109].set("message_payload_encryption_keys",o[108]),o[109].set("ocmf_shared_key",o[31]),o[109].set("mailbox_base_salt",o[30]),o[109].set("mailbox_root_key_v2",o[101]),n=[o[109],void 0],o[102]=n[0],o[103]=n[1]}]):t.resolve((o[104]=new t.Map,o[104].set("error_code",t.i64.cast([0,26])),o[104].set("stored_procedure","MEBKeyDeriver"),o[104].set("error_message",""),r=[void 0,o[104]],o[102]=r[0],o[103]=r[1]))},function(e){var t;return t=[o[102],o[103]],o[84]=t[0],o[85]=t[1],t}]):t.resolve((o[86]=new t.Map,o[86].set("error_code",t.i64.cast([0,25])),o[86].set("stored_procedure","MEBKeyDeriver"),o[86].set("error_message",""),r=[void 0,o[86]],o[84]=r[0],o[85]=r[1]))},function(e){var t;return t=[o[84],o[85]],o[77]=t[0],o[78]=t[1],t}]):t.resolve((r=[void 0,o[76]],o[77]=r[0],o[78]=r[1],r))},function(a){return o[77]!==void 0?t.sequence([function(e){return o[83]=o[55].get("backup_id"),o[84]=o[55].get("act_thread_id"),o[85]=o[55].get("timestamp"),o[86]=o[55].get("otid"),t.storedProcedure(n("LSEncryptIdentifiersV2"),o[62],o[63],o[83],o[84],t.i64.from_string(o[85]),o[86],o[77]).then(function(e){var t;return t=e,o[87]=t[0],o[88]=t[1],t})},function(a){return o[87]!==void 0?t.sequence([function(r){return o[93]=o[55].get("act_thread_id"),t.storedProcedure(n("LSLoadAndEncryptProtobufV2"),e[0],o[77],o[93]).then(function(e){var t;return t=e,o[94]=t[0],o[95]=t[1],t})},function(a){return o[100]=t.i64.eq(o[64],t.i64.cast([0,32]))||!1||r("gkx")("5519")||!1,o[101]=o[94]!==void 0,o[100]&&o[101]?t.sequence([function(e){return o[102]=o[55].get("act_thread_id"),o[103]=o[55].get("backup_id"),t.storedProcedure(n("LSDeriveValueSecretRefV2"),o[102],o[103],o[77]).then(function(e){var t;return t=e,o[104]=t[0],o[105]=t[1],t})},function(r){return o[94]!==void 0?t.sequence([function(r){return o[104]!==void 0?t.sequence([function(e){return o[114]=o[104].get("value_secret_ref"),o[115]=o[87].get("act_thread_id_ocmf_partial"),o[116]=o[87].get("otid_ocmf_partial"),o[117]=o[87].get("timestamp_encrypted"),o[118]=new t.Map,o[118].set("list_key",o[115]),o[118].set("unique_key",o[116]),o[118].set("sort_key",o[117]),o[119]=void 0,o[120]=new t.Map,o[120].set("list_item_id",o[118]),o[120].set("list_item",o[119]),o[120].set("action_type",o[62]),o[121]=o[55].get("timestamp"),o[122]=o[55].get("otid"),o[123]=o[55].get("act_thread_id"),o[124]=o[55].get("supplemental_otid"),o[125]=o[55].get("deletion_otid"),o[126]=new t.Map,o[126].set("timestamp",o[121]),o[126].set("otid",o[122]),o[126].set("wa_thread_id",t.i64.from_string(o[123])),o[126].set("supplemental_otid",o[124]),o[126].set("deletion_otid",o[125]),o[127]=o[77].get("mailbox_base_salt"),t.nativeOperation(n("LSBase64Encode.nop"),o[127]).then(function(e){var t;return t=e,o[128]=t[0],t})},function(e){return o[129]=o[77].get("ocmf_shared_key"),t.nativeOperation(n("LSBase64Encode.nop"),o[129]).then(function(e){var t;return t=e,o[130]=t[0],t})},function(e){return o[131]=new t.Map,o[131].set("mailbox_root_key",o[128]==null?"":o[128]),o[131].set("ocmf_client_state_blob",o[130]==null?"":o[130]),o[132]=o[87].get("backup_id_ocmf_partial"),o[133]=o[77].get("message_payload_encryption_keys"),o[134]=o[133].get("epoch_id"),o[135]=o[77].get("message_payload_encryption_keys"),o[136]=o[135].get("encryption_version"),o[151]=o[69]==null?"":o[69],o[137]=new t.Map,o[137].set("mailbox_partial_id",o[132]),o[137].set("action",o[120]),o[137].set("device_id",o[35]),o[137].set("echo_version",t.i64.cast([0,0])),o[137].set("epoch_id",o[134]),o[137].set("trace_id",void 0),o[137].set("encryption_version",o[136]),o[137].set("is_thread",t.i64.eq(o[63],t.i64.cast([0,2]))),o[137].set("raw_identifiers",o[126]),o[137].set("raw_tokens",o[131]),o[137].set("request_id",o[151]),o[137].set("tam_thread_subtype",o[70]==null?t.i64.cast([0,0]):o[70]),o[137].set("is_instamadillo",o[71]==null?!1:o[71]),o[137].set("should_run_device_creation_timestamp_sync",o[65]),o[137].set("value_secret_ref",o[114]),o[137].set("empty_echo_payload_reason",t.i64.cast([0,1])),o[94]!==void 0?t.sequence([function(e){return o[152]=o[94].get("supplemental_data_encrypted"),o[152]!==void 0?t.sequence([function(e){return o[154]=o[94].get("protobuf_encrypted"),o[155]=o[94].get("backup_action"),o[156]=o[94].get("timestamp_ms"),o[157]=o[152].get("sk_ciphertext"),t.nativeOperation(n("LSBase64Encode.nop"),o[157]).then(function(e){var t;return t=e,o[158]=t[0],t})},function(e){return o[159]=o[152].get("sk_hash"),t.nativeOperation(n("LSBase64Encode.nop"),o[159]).then(function(e){var t;return t=e,o[160]=t[0],t})},function(e){return o[161]=o[94].get("message_tags"),o[162]=o[94].get("maybe_ooo_supplemental_upload"),o[163]=new t.Map,o[163].set("supplementary_data_key",void 0),o[163].set("encrypted_protobuf",o[154]),o[163].set("key_value_backup_action",o[155]),o[163].set("protobuf_ts_ms",o[156]),o[163].set("supplemental_key_ciphertext",o[158]),o[163].set("supplemental_key_hash",o[160]),o[163].set("message_tags",o[161]),o[163].set("maybe_ooo_supplemental_upload",o[162]),o[153]=o[163]}]):t.resolve((o[154]=o[94].get("protobuf_encrypted"),o[155]=o[94].get("backup_action"),o[156]=o[94].get("timestamp_ms"),o[157]=o[94].get("message_tags"),o[158]=new t.Map,o[158].set("supplementary_data_key",void 0),o[158].set("encrypted_protobuf",o[154]),o[158].set("key_value_backup_action",o[155]),o[158].set("protobuf_ts_ms",o[156]),o[158].set("message_tags",o[157]),o[153]=o[158]))},function(e){return o[137].set("key_value_backup_payload",o[153])}]):t.resolve()},function(e){return o[66]!==void 0?t.resolve(o[137].set("attachment_backup_payload",o[66])):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),o[152]=["payload_null",".",t.i64.to_string(o[72])==null?"null":t.i64.to_string(o[72])].join(""),o[6]!==void 0&&o[152]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"attachment_info",o[152]):t.resolve())},function(e){return o[151]!==void 0?t.nativeOperation(n("LSLogWebQpl.nop"),o[151],t.i64.cast([0,521481602]),"upload_start",t.i64.cast([0,0]),void 0,void 0):t.resolve()},function(n){return o[138]=t.toJSON(o[137]),t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[152]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[153]=void 0:o[153]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[152],t.i64.cast([0,1e6])),o[19]),o[153]],o[139]=a[0],o[140]=a[1],o[141]=a[2],o[142]=a[3],o[143]=a[4],o[144]=a[5],o[145]=a[6]):(r=s.item,o[152]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[153]=void 0:o[153]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[152],t.i64.cast([0,1e6])),o[19]),o[153]],o[139]=i[0],o[140]=i[1],o[141]=i[2],o[142]=i[3],o[143]=i[4],o[144]=i[5],o[145]=i[6])})},function(e){return o[147]=new t.Map,o[147].set("task_id",o[139]),o[147].set("queue_name",o[140]),o[147].set("enqueue_timestamp_ms",o[141]),o[147].set("priority",o[142]),o[147].set("first_executed_timestamp_ms",o[143]),o[147].set("execution_time_ns",o[144]),o[147].set("echo_encoding_execution_time_ns",o[145]),o[148]=new t.Map,o[148].set("task_metadata",o[147]),o[148].set("action_type",o[62]),o[148].set("content_type",o[63]),o[148].set("identifiers",void 0),o[148].set("identifiers_v2",o[55]),o[148].set("task_creation_source",void 0),o[148].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!0):t.resolve()},function(e){var n;return o[149]=new t.Map,o[149].set("payload",o[138]),o[150]=t.createArray(),o[152]=(o[150].push(void 0),o[150]),n=[o[149],void 0,o[148],o[150]],o[110]=n[0],o[111]=n[1],o[112]=n[2],o[113]=n[3]}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[125]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[126]=void 0:o[126]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[125],t.i64.cast([0,1e6])),o[19]),o[126]],o[114]=a[0],o[115]=a[1],o[116]=a[2],o[117]=a[3],o[118]=a[4],o[119]=a[5],o[120]=a[6]):(r=s.item,o[125]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[126]=void 0:o[126]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[125],t.i64.cast([0,1e6])),o[19]),o[126]],o[114]=i[0],o[115]=i[1],o[116]=i[2],o[117]=i[3],o[118]=i[4],o[119]=i[5],o[120]=i[6])})},function(e){return o[122]=new t.Map,o[122].set("task_id",o[114]),o[122].set("queue_name",o[115]),o[122].set("enqueue_timestamp_ms",o[116]),o[122].set("priority",o[117]),o[122].set("first_executed_timestamp_ms",o[118]),o[122].set("execution_time_ns",o[119]),o[122].set("echo_encoding_execution_time_ns",o[120]),o[123]=new t.Map,o[123].set("task_metadata",o[122]),o[123].set("action_type",o[62]),o[123].set("content_type",o[63]),o[123].set("identifiers",void 0),o[123].set("identifiers_v2",o[55]),o[123].set("task_creation_source",void 0),o[123].set("message_payload_source",t.i64.cast([0,2])),o[105]!==void 0?(o[125]=o[105].get("stored_procedure"),o[126]=o[105].get("error_code"),o[127]=o[105].get("error_message"),o[128]=".",o[129]=[o[125],o[128],t.i64.to_string(o[126]),o[128],o[127]].join(""),o[6]!==void 0&&o[129]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[129]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[124]=t.createArray(),o[125]=(o[124].push(void 0),o[124]),n=[void 0,o[105],o[123],o[124]],o[110]=n[0],o[111]=n[1],o[112]=n[2],o[113]=n[3]}])},function(e){var t;return t=[o[110],o[111],o[112],o[113]],o[106]=t[0],o[107]=t[1],o[108]=t[2],o[109]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[121]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[122]=void 0:o[122]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[121],t.i64.cast([0,1e6])),o[19]),o[122]],o[110]=a[0],o[111]=a[1],o[112]=a[2],o[113]=a[3],o[114]=a[4],o[115]=a[5],o[116]=a[6]):(r=s.item,o[121]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[122]=void 0:o[122]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[121],t.i64.cast([0,1e6])),o[19]),o[122]],o[110]=i[0],o[111]=i[1],o[112]=i[2],o[113]=i[3],o[114]=i[4],o[115]=i[5],o[116]=i[6])})},function(e){return o[118]=new t.Map,o[118].set("task_id",o[110]),o[118].set("queue_name",o[111]),o[118].set("enqueue_timestamp_ms",o[112]),o[118].set("priority",o[113]),o[118].set("first_executed_timestamp_ms",o[114]),o[118].set("execution_time_ns",o[115]),o[118].set("echo_encoding_execution_time_ns",o[116]),o[119]=new t.Map,o[119].set("task_metadata",o[118]),o[119].set("action_type",o[62]),o[119].set("content_type",o[63]),o[119].set("identifiers",void 0),o[119].set("identifiers_v2",o[55]),o[119].set("task_creation_source",void 0),o[119].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return o[95]!==void 0?(o[121]=o[95].get("stored_procedure"),o[122]=o[95].get("error_code"),o[123]=o[95].get("error_message"),o[124]=".",o[125]=[o[121],o[124],t.i64.to_string(o[122]),o[124],o[123]].join(""),o[6]!==void 0&&o[125]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[125]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[120]=t.createArray(),o[121]=(o[120].push(o[95]),o[120]),n=[void 0,void 0,o[119],o[120]],o[106]=n[0],o[107]=n[1],o[108]=n[2],o[109]=n[3]}])},function(e){var t;return t=[o[106],o[107],o[108],o[109]],o[96]=t[0],o[97]=t[1],o[98]=t[2],o[99]=t[3],t}]):t.sequence([function(r){return o[100]===!0&&o[101]===!1?t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[117]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[118]=void 0:o[118]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[117],t.i64.cast([0,1e6])),o[19]),o[118]],o[106]=a[0],o[107]=a[1],o[108]=a[2],o[109]=a[3],o[110]=a[4],o[111]=a[5],o[112]=a[6]):(r=s.item,o[117]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[118]=void 0:o[118]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[117],t.i64.cast([0,1e6])),o[19]),o[118]],o[106]=i[0],o[107]=i[1],o[108]=i[2],o[109]=i[3],o[110]=i[4],o[111]=i[5],o[112]=i[6])})},function(e){return o[114]=new t.Map,o[114].set("task_id",o[106]),o[114].set("queue_name",o[107]),o[114].set("enqueue_timestamp_ms",o[108]),o[114].set("priority",o[109]),o[114].set("first_executed_timestamp_ms",o[110]),o[114].set("execution_time_ns",o[111]),o[114].set("echo_encoding_execution_time_ns",o[112]),o[115]=new t.Map,o[115].set("task_metadata",o[114]),o[115].set("action_type",o[62]),o[115].set("content_type",o[63]),o[115].set("identifiers",void 0),o[115].set("identifiers_v2",o[55]),o[115].set("task_creation_source",void 0),o[115].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return o[95]!==void 0?(o[117]=o[95].get("stored_procedure"),o[118]=o[95].get("error_code"),o[119]=o[95].get("error_message"),o[120]=".",o[121]=[o[117],o[120],t.i64.to_string(o[118]),o[120],o[119]].join(""),o[6]!==void 0&&o[121]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[121]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[116]=t.createArray(),o[117]=(o[116].push(o[95]),o[116]),n=[void 0,void 0,o[115],o[116]],o[102]=n[0],o[103]=n[1],o[104]=n[2],o[105]=n[3]}]):t.sequence([function(r){var a,i,l,s;return t.i64.eq(o[62],t.i64.cast([0,1]))?(o[114]=o[68]===""?void 0:o[68],o[114]!==void 0?(a=[o[114],void 0],o[112]=a[0],o[113]=a[1]):(o[115]=new t.Map,o[115].set("error_code",t.i64.cast([0,30])),o[115].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[115].set("error_message",""),i=[void 0,o[115]],o[112]=i[0],o[113]=i[1]),l=[o[112],o[113]],o[106]=l[0],o[107]=l[1]):(s=["",void 0],o[106]=s[0],o[107]=s[1]),o[106]!==void 0?t.sequence([function(e){var r;return t.i64.eq(o[62],t.i64.cast([0,1]))?t.sequence([function(e){return o[118]=o[55].get("backup_id"),o[119]=o[55].get("act_thread_id"),t.storedProcedure(n("LSEncryptMessagePayloadV2"),o[118],o[119],o[77],o[106]).then(function(e){var t;return t=e,o[120]=t[0],o[121]=t[1],t})},function(e){var t;return t=[o[120],o[121]],o[112]=t[0],o[113]=t[1],t}]):t.resolve((o[118]=new t.Map,o[118].set("encrypted_message_payload",""),o[118].set("value_secret_ref",""),r=[o[118],void 0],o[112]=r[0],o[113]=r[1]))},function(r){return o[112]!==void 0?t.sequence([function(e){return o[94]!==void 0&&t.i64.eq(o[62],t.i64.cast([0,2]))?t.sequence([function(e){return o[156]=o[55].get("act_thread_id"),o[157]=o[55].get("backup_id"),t.storedProcedure(n("LSDeriveValueSecretRefV2"),o[156],o[157],o[77]).then(function(e){var t;return t=e,o[158]=t[0],o[159]=t[1],t})},function(e){return o[158]!==void 0?(o[161]=o[158].get("value_secret_ref"),o[160]=o[161]):o[160]="",o[118]=o[160]}]):t.resolve(o[118]="")},function(e){return o[119]=o[87].get("act_thread_id_ocmf_partial"),o[120]=o[87].get("otid_ocmf_partial"),o[121]=o[87].get("timestamp_encrypted"),o[122]=new t.Map,o[122].set("list_key",o[119]),o[122].set("unique_key",o[120]),o[122].set("sort_key",o[121]),o[112]!==void 0?(o[156]=o[112].get("encrypted_message_payload"),o[157]=o[112].get("value_secret_ref"),o[158]=new t.Map,o[158].set("value",o[156]),o[158].set("value_secret_ref",o[157]),o[123]=o[158]):o[123]=void 0,o[124]=new t.Map,o[124].set("list_item_id",o[122]),o[124].set("list_item",o[123]),o[124].set("action_type",o[62]),o[125]=o[55].get("timestamp"),o[126]=o[55].get("otid"),o[127]=o[55].get("act_thread_id"),o[128]=o[55].get("supplemental_otid"),o[129]=o[55].get("deletion_otid"),o[130]=new t.Map,o[130].set("timestamp",o[125]),o[130].set("otid",o[126]),o[130].set("wa_thread_id",t.i64.from_string(o[127])),o[130].set("supplemental_otid",o[128]),o[130].set("deletion_otid",o[129]),o[131]=o[77].get("mailbox_base_salt"),t.nativeOperation(n("LSBase64Encode.nop"),o[131]).then(function(e){var t;return t=e,o[132]=t[0],t})},function(e){return o[133]=o[77].get("ocmf_shared_key"),t.nativeOperation(n("LSBase64Encode.nop"),o[133]).then(function(e){var t;return t=e,o[134]=t[0],t})},function(e){return o[135]=new t.Map,o[135].set("mailbox_root_key",o[132]==null?"":o[132]),o[135].set("ocmf_client_state_blob",o[134]==null?"":o[134]),o[136]=o[87].get("backup_id_ocmf_partial"),o[137]=o[77].get("message_payload_encryption_keys"),o[138]=o[137].get("epoch_id"),o[139]=o[77].get("message_payload_encryption_keys"),o[140]=o[139].get("encryption_version"),o[155]=o[69]==null?"":o[69],o[141]=new t.Map,o[141].set("mailbox_partial_id",o[136]),o[141].set("action",o[124]),o[141].set("device_id",o[35]),o[141].set("echo_version",t.i64.cast([0,0])),o[141].set("epoch_id",o[138]),o[141].set("trace_id",void 0),o[141].set("encryption_version",o[140]),o[141].set("is_thread",t.i64.eq(o[63],t.i64.cast([0,2]))),o[141].set("raw_identifiers",o[130]),o[141].set("raw_tokens",o[135]),o[141].set("request_id",o[155]),o[141].set("tam_thread_subtype",o[70]==null?t.i64.cast([0,0]):o[70]),o[141].set("is_instamadillo",o[71]==null?!1:o[71]),o[141].set("should_run_device_creation_timestamp_sync",o[65]),o[141].set("value_secret_ref",o[118]),o[94]!==void 0?t.sequence([function(e){return o[156]=o[94].get("supplemental_data_encrypted"),o[156]!==void 0?t.sequence([function(e){return o[158]=o[94].get("protobuf_encrypted"),o[159]=o[94].get("backup_action"),o[160]=o[94].get("timestamp_ms"),o[161]=o[156].get("sk_ciphertext"),t.nativeOperation(n("LSBase64Encode.nop"),o[161]).then(function(e){var t;return t=e,o[162]=t[0],t})},function(e){return o[163]=o[156].get("sk_hash"),t.nativeOperation(n("LSBase64Encode.nop"),o[163]).then(function(e){var t;return t=e,o[164]=t[0],t})},function(e){return o[165]=o[94].get("message_tags"),o[166]=o[94].get("maybe_ooo_supplemental_upload"),o[167]=new t.Map,o[167].set("supplementary_data_key",void 0),o[167].set("encrypted_protobuf",o[158]),o[167].set("key_value_backup_action",o[159]),o[167].set("protobuf_ts_ms",o[160]),o[167].set("supplemental_key_ciphertext",o[162]),o[167].set("supplemental_key_hash",o[164]),o[167].set("message_tags",o[165]),o[167].set("maybe_ooo_supplemental_upload",o[166]),o[157]=o[167]}]):t.resolve((o[158]=o[94].get("protobuf_encrypted"),o[159]=o[94].get("backup_action"),o[160]=o[94].get("timestamp_ms"),o[161]=o[94].get("message_tags"),o[162]=new t.Map,o[162].set("supplementary_data_key",void 0),o[162].set("encrypted_protobuf",o[158]),o[162].set("key_value_backup_action",o[159]),o[162].set("protobuf_ts_ms",o[160]),o[162].set("message_tags",o[161]),o[157]=o[162]))},function(e){return o[141].set("key_value_backup_payload",o[157])}]):t.resolve()},function(e){return o[66]!==void 0?t.resolve(o[141].set("attachment_backup_payload",o[66])):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),o[156]=["payload_null",".",t.i64.to_string(o[72])==null?"null":t.i64.to_string(o[72])].join(""),o[6]!==void 0&&o[156]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"attachment_info",o[156]):t.resolve())},function(e){return o[155]!==void 0?t.nativeOperation(n("LSLogWebQpl.nop"),o[155],t.i64.cast([0,521481602]),"upload_start",t.i64.cast([0,0]),void 0,void 0):t.resolve()},function(n){return o[142]=t.toJSON(o[141]),t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[156]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[157]=void 0:o[157]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[156],t.i64.cast([0,1e6])),o[19]),o[157]],o[143]=a[0],o[144]=a[1],o[145]=a[2],o[146]=a[3],o[147]=a[4],o[148]=a[5],o[149]=a[6]):(r=s.item,o[156]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[157]=void 0:o[157]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[156],t.i64.cast([0,1e6])),o[19]),o[157]],o[143]=i[0],o[144]=i[1],o[145]=i[2],o[146]=i[3],o[147]=i[4],o[148]=i[5],o[149]=i[6])})},function(e){return o[151]=new t.Map,o[151].set("task_id",o[143]),o[151].set("queue_name",o[144]),o[151].set("enqueue_timestamp_ms",o[145]),o[151].set("priority",o[146]),o[151].set("first_executed_timestamp_ms",o[147]),o[151].set("execution_time_ns",o[148]),o[151].set("echo_encoding_execution_time_ns",o[149]),o[152]=new t.Map,o[152].set("task_metadata",o[151]),o[152].set("action_type",o[62]),o[152].set("content_type",o[63]),o[152].set("identifiers",void 0),o[152].set("identifiers_v2",o[55]),o[152].set("task_creation_source",void 0),o[152].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return o[95]!==void 0?(o[156]=o[95].get("stored_procedure"),o[157]=o[95].get("error_code"),o[158]=o[95].get("error_message"),o[159]=".",o[160]=[o[156],o[159],t.i64.to_string(o[157]),o[159],o[158]].join(""),o[6]!==void 0&&o[160]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[160]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!0):t.resolve()},function(e){var n;return o[153]=new t.Map,o[153].set("payload",o[142]),o[154]=t.createArray(),o[156]=(o[154].push(o[95]),o[154]),n=[o[153],void 0,o[152],o[154]],o[114]=n[0],o[115]=n[1],o[116]=n[2],o[117]=n[3]}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[129]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[130]=void 0:o[130]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[129],t.i64.cast([0,1e6])),o[19]),o[130]],o[118]=a[0],o[119]=a[1],o[120]=a[2],o[121]=a[3],o[122]=a[4],o[123]=a[5],o[124]=a[6]):(r=s.item,o[129]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[130]=void 0:o[130]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[129],t.i64.cast([0,1e6])),o[19]),o[130]],o[118]=i[0],o[119]=i[1],o[120]=i[2],o[121]=i[3],o[122]=i[4],o[123]=i[5],o[124]=i[6])})},function(e){return o[126]=new t.Map,o[126].set("task_id",o[118]),o[126].set("queue_name",o[119]),o[126].set("enqueue_timestamp_ms",o[120]),o[126].set("priority",o[121]),o[126].set("first_executed_timestamp_ms",o[122]),o[126].set("execution_time_ns",o[123]),o[126].set("echo_encoding_execution_time_ns",o[124]),o[127]=new t.Map,o[127].set("task_metadata",o[126]),o[127].set("action_type",o[62]),o[127].set("content_type",o[63]),o[127].set("identifiers",void 0),o[127].set("identifiers_v2",o[55]),o[127].set("task_creation_source",void 0),o[127].set("message_payload_source",t.i64.cast([0,2])),o[113]!==void 0?(o[129]=o[113].get("stored_procedure"),o[130]=o[113].get("error_code"),o[131]=o[113].get("error_message"),o[132]=".",o[133]=[o[129],o[132],t.i64.to_string(o[130]),o[132],o[131]].join(""),o[6]!==void 0&&o[133]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[133]):t.resolve()):t.resolve()},function(e){return o[95]!==void 0?(o[129]=o[95].get("stored_procedure"),o[130]=o[95].get("error_code"),o[131]=o[95].get("error_message"),o[132]=".",o[133]=[o[129],o[132],t.i64.to_string(o[130]),o[132],o[131]].join(""),o[6]!==void 0&&o[133]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[133]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[128]=t.createArray(),o[129]=(o[128].push(o[95]),o[128]),n=[void 0,o[113],o[127],o[128]],o[114]=n[0],o[115]=n[1],o[116]=n[2],o[117]=n[3]}])},function(e){var t;return t=[o[114],o[115],o[116],o[117]],o[108]=t[0],o[109]=t[1],o[110]=t[2],o[111]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[123]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[124]=void 0:o[124]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[123],t.i64.cast([0,1e6])),o[19]),o[124]],o[112]=a[0],o[113]=a[1],o[114]=a[2],o[115]=a[3],o[116]=a[4],o[117]=a[5],o[118]=a[6]):(r=s.item,o[123]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[124]=void 0:o[124]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[123],t.i64.cast([0,1e6])),o[19]),o[124]],o[112]=i[0],o[113]=i[1],o[114]=i[2],o[115]=i[3],o[116]=i[4],o[117]=i[5],o[118]=i[6])})},function(e){return o[120]=new t.Map,o[120].set("task_id",o[112]),o[120].set("queue_name",o[113]),o[120].set("enqueue_timestamp_ms",o[114]),o[120].set("priority",o[115]),o[120].set("first_executed_timestamp_ms",o[116]),o[120].set("execution_time_ns",o[117]),o[120].set("echo_encoding_execution_time_ns",o[118]),o[121]=new t.Map,o[121].set("task_metadata",o[120]),o[121].set("action_type",o[62]),o[121].set("content_type",o[63]),o[121].set("identifiers",void 0),o[121].set("identifiers_v2",o[55]),o[121].set("task_creation_source",void 0),o[121].set("message_payload_source",t.i64.cast([0,2])),o[107]!==void 0?(o[123]=o[107].get("stored_procedure"),o[124]=o[107].get("error_code"),o[125]=o[107].get("error_message"),o[126]=".",o[127]=[o[123],o[126],t.i64.to_string(o[124]),o[126],o[125]].join(""),o[6]!==void 0&&o[127]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[127]):t.resolve()):t.resolve()},function(e){return o[95]!==void 0?(o[123]=o[95].get("stored_procedure"),o[124]=o[95].get("error_code"),o[125]=o[95].get("error_message"),o[126]=".",o[127]=[o[123],o[126],t.i64.to_string(o[124]),o[126],o[125]].join(""),o[6]!==void 0&&o[127]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[127]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[122]=t.createArray(),o[123]=(o[122].push(o[95]),o[122]),n=[void 0,o[107],o[121],o[122]],o[108]=n[0],o[109]=n[1],o[110]=n[2],o[111]=n[3]}])},function(e){var t;return t=[o[108],o[109],o[110],o[111]],o[102]=t[0],o[103]=t[1],o[104]=t[2],o[105]=t[3],t}])},function(e){var t;return t=[o[102],o[103],o[104],o[105]],o[96]=t[0],o[97]=t[1],o[98]=t[2],o[99]=t[3],t}])},function(e){var t;return t=[o[96],o[97],o[98],o[99]],o[89]=t[0],o[90]=t[1],o[91]=t[2],o[92]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[104]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[105]=void 0:o[105]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[104],t.i64.cast([0,1e6])),o[19]),o[105]],o[93]=a[0],o[94]=a[1],o[95]=a[2],o[96]=a[3],o[97]=a[4],o[98]=a[5],o[99]=a[6]):(r=s.item,o[104]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[105]=void 0:o[105]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[104],t.i64.cast([0,1e6])),o[19]),o[105]],o[93]=i[0],o[94]=i[1],o[95]=i[2],o[96]=i[3],o[97]=i[4],o[98]=i[5],o[99]=i[6])})},function(e){return o[101]=new t.Map,o[101].set("task_id",o[93]),o[101].set("queue_name",o[94]),o[101].set("enqueue_timestamp_ms",o[95]),o[101].set("priority",o[96]),o[101].set("first_executed_timestamp_ms",o[97]),o[101].set("execution_time_ns",o[98]),o[101].set("echo_encoding_execution_time_ns",o[99]),o[102]=new t.Map,o[102].set("task_metadata",o[101]),o[102].set("action_type",o[62]),o[102].set("content_type",o[63]),o[102].set("identifiers",void 0),o[102].set("identifiers_v2",o[55]),o[102].set("task_creation_source",void 0),o[102].set("message_payload_source",t.i64.cast([0,2])),o[88]!==void 0?(o[104]=o[88].get("stored_procedure"),o[105]=o[88].get("error_code"),o[106]=o[88].get("error_message"),o[107]=".",o[108]=[o[104],o[107],t.i64.to_string(o[105]),o[107],o[106]].join(""),o[6]!==void 0&&o[108]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[108]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[103]=t.createArray(),o[104]=(o[103].push(void 0),o[103]),n=[void 0,o[88],o[102],o[103]],o[89]=n[0],o[90]=n[1],o[91]=n[2],o[92]=n[3]}])},function(e){var t;return t=[o[89],o[90],o[91],o[92]],o[79]=t[0],o[80]=t[1],o[81]=t[2],o[82]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[94]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[95]=void 0:o[95]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[94],t.i64.cast([0,1e6])),o[19]),o[95]],o[83]=a[0],o[84]=a[1],o[85]=a[2],o[86]=a[3],o[87]=a[4],o[88]=a[5],o[89]=a[6]):(r=s.item,o[94]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[95]=void 0:o[95]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[94],t.i64.cast([0,1e6])),o[19]),o[95]],o[83]=i[0],o[84]=i[1],o[85]=i[2],o[86]=i[3],o[87]=i[4],o[88]=i[5],o[89]=i[6])})},function(e){return o[91]=new t.Map,o[91].set("task_id",o[83]),o[91].set("queue_name",o[84]),o[91].set("enqueue_timestamp_ms",o[85]),o[91].set("priority",o[86]),o[91].set("first_executed_timestamp_ms",o[87]),o[91].set("execution_time_ns",o[88]),o[91].set("echo_encoding_execution_time_ns",o[89]),o[92]=new t.Map,o[92].set("task_metadata",o[91]),o[92].set("action_type",o[62]),o[92].set("content_type",o[63]),o[92].set("identifiers",void 0),o[92].set("identifiers_v2",o[55]),o[92].set("task_creation_source",void 0),o[92].set("message_payload_source",t.i64.cast([0,2])),o[78]!==void 0?(o[94]=o[78].get("stored_procedure"),o[95]=o[78].get("error_code"),o[96]=o[78].get("error_message"),o[97]=".",o[98]=[o[94],o[97],t.i64.to_string(o[95]),o[97],o[96]].join(""),o[6]!==void 0&&o[98]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[98]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[93]=t.createArray(),o[94]=(o[93].push(void 0),o[93]),n=[void 0,o[78],o[92],o[93]],o[79]=n[0],o[80]=n[1],o[81]=n[2],o[82]=n[3]}])},function(e){var t;return t=[o[79],o[80],o[81],o[82]],o[58]=t[0],o[59]=t[1],o[60]=t[2],o[61]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[85]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[86]=void 0:o[86]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[85],t.i64.cast([0,1e6])),o[19]),o[86]],o[73]=a[0],o[74]=a[1],o[75]=a[2],o[76]=a[3],o[77]=a[4],o[78]=a[5],o[79]=a[6]):(r=s.item,o[85]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[86]=void 0:o[86]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[85],t.i64.cast([0,1e6])),o[19]),o[86]],o[73]=i[0],o[74]=i[1],o[75]=i[2],o[76]=i[3],o[77]=i[4],o[78]=i[5],o[79]=i[6])})},function(e){return o[81]=new t.Map,o[81].set("task_id",o[73]),o[81].set("queue_name",o[74]),o[81].set("enqueue_timestamp_ms",o[75]),o[81].set("priority",o[76]),o[81].set("first_executed_timestamp_ms",o[77]),o[81].set("execution_time_ns",o[78]),o[81].set("echo_encoding_execution_time_ns",o[79]),o[82]=new t.Map,o[82].set("task_metadata",o[81]),o[82].set("action_type",o[62]),o[82].set("content_type",o[63]),o[82].set("identifiers",void 0),o[82].set("identifiers_v2",o[55]),o[82].set("task_creation_source",void 0),o[82].set("message_payload_source",t.i64.cast([0,2])),o[83]=new t.Map,o[83].set("error_code",o[64]),o[83].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[83].set("error_message",""),o[83]!==void 0?(o[85]=o[83].get("stored_procedure"),o[86]=o[83].get("error_code"),o[87]=o[83].get("error_message"),o[88]=".",o[89]=[o[85],o[88],t.i64.to_string(o[86]),o[88],o[87]].join(""),o[6]!==void 0&&o[89]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[89]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[84]=t.createArray(),n=[void 0,o[83],o[82],o[84]],o[58]=n[0],o[59]=n[1],o[60]=n[2],o[61]=n[3]}])},function(e){var t;return t=[o[58],o[59],o[60],o[61]],o[50]=t[0],o[51]=t[1],o[52]=t[2],o[53]=t[3],t}]))})},function(e){var t;return t=[o[50],o[51],o[52],o[53]],o[42]=t[0],o[43]=t[1],o[44]=t[2],o[45]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[58]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[58],t.i64.cast([0,1e6])),o[19]),void 0],o[46]=a[0],o[47]=a[1],o[48]=a[2],o[49]=a[3],o[50]=a[4],o[51]=a[5],o[52]=a[6]):(r=s.item,o[58]=t.i64.of_float(Date.now()),i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[58],t.i64.cast([0,1e6])),o[19]),void 0],o[46]=i[0],o[47]=i[1],o[48]=i[2],o[49]=i[3],o[50]=i[4],o[51]=i[5],o[52]=i[6])})},function(e){return o[54]=new t.Map,o[54].set("task_id",o[46]),o[54].set("queue_name",o[47]),o[54].set("enqueue_timestamp_ms",o[48]),o[54].set("priority",o[49]),o[54].set("first_executed_timestamp_ms",o[50]),o[54].set("execution_time_ns",o[51]),o[54].set("echo_encoding_execution_time_ns",o[52]),o[55]=new t.Map,o[55].set("task_metadata",o[54]),o[55].set("action_type",void 0),o[55].set("content_type",void 0),o[55].set("identifiers",void 0),o[55].set("identifiers_v2",void 0),o[55].set("task_creation_source",void 0),o[55].set("message_payload_source",t.i64.cast([0,2])),o[56]=new t.Map,o[56].set("error_code",t.i64.cast([0,24])),o[56].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[56].set("error_message",""),o[56]!==void 0?(o[58]=o[56].get("stored_procedure"),o[59]=o[56].get("error_code"),o[60]=o[56].get("error_message"),o[61]=".",o[62]=[o[58],o[61],t.i64.to_string(o[59]),o[61],o[60]].join(""),o[6]!==void 0&&o[62]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[62]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[57]=t.createArray(),n=[void 0,o[56],o[55],o[57]],o[42]=n[0],o[43]=n[1],o[44]=n[2],o[45]=n[3]}])},function(e){var t;return t=[o[42],o[43],o[44],o[45]],o[12]=t[0],o[13]=t[1],o[14]=t[2],o[15]=t[3],t}]):t.sequence([function(n){return o[23]=o[10].get("errors"),o[24]=o[10].get("errors"),t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[37]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[37],t.i64.cast([0,1e6])),o[19]),void 0],o[25]=a[0],o[26]=a[1],o[27]=a[2],o[28]=a[3],o[29]=a[4],o[30]=a[5],o[31]=a[6]):(r=s.item,o[37]=t.i64.of_float(Date.now()),i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[37],t.i64.cast([0,1e6])),o[19]),void 0],o[25]=i[0],o[26]=i[1],o[27]=i[2],o[28]=i[3],o[29]=i[4],o[30]=i[5],o[31]=i[6])})},function(e){return o[33]=new t.Map,o[33].set("task_id",o[25]),o[33].set("queue_name",o[26]),o[33].set("enqueue_timestamp_ms",o[27]),o[33].set("priority",o[28]),o[33].set("first_executed_timestamp_ms",o[29]),o[33].set("execution_time_ns",o[30]),o[33].set("echo_encoding_execution_time_ns",o[31]),o[34]=new t.Map,o[34].set("task_metadata",o[33]),o[34].set("action_type",void 0),o[34].set("content_type",void 0),o[34].set("identifiers",void 0),o[34].set("identifiers_v2",void 0),o[34].set("task_creation_source",void 0),o[34].set("message_payload_source",t.i64.cast([0,2])),o[35]=new t.Map,o[35].set("error_code",t.i64.cast([0,1])),o[35].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[35].set("error_message",""),o[35]!==void 0?(o[37]=o[35].get("stored_procedure"),o[38]=o[35].get("error_code"),o[39]=o[35].get("error_message"),o[40]=".",o[41]=[o[37],o[40],t.i64.to_string(o[38]),o[40],o[39]].join(""),o[6]!==void 0&&o[41]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[41]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[36]=t.createArray(),n=[void 0,o[35],o[34],o[36]],o[12]=n[0],o[13]=n[1],o[14]=n[2],o[15]=n[3]}])},function(e){return o[16]=t.i64.of_float(Date.now()),o[17]=t.i64.random(),o[20]="Finishing execution. Execution time: ",o[21]=t.i64.to_string(t.i64.sub(o[16],o[0])),o[22]=" ms",o[18]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][serializeBackupPayloadV2] ",o[18],o[20],o[18],o[21],o[18],o[22]].join("")),t.i64.eq(t.i64.mod_(o[17],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(o[23]=",",o[24]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"serializeBackupPayloadV2",[o[20],o[23],o[21],o[23],o[22]].join(""),o[24],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[o[12],o[13],o[14],o[15]],a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],t}])},function(e){return t.resolve(a)}])}e.__sproc_name__="LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure",e.__tables__=["pending_tasks","secure_encrypted_backups_client_state","pending_backups_context_v2","pending_protobuf_backups_context","secure_encrypted_backups_epochs"];var s=e;l.default=s}),98);
__d("LSTaskSerializerEncryptedBackupsUpload",["LSArrayGetObjectAt","LSLogMebClientEvent.nop","LSSerializeBackupPayloadV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsUpload] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.forEach(t.db.table(177).fetch([[[e[0]]],"fk_pending_tasks"]),function(e){var n=e.update,r=e.item;return n({backupStatus:t.i64.cast([0,2])})})},function(o){return t.storedProcedure(n("LSSerializeBackupPayloadV2"),e[0]).then(function(e){var t;return t=e,r[2]=t[0],r[3]=t[1],r[4]=t[2],r[5]=t[3],t})},function(e){return r[6]=t.createArray(),r[7]=t.i64.of_int32(r[5].length),t.i64.gt(r[7],t.i64.cast([0,0]))?t.loopAsync(r[7],function(e){return r[23]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[5],r[23]).then(function(e){var t;return t=e,r[24]=t[0],r[25]=t[1],t})},function(e){return r[24]!==void 0?r[26]=(r[6].push(r[24]),r[6]):0}])}):t.resolve()},function(e){return r[8]=t.i64.of_int32(r[6].length),t.i64.gt(r[8],t.i64.cast([0,0]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[6],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[23]=t[0],r[24]=t[1],t})},function(e){return r[9]=r[23]}]):t.resolve(r[9]=void 0)},function(e){var o,a,i,l;return r[2]?r[10]=!1:r[10]=!0,r[10]?(r[3]?r[23]=!1:r[23]=!0,r[23]?(i=[void 0,void 0,r[9],r[6],r[4]],r[24]=i[0],r[25]=i[1],r[26]=i[2],r[27]=i[3],r[28]=i[4]):(a=[void 0,r[3],r[9],r[6],r[4]],r[24]=a[0],r[25]=a[1],r[26]=a[2],r[27]=a[3],r[28]=a[4]),l=[r[24],r[25],r[26],r[27],r[28]],r[11]=l[0],r[12]=l[1],r[13]=l[2],r[14]=l[3],r[15]=l[4]):(r[23]=r[2].get("payload"),o=[r[23],r[3],r[9],r[6],r[4]],r[11]=o[0],r[12]=o[1],r[13]=o[2],r[14]=o[3],r[15]=o[4]),r[23]=new t.Map,r[24]=r[23].set("success",r[11]),r[25]=r[23].set("failure",r[12]),r[26]=r[23].set("protobuf_failure",r[13]),r[27]=r[23].set("protobuf_failures",r[14]),r[28]=r[23].set("context",r[15]),r[29]=t.toJSON(r[23]),r[16]=r[29],r[17]=t.i64.of_float(Date.now()),r[18]=t.i64.random(),r[20]="Finishing execution. Execution time: ",r[21]=t.i64.to_string(t.i64.sub(r[17],r[0])),r[22]=" ms",r[19]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsUpload] ",r[19],r[20],r[19],r[21],r[19],r[22]].join("")),t.i64.eq(t.i64.mod_(r[18],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[23]=",",r[24]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUpload",[r[20],r[23],r[21],r[23],r[22]].join(""),r[24],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[16],t.i64.cast([0,50026])],o[0]=n[0],o[1]=n[1],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadStoredProcedure",e.__tables__=["pending_backups_context_v2"],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsUploadProtobufOnly",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return r[0]=new n.Map,r[0].set("error_code",n.i64.cast([0,802])),r[0].set("stored_procedure","LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure"),r[0].set("error_message",""),r[2]=new n.Map,r[3]=r[2].set("success",void 0),r[4]=r[2].set("failure",r[0]),r[5]=r[2].set("context",void 0),r[6]=n.toJSON(r[2]),r[1]=r[6],e=[r[1],n.i64.cast([0,50042]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsUploadSenderBackup",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] Beginning execution."),r[1]=t.i64.of_float(Date.now()),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] LSEncryptedBackupsMinosEncrypt native op not supported"),r[3]="LSEncryptedBackupsMinosEncrypt native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] ","",r[3]].join("")),r[2]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure",r[3],r[2],t.i64.cast([0,3]))},function(e){return r[4]=new t.Map,r[4].set("error_code",t.i64.cast([0,3])),r[4].set("stored_procedure","taskSerializerEncryptedBackupsUploadSenderBackup"),r[4].set("error_message",""),r[12]=new t.Map,r[13]=r[12].set("success",void 0),r[14]=r[12].set("failure",r[4]),r[15]=r[12].set("context",void 0),r[16]=t.toJSON(r[12]),r[5]=r[16],r[6]=t.i64.of_float(Date.now()),r[7]=t.i64.random(),r[9]="Finishing execution. Execution time: ",r[10]=t.i64.to_string(t.i64.sub(r[6],r[0])),r[11]=" ms",r[8]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] ",r[8],r[9],r[8],r[10],r[8],r[11]].join("")),t.i64.eq(t.i64.mod_(r[7],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[12]=",",r[13]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUploadSenderBackup",[r[9],r[12],r[10],r[12],r[11]].join(""),r[13],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[5],t.i64.cast([0,50057]),void 0],o[0]=n[0],o[1]=n[1],o[2]=n[2],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerMuteThreadV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i=r.done,l=r.value;return i?(n[4]=t.createArray(),n[5]=(n[4].push("TaskSerializerMuteThreadV2: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=l.item,t.sequence([function(e){return n[8]=o.threadKey,t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o,a=e.done,i=e.value;return a?(n[9]=t.createArray(),n[10]=(n[9].push("TaskSerializerMuteThreadV2: Thread not found"),n[9]),n[11]=(n[9].push(n[8]),n[9]),n[12]=t.toJSON(n[9]),(function(e){t.logger(e).mustfix(e)})(n[12]),o=[void 0,void 0,void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]):(r=i.item,t.sequence([function(e){return t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[9]=t.i64.cast([0,1]):(r=a.item,n[14]=r.syncGroup,t.i64.neq(n[14],void 0)?n[13]=n[14]:n[13]=t.i64.cast([0,1]),n[9]=n[13])})},function(e){var o;return n[11]=new t.Map,n[11].set("thread_key",n[8]),n[11].set("mailbox_type",t.i64.cast([0,0])),n[11].set("mute_expire_time_ms",r.muteExpireTimeMs),n[11].set("sync_group",n[9]),n[12]=t.toJSON(n[11]),o=[n[12],t.i64.cast([0,144]),void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]}]))})},function(e){var t;return t=[n[4],n[5],n[6]],n[0]=t[0],n[1]=t[1],n[2]=t[2],t}]))})},function(e){var t;return t=[n[0],n[1]],r[0]=t[0],r[1]=t[1],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerMuteThreadV2StoredProcedure",e.__tables__=["threads_optimistic_context","threads"],a.exports=e}),null);
__d("LSTaskSerializerRemoveThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i,l,s,u=r.done,c=r.value;return u?(n[4]=t.createArray(),n[5]=(n[4].push("TaskSerializerRemoveThreadV2: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=c.item,n[7]=o.removeType,t.i64.neq(n[7],void 0)?(n[8]=new t.Map,n[8].set("thread_key",o.threadKey),n[8].set("remove_type",n[7]),n[8].set("sync_group",o.syncGroup==null?t.i64.cast([0,1]):o.syncGroup),n[9]=t.toJSON(n[8]),i=[n[9],t.i64.cast([0,146]),void 0],n[4]=i[0],n[5]=i[1],n[6]=i[2]):(l=[void 0,void 0,void 0],n[4]=l[0],n[5]=l[1],n[6]=l[2]),s=[n[4],n[5],n[6]],n[0]=s[0],n[1]=s[1],n[2]=s[2])})},function(e){var t;return t=[n[0],n[1]],r[0]=t[0],r[1]=t[1],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerRemoveThreadStoredProcedure",e.__tables__=["threads_optimistic_context"],a.exports=e}),null);
__d("LSTaskSerializerSendMessageV2",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(31).fetch([[[e[0]]]]).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(r[4]=t.createArray(),r[5]=(r[4].push("task ID not found"),r[4]),r[6]=(r[4].push(e[0]),r[4]),r[7]=t.toJSON(r[4]),(function(e){t.logger(e).mustfix(e)})(r[7]),i=[void 0,void 0,void 0],r[0]=i[0],r[1]=i[1],r[2]=i[2]):(a=s.item,t.sequence([function(o){return r[12]=a.offlineThreadingId,r[13]=a.messageId,r[11]=a.threadAttributionSource,r[9]=a.platformRef,r[10]=a.platformToken,r[8]=a.replySourceId,r[14]=a.replySourceType,r[23]=a.sendType,r[25]=a.markThreadRead,r[16]=a.initiatingSource,r[17]=a.skipUrlPreviewGen,r[19]=a.textHasLinks,r[20]=a.dataclassParams,r[21]=a.multitabEnv,r[22]=a.metadataDataclass,r[18]=a.richTextFormatType,r[24]=a.subthreadParentMessageId,r[15]=a.isExclusiveToSubthread,t.db.table(12).fetch([[[r[12]]],"optimistic"]).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(r[26]=t.createArray(),r[27]=(r[26].push("OTID not found"),r[26]),r[28]=(r[26].push(r[12]),r[26]),r[29]=t.toJSON(r[26]),(function(e){t.logger(e).mustfix(e)})(r[29]),i=[void 0,void 0,void 0],r[4]=i[0],r[5]=i[1],r[6]=i[2]):(a=s.item,t.sequence([function(o){return r[34]=a.text,r[30]=a.threadKey,r[35]=a.messageId,r[43]=a.senderId,r[32]=a.stickerId,r[37]=a.mentionOffsets,r[38]=a.mentionLengths,r[31]=a.mentionIds,r[39]=a.mentionTypes,r[42]=a.replyType,r[40]=a.isForwarded,r[36]=a.forwardScore,r[41]=a.hotEmojiSize,r[33]=a.metadataDataclass,t.db.table(9).fetch([[[r[30]]]]).next().then(function(o,i){var l,s=o.done,u=o.value;return s?(r[44]=t.createArray(),r[45]=(r[44].push("thread not found"),r[44]),r[46]=(r[44].push(r[30]),r[44]),r[47]=t.toJSON(r[44]),(function(e){t.logger(e).mustfix(e)})(r[47]),l=[void 0,void 0,void 0],r[26]=l[0],r[27]=l[1],r[28]=l[2]):(i=u.item,t.sequence([function(n){return r[51]=i.threadName,r[49]=i.threadKey,r[52]=i.mailboxType,r[50]=i.threadType,r[53]=i.capabilities,r[54]=i.capabilities2,r[55]=i.capabilities3,r[56]=i.capabilities4,r[57]=i.capabilities5,t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,o){var a=n.done,i=n.value;return a?r[44]=!1:(o=i.item,t.sequence([function(n){return t.islc(t.db.table(2).fetch([[[o.queueName]],"queueNameTaskId"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(n,o){var a=n.done,i=n.value;return a?r[58]=!1:(o=i.item,r[58]=t.i64.eq(o.taskId,e[0]))})},function(e){return r[44]=r[58]}]))})},function(e){return t.i64.eq(i.authorityLevel,t.i64.cast([0,20]))&&[t.i64.cast([0,2]),t.i64.cast([0,5]),t.i64.cast([0,205]),t.i64.cast([0,206]),t.i64.cast([0,26])].some(function(e){return t.i64.eq(r[50],e)})&&r[44]?t.sequence([function(e){return r[61]=r[23]==null?t.i64.cast([0,1]):r[23],t.db.table(9).fetch([[[r[30]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[58]=t.i64.cast([0,1]):(n=a.item,r[79]=n.syncGroup,t.i64.neq(r[79],void 0)?r[78]=r[79]:r[78]=t.i64.cast([0,1]),r[58]=r[78])})},function(e){return r[60]=new t.Map,r[60].set("thread_id",r[30]),r[60].set("otid",r[12]),r[60].set("source",r[11]==null?t.i64.cast([0,0]):r[11]),r[60].set("send_type",t.i64.cast([0,1])),r[60].set("sync_group",r[58]),r[60].set("mark_thread_read",r[25]),t.i64.eq(r[61],t.i64.cast([0,1]))?t.resolve(r[60].set("text",r[34])):t.i64.eq(r[61],t.i64.cast([0,2]))?(t.i64.neq(r[32],void 0)&&(r[60].set("sticker_id",r[32]),r[60].set("send_type",r[61])),r[33]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[33]).then(function(e){var t;return t=e,r[78]=t[0],t})},function(e){return r[79]=new t.Map,r[80]=r[78].keys(),r[81]=t.i64.of_int32(r[80].length),t.i64.gt(r[81],t.i64.cast([0,0]))?t.loopAsync(r[81],function(e){return r[85]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[80],r[85]).then(function(e){var t;return t=e,r[86]=t[0],r[87]=t[1],t})},function(e){return r[88]=r[78].get(r[86]),r[79].set(r[86],r[88])}])}):t.resolve()},function(e){return r[82]=r[79].get("xma_music_sticker_message_metadata"),r[82]?r[83]=!1:r[83]=!0,r[83]?t.resolve(r[84]=void 0):t.sequence([function(e){return r[85]=new t.Map,r[86]=r[82].keys(),r[87]=t.i64.of_int32(r[86].length),t.i64.gt(r[87],t.i64.cast([0,0]))?t.loopAsync(r[87],function(e){return r[88]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[86],r[88]).then(function(e){var t;return t=e,r[89]=t[0],r[90]=t[1],t})},function(e){return r[91]=r[82].get(r[89]),r[85].set(r[89],r[91])}])}):t.resolve()},function(e){return r[84]=r[85]}])},function(e){return r[84]!==void 0?r[60].set("send_type",r[61]):0}]):t.resolve()):t.i64.eq(r[61],t.i64.cast([0,7]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[78]=n[0],r[79]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[78]=o[0],r[79]=o[1])})},function(e){return r[78]!==void 0&&t.i64.neq(r[79],void 0)?(r[60].set("url",r[78]),r[60].set("attribution_app_id",r[79]),r[60].set("send_type",r[61]),r[33]!==void 0?r[60].set("metadata_dataclass",r[33]):0):0}]):t.i64.eq(r[61],t.i64.cast([0,3]))?t.sequence([function(e){return r[60].set("text",r[34]),r[78]=t.createArray(),r[79]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[80]=n.offlineAttachmentId,r[81]=(r[78].push(t.i64.from_string(n.attachmentFbid)),r[78]),r[80]!==void 0?r[81]=(r[79].push(r[80]),r[79]):0})},function(e){return r[60].set("attachment_fbids",r[78]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[79]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,9]))?t.sequence([function(e){return r[60].set("text",r[34]),r[78]=t.createArray(),r[79]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[80]=n.offlineAttachmentId,r[81]=(r[78].push(t.i64.from_string(n.attachmentFbid)),r[78]),r[80]!==void 0?r[81]=(r[79].push(r[80]),r[79]):0})},function(e){return r[60].set("attachment_fbids",r[78]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[79]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,4]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[78]=void 0:(t=o.item,r[78]=t.attachmentFbid)})},function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[80]=void 0:(t=o.item,r[80]=t.actionUrl)})},function(e){return r[78]!==void 0?(r[60].set("text",r[34]),r[80]!==void 0&&r[60].set("url",r[80]),r[60].set("forwarded_share_id",r[78]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,5]))?t.resolve(r[13]!==void 0?(r[60].set("forwarded_msg_id",r[13]),r[60].set("send_type",r[61]),t.i64.neq(r[36],void 0)&&r[60].set("forward_score",r[36]),r[60].set("strip_forwarded_msg_caption",!1)):0):t.i64.eq(r[61],t.i64.cast([0,6]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[78]=n[0],r[79]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[78]=o[0],r[79]=o[1])})},function(e){return r[78]!==void 0?(r[60].set("url",r[78]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,11]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[78]=n[0],r[79]=n[1],n):(t=i.item,o=[t.actionUrl,t.attributionAppId],r[78]=o[0],r[79]=o[1])})},function(e){return r[78]!==void 0?(r[60].set("url",r[78]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.resolve(t.i64.eq(r[61],t.i64.cast([0,12]))?r[60].set("send_type",r[61]):0)},function(e){return r[73]=r[24]==null?void 0:r[24],r[72]=r[8]===""?void 0:r[8],r[72]!==void 0&&t.i64.neq(r[14],void 0)&&(r[78]=new t.Map,r[78].set("reply_source_id",r[72]),r[78].set("reply_source_type",r[14]),r[78].set("reply_type",r[42]==null?t.i64.cast([0,0]):r[42]),r[78].set("reply_source_attachment_id",void 0),r[60].set("reply_metadata",r[78])),r[73]!==void 0&&r[15]!==void 0&&(r[78]=new t.Map,r[78].set("subthread_parent_message_id",r[73]),r[78].set("is_exclusive_to_subthread",r[15]),r[60].set("subthread_data",r[78])),r[74]=r[31]===""?void 0:r[31],r[74]!==void 0&&(r[78]=r[37]===""?void 0:r[37],r[78]!==void 0&&(r[79]=r[38]===""?void 0:r[38],r[79]!==void 0&&(r[80]=new t.Map,r[80].set("mention_ids",r[74]),r[80].set("mention_offsets",r[78]),r[80].set("mention_lengths",r[79]),r[80].set("mention_types",r[39]===""?void 0:r[39]),r[60].set("mention_data",r[80])))),r[40]!==void 0&&r[60].set("is_forwarded",r[40]),r[75]=r[9]===""?void 0:r[9],r[75]!==void 0&&r[60].set("platform_ref",r[75]),r[76]=r[10]===""?void 0:r[10],r[76]!==void 0&&r[60].set("platform_token",r[76]),[t.i64.cast([0,1]),t.i64.cast([0,2])].some(function(e){return t.i64.eq(r[61],e)})&&t.i64.neq(r[41],void 0)&&r[60].set("hot_emoji_size",r[41]),t.i64.neq(r[16],void 0)&&r[60].set("initiating_source",r[16]),r[17]!==void 0&&r[60].set("skip_url_preview_gen",r[17]),t.i64.neq(r[18],void 0)&&r[60].set("rich_text_format_type",r[18]),t.resolve()},function(e){return r[19]!==void 0&&r[60].set("text_has_links",r[19]),r[20]!==void 0&&r[60].set("dataclass_params",r[20]),r[21]!==void 0&&r[60].set("multitab_env",r[21]),r[22]!==void 0&&r[60].set("metadata_dataclass",r[22]),t.filter(t.db.table(14).fetch([[[r[49],r[43]]]]),function(e){return t.i64.eq(e.threadKey,r[49])&&t.i64.eq(t.i64.cast([0,0]),r[52])&&t.i64.eq(e.contactId,r[43])}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[62]=!1:(n=a.item,t.i64.eq(r[50],t.i64.cast([0,152]))?(r[79]=n.threadRoles,t.i64.lt(t.i64.cast([0,7]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,7]),t.i64.cast([0,11]))?r[80]=!1:r[80]=!t.i64.eq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[79]),t.i64.cast([0,0])),r[81]=r[53],r[82]=r[54],r[83]=r[55],r[84]=r[56],r[85]=r[57],r[87]=t.i64.div(t.i64.cast([0,223]),t.i64.cast([0,64])),r[88]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.sub(t.i64.cast([0,223]),t.i64.mul(r[87],t.i64.cast([0,64]))))),t.i64.lt(t.i64.cast([0,223]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,223]),t.i64.cast([0,304]))?r[86]=!1:(t.i64.eq(r[87],t.i64.cast([0,0]))?r[89]=!t.i64.eq(t.i64.and_(r[88],r[81]),t.i64.cast([0,0])):(t.i64.eq(r[87],t.i64.cast([0,1]))?r[90]=!t.i64.eq(t.i64.and_(r[88],r[82]),t.i64.cast([0,0])):(t.i64.eq(r[87],t.i64.cast([0,2]))?r[91]=!t.i64.eq(t.i64.and_(r[88],r[83]),t.i64.cast([0,0])):(t.i64.eq(r[87],t.i64.cast([0,3]))?r[92]=!t.i64.eq(t.i64.and_(r[88],r[84]),t.i64.cast([0,0])):(t.i64.eq(r[87],t.i64.cast([0,4]))?r[93]=!t.i64.eq(t.i64.and_(r[88],r[85]),t.i64.cast([0,0])):r[93]=!1,r[92]=r[93]),r[91]=r[92]),r[90]=r[91]),r[89]=r[90]),r[86]=r[89]),r[80]!==r[86]&&((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),t.throw("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),r[78]=r[80]):r[78]=!1,r[62]=r[78])})},function(e){return r[62]&&r[60].set("perform_action_as_page",!0),r[64]=t.createArray(),t.forEach(t.db.table(14).fetch([[[r[30]]]]),function(e){var t=e.item;return r[78]=(r[64].push(t.contactId),r[64])})},function(e){return r[65]=new t.Map,r[65].set("participants",r[64]),r[65].set("send_payload",r[60]),r[51]!==void 0&&r[65].set("thread_name",r[51]),t.db.table(312).fetch([[[r[30]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[66]=void 0:(t=o.item,r[66]=t.metadata)})},function(e){return r[65].set("thread_metadata",r[66]),r[77]=r[11]==null?t.i64.cast([0,0]):r[11],t.i64.eq(r[77],t.i64.cast([0,393217]))?r[68]="broadcast_flow":(t.i64.eq(r[77],t.i64.cast([0,458752]))?r[78]="inbox_new_message":r[78]=void 0,r[68]=r[78]),r[65].set("group_thread_creation_entry_point",r[68]),t.forEach(t.db.table(9).fetch([[[r[49]]]]),function(e){var t=e.update,n=e.item;return t({otidOfFirstMessage:a.offlineThreadingId})})},function(e){var n,o,a,i,l,s,u,c,d;return r[66]===void 0?(t.i64.eq(r[50],t.i64.cast([0,5]))||t.i64.eq(r[50],t.i64.cast([0,26]))?((function(e){t.logger(e).mustfix(e)})("For Marketplace & community chat subthreads, thread metadata cannot be null"),n=[void 0,void 0,void 0],r[78]=n[0],r[79]=n[1],r[80]=n[2]):(r[81]=t.toJSON(r[65]),o=[r[81],t.i64.cast([0,130]),void 0],r[78]=o[0],r[79]=o[1],r[80]=o[2]),a=[r[78],r[79],r[80]],r[69]=a[0],r[70]=a[1],r[71]=a[2]):(t.i64.eq(r[50],t.i64.cast([0,5]))?(r[81]=t.toJSON(r[65]),i=[r[81],t.i64.cast([0,645]),void 0],r[78]=i[0],r[79]=i[1],r[80]=i[2]):(t.i64.eq(r[50],t.i64.cast([0,2]))?(r[84]=t.toJSON(r[65]),l=[r[84],t.i64.cast([0,787]),void 0],r[81]=l[0],r[82]=l[1],r[83]=l[2]):(r[84]=t.toJSON(r[65]),s=[r[84],t.i64.cast([0,645]),void 0],r[81]=s[0],r[82]=s[1],r[83]=s[2]),u=[r[81],r[82],r[83]],r[78]=u[0],r[79]=u[1],r[80]=u[2]),c=[r[78],r[79],r[80]],r[69]=c[0],r[70]=c[1],r[71]=c[2]),d=[r[69],r[70],r[71]],r[46]=d[0],r[47]=d[1],r[48]=d[2]}]):t.sequence([function(e){return r[61]=r[23]==null?t.i64.cast([0,1]):r[23],t.db.table(9).fetch([[[r[30]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[58]=t.i64.cast([0,1]):(n=a.item,r[71]=n.syncGroup,t.i64.neq(r[71],void 0)?r[70]=r[71]:r[70]=t.i64.cast([0,1]),r[58]=r[70])})},function(e){return r[60]=new t.Map,r[60].set("thread_id",r[30]),r[60].set("otid",r[12]),r[60].set("source",r[11]==null?t.i64.cast([0,0]):r[11]),r[60].set("send_type",t.i64.cast([0,1])),r[60].set("sync_group",r[58]),r[60].set("mark_thread_read",r[25]),t.i64.eq(r[61],t.i64.cast([0,1]))?t.resolve(r[60].set("text",r[34])):t.i64.eq(r[61],t.i64.cast([0,2]))?(t.i64.neq(r[32],void 0)&&(r[60].set("sticker_id",r[32]),r[60].set("send_type",r[61])),r[33]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[33]).then(function(e){var t;return t=e,r[70]=t[0],t})},function(e){return r[71]=new t.Map,r[72]=r[70].keys(),r[73]=t.i64.of_int32(r[72].length),t.i64.gt(r[73],t.i64.cast([0,0]))?t.loopAsync(r[73],function(e){return r[77]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[72],r[77]).then(function(e){var t;return t=e,r[78]=t[0],r[79]=t[1],t})},function(e){return r[80]=r[70].get(r[78]),r[71].set(r[78],r[80])}])}):t.resolve()},function(e){return r[74]=r[71].get("xma_music_sticker_message_metadata"),r[74]?r[75]=!1:r[75]=!0,r[75]?t.resolve(r[76]=void 0):t.sequence([function(e){return r[77]=new t.Map,r[78]=r[74].keys(),r[79]=t.i64.of_int32(r[78].length),t.i64.gt(r[79],t.i64.cast([0,0]))?t.loopAsync(r[79],function(e){return r[80]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[78],r[80]).then(function(e){var t;return t=e,r[81]=t[0],r[82]=t[1],t})},function(e){return r[83]=r[74].get(r[81]),r[77].set(r[81],r[83])}])}):t.resolve()},function(e){return r[76]=r[77]}])},function(e){return r[76]!==void 0?r[60].set("send_type",r[61]):0}]):t.resolve()):t.i64.eq(r[61],t.i64.cast([0,7]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[70]=n[0],r[71]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[70]=o[0],r[71]=o[1])})},function(e){return r[70]!==void 0&&t.i64.neq(r[71],void 0)?(r[60].set("url",r[70]),r[60].set("attribution_app_id",r[71]),r[60].set("send_type",r[61]),r[33]!==void 0?r[60].set("metadata_dataclass",r[33]):0):0}]):t.i64.eq(r[61],t.i64.cast([0,3]))?t.sequence([function(e){return r[60].set("text",r[34]),r[70]=t.createArray(),r[71]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[72]=n.offlineAttachmentId,r[73]=(r[70].push(t.i64.from_string(n.attachmentFbid)),r[70]),r[72]!==void 0?r[73]=(r[71].push(r[72]),r[71]):0})},function(e){return r[60].set("attachment_fbids",r[70]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[71]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,9]))?t.sequence([function(e){return r[60].set("text",r[34]),r[70]=t.createArray(),r[71]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[72]=n.offlineAttachmentId,r[73]=(r[70].push(t.i64.from_string(n.attachmentFbid)),r[70]),r[72]!==void 0?r[73]=(r[71].push(r[72]),r[71]):0})},function(e){return r[60].set("attachment_fbids",r[70]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[71]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,4]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[70]=void 0:(t=o.item,r[70]=t.attachmentFbid)})},function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[72]=void 0:(t=o.item,r[72]=t.actionUrl)})},function(e){return r[70]!==void 0?(r[60].set("text",r[34]),r[72]!==void 0&&r[60].set("url",r[72]),r[60].set("forwarded_share_id",r[70]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,5]))?t.resolve(r[13]!==void 0?(r[60].set("forwarded_msg_id",r[13]),r[60].set("send_type",r[61]),t.i64.neq(r[36],void 0)&&r[60].set("forward_score",r[36]),r[60].set("strip_forwarded_msg_caption",!1)):0):t.i64.eq(r[61],t.i64.cast([0,6]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[70]=n[0],r[71]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[70]=o[0],r[71]=o[1])})},function(e){return r[70]!==void 0?(r[60].set("url",r[70]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,11]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[70]=n[0],r[71]=n[1],n):(t=i.item,o=[t.actionUrl,t.attributionAppId],r[70]=o[0],r[71]=o[1])})},function(e){return r[70]!==void 0?(r[60].set("url",r[70]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.resolve(t.i64.eq(r[61],t.i64.cast([0,12]))?r[60].set("send_type",r[61]):0)},function(e){return r[66]=r[24]==null?void 0:r[24],r[65]=r[8]===""?void 0:r[8],r[65]!==void 0&&t.i64.neq(r[14],void 0)&&(r[70]=new t.Map,r[70].set("reply_source_id",r[65]),r[70].set("reply_source_type",r[14]),r[70].set("reply_type",r[42]==null?t.i64.cast([0,0]):r[42]),r[70].set("reply_source_attachment_id",void 0),r[60].set("reply_metadata",r[70])),r[66]!==void 0&&r[15]!==void 0&&(r[70]=new t.Map,r[70].set("subthread_parent_message_id",r[66]),r[70].set("is_exclusive_to_subthread",r[15]),r[60].set("subthread_data",r[70])),r[67]=r[31]===""?void 0:r[31],r[67]!==void 0&&(r[70]=r[37]===""?void 0:r[37],r[70]!==void 0&&(r[71]=r[38]===""?void 0:r[38],r[71]!==void 0&&(r[72]=new t.Map,r[72].set("mention_ids",r[67]),r[72].set("mention_offsets",r[70]),r[72].set("mention_lengths",r[71]),r[72].set("mention_types",r[39]===""?void 0:r[39]),r[60].set("mention_data",r[72])))),r[40]!==void 0&&r[60].set("is_forwarded",r[40]),r[68]=r[9]===""?void 0:r[9],r[68]!==void 0&&r[60].set("platform_ref",r[68]),r[69]=r[10]===""?void 0:r[10],r[69]!==void 0&&r[60].set("platform_token",r[69]),[t.i64.cast([0,1]),t.i64.cast([0,2])].some(function(e){return t.i64.eq(r[61],e)})&&t.i64.neq(r[41],void 0)&&r[60].set("hot_emoji_size",r[41]),t.i64.neq(r[16],void 0)&&r[60].set("initiating_source",r[16]),r[17]!==void 0&&r[60].set("skip_url_preview_gen",r[17]),t.i64.neq(r[18],void 0)&&r[60].set("rich_text_format_type",r[18]),t.resolve()},function(e){return r[19]!==void 0&&r[60].set("text_has_links",r[19]),r[20]!==void 0&&r[60].set("dataclass_params",r[20]),r[21]!==void 0&&r[60].set("multitab_env",r[21]),r[22]!==void 0&&r[60].set("metadata_dataclass",r[22]),t.filter(t.db.table(14).fetch([[[r[49],r[43]]]]),function(e){return t.i64.eq(e.threadKey,r[49])&&t.i64.eq(t.i64.cast([0,0]),r[52])&&t.i64.eq(e.contactId,r[43])}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[62]=!1:(n=a.item,t.i64.eq(r[50],t.i64.cast([0,152]))?(r[71]=n.threadRoles,t.i64.lt(t.i64.cast([0,7]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,7]),t.i64.cast([0,11]))?r[72]=!1:r[72]=!t.i64.eq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[71]),t.i64.cast([0,0])),r[73]=r[53],r[74]=r[54],r[75]=r[55],r[76]=r[56],r[77]=r[57],r[79]=t.i64.div(t.i64.cast([0,223]),t.i64.cast([0,64])),r[80]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.sub(t.i64.cast([0,223]),t.i64.mul(r[79],t.i64.cast([0,64]))))),t.i64.lt(t.i64.cast([0,223]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,223]),t.i64.cast([0,304]))?r[78]=!1:(t.i64.eq(r[79],t.i64.cast([0,0]))?r[81]=!t.i64.eq(t.i64.and_(r[80],r[73]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,1]))?r[82]=!t.i64.eq(t.i64.and_(r[80],r[74]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,2]))?r[83]=!t.i64.eq(t.i64.and_(r[80],r[75]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,3]))?r[84]=!t.i64.eq(t.i64.and_(r[80],r[76]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,4]))?r[85]=!t.i64.eq(t.i64.and_(r[80],r[77]),t.i64.cast([0,0])):r[85]=!1,r[84]=r[85]),r[83]=r[84]),r[82]=r[83]),r[81]=r[82]),r[78]=r[81]),r[72]!==r[78]&&((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),t.throw("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),r[70]=r[72]):r[70]=!1,r[62]=r[70])})},function(e){var n;return r[62]&&r[60].set("perform_action_as_page",!0),r[64]=t.toJSON(r[60]),n=[r[64],t.i64.cast([0,46]),void 0],r[46]=n[0],r[47]=n[1],r[48]=n[2]}])},function(e){var t;return t=[r[46],r[47],r[48]],r[26]=t[0],r[27]=t[1],r[28]=t[2],t}]))})},function(e){var t;return t=[r[26],r[27],r[28]],r[4]=t[0],r[5]=t[1],r[6]=t[2],t}]))})},function(e){var t;return t=[r[4],r[5],r[6]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}]))})},function(e){var t;return t=[r[0],r[1]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxTaskSerializerSendMessageV2StoredProcedure",e.__tables__=["messages_optimistic_context","messages","threads","pending_tasks","attachments","participants","threads_optimistic_metadata"],a.exports=e}),null);
__d("LSTaskSerializerSyncThreadCapabilities",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,void 0,void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSMailboxTaskSerializerSyncThreadCapabilitiesStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIsExperimentCapabilityEnabled.nop",["LSACSExperimentCapability","LSIntEnum","MetaConfig","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("MetaConfig")._("87"),c=r("MetaConfig")._("156"),d=function(a,i,l,d){switch((s||(s=o("LSIntEnum"))).toNumber(l)){case r("LSACSExperimentCapability").BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:return(e||(e=n("Promise"))).resolve([c]);case r("LSACSExperimentCapability").INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:return(e||(e=n("Promise"))).resolve([!1]);case r("LSACSExperimentCapability").RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:return(e||(e=n("Promise"))).resolve([u])}return(e||(e=n("Promise"))).resolve([!1])};d.__nop_name__="LSIsExperimentCapabilityEnabled",l.default=d}),98);
__d("LSVoprfHmac.nop",["ACSCipherSuiteModule","ACSTokenHmacUtil","Promise","XPlatReactTextEncoder","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i){var l=o("ACSCipherSuiteModule").getACSCipherSuiteByValue(o("ACSCipherSuiteModule").VOPRF_RISTRETTO_HMACSHA512.value);if(!l)return(e||(e=n("Promise"))).resolve([void 0]);var s=yield o("ACSTokenHmacUtil").hmac(l.macAlgorithm,new Uint8Array(i).slice(),new(o("XPlatReactTextEncoder")).TextEncoder().encode(a));return(e||(e=n("Promise"))).resolve([s.buffer])});function r(e,n,r,o){return t.apply(this,arguments)}return r})();s.__nop_name__="LSVoprfHmac",l.default=s}),98);
__d("LSTaskSerializerUnauthenticatedTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsExperimentCapabilityEnabled.nop","LSMailboxTaskCompletionApiOnTaskCompletion","LSRemoveUsedTokens","LSVoprfHmac.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return t.db.table(311).fetch([[[e[0]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[0]=void 0:(t=o.item,r[0]=t.projectName)})},function(o){return r[0]!==void 0?t.sequence([function(o){return e[1]!==void 0?t.sequence([function(e){return r[9]=t.createArray(),r[10]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(307).fetch(),function(e){return r[0]===e.projectName&&t.i64.gt(e.expirationTimestampMs,r[10])}),function(e){var t=e.item;return r[16]=(r[9].push(t.configId),r[9])})},function(e){return t.sequence([function(e){return r[16]=t.createArray(),r[17]=t.i64.of_int32(r[9].length),t.i64.gt(r[17],t.i64.cast([0,0]))?t.loopAsync(r[17],function(e){return r[19]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[9],r[19]).then(function(e){var t;return t=e,r[20]=t[0],r[21]=t[1],t})},function(e){return r[22]=(r[16].push(r[20]),r[16])}])}):t.resolve()},function(e){return r[18]=r[16].join(","),r[11]=r[18]}])},function(o){return t.filter(t.db.table(309).fetch(),function(e){return r[9].includes(e.configId)&&t.i64.gt(e.redeemLimit,t.i64.cast([0,0]))}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(e){return t.nativeOperation(n("LSIsExperimentCapabilityEnabled.nop"),t.i64.cast([0,0]),r[0]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return r[16]?t.sequence([function(n){return t.db.table(311).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[20]=t.i64.cast([0,0]):(n=a.item,r[20]=n.failureCount)})},function(n){return t.forEach(t.db.table(311).fetch([[[e[0]]]]),function(e){var n=e.item;return t.forEach(t.db.table(311).fetch([[[n.taskId]]]),function(e){var n=e.update,o=e.item;return n({failureCount:t.i64.add(r[20],t.i64.cast([0,1]))})})})},function(e){var n;return n=[void 0,void 0,t.i64.mul(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.mod_(r[20],t.i64.cast([0,7])))),t.i64.cast([0,500]))],r[17]=n[0],r[18]=n[1],r[19]=n[2],n}]):t.sequence([function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[20]=t.createArray(),r[21]=(r[20].push("Unauthenticated Task Serializer: no valid tokens"),r[20]),r[22]=(r[20].push(e[0]),r[20]),r[23]=(r[20].push(r[0]),r[20]),r[24]=t.toJSON(r[20]),(function(e){t.logger(e).mustfix(e)})(r[24]),o=[void 0,void 0,void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2]}])},function(e){var t;return t=[r[17],r[18],r[19]],r[12]=t[0],r[13]=t[1],r[14]=t[2],t}]):(a=l.item,t.sequence([function(o){return r[20]=a.tokenId,t.nativeOperation(n("LSVoprfHmac.nop"),e[2]==null?"":e[2],a.sharedSecret).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return t.blobs.neq(r[16],void 0)?t.sequence([function(e){return t.forEach(t.db.table(309).fetch([[[r[20]]]]),function(e){var n=e.update,r=e.item;return n({redeemLimit:t.i64.sub(r.redeemLimit,t.i64.cast([0,1]))})})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[16]).then(function(e){var t;return t=e,r[21]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),a.nonce).then(function(e){var t;return t=e,r[22]=t[0],t})},function(n){var o;return r[23]=new t.Map,r[23].set("config_id",a.configId),r[23].set("tag",r[21]==null?"":r[21]),r[23].set("aux",r[22]==null?"":r[22]),r[23].set("project_name",r[0]),r[24]=t.toJSON(r[23]),r[25]=new t.Map,r[25].set("payload",e[2]==null?"":e[2]),r[25].set("token",r[24]),r[26]=t.toJSON(r[25]),o=[r[26],t.i64.from_string(e[1]),void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2]}]):t.sequence([function(e){return t.forEach(t.db.table(309).fetch([[[r[20]]]]),function(e){return e.delete()})},function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[21]=t.createArray(),r[22]=(r[21].push("Unauthenticated Task Serializer: hmac failed"),r[21]),r[23]=(r[21].push(e[0]),r[21]),r[24]=t.toJSON(r[21]),(function(e){t.logger(e).mustfix(e)})(r[24]),o=[void 0,void 0,void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2]}])},function(e){var t;return t=[r[17],r[18],r[19]],r[12]=t[0],r[13]=t[1],r[14]=t[2],t}]))})},function(e){var t;return t=[r[12],r[13],r[14]],r[6]=t[0],r[7]=t[1],r[8]=t[2],t}]):t.sequence([function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[9]=t.createArray(),r[10]=(r[9].push("Unauthenticated Task Serializer: task has no write label"),r[9]),r[11]=(r[9].push(e[0]),r[9]),r[12]=t.toJSON(r[9]),(function(e){t.logger(e).mustfix(e)})(r[12]),o=[void 0,void 0,void 0],r[6]=o[0],r[7]=o[1],r[8]=o[2]}])},function(e){var t;return t=[r[6],r[7],r[8]],r[2]=t[0],r[3]=t[1],r[4]=t[2],t}]):t.sequence([function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[6]=t.createArray(),r[7]=(r[6].push("Unauthenticated Task Serializer: anonymous_task_context row not found"),r[6]),r[8]=(r[6].push(e[0]),r[6]),r[9]=t.toJSON(r[6]),(function(e){t.logger(e).mustfix(e)})(r[9]),o=[void 0,void 0,void 0],r[2]=o[0],r[3]=o[1],r[4]=o[2]}])},function(e){return t.storedProcedure(n("LSRemoveUsedTokens"))},function(e){return r[0]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSIsExperimentCapabilityEnabled.nop"),t.i64.cast([0,1]),r[0]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return r[6]?t.sequence([function(e){return t.i64.neq(r[4],void 0)?t.resolve(r[8]=!0):t.sequence([function(e){return r[10]=t.createArray(),r[11]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(307).fetch(),function(e){return r[0]===e.projectName&&t.i64.gt(e.expirationTimestampMs,r[11])}),function(e){var t=e.item;return r[15]=(r[10].push(t.configId),r[10])})},function(e){return t.sequence([function(e){return r[15]=t.createArray(),r[16]=t.i64.of_int32(r[10].length),t.i64.gt(r[16],t.i64.cast([0,0]))?t.loopAsync(r[16],function(e){return r[18]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[10],r[18]).then(function(e){var t;return t=e,r[19]=t[0],r[20]=t[1],t})},function(e){return r[21]=(r[15].push(r[19]),r[15])}])}):t.resolve()},function(e){return r[17]=r[15].join(","),r[12]=r[17]}])},function(e){return t.filter(t.db.table(309).fetch(),function(e){return r[10].includes(e.configId)&&t.i64.gt(e.redeemLimit,t.i64.cast([0,0]))}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[13]=!0:(t=o.item,r[13]=!1)})},function(e){return r[8]=r[13]}])},function(e){return r[8]?t.sequence([function(e){return t.filter(t.db.table(310).fetch(),function(e){return e.projectName===r[0]}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[10]=void 0:(t=o.item,r[10]=t.taskId)})},function(e){return r[9]=r[10]}]):t.resolve(r[9]=void 0)},function(e){return r[7]=r[9]}]):t.resolve(r[7]=void 0)},function(e){return r[5]=r[7]}]):t.resolve(r[5]=void 0)},function(e){var t;return t=[r[2],r[3],r[4],r[5]],o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsTaskSerializerUnauthenticatedTaskStoredProcedure",e.__tables__=["anonymous_task_context","secure_acs_configurations","secure_acs_tokens","acs_request_context"],a.exports=e}),null);
__d("LSTaskSerializerUpdateThreadName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i=r.done,l=r.value;return i?(n[4]=t.createArray(),n[5]=(n[4].push("taskSerializerUpdateThreadName: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=l.item,t.sequence([function(e){return n[8]=o.threadKey,t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o,a=e.done,i=e.value;return a?(n[9]=t.createArray(),n[10]=(n[9].push("taskSerializerUpdateThreadName: Thread not found"),n[9]),n[11]=(n[9].push(n[8]),n[9]),n[12]=t.toJSON(n[9]),(function(e){t.logger(e).mustfix(e)})(n[12]),o=[void 0,void 0,void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]):(r=i.item,t.sequence([function(e){return t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[9]=t.i64.cast([0,1]):(r=a.item,n[14]=r.syncGroup,t.i64.neq(n[14],void 0)?n[13]=n[14]:n[13]=t.i64.cast([0,1]),n[9]=n[13])})},function(e){var o;return n[11]=new t.Map,n[11].set("thread_key",n[8]),n[11].set("thread_name",r.threadName==null?"":r.threadName),n[11].set("sync_group",n[9]),n[12]=t.toJSON(n[11]),o=[n[12],t.i64.cast([0,32]),void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]}]))})},function(e){var t;return t=[n[4],n[5],n[6]],n[0]=t[0],n[1]=t[1],n[2]=t[2],t}]))})},function(e){var t;return t=[n[0],n[1],n[2]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerUpdateThreadNameStoredProcedure",e.__tables__=["threads_optimistic_context","threads"],a.exports=e}),null);
__d("LSSerializeTask",["LSForceTaskExecutionImmediately","LSLogMebClientEvent.nop","LSTaskSerializerAcsIssueNextSync","LSTaskSerializerDeleteChatHistory","LSTaskSerializerE2eeMessageIntegrityCheckV2","LSTaskSerializerE2eeMetadataThreadIntegrityCheck","LSTaskSerializerEncryptedBackupAction","LSTaskSerializerEncryptedBackupsLoopingUpload","LSTaskSerializerEncryptedBackupsOpenUpload","LSTaskSerializerEncryptedBackupsRestoreWithSerializer","LSTaskSerializerEncryptedBackupsUpload","LSTaskSerializerEncryptedBackupsUploadProtobufOnly","LSTaskSerializerEncryptedBackupsUploadSenderBackup","LSTaskSerializerMuteThreadV2","LSTaskSerializerRemoveThread","LSTaskSerializerSendMessageV2","LSTaskSerializerSyncThreadCapabilities","LSTaskSerializerUnauthenticatedTask","LSTaskSerializerUpdateThreadName"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return e[1]==="46"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerSendMessageV2"),e[0]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(e){var n;return n=[r[8],t.i64.to_string(r[9]),void 0,void 0],r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],n}]):t.sequence([function(o){return e[1]==="144"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerMuteThreadV2"),e[0]).then(function(e){var t;return t=e,r[12]=t[0],r[13]=t[1],t})},function(e){var n;return n=[r[12],t.i64.to_string(r[13]),void 0,void 0],r[8]=n[0],r[9]=n[1],r[10]=n[2],r[11]=n[3],n}]):t.sequence([function(o){return e[1]==="146"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerRemoveThread"),e[0]).then(function(e){var t;return t=e,r[16]=t[0],r[17]=t[1],t})},function(e){var n;return n=[r[16],t.i64.to_string(r[17]),void 0,void 0],r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=n[3],n}]):t.sequence([function(o){return e[1]==="32"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerUpdateThreadName"),e[0]).then(function(e){var t;return t=e,r[20]=t[0],r[21]=t[1],r[22]=t[2],t})},function(e){var n;return n=[r[20],t.i64.to_string(r[21]),void 0,r[22]],r[16]=n[0],r[17]=n[1],r[18]=n[2],r[19]=n[3],n}]):t.sequence([function(o){return e[1]==="362"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerAcsIssueNextSync"),e[0]).then(function(e){var t;return t=e,r[24]=t[0],r[25]=t[1],r[26]=t[2],t})},function(e){var n;return n=[r[24],t.i64.to_string(r[25]),void 0,r[26]],r[20]=n[0],r[21]=n[1],r[22]=n[2],r[23]=n[3],n}]):t.sequence([function(o){return e[1]==="50015"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsRestoreWithSerializer"),e[0]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],r[30]=t[2],t})},function(e){var n;return n=[r[28],t.i64.to_string(r[29]),void 0,r[30]],r[24]=n[0],r[25]=n[1],r[26]=n[2],r[27]=n[3],n}]):t.sequence([function(o){return e[1]==="319"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupAction"),e[0]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],r[34]=t[2],t})},function(e){var n;return n=[r[32],t.i64.to_string(r[33]),void 0,r[34]],r[28]=n[0],r[29]=n[1],r[30]=n[2],r[31]=n[3],n}]):t.sequence([function(o){return e[1]==="50026"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsUpload"),e[0]).then(function(e){var t;return t=e,r[36]=t[0],r[37]=t[1],t})},function(e){var n;return n=[r[36],t.i64.to_string(r[37]),void 0,void 0],r[32]=n[0],r[33]=n[1],r[34]=n[2],r[35]=n[3],n}]):t.sequence([function(o){return e[1]==="50042"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsUploadProtobufOnly"),e[0]).then(function(e){var t;return t=e,r[40]=t[0],r[41]=t[1],r[42]=t[2],t})},function(e){var n;return n=[r[40],t.i64.to_string(r[41]),void 0,r[42]],r[36]=n[0],r[37]=n[1],r[38]=n[2],r[39]=n[3],n}]):t.sequence([function(o){return e[1]==="700"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerE2eeMetadataThreadIntegrityCheck"),e[0]).then(function(e){var t;return t=e,r[44]=t[0],r[45]=t[1],r[46]=t[2],t})},function(e){var n;return n=[r[44],t.i64.to_string(r[45]),void 0,r[46]],r[40]=n[0],r[41]=n[1],r[42]=n[2],r[43]=n[3],n}]):t.sequence([function(o){return e[1]==="705"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerE2eeMessageIntegrityCheckV2"),e[0]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],r[50]=t[2],t})},function(e){var n;return n=[r[48],t.i64.to_string(r[49]),void 0,r[50]],r[44]=n[0],r[45]=n[1],r[46]=n[2],r[47]=n[3],n}]):t.sequence([function(o){return e[1]==="50043"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsLoopingUpload"),e[0]).then(function(e){var t;return t=e,r[52]=t[0],r[53]=t[1],r[54]=t[2],t})},function(e){var n;return n=[r[52],t.i64.to_string(r[53]),void 0,r[54]],r[48]=n[0],r[49]=n[1],r[50]=n[2],r[51]=n[3],n}]):t.sequence([function(o){return e[1]==="50048"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsOpenUpload"),e[0]).then(function(e){var t;return t=e,r[56]=t[0],r[57]=t[1],t})},function(e){var n;return n=[r[56],t.i64.to_string(r[57]),void 0,void 0],r[52]=n[0],r[53]=n[1],r[54]=n[2],r[55]=n[3],n}]):t.sequence([function(o){return e[1]==="160013"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerSyncThreadCapabilities"),e[0]).then(function(e){var t;return t=e,r[60]=t[0],r[61]=t[1],r[62]=t[2],t})},function(e){var n;return n=[r[60],t.i64.to_string(r[61]),void 0,r[62]],r[56]=n[0],r[57]=n[1],r[58]=n[2],r[59]=n[3],n}]):t.sequence([function(o){return e[1]==="903"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerDeleteChatHistory"),e[0]).then(function(e){var t;return t=e,r[64]=t[0],r[65]=t[1],r[66]=t[2],t})},function(e){var n;return n=[r[64],t.i64.to_string(r[65]),void 0,r[66]],r[60]=n[0],r[61]=n[1],r[62]=n[2],r[63]=n[3],n}]):t.sequence([function(o){var a;return e[1]==="50057"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsUploadSenderBackup"),e[0]).then(function(e){var t;return t=e,r[68]=t[0],r[69]=t[1],r[70]=t[2],t})},function(e){var n;return n=[r[68],t.i64.to_string(r[69]),void 0,r[70]],r[64]=n[0],r[65]=n[1],r[66]=n[2],r[67]=n[3],n}]):t.resolve((a=[e[2],e[1],void 0,void 0],r[64]=a[0],r[65]=a[1],r[66]=a[2],r[67]=a[3],a))},function(e){var t;return t=[r[64],r[65],r[66],r[67]],r[60]=t[0],r[61]=t[1],r[62]=t[2],r[63]=t[3],t}])},function(e){var t;return t=[r[60],r[61],r[62],r[63]],r[56]=t[0],r[57]=t[1],r[58]=t[2],r[59]=t[3],t}])},function(e){var t;return t=[r[56],r[57],r[58],r[59]],r[52]=t[0],r[53]=t[1],r[54]=t[2],r[55]=t[3],t}])},function(e){var t;return t=[r[52],r[53],r[54],r[55]],r[48]=t[0],r[49]=t[1],r[50]=t[2],r[51]=t[3],t}])},function(e){var t;return t=[r[48],r[49],r[50],r[51]],r[44]=t[0],r[45]=t[1],r[46]=t[2],r[47]=t[3],t}])},function(e){var t;return t=[r[44],r[45],r[46],r[47]],r[40]=t[0],r[41]=t[1],r[42]=t[2],r[43]=t[3],t}])},function(e){var t;return t=[r[40],r[41],r[42],r[43]],r[36]=t[0],r[37]=t[1],r[38]=t[2],r[39]=t[3],t}])},function(e){var t;return t=[r[36],r[37],r[38],r[39]],r[32]=t[0],r[33]=t[1],r[34]=t[2],r[35]=t[3],t}])},function(e){var t;return t=[r[32],r[33],r[34],r[35]],r[28]=t[0],r[29]=t[1],r[30]=t[2],r[31]=t[3],t}])},function(e){var t;return t=[r[28],r[29],r[30],r[31]],r[24]=t[0],r[25]=t[1],r[26]=t[2],r[27]=t[3],t}])},function(e){var t;return t=[r[24],r[25],r[26],r[27]],r[20]=t[0],r[21]=t[1],r[22]=t[2],r[23]=t[3],t}])},function(e){var t;return t=[r[20],r[21],r[22],r[23]],r[16]=t[0],r[17]=t[1],r[18]=t[2],r[19]=t[3],t}])},function(e){var t;return t=[r[16],r[17],r[18],r[19]],r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=t[3],t}])},function(e){var t;return t=[r[12],r[13],r[14],r[15]],r[8]=t[0],r[9]=t[1],r[10]=t[2],r[11]=t[3],t}])},function(e){var t;return t=[r[8],r[9],r[10],r[11]],r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],t}])},function(o){return e[3]?t.sequence([function(e){return r[9]=r[1]==="60009"||r[1]==="60006"||r[1]==="60008"||r[1]==="60011"||r[1]==="765"||r[1]==="1006"||r[1]==="160009"||r[1]==="761"||r[1]==="1018"||r[1]==="632"||r[1]==="384"||r[1]==="384",r[9]&&r[1]!==void 0?(r[15]=["Deidentified task is being executed through the 'identified' path. Canceling task with label: ",r[1]].join(""),(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSCoreSerializeTaskStoredProcedure] ","",r[15]].join("")),r[14]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSCoreSerializeTaskStoredProcedure",r[15],r[14],t.i64.cast([0,3]))):t.resolve()},function(e){return t.resolve(r[8]=!1)},function(e){var t,n,o;return r[9]||r[8]?(t=[void 0,void 0,void 0,void 0],r[10]=t[0],r[11]=t[1],r[12]=t[2],r[13]=t[3]):(n=[r[0],r[1],r[2],r[3]],r[10]=n[0],r[11]=n[1],r[12]=n[2],r[13]=n[3]),o=[r[10],r[11],r[12],r[13]],r[4]=o[0],r[5]=o[1],r[6]=o[2],r[7]=o[3]}]):t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerUnauthenticatedTask"),e[0],r[1],r[0]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],r[10]=t[2],r[11]=t[3],t})},function(e){return t.i64.neq(r[11],void 0)?t.storedProcedure(n("LSForceTaskExecutionImmediately"),r[11]):t.resolve()},function(e){var n;return n=[r[8],t.i64.to_string(r[9]),void 0,r[10]],r[4]=n[0],r[5]=n[1],r[6]=n[2],r[7]=n[3],n}])},function(e){var t;return t=[r[4],r[5],r[6],r[7]],o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreSerializeTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSSerializeTaskStoredProcedure",["LSSerializeTask","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSSerializeTask"),a.taskId,a.taskLabel,a.taskValue,a.requiresAuthentication);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSBeginHandlingPendingTasksForQueue2",["I64","LSFactory","LSIntEnum","LSPendingTasksPluginType","LSSerializeTaskStoredProcedure","LSShape","LSVec","Promise","ReQL","XPlatReactCrypto","asyncToGeneratorRuntime","gkx","isNativeTask"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=500,d=3e4,m=5,p=100,_=7;function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.lightspeed_task_context.get(t);return n==null||n.requiresAuthentication}),g.apply(this,arguments)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.pending_tasks.index("queueNameTaskId")).getKeyRange(t));return n==null?{context:void 0,failureCount:(s||(s=o("I64"))).neg_one,httpUrlOverride:void 0,minTimeToSyncTimestampMs:s.neg_one,pluginType:(u||(u=o("LSIntEnum"))).ofNumber(r("LSPendingTasksPluginType").LS_BROKER),queueName:""}:n}),y.apply(this,arguments)}function C(e,t){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.network_requests).getKeyRange(t));return n==null?0:(s||(s=o("I64"))).to_float(n.lastSyncRequestTimestampMs)}),b.apply(this,arguments)}function v(e,t,n){var r=(s||(s=o("I64"))).equal(e.failureCount,(s||(s=o("I64"))).zero)||t;if(r)return 0;var a=(s||(s=o("I64"))).to_float(e.failureCount)>_?(s||(s=o("I64"))).to_float(e.failureCount)-_:(s||(s=o("I64"))).to_float(e.failureCount),i=Math.min((1<<Math.min(a-1,_))*c,d),l=n+i;return Math.max(l-Date.now(),0)}function S(){var e=Array.from(o("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));return e[0]>>>=1,(s||(s=o("I64"))).add(s.lsl_(s.of_float(e[0]),32),s.of_float(e[1]))}function R(){var e=(s||(s=o("I64"))).of_float(Date.now());return s.and_(s.or_(s.lsl_(e,22),s.and_(S(),s.castExn([0,4194303]))),s.castExn([2147483647,4294967295]))}function L(e,t){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=R(),r=yield e.network_requests.get(t,(s||(s=o("I64"))).neg_one);return r==null?yield e.network_requests.add({epochId:n,failureCount:(s||(s=o("I64"))).zero,lastSentTimestampMs:s.zero,lastSyncRequestTimestampMs:s.of_float(Date.now()),syncDatabaseId:s.neg_one,taskQueueName:t}):yield e.network_requests.put(babelHelpers.extends({},r,{epochId:n,lastSyncRequestTimestampMs:(s||(s=o("I64"))).of_float(Date.now())})),n}),E.apply(this,arguments)}function k(e,t){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return(yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.network_requests).getKeyRange(t).filter(function(e){return e.epochId!=null})))!=null}),I.apply(this,arguments)}function T(e,t,n){var r=(s||(s=o("I64"))).to_float(e.minTimeToSyncTimestampMs),a=Date.now(),i=r-a,l=i<=0;return l?v(e,t,n):i}function D(e){return e.httpUrlOverride!=null||(s||(s=o("I64"))).to_float(e.failureCount)>_}function x(e){return e.timeoutTimestampMs!=null?(s||(s=o("I64"))).to_float(e.timeoutTimestampMs)<=Date.now():!1}function $(e){return e==="90"||e==="130"||e==="153"}function P(e,t,n,r,o){var a=o===0?void 0:o;return{failureCount:a,label:e,payload:t,queueName:n,taskId:r}}function N(e,t,n){return M.apply(this,arguments)}function M(){return M=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield r("LSSerializeTaskStoredProcedure")(r("LSFactory")(e),{requiresAuthentication:n,taskId:t.taskId,taskLabel:t.context,taskValue:t.taskValue}),i=a[0],l=a[1],u=a[2],c=a[3];return i==null?c!=null?{minRetryDelayMs:c}:void 0:P(l,i,t.queueName,t.taskId,(s||(s=o("I64"))).to_float(t.failureCount))}),M.apply(this,arguments)}function w(e,t,n){return A.apply(this,arguments)}function A(){return A=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){if(t.context==null){yield e.pending_tasks.delete(t.taskId);return}var r=x(t);if(r){yield e.pending_tasks.delete(t.taskId);return}return N(e,t,n)}),A.apply(this,arguments)}function F(e,t){var n=t>=(r("gkx")("26373")&&e===String(207)?p:m)||$(e);return!n}function O(e,t){return B.apply(this,arguments)}function B(){return B=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.pending_tasks.get(t.taskId);n!=null&&(s||(s=o("I64"))).equal(t.firstExecutedTimestampMs,(s||(s=o("I64"))).zero)&&(yield e.pending_tasks.put(babelHelpers.extends({},n,{firstExecutedTimestampMs:(s||(s=o("I64"))).of_float(Date.now())})))}),B.apply(this,arguments)}function W(e,t){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){if(r.length===0)return{epochId:void 0,tasks:[]};var a=[],i=r[0].httpUrlOverride,l=(yield(e||(e=n("Promise"))).all(r.map(function(e){return f(t,e.taskId)}))).some(Boolean);for(var u of r){var c=u.httpUrlOverride===i,d=(yield f(t,u.taskId))===l;if(yield O(t,u),!c||!d)break;var m=yield w(t,u,l);if(m!=null&&m.payload!=null)a.push(m);else if((m==null?void 0:m.minRetryDelayMs)!=null){var p=yield t.pending_tasks.get(u.taskId);if(p!=null){var _;yield t.pending_tasks.put(babelHelpers.extends({},p,{failureCount:(s||(s=o("I64"))).add((_=p.failureCount)!=null?_:(s||(s=o("I64"))).zero,s.one),minTimeToSyncTimestampMs:s.add(m.minRetryDelayMs,s.of_float(Date.now()))}))}}else yield t.pending_tasks.delete(u.taskId);if(!F(u.context,a.length))break}return{epochId:void 0,tasks:a}}),q.apply(this,arguments)}function U(e,t,n,r,o){return V.apply(this,arguments)}function V(){return V=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,o){o===void 0&&(o=!0);var a=yield W(e,t),i=a.tasks;if(i.length===0)return{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:n,skipRealtimeGateway:!1,workItemType:4};if(o===!0){var l=yield L(e,n);a.epochId=l}var s=yield h(e,n);return{httpUrlOverride:s.httpUrlOverride,networkPayload:a,nextSyncMs:void 0,queueName:n,skipRealtimeGateway:D(s),workItemType:r}}),V.apply(this,arguments)}function H(e,t,n){return G.apply(this,arguments)}function G(){return G=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield h(e,t),i=yield C(e,t),l=T(a,n,i),s=l!==0;if(s)return[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:l,queueName:t,skipRealtimeGateway:!1,workItemType:3}];var u=[],c=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.pending_tasks.index("queueNameTaskId")).getKeyRange(t)),d=c.filter(r("isNativeTask"));if(d.length>0){var m=yield U(e,d,t,2,r("gkx")("4778")===!0);u.push(m)}var p=c.filter(function(e){return!r("isNativeTask")(e)});if(p.length>0){var _=yield U(e,p,t,1);u.push(_)}return u}),G.apply(this,arguments)}function z(e,t,n){return j.apply(this,arguments)}function j(){return j=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=!(yield k(e,t));return r?H(e,t,n):[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:t,skipRealtimeGateway:!1,workItemType:4}]}),j.apply(this,arguments)}function K(e,t){return Q.apply(this,arguments)}function Q(){return Q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.ignoreSoftDelay,a=t.queueName,i=yield z(e,a,n);return i.map(function(e){var t,n,a;return o("LSShape").ofRecord({network_payload:o("LSShape").ofRecord({epoch_id:(t=e.networkPayload)==null?void 0:t.epochId,tasks:r("LSVec").ofArray(((n=(a=e.networkPayload)==null?void 0:a.tasks)!=null?n:[]).map(function(e){var t;return o("LSShape").ofRecord({failure_count:e.failureCount!=null?(s||(s=o("I64"))).of_float(e.failureCount):void 0,label:(t=e.label)!=null?t:void 0,payload:e.payload,queue_name:e.queueName,task_id:e.taskId})}))}),next_sync_ms:e.nextSyncMs!=null?(s||(s=o("I64"))).of_float(e.nextSyncMs):void 0,queue_name:e.queueName,skip_realtime_gateway:e.skipRealtimeGateway,work_item_type:(u||(u=o("LSIntEnum"))).ofNumber(e.workItemType)})})}),Q.apply(this,arguments)}K._updateTaskIfNeeded=O,K._getHeadOfNormalQueue=h,K._lastSyncRequestTimestampForQueue=C,K._exponentialBackoffForNormalQueue=v,K._generateNewEpoch=R,K._openNewEpochForQueue=L,K._isEpochOpenForQueue=k,K._calculateDelayForNormalQueue=T,K._queueShouldSkipRealtimeGateway=D,K._isNativeTask=r("isNativeTask"),K._taskIsTimedOut=x,K._taskShouldStopBatching=$,K._buildTaskPayloadExpressionForNormalTaskWithParameters=P,K._buildTaskPayloadExpressionForValidatedNormalTask=N,K._buildTaskPayloadExpressionForUnvalidatedNormalTask=w,K._workForNormalQueueWithoutDelay=U,K._workForNormalQueueWithClosedEpoch=H,K._buildWorkForNormalQueue=z,K._buildNetworkPayloadShapeForTasks=W,K._canContinueBatchingForQueue=F,l.default=K}),98);
__d("LSJSONOp",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127}),l=e;i.default=l}),66);
__d("LSMaybeDeferredImports",["LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return u(e)}function s(e){return u(e)}function u(e){var t=null;return{load:function(){return t==null?e.load().then(function(e){return t=e,t}):o("LSSynchronousPromise").makeSynchronousPromise(t)}}}l.wrapReqDeferredMaybeSync=e,l.wrapJSResourceForInteractionMaybeSync=s}),98);
__d("LSSelectOrder",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ASC","DESC"]),l=e;i.default=l}),66);
__d("LSDatascriptJSONEval",["FBLogger","JSResourceForInteraction","LS","LSMaybeDeferredImports","getErrorSafe","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("LSMaybeDeferredImports").wrapJSResourceForInteractionMaybeSync(r("JSResourceForInteraction")("LSLocalize").__setRef("LSDatascriptJSONEval"));function d(e,t,n){if((u||(u=r("isPromise")))(e))return e.then(t,n);try{return t(e)}catch(e){var o=r("getErrorSafe")(e);if(n)return n(o);throw o}}var m=(function(){function t(e,t,n,o){var a=this;o===void 0&&(o=[]),this.$4={},this.$5=[],this.$6=null,this.$7=function(e){return d(a.$8(e),function(e){return e},function(t){throw r("FBLogger")("messenger_web").catching(t).mustfix("Error evaluating step op: %s",Array.isArray(e)?e[0]:"<primitive value>"),t})},this.$1=t,this.$2=e,this.$3=n;for(var i=0;i<o.length;i++)this.$4[i]=o[i]}var o=t.prototype;return o.eval=function(){return this.$2==null?this.$1.resolveGuaranteeAsync([]):this.$1.resolveGuaranteeAsync(this.$7(this.$2.step))},o.$8=function(o){var t=this,a,i,l,u,m,p,_,f,g,h,y,C;if(!Array.isArray(o))return o;var b=o[0],v=babelHelpers.arrayLikeToArray(o).slice(1),S=v;switch(b){case 8:return S.map(this.$7);case 2:return this.$4[S[0]];case 3:return d(this.$7(S[1]),function(e){return t.$4[S[0]]=e});case 4:return d(this.$7(S[2]),function(e){for(var n=S[0],r=S[1],o=0;o<r;o++,n++)t.$4[n]=e[o];return e});case 12:{for(var R=S[0],L=S[1],E=[],k=R;k<L;k++)E[k]=this.$4[k];return E}case 1:{for(var I,T=function(n){I=d(I,function(){return t.$7(S[n])})},D=0;D<S.length;D++)T(D);return I}case 5:return(a=this.$1).storedProcedure.apply(a,S.map(this.$7));case 6:return(i=this.$1).nativeTypeOperation.apply(i,S.map(this.$7));case 7:return(l=this.$1).nativeOperation.apply(l,S.map(this.$7));case 9:return;case 10:return 1/0;case 11:return NaN;case 13:return this.$7(S[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(S[0]));case 15:return this.$1.blobs.of_string(this.$7(S[0]));case 16:return this.$1.blob(this.$7(S[0]));case 17:return this.$1.i64.of_float(this.$7(S[0]));case 18:{var x=this.$7(S[0]);return x!=null?this.$1.i64.to_float(x):void 0}case 19:return this.$1.i64.from_string(this.$7(S[0]));case 70:return this.$1.i64.cast(this.$7(S[0]));case 20:return this.$1.i64.to_string(this.$7(S[0]));case 21:return(u=this.$3)==null||(u=u.gk)==null?void 0:u[S[0]];case 22:{var $,P=S[0],N=S[1],M=S[2],w=S[3],A=($=this.$3)==null||($=$.qe)==null||($=$[P])==null||($=$[N])==null?void 0:$[M];if(A==null)return A;switch(w){case"BOOL":case"STR":return A;case"I64":{if(typeof A!="object")throw r("FBLogger")("messenger_web").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(A.toString())}}return}case 23:return this.$7(S[0])?this.$7(S[1]):S[2]!=null?this.$7(S[2]):void 0;case 24:return this.$7(S[0])||this.$7(S[1]);case 25:return this.$7(S[0])&&this.$7(S[1]);case 26:return!this.$7(S[0]);case 27:return this.$7(S[0])==null;case 28:return this.$1.notnull(this.$7(S[0]));case 29:return this.$7(S[0])===this.$7(S[1]);case 30:return this.$1.i64.eq(this.$7(S[0]),this.$7(S[1]));case 31:return this.$1.blobs.eq(this.$7(S[0]),this.$7(S[1]));case 32:return this.$7(S[0])!==this.$7(S[1]);case 33:return this.$1.i64.neq(this.$7(S[0]),this.$7(S[1]));case 34:return this.$1.blobs.neq(this.$7(S[0]),this.$7(S[1]));case 35:return this.$7(S[0])>this.$7(S[1]);case 36:return this.$1.i64.gt(this.$7(S[0]),this.$7(S[1]));case 37:return this.$1.blobs.gt(this.$7(S[0]),this.$7(S[1]));case 38:return this.$7(S[0])>=this.$7(S[1]);case 39:return this.$1.i64.ge(this.$7(S[0]),this.$7(S[1]));case 40:return this.$1.blobs.ge(this.$7(S[0]),this.$7(S[1]));case 41:return this.$7(S[0])<this.$7(S[1]);case 42:return this.$1.i64.lt(this.$7(S[0]),this.$7(S[1]));case 43:return this.$1.blobs.lt(this.$7(S[0]),this.$7(S[1]));case 44:return this.$7(S[0])<=this.$7(S[1]);case 45:return this.$1.i64.le(this.$7(S[0]),this.$7(S[1]));case 46:return this.$1.blobs.le(this.$7(S[0]),this.$7(S[1]));case 47:return this.$1.throw(S[0]);case 48:return this.$1.print(this.$7(S[0]));case 49:{var F=this.$7(S[0]),O=S[1],B=this.$1.logger(F);switch(O){case"mustfix":return B.mustfix(F);case"info":return B.info(F);case"warn":return B.warn(F);case"debug":return B.debug(F);default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid logger level %s",O)}}case 50:return S.length===0?this.$1.createArray():(m=this.$1).createArrayWithElements.apply(m,this.$7(S[0]));case 51:{var W=this.$7(S[0]);return W.push(this.$7(S[1])),W}case 52:return this.$1.i64.of_int32(this.$7(S[0]).length);case 53:return new this.$1.Map;case 54:return this.$7(S[0]).get(this.$7(S[1]));case 55:return this.$7(S[0]).set(this.$7(S[1]),this.$7(S[2]));case 56:return this.$7(S[0]).keys();case 57:return this.$7(S[0]).delete(this.$7(S[1]));case 58:return this.$7(S[0]).has(this.$7(S[1]));case 59:return this.$7(S[0]).join(this.$7(S[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(S[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return c.load().then(function(e){var n=e.localizeV1Async;return n(t.$7(S[0]),t.$7(S[1]))});case 66:return c.load().then(function(e){var n=e.localizeV2Async;return n(t.$7(S[0]),t.$7(S[1]))});case 68:return this.$7(S[0])+this.$7(S[1]);case 69:return this.$1.i64.add(this.$7(S[0]),this.$7(S[1]));case 71:return(p=this.$3)==null||(p=p.justknob)==null?void 0:p[S[0]];case 72:return(_=this.$3)==null||(_=_.iggk)==null?void 0:_[S[0]];case 100:return this.$5[S[0]][S[1]];case 101:{if(this.$6==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[S[0]]}case 102:return this.$5[this.$7(S[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(S[0]).trim();case 75:return this.$7(S[0]).split(this.$7(S[1])).join(this.$7(S[2]));case 76:return S.map(this.$7).join("");case 77:return this.$1.like(this.$7(S[0]),this.$7(S[1]));case 78:return[0,this.$7(S[0]).length];case 79:{var q=S.map(this.$7),U=q[0],V=babelHelpers.arrayLikeToArray(q).slice(1);return V.includes(U)}case 80:return this.$7(S[1]).includes(this.$7(S[0]));case 81:return this.$7(S[0])-this.$7(S[1]);case 82:return this.$7(S[0])*this.$7(S[1]);case 83:return this.$7(S[0])/this.$7(S[1]);case 84:return this.$7(S[0])%this.$7(S[1]);case 91:return this.$1.i64.lsl_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 92:return this.$1.i64.lsr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 93:return this.$1.i64.asr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 94:return this.$1.i64.and_(this.$7(S[0]),this.$7(S[1]));case 95:return this.$1.i64.or_(this.$7(S[0]),this.$7(S[1]));case 96:return this.$1.i64.xor(this.$7(S[0]),this.$7(S[1]));case 85:return this.$1.i64.sub(this.$7(S[0]),this.$7(S[1]));case 86:return this.$1.i64.mul(this.$7(S[0]),this.$7(S[1]));case 87:return this.$1.i64.div(this.$7(S[0]),this.$7(S[1]));case 88:return this.$1.i64.mod_(this.$7(S[0]),this.$7(S[1]));case 89:{var H=S.map(this.$7),G=H[0],z=babelHelpers.arrayLikeToArray(H).slice(1);return z.some(function(e){return t.$1.i64.eq(G,e)})}case 90:{var j=this.$7(S[0]);return this.$7(S[1]).some(function(e){return t.$1.i64.eq(j,e)})}case 97:return this.$7(S[0])?this.$7(S[1]):this.$7(S[2]);case 98:{var K=this.$7(S[0]),Q=this.$7(S[1]);return(K||Q)&&!(K&&Q)}case 99:return(f=this.$7(S[0]))!=null?f:this.$7(S[1]);case 103:return;case 104:return n.call(null,S[0]);case 105:{for(var X=this.$7(S[0]),Y=S[1],J=r("LS").n,Z,ee=function(n){Z=d(Z,function(){return t.$4[Y]=n,t.$7(S[2])})},te=J(e||(e=babelHelpers.taggedTemplateLiteralLoose(["0"])));this.$1.i64.lt(te,X);te=this.$1.i64.add(te,J(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))ee(te);return Z}case 106:return this.$7(S[0]);case 107:throw r("FBLogger")("messenger_web").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(S[0])};case 109:return{gte:this.$7(S[0])};case 110:return{lt:this.$7(S[0])};case 111:return{lte:this.$7(S[0])};case 112:return S.length===1?this.$7(S[0]):(g=this.$1).merge.apply(g,S.map(this.$7));case 113:{var ne=S[0],re=S[1],oe=babelHelpers.arrayLikeToArray(S).slice(2),ae=oe.map(this.$7);switch(re){case"ASC":return(h=this.$1.db.table(ne)).fetch.apply(h,ae);case"DESC":return(y=this.$1.db.table(ne)).fetchDesc.apply(y,ae)}return}case 114:return this.$1.filter(this.$7(S[0]),function(e){t.$6=e;var n=t.$7(S[1]);return t.$6=null,n});case 115:return(C=this.$1).sortBy.apply(C,S.map(this.$7));case 116:return this.$1.forEach(this.$7(S[0]),function(e){return e.delete()});case 117:return this.$1.islc(this.$7(S[0]),0,this.$7(S[1]));case 118:return this.$1.count(this.$7(S[0]));case 119:return this.$1.db.table(S[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item,r=e.update,o={};t.$6=n;for(var a=1;a<S.length;a+=2)o[S[a]]=t.$7(S[a+1]);return t.$6=null,r(o)});case 121:{for(var ie=S[0],le={},se=1;se<S.length;se+=2)le[S[se]]=this.$7(S[se+1]);return this.$1.db.table(ie).add(le)}case 122:{for(var ue=S[0],ce={},de=1;de<S.length;de+=2)ce[S[de]]=this.$7(S[de+1]);return this.$1.db.table(ue).put(ce)}case 123:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item;return t.$5[S[1]]=n,t.$7(S[2])});case 124:return this.$7(S[0]).next().then(function(e){var n=e.done,r=e.value;if(n)return t.$7(S[3]);var o=S[1];return o!=null?(t.$5[o]=r.item,t.$7(S[2])):0});case 125:return this.$7(S[0]).slice(0,this.$7(S[1]));case 126:return this.$1.groupBy(this.$7(S[0]),S[1]).forEach(function(e){return t.$5[S[2]]=e,t.$7(S[3])});case 127:return this.$7(S[0]).substr(this.$1.i64.to_int32(this.$7(S[1])),this.$1.i64.to_int32(this.$7(S[2])))}},t})();l.default=m}),98);
__d("LSDatascriptEvaluator",["ExecutionEnvironment","FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","cr:8018","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t){return r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow('Received a sync script with an illegal target of "%s"',t!=null?t:-1)};function u(t,o){var a=JSON.parse(o),i=t!=null?t:{gk:{},iggk:{},justknob:{},qe:{}};return function(t){var o=n("cr:8018")!=null?new(n("cr:8018")):void 0,l=o==null?void 0:o.start({bool:{isInWorker:(e||(e=r("ExecutionEnvironment"))).isInWorker},string:{dynamic:String(!0)}}),s=r("LSFactory")(t,{dynamic:!0,lsRuntimeLogger:o});return new(r("LSDatascriptJSONEval"))(a,s,i).eval().finally(function(){return l==null||l.end(),Promise.resolve()})}}function c(e,t,n){if(n==null)throw s(n);switch(n){case 3:return u(e,t);default:throw s(n)}}function d(e){return function(t){if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(n){var a=n.experiments,l=n.priority,s=n.syncScript,u=n.target,d=n.taskNames,m=a!=null?JSON.parse(a):null;try{var p=c(m,s,u);return t.runInTransaction(function(t){return e&&e(),p(t)},"readwrite",l,{taskNames:d,type:"sync_script"},i.id+":138")}catch(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");var _=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(_).mustfix("Error executing sync script"),e}}}}d.__debugModuleName="LSDatascriptEvaluator",l.default=d}),98);
__d("LSDatascriptEvaluatorEager",["LSDatascriptEvaluator","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=n("Promise"))).resolve(r("LSDatascriptEvaluator"))}l.default=s}),98);
__d("LSSyncStoredProcedureUtils",["I64","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a=r!=null?(e||(e=o("I64"))).of_float(Date.now()+r):n.minTimeToSyncTimestampMs;yield t.pending_tasks.put(babelHelpers.extends({},n,{failureCount:(e||(e=o("I64"))).add(n.failureCount,e.one),minTimeToSyncTimestampMs:a}))}),u.apply(this,arguments)}function c(e,t,n){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.pending_tasks.index("queueNameTaskId")).getKeyRange(t));if(r!=null)return s(e,r,n)}),d.apply(this,arguments)}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a=yield t.network_requests.get(n,r);a!=null&&(yield t.network_requests.put(babelHelpers.extends({},a,{failureCount:(e||(e=o("I64"))).add(a==null?void 0:a.failureCount,e.one)})))}),p.apply(this,arguments)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield e.network_requests.get(t,n);r!=null&&(yield e.network_requests.put(babelHelpers.extends({},r,{epochId:void 0,networkTaskIdentifier:void 0})))}),f.apply(this,arguments)}l.incrementPendingTaskFailureCount=s,l.incrementPendingTasksTaskFailureCount=c,l.incrementNetworkRequestsTaskFailureCount=m,l.closeEpoch=_}),98);
__d("LSHandleTaskSendFailureForQueue2",["I64","LSSyncStoredProcedureUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){yield o("LSSyncStoredProcedureUtils").incrementPendingTasksTaskFailureCount(t,n,r),yield o("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(t,n,(e||(e=o("I64"))).neg_one),yield o("LSSyncStoredProcedureUtils").closeEpoch(t,n,e.neg_one)}),u.apply(this,arguments)}l.default=s}),98);
__d("LSHandleTaskSendSuccessForQueue2",["I64","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=yield t.network_requests.get(n,(e||(e=o("I64"))).neg_one);r==null||r.epochId==null||(yield t.network_requests.delete(n,e.neg_one))}),u.apply(this,arguments)}l.default=s}),98);
__d("LSHandleTaskSuccessOpsDownloadFailureForQueue",["I64","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=yield t.network_requests.get(n,(e||(e=o("I64"))).neg_one);r!=null&&r.epochId!=null&&(yield t.network_requests.delete(n,(e||(e=o("I64"))).neg_one));var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.pending_tasks.index("queueNameTaskId")).getKeyRange(n));a!=null&&(yield t.pending_tasks.delete(a.taskId))}),u.apply(this,arguments)}l.default=s}),98);
__d("LSPlatformTaskSyncGroupId",[],(function(t,n,r,o,a,i){"use strict";var e=-1,l=e;i.default=l}),66);
__d("MWPBeginHandlingPendingTasksForQueue",["LSBeginHandlingFireForgetTasksForQueueStoredProcedure","LSBeginHandlingPendingTasksForQueue2","LSFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var o=t.fireAndForgetTask,a=t.ignoreSoftDelay,l=t.queueName,s=yield e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(o===!0){var t=yield r("LSBeginHandlingFireForgetTasksForQueueStoredProcedure")(r("LSFactory")(e),{queueName:l}),n=t[0];return[n]}return r("LSBeginHandlingPendingTasksForQueue2")(e,{ignoreSoftDelay:a,queueName:l})});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":37");return s}),s.apply(this,arguments)}l.default=e}),98);
__d("MWPlatformTaskUtils",["FBLogger","I64","JSScheduler","MetaConfig","Promise","ReQL","asyncToGeneratorRuntime","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){function a(){return i.apply(this,arguments)}function i(){return i=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield e(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).warn("Failed to calculate work for task queue %s",t.queueName)}}),i.apply(this,arguments)}if((u||(u=o("I64"))).gt(t.priority,(u||(u=o("I64"))).zero)&&r("MetaConfig")._("78")){var l=function(){var e=a()};(s||(s=r("JSScheduler"))).scheduleLoggingPriCallback(l)}else r("promiseDone")(a())}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{yield e(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).warn("Failed to calculate work for fire forget queue %s",t.queueName)}}),m.apply(this,arguments)}function p(e,t){var r=new Set,a=[],i=[];return i.push(e.tables.pending_tasks.index("queueNameTaskId").subscribe(function(e,t){var n,i;if(t.operation==="delete"){r.add(e[0]);return}var l=t.operation==="put"&&t.prevValue==null||t.operation==="add",s=t.operation==="put"&&(u||(u=o("I64"))).compare(t.value.failureCount,(n=(i=t.prevValue)==null?void 0:i.failureCount)!=null?n:(u||(u=o("I64"))).zero)>0;(l||s)&&r.add(t.value.queueName),(t.operation==="add"&&t.value.dataTraceId==null||t.value.dataTraceId==="")&&a.push(t.value)})),i.push(e.tables.network_requests.subscribe(function(e,t){var n=e[0];n!==""&&(t.operation==="delete"||t.value.epochId==null)&&r.add(n)})),i.push(e.subscribeToCommit(function(){var i=Array.from(r);r.clear(),a=[],i.forEach((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.pending_tasks.index("queueNameTaskId")).bounds({gte:[n]}));r!=null&&c(t,r)});return function(e){return r.apply(this,arguments)}})())})),i}function _(e,t){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.pending_tasks)),r=new Set;for(var a of n)r.has(a.queueName)||(r.add(a.queueName),c(t,a))})())}function f(t,a){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.pending_fire_and_forget_tasks));yield(e||(e=n("Promise"))).all(l.map(function(e){return d(a,e)})),r("promiseDone")(t.runInTransaction(function(t){return(e||(e=n("Promise"))).all(l.map(function(e){return t.pending_fire_and_forget_tasks.delete(e.taskId)}))},"readwrite","background",void 0,i.id+":199"))})())}function g(e,t){var n=!1,r=[];return r.push(e.tables.pending_fire_and_forget_tasks.subscribe(function(e,t){if(t.operation!=="delete"){var r=t.operation==="put"&&t.prevValue==null||t.operation==="add";r&&(n=!0)}})),r.push(e.subscribeToCommit(function(){n&&f(e,t),n=!1})),r}l.checkQueuesWhenPendingTaskTableUpdates=p,l.checkAllPendingTasksForWork=_,l.checkAllFireForgetTasksForWork=f,l.checkQueuesWhenPendingFireForgetTaskTableUpdates=g}),98);
__d("LSPlatformTaskSystemTransport",["CurrentMessengerUser","FBLogger","I64","JSResourceForInteraction","JSScheduler","LSDatabaseProviderType","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSHandleTaskSuccessOpsDownloadFailureForQueue","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSPlatformTaskSyncGroupId","LSShape","LSVec","MWPBeginHandlingPendingTasksForQueue","MWPBumpEntityKey","MWPlatformTaskUtils","Promise","ReQL","asyncToGeneratorRuntime","cr:4031","cr:6668","gkx","promiseDone","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=500,m=r("JSResourceForInteraction")("publishLSPlatformDeidentifiedPayload").__setRef("LSPlatformTaskSystemTransport"),p=new Set([632,765,60011,1006,1018].map(function(e){return e.toString()})),_=(function(){function t(e,t,a,i){var l=this;this.key="ls",this.$8=!1,this.$19=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield r("MWPBeginHandlingPendingTasksForQueue")(l.$1,{ignoreSoftDelay:t,queueName:e});for(var a of n)yield l.$18(o("LSShape").toRecord(a))});return function(t,n){return e.apply(this,arguments)}})(),this.$1=e,this.$2=t,this.$3=a,this.$4=i,this.$8=o("LSDatabaseProviderType").isProviderPersisted(e),this.$5=new(r("LSPlatformRequestScheduler")),this.$6=new(r("LSPlatformServerResponseHandler"))(a),this.$7=this.$9(),this.$10()}var a=t.prototype;return a.$11=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.filter(function(e){return e.label!=null&&p.has(e.label)});if(n.length<e.length){n.length>0&&r("FBLogger")("maw_ohai").mustfix("Deidentifed tasks label %s sent together with normal tasks",n[0].label);var o=yield this.$2.publish(t);return o}var a=n[0],i=yield m.load(),l=yield i(babelHelpers.extends({},t,{taskLabel:a.label}));return l});function t(t,n){return e.apply(this,arguments)}return t})(),a.$12=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield this.$1.runInTransaction(function(t){return r("LSHandleTaskSendFailureForQueue2")(t,e)},"readwrite",void 0,void 0,i.id+":151")});function t(t){return e.apply(this,arguments)}return t})(),a.$13=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield this.$1.runInTransaction(function(t){return r("LSHandleTaskSendSuccessForQueue2")(t,e)},"readwrite","background",void 0,i.id+":160")});function t(t){return e.apply(this,arguments)}return t})(),a.$14=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield this.$1.runInTransaction(function(t){return r("LSHandleTaskSuccessOpsDownloadFailureForQueue")(t,e)},"readwrite",void 0,void 0,i.id+":168")});function t(t){return e.apply(this,arguments)}return t})(),a.$15=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=r("LSVec").toArray(e.tasks).slice(0).map(function(e){return o("LSShape").toRecord(e)}),n=t[0];if(n!=null){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(this.$1.tables.pending_tasks).getKeyRange(n.task_id));return a==null?void 0:a.dataTraceId}});function t(t){return e.apply(this,arguments)}return t})(),a.$16=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=this;if(t.network_payload!=null){var l=o("LSShape").toRecord(t.network_payload);(c||(c=r("JSScheduler"))).scheduleLoggingPriCallback(function(){return l&&(n("cr:6668")==null?void 0:n("cr:6668").recordTaskSending(l.tasks))});var s=this.$4;try{yield(u||(u=n("Promise"))).all(r("LSVec").toArray(l.tasks).map(function(e){return o("LSShape").toRecord(e)}).map(function(n){var l=r("LSPlatformRequestId").generate();return i.$11([n],{databaseType:r("LSPlatformTaskSyncGroupId"),payload:o("LSJson").stringify(o("LSShape").ofRecord({label:n.label,payload:n.payload,version:s})),queueName:t.queue_name,requestId:l,syncChannel:o("LSMailboxInitialSyncCursor").taskChannel,type_:(e||(e=o("I64"))).of_int32(a)})}))}catch(e){}}});function a(e,n){return t.apply(this,arguments)}return a})(),a.$17=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){if(t.network_payload!=null){var i=o("LSShape").toRecord(t.network_payload),l=r("LSVec").toArray(i.tasks).map(function(e){return o("LSShape").toRecord(e)}),u=yield this.$15(i);(c||(c=r("JSScheduler"))).scheduleLoggingPriCallback(function(){return i&&(n("cr:6668")==null?void 0:n("cr:6668").recordTaskSending(i.tasks))});var d=r("LSPlatformRequestId").generate(),m,p=r("qex")._("2071");if(p!=null&&p!=="default"){var _=p+"."+(s||(s=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").taskChannel)+"."+a.toString();o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",_)}try{m=yield this.$11(l,{databaseType:r("LSPlatformTaskSyncGroupId"),payload:o("LSJson").stringify(o("LSShape").ofRecord(babelHelpers.extends({},i,{version_id:this.$4},u==null?{}:{data_trace_id:u}))),queueName:t.queue_name,requestId:d,syncChannel:o("LSMailboxInitialSyncCursor").taskChannel,type_:(e||(e=o("I64"))).of_int32(a)})}catch(e){if(p!=null&&p!=="default"){var f=p+"."+(s||(s=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").taskChannel)+"."+a.toString();o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f+".exception"),e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout?o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f+".exception.timeout"):e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f+".exception.notconnected")}e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout?o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_timeout"):e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected?(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_notconnected"),r("FBLogger")("messenger_web").warn("Publishing a task to the server not connected")):(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_generic"),r("FBLogger")("messenger_web").warn("Error while publishing a task for request: %s, error %s",a,JSON.stringify(e))),yield this.$12(t.queue_name)}if(m!=null&&m.type==="taskresponse")try{var g=m.downloadTask,h=m.payload,y={experiments:h.ex,sp:h.sp,syncScript:h.payload,target:h.target,taskNames:l.map(function(e){return e.label}).filter(Boolean)};yield this.$6.evalWhenReady(g,y),yield this.$13(t.queue_name),(c||(c=r("JSScheduler"))).scheduleLoggingPriCallback(function(){return i&&(n("cr:6668")==null?void 0:n("cr:6668").recordTaskSent(i.tasks,h.payload))})}catch(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","handle_task_failure"),r("FBLogger")("messenger_web").catching(e).mustfix("Encountered an error while processing a task response via realtime transport"),(e==null?void 0:e.name)==="dynamic_sproc_loading_timeout"&&r("gkx")("14417")?yield this.$14(t.queue_name):yield this.$12(t.queue_name)}}});function a(e,n){return t.apply(this,arguments)}return a})(),a.decideWhatToDoWithTask=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a,i){var l=this,s=yield r("MWPBeginHandlingPendingTasksForQueue")(e,{fireAndForgetTask:i,ignoreSoftDelay:!1,queueName:t,transportKey:a});r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var e of s)yield l.$18(o("LSShape").toRecord(e))})())});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),a.$18=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=this.$5,i=this.$19;function l(t,n){a.schedule(function(){r("promiseDone")(i(t,!1))},t,n!=null?(e||(e=o("I64"))).to_float(n):d)}var s=(e||(e=o("I64"))).to_int32(t.work_item_type);switch(s){case 1:yield this.$17(t,3);break;case 5:yield this.$16(t,4);break;case 3:l(t.queue_name,t.next_sync_ms);break;case 2:yield n("cr:4031").handleLSWork(this.$1,t,o("CurrentMessengerUser").getAccountID());break;case 4:break;default:r("FBLogger")("messenger_web").warn("Unknown Task type of %s",s)}});function a(e){return t.apply(this,arguments)}return a})(),a.$9=function(){var e=this,t=this.$1;return this.$2.onReconnect(function(a){o("LSMailboxInitialSyncCursor").isWebApp&&a===3&&r("qex")._("2082")===!0||(r("promiseDone")(t.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.network_requests).bounds({gte:o("ReQL").key("")}));yield(u||(u=n("Promise"))).all(t.map(function(t){var n=t.taskQueueName;return r("LSHandleTaskSendFailureForQueue2")(e,n)}))});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":481")),e.$10())})},a.$10=function(){var e=this;o("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(t){var n=t.queueName;return e.decideWhatToDoWithTask(e.$1,n)})},a.cleanup=function(){this.$7()},t})();l.default=_}),98);
__d("MWPlatformTaskSystem",["LSPlatformRequestScheduler","MWPlatformTaskUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){var n=this;this.$1=e,this.$2=t,this.$3=new(r("LSPlatformRequestScheduler")),this.$4=o("MWPlatformTaskUtils").checkQueuesWhenPendingTaskTableUpdates(e,function(t){var r=t.queueName,o=t.transportKey;return n.$6(e,r,o,!1)}),this.$5=o("MWPlatformTaskUtils").checkQueuesWhenPendingFireForgetTaskTableUpdates(e,function(t){var r=t.queueName,o=t.transportKey;return n.$6(e,r,o,!0)}),this.$7()}var t=e.prototype;return t.$6=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){yield this.$2.decideWhatToDoWithTask(e,t,n,r)});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),t.$7=function(){var e=this;o("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(t){var n=t.queueName;return e.$6(e.$1,n)})},t.cleanup=function(){this.$4.forEach(function(e){return e()}),this.$5.forEach(function(e){return e()}),this.$2.cleanup()},e})();l.default=e}),98);